function Sb(i,e){for(var n=0;n<e.length;n++){const a=e[n];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in i)){const o=Object.getOwnPropertyDescriptor(a,s);o&&Object.defineProperty(i,s,o.get?o:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Rp(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Bd={exports:{}},Vs={},qd={exports:{}},ct={};var pg;function kb(){if(pg)return ct;pg=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.iterator;function g(M){return M===null||typeof M!="object"?null:(M=m&&M[m]||M["@@iterator"],typeof M=="function"?M:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function T(M,V,ee){this.props=M,this.context=V,this.refs=E,this.updater=ee||_}T.prototype.isReactComponent={},T.prototype.setState=function(M,V){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,V,"setState")},T.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function N(){}N.prototype=T.prototype;function j(M,V,ee){this.props=M,this.context=V,this.refs=E,this.updater=ee||_}var x=j.prototype=new N;x.constructor=j,w(x,T.prototype),x.isPureReactComponent=!0;var O=Array.isArray,L=Object.prototype.hasOwnProperty,b={current:null},y={key:!0,ref:!0,__self:!0,__source:!0};function S(M,V,ee){var oe,fe={},ae=null,he=null;if(V!=null)for(oe in V.ref!==void 0&&(he=V.ref),V.key!==void 0&&(ae=""+V.key),V)L.call(V,oe)&&!y.hasOwnProperty(oe)&&(fe[oe]=V[oe]);var we=arguments.length-2;if(we===1)fe.children=ee;else if(1<we){for(var ke=Array(we),Ge=0;Ge<we;Ge++)ke[Ge]=arguments[Ge+2];fe.children=ke}if(M&&M.defaultProps)for(oe in we=M.defaultProps,we)fe[oe]===void 0&&(fe[oe]=we[oe]);return{$$typeof:i,type:M,key:ae,ref:he,props:fe,_owner:b.current}}function C(M,V){return{$$typeof:i,type:M.type,key:V,ref:M.ref,props:M.props,_owner:M._owner}}function A(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function F(M){var V={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ee){return V[ee]})}var D=/\/+/g;function P(M,V){return typeof M=="object"&&M!==null&&M.key!=null?F(""+M.key):V.toString(36)}function K(M,V,ee,oe,fe){var ae=typeof M;(ae==="undefined"||ae==="boolean")&&(M=null);var he=!1;if(M===null)he=!0;else switch(ae){case"string":case"number":he=!0;break;case"object":switch(M.$$typeof){case i:case e:he=!0}}if(he)return he=M,fe=fe(he),M=oe===""?"."+P(he,0):oe,O(fe)?(ee="",M!=null&&(ee=M.replace(D,"$&/")+"/"),K(fe,V,ee,"",function(Ge){return Ge})):fe!=null&&(A(fe)&&(fe=C(fe,ee+(!fe.key||he&&he.key===fe.key?"":(""+fe.key).replace(D,"$&/")+"/")+M)),V.push(fe)),1;if(he=0,oe=oe===""?".":oe+":",O(M))for(var we=0;we<M.length;we++){ae=M[we];var ke=oe+P(ae,we);he+=K(ae,V,ee,ke,fe)}else if(ke=g(M),typeof ke=="function")for(M=ke.call(M),we=0;!(ae=M.next()).done;)ae=ae.value,ke=oe+P(ae,we++),he+=K(ae,V,ee,ke,fe);else if(ae==="object")throw V=String(M),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return he}function q(M,V,ee){if(M==null)return M;var oe=[],fe=0;return K(M,oe,"","",function(ae){return V.call(ee,ae,fe++)}),oe}function W(M){if(M._status===-1){var V=M._result;V=V(),V.then(function(ee){(M._status===0||M._status===-1)&&(M._status=1,M._result=ee)},function(ee){(M._status===0||M._status===-1)&&(M._status=2,M._result=ee)}),M._status===-1&&(M._status=0,M._result=V)}if(M._status===1)return M._result.default;throw M._result}var B={current:null},z={transition:null},G={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:z,ReactCurrentOwner:b};function J(){throw Error("act(...) is not supported in production builds of React.")}return ct.Children={map:q,forEach:function(M,V,ee){q(M,function(){V.apply(this,arguments)},ee)},count:function(M){var V=0;return q(M,function(){V++}),V},toArray:function(M){return q(M,function(V){return V})||[]},only:function(M){if(!A(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},ct.Component=T,ct.Fragment=n,ct.Profiler=s,ct.PureComponent=j,ct.StrictMode=a,ct.Suspense=f,ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,ct.act=J,ct.cloneElement=function(M,V,ee){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var oe=w({},M.props),fe=M.key,ae=M.ref,he=M._owner;if(V!=null){if(V.ref!==void 0&&(ae=V.ref,he=b.current),V.key!==void 0&&(fe=""+V.key),M.type&&M.type.defaultProps)var we=M.type.defaultProps;for(ke in V)L.call(V,ke)&&!y.hasOwnProperty(ke)&&(oe[ke]=V[ke]===void 0&&we!==void 0?we[ke]:V[ke])}var ke=arguments.length-2;if(ke===1)oe.children=ee;else if(1<ke){we=Array(ke);for(var Ge=0;Ge<ke;Ge++)we[Ge]=arguments[Ge+2];oe.children=we}return{$$typeof:i,type:M.type,key:fe,ref:ae,props:oe,_owner:he}},ct.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:o,_context:M},M.Consumer=M},ct.createElement=S,ct.createFactory=function(M){var V=S.bind(null,M);return V.type=M,V},ct.createRef=function(){return{current:null}},ct.forwardRef=function(M){return{$$typeof:u,render:M}},ct.isValidElement=A,ct.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:W}},ct.memo=function(M,V){return{$$typeof:h,type:M,compare:V===void 0?null:V}},ct.startTransition=function(M){var V=z.transition;z.transition={};try{M()}finally{z.transition=V}},ct.unstable_act=J,ct.useCallback=function(M,V){return B.current.useCallback(M,V)},ct.useContext=function(M){return B.current.useContext(M)},ct.useDebugValue=function(){},ct.useDeferredValue=function(M){return B.current.useDeferredValue(M)},ct.useEffect=function(M,V){return B.current.useEffect(M,V)},ct.useId=function(){return B.current.useId()},ct.useImperativeHandle=function(M,V,ee){return B.current.useImperativeHandle(M,V,ee)},ct.useInsertionEffect=function(M,V){return B.current.useInsertionEffect(M,V)},ct.useLayoutEffect=function(M,V){return B.current.useLayoutEffect(M,V)},ct.useMemo=function(M,V){return B.current.useMemo(M,V)},ct.useReducer=function(M,V,ee){return B.current.useReducer(M,V,ee)},ct.useRef=function(M){return B.current.useRef(M)},ct.useState=function(M){return B.current.useState(M)},ct.useSyncExternalStore=function(M,V,ee){return B.current.useSyncExternalStore(M,V,ee)},ct.useTransition=function(){return B.current.useTransition()},ct.version="18.3.1",ct}var vg;function Op(){return vg||(vg=1,qd.exports=kb()),qd.exports}var mg;function Tb(){if(mg)return Vs;mg=1;var i=Op(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(u,f,h){var v,m={},g=null,_=null;h!==void 0&&(g=""+h),f.key!==void 0&&(g=""+f.key),f.ref!==void 0&&(_=f.ref);for(v in f)a.call(f,v)&&!o.hasOwnProperty(v)&&(m[v]=f[v]);if(u&&u.defaultProps)for(v in f=u.defaultProps,f)m[v]===void 0&&(m[v]=f[v]);return{$$typeof:e,type:u,key:g,ref:_,props:m,_owner:s.current}}return Vs.Fragment=n,Vs.jsx=c,Vs.jsxs=c,Vs}var gg;function Eb(){return gg||(gg=1,Bd.exports=Tb()),Bd.exports}var et=Eb(),Ie=Op();const ik=Rp(Ie),bb=Sb({__proto__:null,default:ik},[Ie]);var Al={},Hd={exports:{}},kr={},Wd={exports:{}},zd={};var yg;function Cb(){return yg||(yg=1,(function(i){function e(z,G){var J=z.length;z.push(G);e:for(;0<J;){var M=J-1>>>1,V=z[M];if(0<s(V,G))z[M]=G,z[J]=V,J=M;else break e}}function n(z){return z.length===0?null:z[0]}function a(z){if(z.length===0)return null;var G=z[0],J=z.pop();if(J!==G){z[0]=J;e:for(var M=0,V=z.length,ee=V>>>1;M<ee;){var oe=2*(M+1)-1,fe=z[oe],ae=oe+1,he=z[ae];if(0>s(fe,J))ae<V&&0>s(he,fe)?(z[M]=he,z[ae]=J,M=ae):(z[M]=fe,z[oe]=J,M=oe);else if(ae<V&&0>s(he,J))z[M]=he,z[ae]=J,M=ae;else break e}}return G}function s(z,G){var J=z.sortIndex-G.sortIndex;return J!==0?J:z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();i.unstable_now=function(){return c.now()-u}}var f=[],h=[],v=1,m=null,g=3,_=!1,w=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var G=n(h);G!==null;){if(G.callback===null)a(h);else if(G.startTime<=z)a(h),G.sortIndex=G.expirationTime,e(f,G);else break;G=n(h)}}function O(z){if(E=!1,x(z),!w)if(n(f)!==null)w=!0,W(L);else{var G=n(h);G!==null&&B(O,G.startTime-z)}}function L(z,G){w=!1,E&&(E=!1,N(S),S=-1),_=!0;var J=g;try{for(x(G),m=n(f);m!==null&&(!(m.expirationTime>G)||z&&!F());){var M=m.callback;if(typeof M=="function"){m.callback=null,g=m.priorityLevel;var V=M(m.expirationTime<=G);G=i.unstable_now(),typeof V=="function"?m.callback=V:m===n(f)&&a(f),x(G)}else a(f);m=n(f)}if(m!==null)var ee=!0;else{var oe=n(h);oe!==null&&B(O,oe.startTime-G),ee=!1}return ee}finally{m=null,g=J,_=!1}}var b=!1,y=null,S=-1,C=5,A=-1;function F(){return!(i.unstable_now()-A<C)}function D(){if(y!==null){var z=i.unstable_now();A=z;var G=!0;try{G=y(!0,z)}finally{G?P():(b=!1,y=null)}}else b=!1}var P;if(typeof j=="function")P=function(){j(D)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,q=K.port2;K.port1.onmessage=D,P=function(){q.postMessage(null)}}else P=function(){T(D,0)};function W(z){y=z,b||(b=!0,P())}function B(z,G){S=T(function(){z(i.unstable_now())},G)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_continueExecution=function(){w||_||(w=!0,W(L))},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return g},i.unstable_getFirstCallbackNode=function(){return n(f)},i.unstable_next=function(z){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var J=g;g=G;try{return z()}finally{g=J}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var J=g;g=z;try{return G()}finally{g=J}},i.unstable_scheduleCallback=function(z,G,J){var M=i.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?M+J:M):J=M,z){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=J+V,z={id:v++,callback:G,priorityLevel:z,startTime:J,expirationTime:V,sortIndex:-1},J>M?(z.sortIndex=J,e(h,z),n(f)===null&&z===n(h)&&(E?(N(S),S=-1):E=!0,B(O,J-M))):(z.sortIndex=V,e(f,z),w||_||(w=!0,W(L))),z},i.unstable_shouldYield=F,i.unstable_wrapCallback=function(z){var G=g;return function(){var J=g;g=G;try{return z.apply(this,arguments)}finally{g=J}}}})(zd)),zd}var _g;function Pb(){return _g||(_g=1,Wd.exports=Cb()),Wd.exports}var wg;function Rb(){if(wg)return kr;wg=1;var i=Op(),e=Pb();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,l=1;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function o(t,r){c(t,r),c(t+"Capture",r)}function c(t,r){for(s[t]=r,t=0;t<r.length;t++)a.add(r[t])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},m={};function g(t){return f.call(m,t)?!0:f.call(v,t)?!1:h.test(t)?m[t]=!0:(v[t]=!0,!1)}function _(t,r,l,p){if(l!==null&&l.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return p?!1:l!==null?!l.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function w(t,r,l,p){if(r===null||typeof r>"u"||_(t,r,l,p))return!0;if(p)return!1;if(l!==null)switch(l.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function E(t,r,l,p,k,R,Q){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=p,this.attributeNamespace=k,this.mustUseProperty=l,this.propertyName=t,this.type=r,this.sanitizeURL=R,this.removeEmptyString=Q}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){T[t]=new E(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];T[r]=new E(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){T[t]=new E(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){T[t]=new E(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){T[t]=new E(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){T[t]=new E(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){T[t]=new E(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){T[t]=new E(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){T[t]=new E(t,5,!1,t.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function j(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(N,j);T[r]=new E(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(N,j);T[r]=new E(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(N,j);T[r]=new E(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){T[t]=new E(t,1,!1,t.toLowerCase(),null,!1,!1)}),T.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){T[t]=new E(t,1,!1,t.toLowerCase(),null,!0,!0)});function x(t,r,l,p){var k=T.hasOwnProperty(r)?T[r]:null;(k!==null?k.type!==0:p||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(w(r,l,k,p)&&(l=null),p||k===null?g(r)&&(l===null?t.removeAttribute(r):t.setAttribute(r,""+l)):k.mustUseProperty?t[k.propertyName]=l===null?k.type===3?!1:"":l:(r=k.attributeName,p=k.attributeNamespace,l===null?t.removeAttribute(r):(k=k.type,l=k===3||k===4&&l===!0?"":""+l,p?t.setAttributeNS(p,r,l):t.setAttribute(r,l))))}var O=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),b=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),F=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),z=Symbol.iterator;function G(t){return t===null||typeof t!="object"?null:(t=z&&t[z]||t["@@iterator"],typeof t=="function"?t:null)}var J=Object.assign,M;function V(t){if(M===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);M=r&&r[1]||""}return`
`+M+t}var ee=!1;function oe(t,r){if(!t||ee)return"";ee=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(pe){var p=pe}Reflect.construct(t,[],r)}else{try{r.call()}catch(pe){p=pe}t.call(r.prototype)}else{try{throw Error()}catch(pe){p=pe}t()}}catch(pe){if(pe&&p&&typeof pe.stack=="string"){for(var k=pe.stack.split(`
`),R=p.stack.split(`
`),Q=k.length-1,te=R.length-1;1<=Q&&0<=te&&k[Q]!==R[te];)te--;for(;1<=Q&&0<=te;Q--,te--)if(k[Q]!==R[te]){if(Q!==1||te!==1)do if(Q--,te--,0>te||k[Q]!==R[te]){var ne=`
`+k[Q].replace(" at new "," at ");return t.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",t.displayName)),ne}while(1<=Q&&0<=te);break}}}finally{ee=!1,Error.prepareStackTrace=l}return(t=t?t.displayName||t.name:"")?V(t):""}function fe(t){switch(t.tag){case 5:return V(t.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return t=oe(t.type,!1),t;case 11:return t=oe(t.type.render,!1),t;case 1:return t=oe(t.type,!0),t;default:return""}}function ae(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case y:return"Fragment";case b:return"Portal";case C:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case K:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case F:return(t.displayName||"Context")+".Consumer";case A:return(t._context.displayName||"Context")+".Provider";case D:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case q:return r=t.displayName||null,r!==null?r:ae(t.type)||"Memo";case W:r=t._payload,t=t._init;try{return ae(t(r))}catch{}}return null}function he(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(r);case 8:return r===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function we(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ke(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ge(t){var r=ke(t)?"checked":"value",l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),p=""+t[r];if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var k=l.get,R=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return k.call(this)},set:function(Q){p=""+Q,R.call(this,Q)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return p},setValue:function(Q){p=""+Q},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ae(t){t._valueTracker||(t._valueTracker=Ge(t))}function Be(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var l=r.getValue(),p="";return t&&(p=ke(t)?t.checked?"true":"false":t.value),t=p,t!==l?(r.setValue(t),!0):!1}function Ze(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tt(t,r){var l=r.checked;return J({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??t._wrapperState.initialChecked})}function Je(t,r){var l=r.defaultValue==null?"":r.defaultValue,p=r.checked!=null?r.checked:r.defaultChecked;l=we(r.value!=null?r.value:l),t._wrapperState={initialChecked:p,initialValue:l,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Ke(t,r){r=r.checked,r!=null&&x(t,"checked",r,!1)}function Me(t,r){Ke(t,r);var l=we(r.value),p=r.type;if(l!=null)p==="number"?(l===0&&t.value===""||t.value!=l)&&(t.value=""+l):t.value!==""+l&&(t.value=""+l);else if(p==="submit"||p==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Ue(t,r.type,l):r.hasOwnProperty("defaultValue")&&Ue(t,r.type,we(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function me(t,r,l){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var p=r.type;if(!(p!=="submit"&&p!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,l||r===t.value||(t.value=r),t.defaultValue=r}l=t.name,l!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,l!==""&&(t.name=l)}function Ue(t,r,l){(r!=="number"||Ze(t.ownerDocument)!==t)&&(l==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+l&&(t.defaultValue=""+l))}var Re=Array.isArray;function qe(t,r,l,p){if(t=t.options,r){r={};for(var k=0;k<l.length;k++)r["$"+l[k]]=!0;for(l=0;l<t.length;l++)k=r.hasOwnProperty("$"+t[l].value),t[l].selected!==k&&(t[l].selected=k),k&&p&&(t[l].defaultSelected=!0)}else{for(l=""+we(l),r=null,k=0;k<t.length;k++){if(t[k].value===l){t[k].selected=!0,p&&(t[k].defaultSelected=!0);return}r!==null||t[k].disabled||(r=t[k])}r!==null&&(r.selected=!0)}}function $(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return J({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function H(t,r){var l=r.value;if(l==null){if(l=r.children,r=r.defaultValue,l!=null){if(r!=null)throw Error(n(92));if(Re(l)){if(1<l.length)throw Error(n(93));l=l[0]}r=l}r==null&&(r=""),l=r}t._wrapperState={initialValue:we(l)}}function Y(t,r){var l=we(r.value),p=we(r.defaultValue);l!=null&&(l=""+l,l!==t.value&&(t.value=l),r.defaultValue==null&&t.defaultValue!==l&&(t.defaultValue=l)),p!=null&&(t.defaultValue=""+p)}function ye(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function Se(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oe(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?Se(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xe,Fe=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,l,p,k){MSApp.execUnsafeLocalFunction(function(){return t(r,l,p,k)})}:t})(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(xe=xe||document.createElement("div"),xe.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=xe.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function He(t,r){if(r){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=r;return}}t.textContent=r}var bt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gt=["Webkit","ms","Moz","O"];Object.keys(bt).forEach(function(t){Gt.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),bt[r]=bt[t]})});function Lt(t,r,l){return r==null||typeof r=="boolean"||r===""?"":l||typeof r!="number"||r===0||bt.hasOwnProperty(t)&&bt[t]?(""+r).trim():r+"px"}function Ce(t,r){t=t.style;for(var l in r)if(r.hasOwnProperty(l)){var p=l.indexOf("--")===0,k=Lt(l,r[l],p);l==="float"&&(l="cssFloat"),p?t.setProperty(l,k):t[l]=k}}var _e=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Z(t,r){if(r){if(_e[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function re(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var de=null;function le(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ge=null,Qe=null,$e=null;function St(t){if(t=bs(t)){if(typeof ge!="function")throw Error(n(280));var r=t.stateNode;r&&(r=Gu(r),ge(t.stateNode,t.type,r))}}function vt(t){Qe?$e?$e.push(t):$e=[t]:Qe=t}function st(){if(Qe){var t=Qe,r=$e;if($e=Qe=null,St(t),r)for(t=0;t<r.length;t++)St(r[t])}}function mt(t,r){return t(r)}function ot(){}var ut=!1;function Ft(t,r,l){if(ut)return t(r,l);ut=!0;try{return mt(t,r,l)}finally{ut=!1,(Qe!==null||$e!==null)&&(ot(),st())}}function vr(t,r){var l=t.stateNode;if(l===null)return null;var p=Gu(l);if(p===null)return null;l=p[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(t=t.type,p=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!p;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(n(231,r,typeof l));return l}var Vn=!1;if(u)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){Vn=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{Vn=!1}function un(t,r,l,p,k,R,Q,te,ne){var pe=Array.prototype.slice.call(arguments,3);try{r.apply(l,pe)}catch(Ee){this.onError(Ee)}}var jr=!1,Fr=null,ln=!1,Xt=null,fn={onError:function(t){jr=!0,Fr=t}};function dn(t,r,l,p,k,R,Q,te,ne){jr=!1,Fr=null,un.apply(fn,arguments)}function Ei(t,r,l,p,k,R,Q,te,ne){if(dn.apply(this,arguments),jr){if(jr){var pe=Fr;jr=!1,Fr=null}else throw Error(n(198));ln||(ln=!0,Xt=pe)}}function rr(t){var r=t,l=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(l=r.return),t=r.return;while(t)}return r.tag===3?l:null}function Gr(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Bn(t){if(rr(t)!==t)throw Error(n(188))}function hn(t){var r=t.alternate;if(!r){if(r=rr(t),r===null)throw Error(n(188));return r!==t?null:t}for(var l=t,p=r;;){var k=l.return;if(k===null)break;var R=k.alternate;if(R===null){if(p=k.return,p!==null){l=p;continue}break}if(k.child===R.child){for(R=k.child;R;){if(R===l)return Bn(k),t;if(R===p)return Bn(k),r;R=R.sibling}throw Error(n(188))}if(l.return!==p.return)l=k,p=R;else{for(var Q=!1,te=k.child;te;){if(te===l){Q=!0,l=k,p=R;break}if(te===p){Q=!0,p=k,l=R;break}te=te.sibling}if(!Q){for(te=R.child;te;){if(te===l){Q=!0,l=R,p=k;break}if(te===p){Q=!0,p=R,l=k;break}te=te.sibling}if(!Q)throw Error(n(189))}}if(l.alternate!==p)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?t:r}function bi(t){return t=hn(t),t!==null?Wt(t):null}function Wt(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Wt(t);if(r!==null)return r;t=t.sibling}return null}var cr=e.unstable_scheduleCallback,gt=e.unstable_cancelCallback,lo=e.unstable_shouldYield,Kr=e.unstable_requestPaint,Rt=e.unstable_now,yf=e.unstable_getCurrentPriorityLevel,ua=e.unstable_ImmediatePriority,rs=e.unstable_UserBlockingPriority,fo=e.unstable_NormalPriority,ns=e.unstable_LowPriority,la=e.unstable_IdlePriority,ho=null,Cr=null;function Lu(t){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(ho,t,void 0,(t.current.flags&128)===128)}catch{}}var Pr=Math.clz32?Math.clz32:po,pn=Math.log,Ur=Math.LN2;function po(t){return t>>>=0,t===0?32:31-(pn(t)/Ur|0)|0}var vn=64,Ci=4194304;function wt(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qn(t,r){var l=t.pendingLanes;if(l===0)return 0;var p=0,k=t.suspendedLanes,R=t.pingedLanes,Q=l&268435455;if(Q!==0){var te=Q&~k;te!==0?p=wt(te):(R&=Q,R!==0&&(p=wt(R)))}else Q=l&~k,Q!==0?p=wt(Q):R!==0&&(p=wt(R));if(p===0)return 0;if(r!==0&&r!==p&&(r&k)===0&&(k=p&-p,R=r&-r,k>=R||k===16&&(R&4194240)!==0))return r;if((p&4)!==0&&(p|=l&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=p;0<r;)l=31-Pr(r),k=1<<l,p|=t[l],r&=~k;return p}function vo(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mo(t,r){for(var l=t.suspendedLanes,p=t.pingedLanes,k=t.expirationTimes,R=t.pendingLanes;0<R;){var Q=31-Pr(R),te=1<<Q,ne=k[Q];ne===-1?((te&l)===0||(te&p)!==0)&&(k[Q]=vo(te,r)):ne<=r&&(t.expiredLanes|=te),R&=~te}}function is(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function os(){var t=vn;return vn<<=1,(vn&4194240)===0&&(vn=64),t}function as(t){for(var r=[],l=0;31>l;l++)r.push(t);return r}function go(t,r,l){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Pr(r),t[r]=l}function _f(t,r){var l=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var p=t.eventTimes;for(t=t.expirationTimes;0<l;){var k=31-Pr(l),R=1<<k;r[k]=0,p[k]=-1,t[k]=-1,l&=~R}}function ss(t,r){var l=t.entangledLanes|=r;for(t=t.entanglements;l;){var p=31-Pr(l),k=1<<p;k&r|t[p]&r&&(t[p]|=r),l&=~k}}var lt=0;function mn(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var cs,fa,us,ls,fs,gn=!1,da=[],yn=null,_n=null,Zt=null,yo=new Map,Hn=new Map,Rr=[],Au="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pi(t,r){switch(t){case"focusin":case"focusout":yn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":Zt=null;break;case"pointerover":case"pointerout":yo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hn.delete(r.pointerId)}}function Qr(t,r,l,p,k,R){return t===null||t.nativeEvent!==R?(t={blockedOn:r,domEventName:l,eventSystemFlags:p,nativeEvent:R,targetContainers:[k]},r!==null&&(r=bs(r),r!==null&&fa(r)),t):(t.eventSystemFlags|=p,r=t.targetContainers,k!==null&&r.indexOf(k)===-1&&r.push(k),t)}function xu(t,r,l,p,k){switch(r){case"focusin":return yn=Qr(yn,t,r,l,p,k),!0;case"dragenter":return _n=Qr(_n,t,r,l,p,k),!0;case"mouseover":return Zt=Qr(Zt,t,r,l,p,k),!0;case"pointerover":var R=k.pointerId;return yo.set(R,Qr(yo.get(R)||null,t,r,l,p,k)),!0;case"gotpointercapture":return R=k.pointerId,Hn.set(R,Qr(Hn.get(R)||null,t,r,l,p,k)),!0}return!1}function ha(t){var r=ko(t.target);if(r!==null){var l=rr(r);if(l!==null){if(r=l.tag,r===13){if(r=Gr(l),r!==null){t.blockedOn=r,fs(t.priority,function(){us(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ct(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var l=pa(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(l===null){l=t.nativeEvent;var p=new l.constructor(l.type,l);de=p,l.target.dispatchEvent(p),de=null}else return r=bs(l),r!==null&&fa(r),t.blockedOn=l,!1;r.shift()}return!0}function Du(t,r,l){Ct(t)&&l.delete(r)}function wf(){gn=!1,yn!==null&&Ct(yn)&&(yn=null),_n!==null&&Ct(_n)&&(_n=null),Zt!==null&&Ct(Zt)&&(Zt=null),yo.forEach(Du),Hn.forEach(Du)}function Ri(t,r){t.blockedOn===r&&(t.blockedOn=null,gn||(gn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wf)))}function Oi(t){function r(k){return Ri(k,t)}if(0<da.length){Ri(da[0],t);for(var l=1;l<da.length;l++){var p=da[l];p.blockedOn===t&&(p.blockedOn=null)}}for(yn!==null&&Ri(yn,t),_n!==null&&Ri(_n,t),Zt!==null&&Ri(Zt,t),yo.forEach(r),Hn.forEach(r),l=0;l<Rr.length;l++)p=Rr[l],p.blockedOn===t&&(p.blockedOn=null);for(;0<Rr.length&&(l=Rr[0],l.blockedOn===null);)ha(l),l.blockedOn===null&&Rr.shift()}var Wn=O.ReactCurrentBatchConfig,zn=!0;function wn(t,r,l,p){var k=lt,R=Wn.transition;Wn.transition=null;try{lt=1,ds(t,r,l,p)}finally{lt=k,Wn.transition=R}}function Mu(t,r,l,p){var k=lt,R=Wn.transition;Wn.transition=null;try{lt=4,ds(t,r,l,p)}finally{lt=k,Wn.transition=R}}function ds(t,r,l,p){if(zn){var k=pa(t,r,l,p);if(k===null)Lf(t,r,p,Sn,l),Pi(t,p);else if(xu(k,t,r,l,p))p.stopPropagation();else if(Pi(t,p),r&4&&-1<Au.indexOf(t)){for(;k!==null;){var R=bs(k);if(R!==null&&cs(R),R=pa(t,r,l,p),R===null&&Lf(t,r,p,Sn,l),R===k)break;k=R}k!==null&&p.stopPropagation()}else Lf(t,r,p,null,l)}}var Sn=null;function pa(t,r,l,p){if(Sn=null,t=le(p),t=ko(t),t!==null)if(r=rr(t),r===null)t=null;else if(l=r.tag,l===13){if(t=Gr(r),t!==null)return t;t=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return Sn=t,null}function va(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yf()){case ua:return 1;case rs:return 4;case fo:case ns:return 16;case la:return 536870912;default:return 16}default:return 16}}var Or=null,ma=null,$n=null;function Nu(){if($n)return $n;var t,r=ma,l=r.length,p,k="value"in Or?Or.value:Or.textContent,R=k.length;for(t=0;t<l&&r[t]===k[t];t++);var Q=l-t;for(p=1;p<=Q&&r[l-p]===k[R-p];p++);return $n=k.slice(t,1<p?1-p:void 0)}function _o(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function kn(){return!0}function hs(){return!1}function nr(t){function r(l,p,k,R,Q){this._reactName=l,this._targetInst=k,this.type=p,this.nativeEvent=R,this.target=Q,this.currentTarget=null;for(var te in t)t.hasOwnProperty(te)&&(l=t[te],this[te]=l?l(R):R[te]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?kn:hs,this.isPropagationStopped=hs,this}return J(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=kn)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=kn)},persist:function(){},isPersistent:kn}),r}var Tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wo=nr(Tn),Ii=J({},Tn,{view:0,detail:0}),ga=nr(Ii),ya,_a,Ir,So=J({},Ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xt,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ir&&(Ir&&t.type==="mousemove"?(ya=t.screenX-Ir.screenX,_a=t.screenY-Ir.screenY):_a=ya=0,Ir=t),ya)},movementY:function(t){return"movementY"in t?t.movementY:_a}}),ps=nr(So),ju=J({},So,{dataTransfer:0}),Fu=nr(ju),mr=J({},Ii,{relatedTarget:0}),wa=nr(mr),Uu=J({},Tn,{animationName:0,elapsedTime:0,pseudoElement:0}),Li=nr(Uu),d=J({},Tn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),I=nr(d),U=J({},Tn,{data:0}),X=nr(U),ce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ve={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Le={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function at(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Le[t])?!!r[t]:!1}function xt(){return at}var Tt=J({},Ii,{key:function(t){if(t.key){var r=ce[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=_o(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ve[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xt,charCode:function(t){return t.type==="keypress"?_o(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_o(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ut=nr(Tt),Vr=J({},So,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),En=nr(Vr),bn=J({},Ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xt}),Cn=nr(bn),Sa=J({},Tn,{propertyName:0,elapsedTime:0,pseudoElement:0}),vs=nr(Sa),pE=J({},So,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vE=nr(pE),mE=[9,13,27,32],Sf=u&&"CompositionEvent"in window,ms=null;u&&"documentMode"in document&&(ms=document.documentMode);var gE=u&&"TextEvent"in window&&!ms,av=u&&(!Sf||ms&&8<ms&&11>=ms),sv=" ",cv=!1;function uv(t,r){switch(t){case"keyup":return mE.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ka=!1;function yE(t,r){switch(t){case"compositionend":return lv(r);case"keypress":return r.which!==32?null:(cv=!0,sv);case"textInput":return t=r.data,t===sv&&cv?null:t;default:return null}}function _E(t,r){if(ka)return t==="compositionend"||!Sf&&uv(t,r)?(t=Nu(),$n=ma=Or=null,ka=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return av&&r.locale!=="ko"?null:r.data;default:return null}}var wE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fv(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!wE[t.type]:r==="textarea"}function dv(t,r,l,p){vt(p),r=Wu(r,"onChange"),0<r.length&&(l=new wo("onChange","change",null,l,p),t.push({event:l,listeners:r}))}var gs=null,ys=null;function SE(t){Iv(t,0)}function Vu(t){var r=Pa(t);if(Be(r))return t}function kE(t,r){if(t==="change")return r}var hv=!1;if(u){var kf;if(u){var Tf="oninput"in document;if(!Tf){var pv=document.createElement("div");pv.setAttribute("oninput","return;"),Tf=typeof pv.oninput=="function"}kf=Tf}else kf=!1;hv=kf&&(!document.documentMode||9<document.documentMode)}function vv(){gs&&(gs.detachEvent("onpropertychange",mv),ys=gs=null)}function mv(t){if(t.propertyName==="value"&&Vu(ys)){var r=[];dv(r,ys,t,le(t)),Ft(SE,r)}}function TE(t,r,l){t==="focusin"?(vv(),gs=r,ys=l,gs.attachEvent("onpropertychange",mv)):t==="focusout"&&vv()}function EE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vu(ys)}function bE(t,r){if(t==="click")return Vu(r)}function CE(t,r){if(t==="input"||t==="change")return Vu(r)}function PE(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Jr=typeof Object.is=="function"?Object.is:PE;function _s(t,r){if(Jr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var l=Object.keys(t),p=Object.keys(r);if(l.length!==p.length)return!1;for(p=0;p<l.length;p++){var k=l[p];if(!f.call(r,k)||!Jr(t[k],r[k]))return!1}return!0}function gv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yv(t,r){var l=gv(t);t=0;for(var p;l;){if(l.nodeType===3){if(p=t+l.textContent.length,t<=r&&p>=r)return{node:l,offset:r-t};t=p}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=gv(l)}}function _v(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?_v(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function wv(){for(var t=window,r=Ze();r instanceof t.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)t=r.contentWindow;else break;r=Ze(t.document)}return r}function Ef(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function RE(t){var r=wv(),l=t.focusedElem,p=t.selectionRange;if(r!==l&&l&&l.ownerDocument&&_v(l.ownerDocument.documentElement,l)){if(p!==null&&Ef(l)){if(r=p.start,t=p.end,t===void 0&&(t=r),"selectionStart"in l)l.selectionStart=r,l.selectionEnd=Math.min(t,l.value.length);else if(t=(r=l.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var k=l.textContent.length,R=Math.min(p.start,k);p=p.end===void 0?R:Math.min(p.end,k),!t.extend&&R>p&&(k=p,p=R,R=k),k=yv(l,R);var Q=yv(l,p);k&&Q&&(t.rangeCount!==1||t.anchorNode!==k.node||t.anchorOffset!==k.offset||t.focusNode!==Q.node||t.focusOffset!==Q.offset)&&(r=r.createRange(),r.setStart(k.node,k.offset),t.removeAllRanges(),R>p?(t.addRange(r),t.extend(Q.node,Q.offset)):(r.setEnd(Q.node,Q.offset),t.addRange(r)))}}for(r=[],t=l;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<r.length;l++)t=r[l],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OE=u&&"documentMode"in document&&11>=document.documentMode,Ta=null,bf=null,ws=null,Cf=!1;function Sv(t,r,l){var p=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Cf||Ta==null||Ta!==Ze(p)||(p=Ta,"selectionStart"in p&&Ef(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ws&&_s(ws,p)||(ws=p,p=Wu(bf,"onSelect"),0<p.length&&(r=new wo("onSelect","select",null,r,l),t.push({event:r,listeners:p}),r.target=Ta)))}function Bu(t,r){var l={};return l[t.toLowerCase()]=r.toLowerCase(),l["Webkit"+t]="webkit"+r,l["Moz"+t]="moz"+r,l}var Ea={animationend:Bu("Animation","AnimationEnd"),animationiteration:Bu("Animation","AnimationIteration"),animationstart:Bu("Animation","AnimationStart"),transitionend:Bu("Transition","TransitionEnd")},Pf={},kv={};u&&(kv=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function qu(t){if(Pf[t])return Pf[t];if(!Ea[t])return t;var r=Ea[t],l;for(l in r)if(r.hasOwnProperty(l)&&l in kv)return Pf[t]=r[l];return t}var Tv=qu("animationend"),Ev=qu("animationiteration"),bv=qu("animationstart"),Cv=qu("transitionend"),Pv=new Map,Rv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(t,r){Pv.set(t,r),o(r,[t])}for(var Rf=0;Rf<Rv.length;Rf++){var Of=Rv[Rf],IE=Of.toLowerCase(),LE=Of[0].toUpperCase()+Of.slice(1);Ai(IE,"on"+LE)}Ai(Tv,"onAnimationEnd"),Ai(Ev,"onAnimationIteration"),Ai(bv,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(Cv,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ss));function Ov(t,r,l){var p=t.type||"unknown-event";t.currentTarget=l,Ei(p,r,void 0,t),t.currentTarget=null}function Iv(t,r){r=(r&4)!==0;for(var l=0;l<t.length;l++){var p=t[l],k=p.event;p=p.listeners;e:{var R=void 0;if(r)for(var Q=p.length-1;0<=Q;Q--){var te=p[Q],ne=te.instance,pe=te.currentTarget;if(te=te.listener,ne!==R&&k.isPropagationStopped())break e;Ov(k,te,pe),R=ne}else for(Q=0;Q<p.length;Q++){if(te=p[Q],ne=te.instance,pe=te.currentTarget,te=te.listener,ne!==R&&k.isPropagationStopped())break e;Ov(k,te,pe),R=ne}}}if(ln)throw t=Xt,ln=!1,Xt=null,t}function Ot(t,r){var l=r[jf];l===void 0&&(l=r[jf]=new Set);var p=t+"__bubble";l.has(p)||(Lv(r,t,2,!1),l.add(p))}function If(t,r,l){var p=0;r&&(p|=4),Lv(l,t,p,r)}var Hu="_reactListening"+Math.random().toString(36).slice(2);function ks(t){if(!t[Hu]){t[Hu]=!0,a.forEach(function(l){l!=="selectionchange"&&(AE.has(l)||If(l,!1,t),If(l,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Hu]||(r[Hu]=!0,If("selectionchange",!1,r))}}function Lv(t,r,l,p){switch(va(r)){case 1:var k=wn;break;case 4:k=Mu;break;default:k=ds}l=k.bind(null,r,l,t),k=void 0,!Vn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(k=!0),p?k!==void 0?t.addEventListener(r,l,{capture:!0,passive:k}):t.addEventListener(r,l,!0):k!==void 0?t.addEventListener(r,l,{passive:k}):t.addEventListener(r,l,!1)}function Lf(t,r,l,p,k){var R=p;if((r&1)===0&&(r&2)===0&&p!==null)e:for(;;){if(p===null)return;var Q=p.tag;if(Q===3||Q===4){var te=p.stateNode.containerInfo;if(te===k||te.nodeType===8&&te.parentNode===k)break;if(Q===4)for(Q=p.return;Q!==null;){var ne=Q.tag;if((ne===3||ne===4)&&(ne=Q.stateNode.containerInfo,ne===k||ne.nodeType===8&&ne.parentNode===k))return;Q=Q.return}for(;te!==null;){if(Q=ko(te),Q===null)return;if(ne=Q.tag,ne===5||ne===6){p=R=Q;continue e}te=te.parentNode}}p=p.return}Ft(function(){var pe=R,Ee=le(l),be=[];e:{var Te=Pv.get(t);if(Te!==void 0){var De=wo,je=t;switch(t){case"keypress":if(_o(l)===0)break e;case"keydown":case"keyup":De=Ut;break;case"focusin":je="focus",De=wa;break;case"focusout":je="blur",De=wa;break;case"beforeblur":case"afterblur":De=wa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=ps;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=Fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=Cn;break;case Tv:case Ev:case bv:De=Li;break;case Cv:De=vs;break;case"scroll":De=ga;break;case"wheel":De=vE;break;case"copy":case"cut":case"paste":De=I;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=En}var Ve=(r&4)!==0,jt=!Ve&&t==="scroll",se=Ve?Te!==null?Te+"Capture":null:Te;Ve=[];for(var ie=pe,ue;ie!==null;){ue=ie;var Pe=ue.stateNode;if(ue.tag===5&&Pe!==null&&(ue=Pe,se!==null&&(Pe=vr(ie,se),Pe!=null&&Ve.push(Ts(ie,Pe,ue)))),jt)break;ie=ie.return}0<Ve.length&&(Te=new De(Te,je,null,l,Ee),be.push({event:Te,listeners:Ve}))}}if((r&7)===0){e:{if(Te=t==="mouseover"||t==="pointerover",De=t==="mouseout"||t==="pointerout",Te&&l!==de&&(je=l.relatedTarget||l.fromElement)&&(ko(je)||je[Gn]))break e;if((De||Te)&&(Te=Ee.window===Ee?Ee:(Te=Ee.ownerDocument)?Te.defaultView||Te.parentWindow:window,De?(je=l.relatedTarget||l.toElement,De=pe,je=je?ko(je):null,je!==null&&(jt=rr(je),je!==jt||je.tag!==5&&je.tag!==6)&&(je=null)):(De=null,je=pe),De!==je)){if(Ve=ps,Pe="onMouseLeave",se="onMouseEnter",ie="mouse",(t==="pointerout"||t==="pointerover")&&(Ve=En,Pe="onPointerLeave",se="onPointerEnter",ie="pointer"),jt=De==null?Te:Pa(De),ue=je==null?Te:Pa(je),Te=new Ve(Pe,ie+"leave",De,l,Ee),Te.target=jt,Te.relatedTarget=ue,Pe=null,ko(Ee)===pe&&(Ve=new Ve(se,ie+"enter",je,l,Ee),Ve.target=ue,Ve.relatedTarget=jt,Pe=Ve),jt=Pe,De&&je)t:{for(Ve=De,se=je,ie=0,ue=Ve;ue;ue=ba(ue))ie++;for(ue=0,Pe=se;Pe;Pe=ba(Pe))ue++;for(;0<ie-ue;)Ve=ba(Ve),ie--;for(;0<ue-ie;)se=ba(se),ue--;for(;ie--;){if(Ve===se||se!==null&&Ve===se.alternate)break t;Ve=ba(Ve),se=ba(se)}Ve=null}else Ve=null;De!==null&&Av(be,Te,De,Ve,!1),je!==null&&jt!==null&&Av(be,jt,je,Ve,!0)}}e:{if(Te=pe?Pa(pe):window,De=Te.nodeName&&Te.nodeName.toLowerCase(),De==="select"||De==="input"&&Te.type==="file")var We=kE;else if(fv(Te))if(hv)We=CE;else{We=EE;var Ye=TE}else(De=Te.nodeName)&&De.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(We=bE);if(We&&(We=We(t,pe))){dv(be,We,l,Ee);break e}Ye&&Ye(t,Te,pe),t==="focusout"&&(Ye=Te._wrapperState)&&Ye.controlled&&Te.type==="number"&&Ue(Te,"number",Te.value)}switch(Ye=pe?Pa(pe):window,t){case"focusin":(fv(Ye)||Ye.contentEditable==="true")&&(Ta=Ye,bf=pe,ws=null);break;case"focusout":ws=bf=Ta=null;break;case"mousedown":Cf=!0;break;case"contextmenu":case"mouseup":case"dragend":Cf=!1,Sv(be,l,Ee);break;case"selectionchange":if(OE)break;case"keydown":case"keyup":Sv(be,l,Ee)}var Xe;if(Sf)e:{switch(t){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else ka?uv(t,l)&&(nt="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(nt="onCompositionStart");nt&&(av&&l.locale!=="ko"&&(ka||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&ka&&(Xe=Nu()):(Or=Ee,ma="value"in Or?Or.value:Or.textContent,ka=!0)),Ye=Wu(pe,nt),0<Ye.length&&(nt=new X(nt,t,null,l,Ee),be.push({event:nt,listeners:Ye}),Xe?nt.data=Xe:(Xe=lv(l),Xe!==null&&(nt.data=Xe)))),(Xe=gE?yE(t,l):_E(t,l))&&(pe=Wu(pe,"onBeforeInput"),0<pe.length&&(Ee=new X("onBeforeInput","beforeinput",null,l,Ee),be.push({event:Ee,listeners:pe}),Ee.data=Xe))}Iv(be,r)})}function Ts(t,r,l){return{instance:t,listener:r,currentTarget:l}}function Wu(t,r){for(var l=r+"Capture",p=[];t!==null;){var k=t,R=k.stateNode;k.tag===5&&R!==null&&(k=R,R=vr(t,l),R!=null&&p.unshift(Ts(t,R,k)),R=vr(t,r),R!=null&&p.push(Ts(t,R,k))),t=t.return}return p}function ba(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Av(t,r,l,p,k){for(var R=r._reactName,Q=[];l!==null&&l!==p;){var te=l,ne=te.alternate,pe=te.stateNode;if(ne!==null&&ne===p)break;te.tag===5&&pe!==null&&(te=pe,k?(ne=vr(l,R),ne!=null&&Q.unshift(Ts(l,ne,te))):k||(ne=vr(l,R),ne!=null&&Q.push(Ts(l,ne,te)))),l=l.return}Q.length!==0&&t.push({event:r,listeners:Q})}var xE=/\r\n?/g,DE=/\u0000|\uFFFD/g;function xv(t){return(typeof t=="string"?t:""+t).replace(xE,`
`).replace(DE,"")}function zu(t,r,l){if(r=xv(r),xv(t)!==r&&l)throw Error(n(425))}function $u(){}var Af=null,xf=null;function Df(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Mf=typeof setTimeout=="function"?setTimeout:void 0,ME=typeof clearTimeout=="function"?clearTimeout:void 0,Dv=typeof Promise=="function"?Promise:void 0,NE=typeof queueMicrotask=="function"?queueMicrotask:typeof Dv<"u"?function(t){return Dv.resolve(null).then(t).catch(jE)}:Mf;function jE(t){setTimeout(function(){throw t})}function Nf(t,r){var l=r,p=0;do{var k=l.nextSibling;if(t.removeChild(l),k&&k.nodeType===8)if(l=k.data,l==="/$"){if(p===0){t.removeChild(k),Oi(r);return}p--}else l!=="$"&&l!=="$?"&&l!=="$!"||p++;l=k}while(l);Oi(r)}function xi(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Mv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return t;r--}else l==="/$"&&r++}t=t.previousSibling}return null}var Ca=Math.random().toString(36).slice(2),Pn="__reactFiber$"+Ca,Es="__reactProps$"+Ca,Gn="__reactContainer$"+Ca,jf="__reactEvents$"+Ca,FE="__reactListeners$"+Ca,UE="__reactHandles$"+Ca;function ko(t){var r=t[Pn];if(r)return r;for(var l=t.parentNode;l;){if(r=l[Gn]||l[Pn]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(t=Mv(t);t!==null;){if(l=t[Pn])return l;t=Mv(t)}return r}t=l,l=t.parentNode}return null}function bs(t){return t=t[Pn]||t[Gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Gu(t){return t[Es]||null}var Ff=[],Ra=-1;function Di(t){return{current:t}}function It(t){0>Ra||(t.current=Ff[Ra],Ff[Ra]=null,Ra--)}function Pt(t,r){Ra++,Ff[Ra]=t.current,t.current=r}var Mi={},ir=Di(Mi),gr=Di(!1),To=Mi;function Oa(t,r){var l=t.type.contextTypes;if(!l)return Mi;var p=t.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===r)return p.__reactInternalMemoizedMaskedChildContext;var k={},R;for(R in l)k[R]=r[R];return p&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=k),k}function yr(t){return t=t.childContextTypes,t!=null}function Ku(){It(gr),It(ir)}function Nv(t,r,l){if(ir.current!==Mi)throw Error(n(168));Pt(ir,r),Pt(gr,l)}function jv(t,r,l){var p=t.stateNode;if(r=r.childContextTypes,typeof p.getChildContext!="function")return l;p=p.getChildContext();for(var k in p)if(!(k in r))throw Error(n(108,he(t)||"Unknown",k));return J({},l,p)}function Qu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mi,To=ir.current,Pt(ir,t),Pt(gr,gr.current),!0}function Fv(t,r,l){var p=t.stateNode;if(!p)throw Error(n(169));l?(t=jv(t,r,To),p.__reactInternalMemoizedMergedChildContext=t,It(gr),It(ir),Pt(ir,t)):It(gr),Pt(gr,l)}var Kn=null,Ju=!1,Uf=!1;function Uv(t){Kn===null?Kn=[t]:Kn.push(t)}function VE(t){Ju=!0,Uv(t)}function Ni(){if(!Uf&&Kn!==null){Uf=!0;var t=0,r=lt;try{var l=Kn;for(lt=1;t<l.length;t++){var p=l[t];do p=p(!0);while(p!==null)}Kn=null,Ju=!1}catch(k){throw Kn!==null&&(Kn=Kn.slice(t+1)),cr(ua,Ni),k}finally{lt=r,Uf=!1}}return null}var Ia=[],La=0,Yu=null,Xu=0,Br=[],qr=0,Eo=null,Qn=1,Jn="";function bo(t,r){Ia[La++]=Xu,Ia[La++]=Yu,Yu=t,Xu=r}function Vv(t,r,l){Br[qr++]=Qn,Br[qr++]=Jn,Br[qr++]=Eo,Eo=t;var p=Qn;t=Jn;var k=32-Pr(p)-1;p&=~(1<<k),l+=1;var R=32-Pr(r)+k;if(30<R){var Q=k-k%5;R=(p&(1<<Q)-1).toString(32),p>>=Q,k-=Q,Qn=1<<32-Pr(r)+k|l<<k|p,Jn=R+t}else Qn=1<<R|l<<k|p,Jn=t}function Vf(t){t.return!==null&&(bo(t,1),Vv(t,1,0))}function Bf(t){for(;t===Yu;)Yu=Ia[--La],Ia[La]=null,Xu=Ia[--La],Ia[La]=null;for(;t===Eo;)Eo=Br[--qr],Br[qr]=null,Jn=Br[--qr],Br[qr]=null,Qn=Br[--qr],Br[qr]=null}var Lr=null,Ar=null,At=!1,Yr=null;function Bv(t,r){var l=$r(5,null,null,0);l.elementType="DELETED",l.stateNode=r,l.return=t,r=t.deletions,r===null?(t.deletions=[l],t.flags|=16):r.push(l)}function qv(t,r){switch(t.tag){case 5:var l=t.type;return r=r.nodeType!==1||l.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,Lr=t,Ar=xi(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,Lr=t,Ar=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(l=Eo!==null?{id:Qn,overflow:Jn}:null,t.memoizedState={dehydrated:r,treeContext:l,retryLane:1073741824},l=$r(18,null,null,0),l.stateNode=r,l.return=t,t.child=l,Lr=t,Ar=null,!0):!1;default:return!1}}function qf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hf(t){if(At){var r=Ar;if(r){var l=r;if(!qv(t,r)){if(qf(t))throw Error(n(418));r=xi(l.nextSibling);var p=Lr;r&&qv(t,r)?Bv(p,l):(t.flags=t.flags&-4097|2,At=!1,Lr=t)}}else{if(qf(t))throw Error(n(418));t.flags=t.flags&-4097|2,At=!1,Lr=t}}}function Hv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Lr=t}function Zu(t){if(t!==Lr)return!1;if(!At)return Hv(t),At=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Df(t.type,t.memoizedProps)),r&&(r=Ar)){if(qf(t))throw Wv(),Error(n(418));for(;r;)Bv(t,r),r=xi(r.nextSibling)}if(Hv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"){if(r===0){Ar=xi(t.nextSibling);break e}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++}t=t.nextSibling}Ar=null}}else Ar=Lr?xi(t.stateNode.nextSibling):null;return!0}function Wv(){for(var t=Ar;t;)t=xi(t.nextSibling)}function Aa(){Ar=Lr=null,At=!1}function Wf(t){Yr===null?Yr=[t]:Yr.push(t)}var BE=O.ReactCurrentBatchConfig;function Cs(t,r,l){if(t=l.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(n(309));var p=l.stateNode}if(!p)throw Error(n(147,t));var k=p,R=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===R?r.ref:(r=function(Q){var te=k.refs;Q===null?delete te[R]:te[R]=Q},r._stringRef=R,r)}if(typeof t!="string")throw Error(n(284));if(!l._owner)throw Error(n(290,t))}return t}function el(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function zv(t){var r=t._init;return r(t._payload)}function $v(t){function r(se,ie){if(t){var ue=se.deletions;ue===null?(se.deletions=[ie],se.flags|=16):ue.push(ie)}}function l(se,ie){if(!t)return null;for(;ie!==null;)r(se,ie),ie=ie.sibling;return null}function p(se,ie){for(se=new Map;ie!==null;)ie.key!==null?se.set(ie.key,ie):se.set(ie.index,ie),ie=ie.sibling;return se}function k(se,ie){return se=Wi(se,ie),se.index=0,se.sibling=null,se}function R(se,ie,ue){return se.index=ue,t?(ue=se.alternate,ue!==null?(ue=ue.index,ue<ie?(se.flags|=2,ie):ue):(se.flags|=2,ie)):(se.flags|=1048576,ie)}function Q(se){return t&&se.alternate===null&&(se.flags|=2),se}function te(se,ie,ue,Pe){return ie===null||ie.tag!==6?(ie=Md(ue,se.mode,Pe),ie.return=se,ie):(ie=k(ie,ue),ie.return=se,ie)}function ne(se,ie,ue,Pe){var We=ue.type;return We===y?Ee(se,ie,ue.props.children,Pe,ue.key):ie!==null&&(ie.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===W&&zv(We)===ie.type)?(Pe=k(ie,ue.props),Pe.ref=Cs(se,ie,ue),Pe.return=se,Pe):(Pe=El(ue.type,ue.key,ue.props,null,se.mode,Pe),Pe.ref=Cs(se,ie,ue),Pe.return=se,Pe)}function pe(se,ie,ue,Pe){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==ue.containerInfo||ie.stateNode.implementation!==ue.implementation?(ie=Nd(ue,se.mode,Pe),ie.return=se,ie):(ie=k(ie,ue.children||[]),ie.return=se,ie)}function Ee(se,ie,ue,Pe,We){return ie===null||ie.tag!==7?(ie=xo(ue,se.mode,Pe,We),ie.return=se,ie):(ie=k(ie,ue),ie.return=se,ie)}function be(se,ie,ue){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=Md(""+ie,se.mode,ue),ie.return=se,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case L:return ue=El(ie.type,ie.key,ie.props,null,se.mode,ue),ue.ref=Cs(se,null,ie),ue.return=se,ue;case b:return ie=Nd(ie,se.mode,ue),ie.return=se,ie;case W:var Pe=ie._init;return be(se,Pe(ie._payload),ue)}if(Re(ie)||G(ie))return ie=xo(ie,se.mode,ue,null),ie.return=se,ie;el(se,ie)}return null}function Te(se,ie,ue,Pe){var We=ie!==null?ie.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return We!==null?null:te(se,ie,""+ue,Pe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case L:return ue.key===We?ne(se,ie,ue,Pe):null;case b:return ue.key===We?pe(se,ie,ue,Pe):null;case W:return We=ue._init,Te(se,ie,We(ue._payload),Pe)}if(Re(ue)||G(ue))return We!==null?null:Ee(se,ie,ue,Pe,null);el(se,ue)}return null}function De(se,ie,ue,Pe,We){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return se=se.get(ue)||null,te(ie,se,""+Pe,We);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case L:return se=se.get(Pe.key===null?ue:Pe.key)||null,ne(ie,se,Pe,We);case b:return se=se.get(Pe.key===null?ue:Pe.key)||null,pe(ie,se,Pe,We);case W:var Ye=Pe._init;return De(se,ie,ue,Ye(Pe._payload),We)}if(Re(Pe)||G(Pe))return se=se.get(ue)||null,Ee(ie,se,Pe,We,null);el(ie,Pe)}return null}function je(se,ie,ue,Pe){for(var We=null,Ye=null,Xe=ie,nt=ie=0,Jt=null;Xe!==null&&nt<ue.length;nt++){Xe.index>nt?(Jt=Xe,Xe=null):Jt=Xe.sibling;var yt=Te(se,Xe,ue[nt],Pe);if(yt===null){Xe===null&&(Xe=Jt);break}t&&Xe&&yt.alternate===null&&r(se,Xe),ie=R(yt,ie,nt),Ye===null?We=yt:Ye.sibling=yt,Ye=yt,Xe=Jt}if(nt===ue.length)return l(se,Xe),At&&bo(se,nt),We;if(Xe===null){for(;nt<ue.length;nt++)Xe=be(se,ue[nt],Pe),Xe!==null&&(ie=R(Xe,ie,nt),Ye===null?We=Xe:Ye.sibling=Xe,Ye=Xe);return At&&bo(se,nt),We}for(Xe=p(se,Xe);nt<ue.length;nt++)Jt=De(Xe,se,nt,ue[nt],Pe),Jt!==null&&(t&&Jt.alternate!==null&&Xe.delete(Jt.key===null?nt:Jt.key),ie=R(Jt,ie,nt),Ye===null?We=Jt:Ye.sibling=Jt,Ye=Jt);return t&&Xe.forEach(function(zi){return r(se,zi)}),At&&bo(se,nt),We}function Ve(se,ie,ue,Pe){var We=G(ue);if(typeof We!="function")throw Error(n(150));if(ue=We.call(ue),ue==null)throw Error(n(151));for(var Ye=We=null,Xe=ie,nt=ie=0,Jt=null,yt=ue.next();Xe!==null&&!yt.done;nt++,yt=ue.next()){Xe.index>nt?(Jt=Xe,Xe=null):Jt=Xe.sibling;var zi=Te(se,Xe,yt.value,Pe);if(zi===null){Xe===null&&(Xe=Jt);break}t&&Xe&&zi.alternate===null&&r(se,Xe),ie=R(zi,ie,nt),Ye===null?We=zi:Ye.sibling=zi,Ye=zi,Xe=Jt}if(yt.done)return l(se,Xe),At&&bo(se,nt),We;if(Xe===null){for(;!yt.done;nt++,yt=ue.next())yt=be(se,yt.value,Pe),yt!==null&&(ie=R(yt,ie,nt),Ye===null?We=yt:Ye.sibling=yt,Ye=yt);return At&&bo(se,nt),We}for(Xe=p(se,Xe);!yt.done;nt++,yt=ue.next())yt=De(Xe,se,nt,yt.value,Pe),yt!==null&&(t&&yt.alternate!==null&&Xe.delete(yt.key===null?nt:yt.key),ie=R(yt,ie,nt),Ye===null?We=yt:Ye.sibling=yt,Ye=yt);return t&&Xe.forEach(function(wb){return r(se,wb)}),At&&bo(se,nt),We}function jt(se,ie,ue,Pe){if(typeof ue=="object"&&ue!==null&&ue.type===y&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case L:e:{for(var We=ue.key,Ye=ie;Ye!==null;){if(Ye.key===We){if(We=ue.type,We===y){if(Ye.tag===7){l(se,Ye.sibling),ie=k(Ye,ue.props.children),ie.return=se,se=ie;break e}}else if(Ye.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===W&&zv(We)===Ye.type){l(se,Ye.sibling),ie=k(Ye,ue.props),ie.ref=Cs(se,Ye,ue),ie.return=se,se=ie;break e}l(se,Ye);break}else r(se,Ye);Ye=Ye.sibling}ue.type===y?(ie=xo(ue.props.children,se.mode,Pe,ue.key),ie.return=se,se=ie):(Pe=El(ue.type,ue.key,ue.props,null,se.mode,Pe),Pe.ref=Cs(se,ie,ue),Pe.return=se,se=Pe)}return Q(se);case b:e:{for(Ye=ue.key;ie!==null;){if(ie.key===Ye)if(ie.tag===4&&ie.stateNode.containerInfo===ue.containerInfo&&ie.stateNode.implementation===ue.implementation){l(se,ie.sibling),ie=k(ie,ue.children||[]),ie.return=se,se=ie;break e}else{l(se,ie);break}else r(se,ie);ie=ie.sibling}ie=Nd(ue,se.mode,Pe),ie.return=se,se=ie}return Q(se);case W:return Ye=ue._init,jt(se,ie,Ye(ue._payload),Pe)}if(Re(ue))return je(se,ie,ue,Pe);if(G(ue))return Ve(se,ie,ue,Pe);el(se,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,ie!==null&&ie.tag===6?(l(se,ie.sibling),ie=k(ie,ue),ie.return=se,se=ie):(l(se,ie),ie=Md(ue,se.mode,Pe),ie.return=se,se=ie),Q(se)):l(se,ie)}return jt}var xa=$v(!0),Gv=$v(!1),tl=Di(null),rl=null,Da=null,zf=null;function $f(){zf=Da=rl=null}function Gf(t){var r=tl.current;It(tl),t._currentValue=r}function Kf(t,r,l){for(;t!==null;){var p=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,p!==null&&(p.childLanes|=r)):p!==null&&(p.childLanes&r)!==r&&(p.childLanes|=r),t===l)break;t=t.return}}function Ma(t,r){rl=t,zf=Da=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(_r=!0),t.firstContext=null)}function Hr(t){var r=t._currentValue;if(zf!==t)if(t={context:t,memoizedValue:r,next:null},Da===null){if(rl===null)throw Error(n(308));Da=t,rl.dependencies={lanes:0,firstContext:t}}else Da=Da.next=t;return r}var Co=null;function Qf(t){Co===null?Co=[t]:Co.push(t)}function Kv(t,r,l,p){var k=r.interleaved;return k===null?(l.next=l,Qf(r)):(l.next=k.next,k.next=l),r.interleaved=l,Yn(t,p)}function Yn(t,r){t.lanes|=r;var l=t.alternate;for(l!==null&&(l.lanes|=r),l=t,t=t.return;t!==null;)t.childLanes|=r,l=t.alternate,l!==null&&(l.childLanes|=r),l=t,t=t.return;return l.tag===3?l.stateNode:null}var ji=!1;function Jf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qv(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Fi(t,r,l){var p=t.updateQueue;if(p===null)return null;if(p=p.shared,(pt&2)!==0){var k=p.pending;return k===null?r.next=r:(r.next=k.next,k.next=r),p.pending=r,Yn(t,l)}return k=p.interleaved,k===null?(r.next=r,Qf(p)):(r.next=k.next,k.next=r),p.interleaved=r,Yn(t,l)}function nl(t,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194240)!==0)){var p=r.lanes;p&=t.pendingLanes,l|=p,r.lanes=l,ss(t,l)}}function Jv(t,r){var l=t.updateQueue,p=t.alternate;if(p!==null&&(p=p.updateQueue,l===p)){var k=null,R=null;if(l=l.firstBaseUpdate,l!==null){do{var Q={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};R===null?k=R=Q:R=R.next=Q,l=l.next}while(l!==null);R===null?k=R=r:R=R.next=r}else k=R=r;l={baseState:p.baseState,firstBaseUpdate:k,lastBaseUpdate:R,shared:p.shared,effects:p.effects},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=r:t.next=r,l.lastBaseUpdate=r}function il(t,r,l,p){var k=t.updateQueue;ji=!1;var R=k.firstBaseUpdate,Q=k.lastBaseUpdate,te=k.shared.pending;if(te!==null){k.shared.pending=null;var ne=te,pe=ne.next;ne.next=null,Q===null?R=pe:Q.next=pe,Q=ne;var Ee=t.alternate;Ee!==null&&(Ee=Ee.updateQueue,te=Ee.lastBaseUpdate,te!==Q&&(te===null?Ee.firstBaseUpdate=pe:te.next=pe,Ee.lastBaseUpdate=ne))}if(R!==null){var be=k.baseState;Q=0,Ee=pe=ne=null,te=R;do{var Te=te.lane,De=te.eventTime;if((p&Te)===Te){Ee!==null&&(Ee=Ee.next={eventTime:De,lane:0,tag:te.tag,payload:te.payload,callback:te.callback,next:null});e:{var je=t,Ve=te;switch(Te=r,De=l,Ve.tag){case 1:if(je=Ve.payload,typeof je=="function"){be=je.call(De,be,Te);break e}be=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Ve.payload,Te=typeof je=="function"?je.call(De,be,Te):je,Te==null)break e;be=J({},be,Te);break e;case 2:ji=!0}}te.callback!==null&&te.lane!==0&&(t.flags|=64,Te=k.effects,Te===null?k.effects=[te]:Te.push(te))}else De={eventTime:De,lane:Te,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Ee===null?(pe=Ee=De,ne=be):Ee=Ee.next=De,Q|=Te;if(te=te.next,te===null){if(te=k.shared.pending,te===null)break;Te=te,te=Te.next,Te.next=null,k.lastBaseUpdate=Te,k.shared.pending=null}}while(!0);if(Ee===null&&(ne=be),k.baseState=ne,k.firstBaseUpdate=pe,k.lastBaseUpdate=Ee,r=k.shared.interleaved,r!==null){k=r;do Q|=k.lane,k=k.next;while(k!==r)}else R===null&&(k.shared.lanes=0);Oo|=Q,t.lanes=Q,t.memoizedState=be}}function Yv(t,r,l){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var p=t[r],k=p.callback;if(k!==null){if(p.callback=null,p=l,typeof k!="function")throw Error(n(191,k));k.call(p)}}}var Ps={},Rn=Di(Ps),Rs=Di(Ps),Os=Di(Ps);function Po(t){if(t===Ps)throw Error(n(174));return t}function Yf(t,r){switch(Pt(Os,r),Pt(Rs,t),Pt(Rn,Ps),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Oe(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=Oe(r,t)}It(Rn),Pt(Rn,r)}function Na(){It(Rn),It(Rs),It(Os)}function Xv(t){Po(Os.current);var r=Po(Rn.current),l=Oe(r,t.type);r!==l&&(Pt(Rs,t),Pt(Rn,l))}function Xf(t){Rs.current===t&&(It(Rn),It(Rs))}var Dt=Di(0);function ol(t){for(var r=t;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Zf=[];function ed(){for(var t=0;t<Zf.length;t++)Zf[t]._workInProgressVersionPrimary=null;Zf.length=0}var al=O.ReactCurrentDispatcher,td=O.ReactCurrentBatchConfig,Ro=0,Mt=null,zt=null,Kt=null,sl=!1,Is=!1,Ls=0,qE=0;function or(){throw Error(n(321))}function rd(t,r){if(r===null)return!1;for(var l=0;l<r.length&&l<t.length;l++)if(!Jr(t[l],r[l]))return!1;return!0}function nd(t,r,l,p,k,R){if(Ro=R,Mt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,al.current=t===null||t.memoizedState===null?$E:GE,t=l(p,k),Is){R=0;do{if(Is=!1,Ls=0,25<=R)throw Error(n(301));R+=1,Kt=zt=null,r.updateQueue=null,al.current=KE,t=l(p,k)}while(Is)}if(al.current=ll,r=zt!==null&&zt.next!==null,Ro=0,Kt=zt=Mt=null,sl=!1,r)throw Error(n(300));return t}function id(){var t=Ls!==0;return Ls=0,t}function On(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Mt.memoizedState=Kt=t:Kt=Kt.next=t,Kt}function Wr(){if(zt===null){var t=Mt.alternate;t=t!==null?t.memoizedState:null}else t=zt.next;var r=Kt===null?Mt.memoizedState:Kt.next;if(r!==null)Kt=r,zt=t;else{if(t===null)throw Error(n(310));zt=t,t={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Kt===null?Mt.memoizedState=Kt=t:Kt=Kt.next=t}return Kt}function As(t,r){return typeof r=="function"?r(t):r}function od(t){var r=Wr(),l=r.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=t;var p=zt,k=p.baseQueue,R=l.pending;if(R!==null){if(k!==null){var Q=k.next;k.next=R.next,R.next=Q}p.baseQueue=k=R,l.pending=null}if(k!==null){R=k.next,p=p.baseState;var te=Q=null,ne=null,pe=R;do{var Ee=pe.lane;if((Ro&Ee)===Ee)ne!==null&&(ne=ne.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),p=pe.hasEagerState?pe.eagerState:t(p,pe.action);else{var be={lane:Ee,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};ne===null?(te=ne=be,Q=p):ne=ne.next=be,Mt.lanes|=Ee,Oo|=Ee}pe=pe.next}while(pe!==null&&pe!==R);ne===null?Q=p:ne.next=te,Jr(p,r.memoizedState)||(_r=!0),r.memoizedState=p,r.baseState=Q,r.baseQueue=ne,l.lastRenderedState=p}if(t=l.interleaved,t!==null){k=t;do R=k.lane,Mt.lanes|=R,Oo|=R,k=k.next;while(k!==t)}else k===null&&(l.lanes=0);return[r.memoizedState,l.dispatch]}function ad(t){var r=Wr(),l=r.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=t;var p=l.dispatch,k=l.pending,R=r.memoizedState;if(k!==null){l.pending=null;var Q=k=k.next;do R=t(R,Q.action),Q=Q.next;while(Q!==k);Jr(R,r.memoizedState)||(_r=!0),r.memoizedState=R,r.baseQueue===null&&(r.baseState=R),l.lastRenderedState=R}return[R,p]}function Zv(){}function em(t,r){var l=Mt,p=Wr(),k=r(),R=!Jr(p.memoizedState,k);if(R&&(p.memoizedState=k,_r=!0),p=p.queue,sd(nm.bind(null,l,p,t),[t]),p.getSnapshot!==r||R||Kt!==null&&Kt.memoizedState.tag&1){if(l.flags|=2048,xs(9,rm.bind(null,l,p,k,r),void 0,null),Qt===null)throw Error(n(349));(Ro&30)!==0||tm(l,r,k)}return k}function tm(t,r,l){t.flags|=16384,t={getSnapshot:r,value:l},r=Mt.updateQueue,r===null?(r={lastEffect:null,stores:null},Mt.updateQueue=r,r.stores=[t]):(l=r.stores,l===null?r.stores=[t]:l.push(t))}function rm(t,r,l,p){r.value=l,r.getSnapshot=p,im(r)&&om(t)}function nm(t,r,l){return l(function(){im(r)&&om(t)})}function im(t){var r=t.getSnapshot;t=t.value;try{var l=r();return!Jr(t,l)}catch{return!0}}function om(t){var r=Yn(t,1);r!==null&&tn(r,t,1,-1)}function am(t){var r=On();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:t},r.queue=t,t=t.dispatch=zE.bind(null,Mt,t),[r.memoizedState,t]}function xs(t,r,l,p){return t={tag:t,create:r,destroy:l,deps:p,next:null},r=Mt.updateQueue,r===null?(r={lastEffect:null,stores:null},Mt.updateQueue=r,r.lastEffect=t.next=t):(l=r.lastEffect,l===null?r.lastEffect=t.next=t:(p=l.next,l.next=t,t.next=p,r.lastEffect=t)),t}function sm(){return Wr().memoizedState}function cl(t,r,l,p){var k=On();Mt.flags|=t,k.memoizedState=xs(1|r,l,void 0,p===void 0?null:p)}function ul(t,r,l,p){var k=Wr();p=p===void 0?null:p;var R=void 0;if(zt!==null){var Q=zt.memoizedState;if(R=Q.destroy,p!==null&&rd(p,Q.deps)){k.memoizedState=xs(r,l,R,p);return}}Mt.flags|=t,k.memoizedState=xs(1|r,l,R,p)}function cm(t,r){return cl(8390656,8,t,r)}function sd(t,r){return ul(2048,8,t,r)}function um(t,r){return ul(4,2,t,r)}function lm(t,r){return ul(4,4,t,r)}function fm(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function dm(t,r,l){return l=l!=null?l.concat([t]):null,ul(4,4,fm.bind(null,r,t),l)}function cd(){}function hm(t,r){var l=Wr();r=r===void 0?null:r;var p=l.memoizedState;return p!==null&&r!==null&&rd(r,p[1])?p[0]:(l.memoizedState=[t,r],t)}function pm(t,r){var l=Wr();r=r===void 0?null:r;var p=l.memoizedState;return p!==null&&r!==null&&rd(r,p[1])?p[0]:(t=t(),l.memoizedState=[t,r],t)}function vm(t,r,l){return(Ro&21)===0?(t.baseState&&(t.baseState=!1,_r=!0),t.memoizedState=l):(Jr(l,r)||(l=os(),Mt.lanes|=l,Oo|=l,t.baseState=!0),r)}function HE(t,r){var l=lt;lt=l!==0&&4>l?l:4,t(!0);var p=td.transition;td.transition={};try{t(!1),r()}finally{lt=l,td.transition=p}}function mm(){return Wr().memoizedState}function WE(t,r,l){var p=qi(t);if(l={lane:p,action:l,hasEagerState:!1,eagerState:null,next:null},gm(t))ym(r,l);else if(l=Kv(t,r,l,p),l!==null){var k=lr();tn(l,t,p,k),_m(l,r,p)}}function zE(t,r,l){var p=qi(t),k={lane:p,action:l,hasEagerState:!1,eagerState:null,next:null};if(gm(t))ym(r,k);else{var R=t.alternate;if(t.lanes===0&&(R===null||R.lanes===0)&&(R=r.lastRenderedReducer,R!==null))try{var Q=r.lastRenderedState,te=R(Q,l);if(k.hasEagerState=!0,k.eagerState=te,Jr(te,Q)){var ne=r.interleaved;ne===null?(k.next=k,Qf(r)):(k.next=ne.next,ne.next=k),r.interleaved=k;return}}catch{}finally{}l=Kv(t,r,k,p),l!==null&&(k=lr(),tn(l,t,p,k),_m(l,r,p))}}function gm(t){var r=t.alternate;return t===Mt||r!==null&&r===Mt}function ym(t,r){Is=sl=!0;var l=t.pending;l===null?r.next=r:(r.next=l.next,l.next=r),t.pending=r}function _m(t,r,l){if((l&4194240)!==0){var p=r.lanes;p&=t.pendingLanes,l|=p,r.lanes=l,ss(t,l)}}var ll={readContext:Hr,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useInsertionEffect:or,useLayoutEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useMutableSource:or,useSyncExternalStore:or,useId:or,unstable_isNewReconciler:!1},$E={readContext:Hr,useCallback:function(t,r){return On().memoizedState=[t,r===void 0?null:r],t},useContext:Hr,useEffect:cm,useImperativeHandle:function(t,r,l){return l=l!=null?l.concat([t]):null,cl(4194308,4,fm.bind(null,r,t),l)},useLayoutEffect:function(t,r){return cl(4194308,4,t,r)},useInsertionEffect:function(t,r){return cl(4,2,t,r)},useMemo:function(t,r){var l=On();return r=r===void 0?null:r,t=t(),l.memoizedState=[t,r],t},useReducer:function(t,r,l){var p=On();return r=l!==void 0?l(r):r,p.memoizedState=p.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},p.queue=t,t=t.dispatch=WE.bind(null,Mt,t),[p.memoizedState,t]},useRef:function(t){var r=On();return t={current:t},r.memoizedState=t},useState:am,useDebugValue:cd,useDeferredValue:function(t){return On().memoizedState=t},useTransition:function(){var t=am(!1),r=t[0];return t=HE.bind(null,t[1]),On().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,l){var p=Mt,k=On();if(At){if(l===void 0)throw Error(n(407));l=l()}else{if(l=r(),Qt===null)throw Error(n(349));(Ro&30)!==0||tm(p,r,l)}k.memoizedState=l;var R={value:l,getSnapshot:r};return k.queue=R,cm(nm.bind(null,p,R,t),[t]),p.flags|=2048,xs(9,rm.bind(null,p,R,l,r),void 0,null),l},useId:function(){var t=On(),r=Qt.identifierPrefix;if(At){var l=Jn,p=Qn;l=(p&~(1<<32-Pr(p)-1)).toString(32)+l,r=":"+r+"R"+l,l=Ls++,0<l&&(r+="H"+l.toString(32)),r+=":"}else l=qE++,r=":"+r+"r"+l.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},GE={readContext:Hr,useCallback:hm,useContext:Hr,useEffect:sd,useImperativeHandle:dm,useInsertionEffect:um,useLayoutEffect:lm,useMemo:pm,useReducer:od,useRef:sm,useState:function(){return od(As)},useDebugValue:cd,useDeferredValue:function(t){var r=Wr();return vm(r,zt.memoizedState,t)},useTransition:function(){var t=od(As)[0],r=Wr().memoizedState;return[t,r]},useMutableSource:Zv,useSyncExternalStore:em,useId:mm,unstable_isNewReconciler:!1},KE={readContext:Hr,useCallback:hm,useContext:Hr,useEffect:sd,useImperativeHandle:dm,useInsertionEffect:um,useLayoutEffect:lm,useMemo:pm,useReducer:ad,useRef:sm,useState:function(){return ad(As)},useDebugValue:cd,useDeferredValue:function(t){var r=Wr();return zt===null?r.memoizedState=t:vm(r,zt.memoizedState,t)},useTransition:function(){var t=ad(As)[0],r=Wr().memoizedState;return[t,r]},useMutableSource:Zv,useSyncExternalStore:em,useId:mm,unstable_isNewReconciler:!1};function Xr(t,r){if(t&&t.defaultProps){r=J({},r),t=t.defaultProps;for(var l in t)r[l]===void 0&&(r[l]=t[l]);return r}return r}function ud(t,r,l,p){r=t.memoizedState,l=l(p,r),l=l==null?r:J({},r,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var fl={isMounted:function(t){return(t=t._reactInternals)?rr(t)===t:!1},enqueueSetState:function(t,r,l){t=t._reactInternals;var p=lr(),k=qi(t),R=Xn(p,k);R.payload=r,l!=null&&(R.callback=l),r=Fi(t,R,k),r!==null&&(tn(r,t,k,p),nl(r,t,k))},enqueueReplaceState:function(t,r,l){t=t._reactInternals;var p=lr(),k=qi(t),R=Xn(p,k);R.tag=1,R.payload=r,l!=null&&(R.callback=l),r=Fi(t,R,k),r!==null&&(tn(r,t,k,p),nl(r,t,k))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var l=lr(),p=qi(t),k=Xn(l,p);k.tag=2,r!=null&&(k.callback=r),r=Fi(t,k,p),r!==null&&(tn(r,t,p,l),nl(r,t,p))}};function wm(t,r,l,p,k,R,Q){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(p,R,Q):r.prototype&&r.prototype.isPureReactComponent?!_s(l,p)||!_s(k,R):!0}function Sm(t,r,l){var p=!1,k=Mi,R=r.contextType;return typeof R=="object"&&R!==null?R=Hr(R):(k=yr(r)?To:ir.current,p=r.contextTypes,R=(p=p!=null)?Oa(t,k):Mi),r=new r(l,R),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=fl,t.stateNode=r,r._reactInternals=t,p&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=k,t.__reactInternalMemoizedMaskedChildContext=R),r}function km(t,r,l,p){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,p),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,p),r.state!==t&&fl.enqueueReplaceState(r,r.state,null)}function ld(t,r,l,p){var k=t.stateNode;k.props=l,k.state=t.memoizedState,k.refs={},Jf(t);var R=r.contextType;typeof R=="object"&&R!==null?k.context=Hr(R):(R=yr(r)?To:ir.current,k.context=Oa(t,R)),k.state=t.memoizedState,R=r.getDerivedStateFromProps,typeof R=="function"&&(ud(t,r,R,l),k.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(r=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),r!==k.state&&fl.enqueueReplaceState(k,k.state,null),il(t,l,k,p),k.state=t.memoizedState),typeof k.componentDidMount=="function"&&(t.flags|=4194308)}function ja(t,r){try{var l="",p=r;do l+=fe(p),p=p.return;while(p);var k=l}catch(R){k=`
Error generating stack: `+R.message+`
`+R.stack}return{value:t,source:r,stack:k,digest:null}}function fd(t,r,l){return{value:t,source:null,stack:l??null,digest:r??null}}function dd(t,r){try{console.error(r.value)}catch(l){setTimeout(function(){throw l})}}var QE=typeof WeakMap=="function"?WeakMap:Map;function Tm(t,r,l){l=Xn(-1,l),l.tag=3,l.payload={element:null};var p=r.value;return l.callback=function(){yl||(yl=!0,Pd=p),dd(t,r)},l}function Em(t,r,l){l=Xn(-1,l),l.tag=3;var p=t.type.getDerivedStateFromError;if(typeof p=="function"){var k=r.value;l.payload=function(){return p(k)},l.callback=function(){dd(t,r)}}var R=t.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(l.callback=function(){dd(t,r),typeof p!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var Q=r.stack;this.componentDidCatch(r.value,{componentStack:Q!==null?Q:""})}),l}function bm(t,r,l){var p=t.pingCache;if(p===null){p=t.pingCache=new QE;var k=new Set;p.set(r,k)}else k=p.get(r),k===void 0&&(k=new Set,p.set(r,k));k.has(l)||(k.add(l),t=ub.bind(null,t,r,l),r.then(t,t))}function Cm(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Pm(t,r,l,p,k){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(r=Xn(-1,1),r.tag=2,Fi(l,r,1))),l.lanes|=1),t):(t.flags|=65536,t.lanes=k,t)}var JE=O.ReactCurrentOwner,_r=!1;function ur(t,r,l,p){r.child=t===null?Gv(r,null,l,p):xa(r,t.child,l,p)}function Rm(t,r,l,p,k){l=l.render;var R=r.ref;return Ma(r,k),p=nd(t,r,l,p,R,k),l=id(),t!==null&&!_r?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~k,Zn(t,r,k)):(At&&l&&Vf(r),r.flags|=1,ur(t,r,p,k),r.child)}function Om(t,r,l,p,k){if(t===null){var R=l.type;return typeof R=="function"&&!Dd(R)&&R.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(r.tag=15,r.type=R,Im(t,r,R,p,k)):(t=El(l.type,null,p,r,r.mode,k),t.ref=r.ref,t.return=r,r.child=t)}if(R=t.child,(t.lanes&k)===0){var Q=R.memoizedProps;if(l=l.compare,l=l!==null?l:_s,l(Q,p)&&t.ref===r.ref)return Zn(t,r,k)}return r.flags|=1,t=Wi(R,p),t.ref=r.ref,t.return=r,r.child=t}function Im(t,r,l,p,k){if(t!==null){var R=t.memoizedProps;if(_s(R,p)&&t.ref===r.ref)if(_r=!1,r.pendingProps=p=R,(t.lanes&k)!==0)(t.flags&131072)!==0&&(_r=!0);else return r.lanes=t.lanes,Zn(t,r,k)}return hd(t,r,l,p,k)}function Lm(t,r,l){var p=r.pendingProps,k=p.children,R=t!==null?t.memoizedState:null;if(p.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(Ua,xr),xr|=l;else{if((l&1073741824)===0)return t=R!==null?R.baseLanes|l:l,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Pt(Ua,xr),xr|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=R!==null?R.baseLanes:l,Pt(Ua,xr),xr|=p}else R!==null?(p=R.baseLanes|l,r.memoizedState=null):p=l,Pt(Ua,xr),xr|=p;return ur(t,r,k,l),r.child}function Am(t,r){var l=r.ref;(t===null&&l!==null||t!==null&&t.ref!==l)&&(r.flags|=512,r.flags|=2097152)}function hd(t,r,l,p,k){var R=yr(l)?To:ir.current;return R=Oa(r,R),Ma(r,k),l=nd(t,r,l,p,R,k),p=id(),t!==null&&!_r?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~k,Zn(t,r,k)):(At&&p&&Vf(r),r.flags|=1,ur(t,r,l,k),r.child)}function xm(t,r,l,p,k){if(yr(l)){var R=!0;Qu(r)}else R=!1;if(Ma(r,k),r.stateNode===null)hl(t,r),Sm(r,l,p),ld(r,l,p,k),p=!0;else if(t===null){var Q=r.stateNode,te=r.memoizedProps;Q.props=te;var ne=Q.context,pe=l.contextType;typeof pe=="object"&&pe!==null?pe=Hr(pe):(pe=yr(l)?To:ir.current,pe=Oa(r,pe));var Ee=l.getDerivedStateFromProps,be=typeof Ee=="function"||typeof Q.getSnapshotBeforeUpdate=="function";be||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(te!==p||ne!==pe)&&km(r,Q,p,pe),ji=!1;var Te=r.memoizedState;Q.state=Te,il(r,p,Q,k),ne=r.memoizedState,te!==p||Te!==ne||gr.current||ji?(typeof Ee=="function"&&(ud(r,l,Ee,p),ne=r.memoizedState),(te=ji||wm(r,l,te,p,Te,ne,pe))?(be||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(r.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=p,r.memoizedState=ne),Q.props=p,Q.state=ne,Q.context=pe,p=te):(typeof Q.componentDidMount=="function"&&(r.flags|=4194308),p=!1)}else{Q=r.stateNode,Qv(t,r),te=r.memoizedProps,pe=r.type===r.elementType?te:Xr(r.type,te),Q.props=pe,be=r.pendingProps,Te=Q.context,ne=l.contextType,typeof ne=="object"&&ne!==null?ne=Hr(ne):(ne=yr(l)?To:ir.current,ne=Oa(r,ne));var De=l.getDerivedStateFromProps;(Ee=typeof De=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(te!==be||Te!==ne)&&km(r,Q,p,ne),ji=!1,Te=r.memoizedState,Q.state=Te,il(r,p,Q,k);var je=r.memoizedState;te!==be||Te!==je||gr.current||ji?(typeof De=="function"&&(ud(r,l,De,p),je=r.memoizedState),(pe=ji||wm(r,l,pe,p,Te,je,ne)||!1)?(Ee||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(p,je,ne),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(p,je,ne)),typeof Q.componentDidUpdate=="function"&&(r.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof Q.componentDidUpdate!="function"||te===t.memoizedProps&&Te===t.memoizedState||(r.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||te===t.memoizedProps&&Te===t.memoizedState||(r.flags|=1024),r.memoizedProps=p,r.memoizedState=je),Q.props=p,Q.state=je,Q.context=ne,p=pe):(typeof Q.componentDidUpdate!="function"||te===t.memoizedProps&&Te===t.memoizedState||(r.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||te===t.memoizedProps&&Te===t.memoizedState||(r.flags|=1024),p=!1)}return pd(t,r,l,p,R,k)}function pd(t,r,l,p,k,R){Am(t,r);var Q=(r.flags&128)!==0;if(!p&&!Q)return k&&Fv(r,l,!1),Zn(t,r,R);p=r.stateNode,JE.current=r;var te=Q&&typeof l.getDerivedStateFromError!="function"?null:p.render();return r.flags|=1,t!==null&&Q?(r.child=xa(r,t.child,null,R),r.child=xa(r,null,te,R)):ur(t,r,te,R),r.memoizedState=p.state,k&&Fv(r,l,!0),r.child}function Dm(t){var r=t.stateNode;r.pendingContext?Nv(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Nv(t,r.context,!1),Yf(t,r.containerInfo)}function Mm(t,r,l,p,k){return Aa(),Wf(k),r.flags|=256,ur(t,r,l,p),r.child}var vd={dehydrated:null,treeContext:null,retryLane:0};function md(t){return{baseLanes:t,cachePool:null,transitions:null}}function Nm(t,r,l){var p=r.pendingProps,k=Dt.current,R=!1,Q=(r.flags&128)!==0,te;if((te=Q)||(te=t!==null&&t.memoizedState===null?!1:(k&2)!==0),te?(R=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(k|=1),Pt(Dt,k&1),t===null)return Hf(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(Q=p.children,t=p.fallback,R?(p=r.mode,R=r.child,Q={mode:"hidden",children:Q},(p&1)===0&&R!==null?(R.childLanes=0,R.pendingProps=Q):R=bl(Q,p,0,null),t=xo(t,p,l,null),R.return=r,t.return=r,R.sibling=t,r.child=R,r.child.memoizedState=md(l),r.memoizedState=vd,t):gd(r,Q));if(k=t.memoizedState,k!==null&&(te=k.dehydrated,te!==null))return YE(t,r,Q,p,te,k,l);if(R){R=p.fallback,Q=r.mode,k=t.child,te=k.sibling;var ne={mode:"hidden",children:p.children};return(Q&1)===0&&r.child!==k?(p=r.child,p.childLanes=0,p.pendingProps=ne,r.deletions=null):(p=Wi(k,ne),p.subtreeFlags=k.subtreeFlags&14680064),te!==null?R=Wi(te,R):(R=xo(R,Q,l,null),R.flags|=2),R.return=r,p.return=r,p.sibling=R,r.child=p,p=R,R=r.child,Q=t.child.memoizedState,Q=Q===null?md(l):{baseLanes:Q.baseLanes|l,cachePool:null,transitions:Q.transitions},R.memoizedState=Q,R.childLanes=t.childLanes&~l,r.memoizedState=vd,p}return R=t.child,t=R.sibling,p=Wi(R,{mode:"visible",children:p.children}),(r.mode&1)===0&&(p.lanes=l),p.return=r,p.sibling=null,t!==null&&(l=r.deletions,l===null?(r.deletions=[t],r.flags|=16):l.push(t)),r.child=p,r.memoizedState=null,p}function gd(t,r){return r=bl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function dl(t,r,l,p){return p!==null&&Wf(p),xa(r,t.child,null,l),t=gd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function YE(t,r,l,p,k,R,Q){if(l)return r.flags&256?(r.flags&=-257,p=fd(Error(n(422))),dl(t,r,Q,p)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(R=p.fallback,k=r.mode,p=bl({mode:"visible",children:p.children},k,0,null),R=xo(R,k,Q,null),R.flags|=2,p.return=r,R.return=r,p.sibling=R,r.child=p,(r.mode&1)!==0&&xa(r,t.child,null,Q),r.child.memoizedState=md(Q),r.memoizedState=vd,R);if((r.mode&1)===0)return dl(t,r,Q,null);if(k.data==="$!"){if(p=k.nextSibling&&k.nextSibling.dataset,p)var te=p.dgst;return p=te,R=Error(n(419)),p=fd(R,p,void 0),dl(t,r,Q,p)}if(te=(Q&t.childLanes)!==0,_r||te){if(p=Qt,p!==null){switch(Q&-Q){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(p.suspendedLanes|Q))!==0?0:k,k!==0&&k!==R.retryLane&&(R.retryLane=k,Yn(t,k),tn(p,t,k,-1))}return xd(),p=fd(Error(n(421))),dl(t,r,Q,p)}return k.data==="$?"?(r.flags|=128,r.child=t.child,r=lb.bind(null,t),k._reactRetry=r,null):(t=R.treeContext,Ar=xi(k.nextSibling),Lr=r,At=!0,Yr=null,t!==null&&(Br[qr++]=Qn,Br[qr++]=Jn,Br[qr++]=Eo,Qn=t.id,Jn=t.overflow,Eo=r),r=gd(r,p.children),r.flags|=4096,r)}function jm(t,r,l){t.lanes|=r;var p=t.alternate;p!==null&&(p.lanes|=r),Kf(t.return,r,l)}function yd(t,r,l,p,k){var R=t.memoizedState;R===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:p,tail:l,tailMode:k}:(R.isBackwards=r,R.rendering=null,R.renderingStartTime=0,R.last=p,R.tail=l,R.tailMode=k)}function Fm(t,r,l){var p=r.pendingProps,k=p.revealOrder,R=p.tail;if(ur(t,r,p.children,l),p=Dt.current,(p&2)!==0)p=p&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jm(t,l,r);else if(t.tag===19)jm(t,l,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}p&=1}if(Pt(Dt,p),(r.mode&1)===0)r.memoizedState=null;else switch(k){case"forwards":for(l=r.child,k=null;l!==null;)t=l.alternate,t!==null&&ol(t)===null&&(k=l),l=l.sibling;l=k,l===null?(k=r.child,r.child=null):(k=l.sibling,l.sibling=null),yd(r,!1,k,l,R);break;case"backwards":for(l=null,k=r.child,r.child=null;k!==null;){if(t=k.alternate,t!==null&&ol(t)===null){r.child=k;break}t=k.sibling,k.sibling=l,l=k,k=t}yd(r,!0,l,null,R);break;case"together":yd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function hl(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function Zn(t,r,l){if(t!==null&&(r.dependencies=t.dependencies),Oo|=r.lanes,(l&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,l=Wi(t,t.pendingProps),r.child=l,l.return=r;t.sibling!==null;)t=t.sibling,l=l.sibling=Wi(t,t.pendingProps),l.return=r;l.sibling=null}return r.child}function XE(t,r,l){switch(r.tag){case 3:Dm(r),Aa();break;case 5:Xv(r);break;case 1:yr(r.type)&&Qu(r);break;case 4:Yf(r,r.stateNode.containerInfo);break;case 10:var p=r.type._context,k=r.memoizedProps.value;Pt(tl,p._currentValue),p._currentValue=k;break;case 13:if(p=r.memoizedState,p!==null)return p.dehydrated!==null?(Pt(Dt,Dt.current&1),r.flags|=128,null):(l&r.child.childLanes)!==0?Nm(t,r,l):(Pt(Dt,Dt.current&1),t=Zn(t,r,l),t!==null?t.sibling:null);Pt(Dt,Dt.current&1);break;case 19:if(p=(l&r.childLanes)!==0,(t.flags&128)!==0){if(p)return Fm(t,r,l);r.flags|=128}if(k=r.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),Pt(Dt,Dt.current),p)break;return null;case 22:case 23:return r.lanes=0,Lm(t,r,l)}return Zn(t,r,l)}var Um,_d,Vm,Bm;Um=function(t,r){for(var l=r.child;l!==null;){if(l.tag===5||l.tag===6)t.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},_d=function(){},Vm=function(t,r,l,p){var k=t.memoizedProps;if(k!==p){t=r.stateNode,Po(Rn.current);var R=null;switch(l){case"input":k=tt(t,k),p=tt(t,p),R=[];break;case"select":k=J({},k,{value:void 0}),p=J({},p,{value:void 0}),R=[];break;case"textarea":k=$(t,k),p=$(t,p),R=[];break;default:typeof k.onClick!="function"&&typeof p.onClick=="function"&&(t.onclick=$u)}Z(l,p);var Q;l=null;for(pe in k)if(!p.hasOwnProperty(pe)&&k.hasOwnProperty(pe)&&k[pe]!=null)if(pe==="style"){var te=k[pe];for(Q in te)te.hasOwnProperty(Q)&&(l||(l={}),l[Q]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(s.hasOwnProperty(pe)?R||(R=[]):(R=R||[]).push(pe,null));for(pe in p){var ne=p[pe];if(te=k?.[pe],p.hasOwnProperty(pe)&&ne!==te&&(ne!=null||te!=null))if(pe==="style")if(te){for(Q in te)!te.hasOwnProperty(Q)||ne&&ne.hasOwnProperty(Q)||(l||(l={}),l[Q]="");for(Q in ne)ne.hasOwnProperty(Q)&&te[Q]!==ne[Q]&&(l||(l={}),l[Q]=ne[Q])}else l||(R||(R=[]),R.push(pe,l)),l=ne;else pe==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,te=te?te.__html:void 0,ne!=null&&te!==ne&&(R=R||[]).push(pe,ne)):pe==="children"?typeof ne!="string"&&typeof ne!="number"||(R=R||[]).push(pe,""+ne):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(s.hasOwnProperty(pe)?(ne!=null&&pe==="onScroll"&&Ot("scroll",t),R||te===ne||(R=[])):(R=R||[]).push(pe,ne))}l&&(R=R||[]).push("style",l);var pe=R;(r.updateQueue=pe)&&(r.flags|=4)}},Bm=function(t,r,l,p){l!==p&&(r.flags|=4)};function Ds(t,r){if(!At)switch(t.tailMode){case"hidden":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:p.sibling=null}}function ar(t){var r=t.alternate!==null&&t.alternate.child===t.child,l=0,p=0;if(r)for(var k=t.child;k!==null;)l|=k.lanes|k.childLanes,p|=k.subtreeFlags&14680064,p|=k.flags&14680064,k.return=t,k=k.sibling;else for(k=t.child;k!==null;)l|=k.lanes|k.childLanes,p|=k.subtreeFlags,p|=k.flags,k.return=t,k=k.sibling;return t.subtreeFlags|=p,t.childLanes=l,r}function ZE(t,r,l){var p=r.pendingProps;switch(Bf(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(r),null;case 1:return yr(r.type)&&Ku(),ar(r),null;case 3:return p=r.stateNode,Na(),It(gr),It(ir),ed(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(t===null||t.child===null)&&(Zu(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Yr!==null&&(Id(Yr),Yr=null))),_d(t,r),ar(r),null;case 5:Xf(r);var k=Po(Os.current);if(l=r.type,t!==null&&r.stateNode!=null)Vm(t,r,l,p,k),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!p){if(r.stateNode===null)throw Error(n(166));return ar(r),null}if(t=Po(Rn.current),Zu(r)){p=r.stateNode,l=r.type;var R=r.memoizedProps;switch(p[Pn]=r,p[Es]=R,t=(r.mode&1)!==0,l){case"dialog":Ot("cancel",p),Ot("close",p);break;case"iframe":case"object":case"embed":Ot("load",p);break;case"video":case"audio":for(k=0;k<Ss.length;k++)Ot(Ss[k],p);break;case"source":Ot("error",p);break;case"img":case"image":case"link":Ot("error",p),Ot("load",p);break;case"details":Ot("toggle",p);break;case"input":Je(p,R),Ot("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!R.multiple},Ot("invalid",p);break;case"textarea":H(p,R),Ot("invalid",p)}Z(l,R),k=null;for(var Q in R)if(R.hasOwnProperty(Q)){var te=R[Q];Q==="children"?typeof te=="string"?p.textContent!==te&&(R.suppressHydrationWarning!==!0&&zu(p.textContent,te,t),k=["children",te]):typeof te=="number"&&p.textContent!==""+te&&(R.suppressHydrationWarning!==!0&&zu(p.textContent,te,t),k=["children",""+te]):s.hasOwnProperty(Q)&&te!=null&&Q==="onScroll"&&Ot("scroll",p)}switch(l){case"input":Ae(p),me(p,R,!0);break;case"textarea":Ae(p),ye(p);break;case"select":case"option":break;default:typeof R.onClick=="function"&&(p.onclick=$u)}p=k,r.updateQueue=p,p!==null&&(r.flags|=4)}else{Q=k.nodeType===9?k:k.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Se(l)),t==="http://www.w3.org/1999/xhtml"?l==="script"?(t=Q.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof p.is=="string"?t=Q.createElement(l,{is:p.is}):(t=Q.createElement(l),l==="select"&&(Q=t,p.multiple?Q.multiple=!0:p.size&&(Q.size=p.size))):t=Q.createElementNS(t,l),t[Pn]=r,t[Es]=p,Um(t,r,!1,!1),r.stateNode=t;e:{switch(Q=re(l,p),l){case"dialog":Ot("cancel",t),Ot("close",t),k=p;break;case"iframe":case"object":case"embed":Ot("load",t),k=p;break;case"video":case"audio":for(k=0;k<Ss.length;k++)Ot(Ss[k],t);k=p;break;case"source":Ot("error",t),k=p;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),k=p;break;case"details":Ot("toggle",t),k=p;break;case"input":Je(t,p),k=tt(t,p),Ot("invalid",t);break;case"option":k=p;break;case"select":t._wrapperState={wasMultiple:!!p.multiple},k=J({},p,{value:void 0}),Ot("invalid",t);break;case"textarea":H(t,p),k=$(t,p),Ot("invalid",t);break;default:k=p}Z(l,k),te=k;for(R in te)if(te.hasOwnProperty(R)){var ne=te[R];R==="style"?Ce(t,ne):R==="dangerouslySetInnerHTML"?(ne=ne?ne.__html:void 0,ne!=null&&Fe(t,ne)):R==="children"?typeof ne=="string"?(l!=="textarea"||ne!=="")&&He(t,ne):typeof ne=="number"&&He(t,""+ne):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(s.hasOwnProperty(R)?ne!=null&&R==="onScroll"&&Ot("scroll",t):ne!=null&&x(t,R,ne,Q))}switch(l){case"input":Ae(t),me(t,p,!1);break;case"textarea":Ae(t),ye(t);break;case"option":p.value!=null&&t.setAttribute("value",""+we(p.value));break;case"select":t.multiple=!!p.multiple,R=p.value,R!=null?qe(t,!!p.multiple,R,!1):p.defaultValue!=null&&qe(t,!!p.multiple,p.defaultValue,!0);break;default:typeof k.onClick=="function"&&(t.onclick=$u)}switch(l){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return ar(r),null;case 6:if(t&&r.stateNode!=null)Bm(t,r,t.memoizedProps,p);else{if(typeof p!="string"&&r.stateNode===null)throw Error(n(166));if(l=Po(Os.current),Po(Rn.current),Zu(r)){if(p=r.stateNode,l=r.memoizedProps,p[Pn]=r,(R=p.nodeValue!==l)&&(t=Lr,t!==null))switch(t.tag){case 3:zu(p.nodeValue,l,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zu(p.nodeValue,l,(t.mode&1)!==0)}R&&(r.flags|=4)}else p=(l.nodeType===9?l:l.ownerDocument).createTextNode(p),p[Pn]=r,r.stateNode=p}return ar(r),null;case 13:if(It(Dt),p=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(At&&Ar!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Wv(),Aa(),r.flags|=98560,R=!1;else if(R=Zu(r),p!==null&&p.dehydrated!==null){if(t===null){if(!R)throw Error(n(318));if(R=r.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(n(317));R[Pn]=r}else Aa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ar(r),R=!1}else Yr!==null&&(Id(Yr),Yr=null),R=!0;if(!R)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=l,r):(p=p!==null,p!==(t!==null&&t.memoizedState!==null)&&p&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(Dt.current&1)!==0?$t===0&&($t=3):xd())),r.updateQueue!==null&&(r.flags|=4),ar(r),null);case 4:return Na(),_d(t,r),t===null&&ks(r.stateNode.containerInfo),ar(r),null;case 10:return Gf(r.type._context),ar(r),null;case 17:return yr(r.type)&&Ku(),ar(r),null;case 19:if(It(Dt),R=r.memoizedState,R===null)return ar(r),null;if(p=(r.flags&128)!==0,Q=R.rendering,Q===null)if(p)Ds(R,!1);else{if($t!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(Q=ol(t),Q!==null){for(r.flags|=128,Ds(R,!1),p=Q.updateQueue,p!==null&&(r.updateQueue=p,r.flags|=4),r.subtreeFlags=0,p=l,l=r.child;l!==null;)R=l,t=p,R.flags&=14680066,Q=R.alternate,Q===null?(R.childLanes=0,R.lanes=t,R.child=null,R.subtreeFlags=0,R.memoizedProps=null,R.memoizedState=null,R.updateQueue=null,R.dependencies=null,R.stateNode=null):(R.childLanes=Q.childLanes,R.lanes=Q.lanes,R.child=Q.child,R.subtreeFlags=0,R.deletions=null,R.memoizedProps=Q.memoizedProps,R.memoizedState=Q.memoizedState,R.updateQueue=Q.updateQueue,R.type=Q.type,t=Q.dependencies,R.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),l=l.sibling;return Pt(Dt,Dt.current&1|2),r.child}t=t.sibling}R.tail!==null&&Rt()>Va&&(r.flags|=128,p=!0,Ds(R,!1),r.lanes=4194304)}else{if(!p)if(t=ol(Q),t!==null){if(r.flags|=128,p=!0,l=t.updateQueue,l!==null&&(r.updateQueue=l,r.flags|=4),Ds(R,!0),R.tail===null&&R.tailMode==="hidden"&&!Q.alternate&&!At)return ar(r),null}else 2*Rt()-R.renderingStartTime>Va&&l!==1073741824&&(r.flags|=128,p=!0,Ds(R,!1),r.lanes=4194304);R.isBackwards?(Q.sibling=r.child,r.child=Q):(l=R.last,l!==null?l.sibling=Q:r.child=Q,R.last=Q)}return R.tail!==null?(r=R.tail,R.rendering=r,R.tail=r.sibling,R.renderingStartTime=Rt(),r.sibling=null,l=Dt.current,Pt(Dt,p?l&1|2:l&1),r):(ar(r),null);case 22:case 23:return Ad(),p=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==p&&(r.flags|=8192),p&&(r.mode&1)!==0?(xr&1073741824)!==0&&(ar(r),r.subtreeFlags&6&&(r.flags|=8192)):ar(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function eb(t,r){switch(Bf(r),r.tag){case 1:return yr(r.type)&&Ku(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Na(),It(gr),It(ir),ed(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return Xf(r),null;case 13:if(It(Dt),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Aa()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return It(Dt),null;case 4:return Na(),null;case 10:return Gf(r.type._context),null;case 22:case 23:return Ad(),null;case 24:return null;default:return null}}var pl=!1,sr=!1,tb=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function Fa(t,r){var l=t.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(p){Nt(t,r,p)}else l.current=null}function wd(t,r,l){try{l()}catch(p){Nt(t,r,p)}}var qm=!1;function rb(t,r){if(Af=zn,t=wv(),Ef(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var p=l.getSelection&&l.getSelection();if(p&&p.rangeCount!==0){l=p.anchorNode;var k=p.anchorOffset,R=p.focusNode;p=p.focusOffset;try{l.nodeType,R.nodeType}catch{l=null;break e}var Q=0,te=-1,ne=-1,pe=0,Ee=0,be=t,Te=null;t:for(;;){for(var De;be!==l||k!==0&&be.nodeType!==3||(te=Q+k),be!==R||p!==0&&be.nodeType!==3||(ne=Q+p),be.nodeType===3&&(Q+=be.nodeValue.length),(De=be.firstChild)!==null;)Te=be,be=De;for(;;){if(be===t)break t;if(Te===l&&++pe===k&&(te=Q),Te===R&&++Ee===p&&(ne=Q),(De=be.nextSibling)!==null)break;be=Te,Te=be.parentNode}be=De}l=te===-1||ne===-1?null:{start:te,end:ne}}else l=null}l=l||{start:0,end:0}}else l=null;for(xf={focusedElem:t,selectionRange:l},zn=!1,Ne=r;Ne!==null;)if(r=Ne,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,Ne=t;else for(;Ne!==null;){r=Ne;try{var je=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(je!==null){var Ve=je.memoizedProps,jt=je.memoizedState,se=r.stateNode,ie=se.getSnapshotBeforeUpdate(r.elementType===r.type?Ve:Xr(r.type,Ve),jt);se.__reactInternalSnapshotBeforeUpdate=ie}break;case 3:var ue=r.stateNode.containerInfo;ue.nodeType===1?ue.textContent="":ue.nodeType===9&&ue.documentElement&&ue.removeChild(ue.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Pe){Nt(r,r.return,Pe)}if(t=r.sibling,t!==null){t.return=r.return,Ne=t;break}Ne=r.return}return je=qm,qm=!1,je}function Ms(t,r,l){var p=r.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var k=p=p.next;do{if((k.tag&t)===t){var R=k.destroy;k.destroy=void 0,R!==void 0&&wd(r,l,R)}k=k.next}while(k!==p)}}function vl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&t)===t){var p=l.create;l.destroy=p()}l=l.next}while(l!==r)}}function Sd(t){var r=t.ref;if(r!==null){var l=t.stateNode;switch(t.tag){case 5:t=l;break;default:t=l}typeof r=="function"?r(t):r.current=t}}function Hm(t){var r=t.alternate;r!==null&&(t.alternate=null,Hm(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Pn],delete r[Es],delete r[jf],delete r[FE],delete r[UE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Wm(t){return t.tag===5||t.tag===3||t.tag===4}function zm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kd(t,r,l){var p=t.tag;if(p===5||p===6)t=t.stateNode,r?l.nodeType===8?l.parentNode.insertBefore(t,r):l.insertBefore(t,r):(l.nodeType===8?(r=l.parentNode,r.insertBefore(t,l)):(r=l,r.appendChild(t)),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=$u));else if(p!==4&&(t=t.child,t!==null))for(kd(t,r,l),t=t.sibling;t!==null;)kd(t,r,l),t=t.sibling}function Td(t,r,l){var p=t.tag;if(p===5||p===6)t=t.stateNode,r?l.insertBefore(t,r):l.appendChild(t);else if(p!==4&&(t=t.child,t!==null))for(Td(t,r,l),t=t.sibling;t!==null;)Td(t,r,l),t=t.sibling}var er=null,Zr=!1;function Ui(t,r,l){for(l=l.child;l!==null;)$m(t,r,l),l=l.sibling}function $m(t,r,l){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(ho,l)}catch{}switch(l.tag){case 5:sr||Fa(l,r);case 6:var p=er,k=Zr;er=null,Ui(t,r,l),er=p,Zr=k,er!==null&&(Zr?(t=er,l=l.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)):er.removeChild(l.stateNode));break;case 18:er!==null&&(Zr?(t=er,l=l.stateNode,t.nodeType===8?Nf(t.parentNode,l):t.nodeType===1&&Nf(t,l),Oi(t)):Nf(er,l.stateNode));break;case 4:p=er,k=Zr,er=l.stateNode.containerInfo,Zr=!0,Ui(t,r,l),er=p,Zr=k;break;case 0:case 11:case 14:case 15:if(!sr&&(p=l.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){k=p=p.next;do{var R=k,Q=R.destroy;R=R.tag,Q!==void 0&&((R&2)!==0||(R&4)!==0)&&wd(l,r,Q),k=k.next}while(k!==p)}Ui(t,r,l);break;case 1:if(!sr&&(Fa(l,r),p=l.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=l.memoizedProps,p.state=l.memoizedState,p.componentWillUnmount()}catch(te){Nt(l,r,te)}Ui(t,r,l);break;case 21:Ui(t,r,l);break;case 22:l.mode&1?(sr=(p=sr)||l.memoizedState!==null,Ui(t,r,l),sr=p):Ui(t,r,l);break;default:Ui(t,r,l)}}function Gm(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var l=t.stateNode;l===null&&(l=t.stateNode=new tb),r.forEach(function(p){var k=fb.bind(null,t,p);l.has(p)||(l.add(p),p.then(k,k))})}}function en(t,r){var l=r.deletions;if(l!==null)for(var p=0;p<l.length;p++){var k=l[p];try{var R=t,Q=r,te=Q;e:for(;te!==null;){switch(te.tag){case 5:er=te.stateNode,Zr=!1;break e;case 3:er=te.stateNode.containerInfo,Zr=!0;break e;case 4:er=te.stateNode.containerInfo,Zr=!0;break e}te=te.return}if(er===null)throw Error(n(160));$m(R,Q,k),er=null,Zr=!1;var ne=k.alternate;ne!==null&&(ne.return=null),k.return=null}catch(pe){Nt(k,r,pe)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Km(r,t),r=r.sibling}function Km(t,r){var l=t.alternate,p=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(en(r,t),In(t),p&4){try{Ms(3,t,t.return),vl(3,t)}catch(Ve){Nt(t,t.return,Ve)}try{Ms(5,t,t.return)}catch(Ve){Nt(t,t.return,Ve)}}break;case 1:en(r,t),In(t),p&512&&l!==null&&Fa(l,l.return);break;case 5:if(en(r,t),In(t),p&512&&l!==null&&Fa(l,l.return),t.flags&32){var k=t.stateNode;try{He(k,"")}catch(Ve){Nt(t,t.return,Ve)}}if(p&4&&(k=t.stateNode,k!=null)){var R=t.memoizedProps,Q=l!==null?l.memoizedProps:R,te=t.type,ne=t.updateQueue;if(t.updateQueue=null,ne!==null)try{te==="input"&&R.type==="radio"&&R.name!=null&&Ke(k,R),re(te,Q);var pe=re(te,R);for(Q=0;Q<ne.length;Q+=2){var Ee=ne[Q],be=ne[Q+1];Ee==="style"?Ce(k,be):Ee==="dangerouslySetInnerHTML"?Fe(k,be):Ee==="children"?He(k,be):x(k,Ee,be,pe)}switch(te){case"input":Me(k,R);break;case"textarea":Y(k,R);break;case"select":var Te=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!R.multiple;var De=R.value;De!=null?qe(k,!!R.multiple,De,!1):Te!==!!R.multiple&&(R.defaultValue!=null?qe(k,!!R.multiple,R.defaultValue,!0):qe(k,!!R.multiple,R.multiple?[]:"",!1))}k[Es]=R}catch(Ve){Nt(t,t.return,Ve)}}break;case 6:if(en(r,t),In(t),p&4){if(t.stateNode===null)throw Error(n(162));k=t.stateNode,R=t.memoizedProps;try{k.nodeValue=R}catch(Ve){Nt(t,t.return,Ve)}}break;case 3:if(en(r,t),In(t),p&4&&l!==null&&l.memoizedState.isDehydrated)try{Oi(r.containerInfo)}catch(Ve){Nt(t,t.return,Ve)}break;case 4:en(r,t),In(t);break;case 13:en(r,t),In(t),k=t.child,k.flags&8192&&(R=k.memoizedState!==null,k.stateNode.isHidden=R,!R||k.alternate!==null&&k.alternate.memoizedState!==null||(Cd=Rt())),p&4&&Gm(t);break;case 22:if(Ee=l!==null&&l.memoizedState!==null,t.mode&1?(sr=(pe=sr)||Ee,en(r,t),sr=pe):en(r,t),In(t),p&8192){if(pe=t.memoizedState!==null,(t.stateNode.isHidden=pe)&&!Ee&&(t.mode&1)!==0)for(Ne=t,Ee=t.child;Ee!==null;){for(be=Ne=Ee;Ne!==null;){switch(Te=Ne,De=Te.child,Te.tag){case 0:case 11:case 14:case 15:Ms(4,Te,Te.return);break;case 1:Fa(Te,Te.return);var je=Te.stateNode;if(typeof je.componentWillUnmount=="function"){p=Te,l=Te.return;try{r=p,je.props=r.memoizedProps,je.state=r.memoizedState,je.componentWillUnmount()}catch(Ve){Nt(p,l,Ve)}}break;case 5:Fa(Te,Te.return);break;case 22:if(Te.memoizedState!==null){Ym(be);continue}}De!==null?(De.return=Te,Ne=De):Ym(be)}Ee=Ee.sibling}e:for(Ee=null,be=t;;){if(be.tag===5){if(Ee===null){Ee=be;try{k=be.stateNode,pe?(R=k.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none"):(te=be.stateNode,ne=be.memoizedProps.style,Q=ne!=null&&ne.hasOwnProperty("display")?ne.display:null,te.style.display=Lt("display",Q))}catch(Ve){Nt(t,t.return,Ve)}}}else if(be.tag===6){if(Ee===null)try{be.stateNode.nodeValue=pe?"":be.memoizedProps}catch(Ve){Nt(t,t.return,Ve)}}else if((be.tag!==22&&be.tag!==23||be.memoizedState===null||be===t)&&be.child!==null){be.child.return=be,be=be.child;continue}if(be===t)break e;for(;be.sibling===null;){if(be.return===null||be.return===t)break e;Ee===be&&(Ee=null),be=be.return}Ee===be&&(Ee=null),be.sibling.return=be.return,be=be.sibling}}break;case 19:en(r,t),In(t),p&4&&Gm(t);break;case 21:break;default:en(r,t),In(t)}}function In(t){var r=t.flags;if(r&2){try{e:{for(var l=t.return;l!==null;){if(Wm(l)){var p=l;break e}l=l.return}throw Error(n(160))}switch(p.tag){case 5:var k=p.stateNode;p.flags&32&&(He(k,""),p.flags&=-33);var R=zm(t);Td(t,R,k);break;case 3:case 4:var Q=p.stateNode.containerInfo,te=zm(t);kd(t,te,Q);break;default:throw Error(n(161))}}catch(ne){Nt(t,t.return,ne)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function nb(t,r,l){Ne=t,Qm(t)}function Qm(t,r,l){for(var p=(t.mode&1)!==0;Ne!==null;){var k=Ne,R=k.child;if(k.tag===22&&p){var Q=k.memoizedState!==null||pl;if(!Q){var te=k.alternate,ne=te!==null&&te.memoizedState!==null||sr;te=pl;var pe=sr;if(pl=Q,(sr=ne)&&!pe)for(Ne=k;Ne!==null;)Q=Ne,ne=Q.child,Q.tag===22&&Q.memoizedState!==null?Xm(k):ne!==null?(ne.return=Q,Ne=ne):Xm(k);for(;R!==null;)Ne=R,Qm(R),R=R.sibling;Ne=k,pl=te,sr=pe}Jm(t)}else(k.subtreeFlags&8772)!==0&&R!==null?(R.return=k,Ne=R):Jm(t)}}function Jm(t){for(;Ne!==null;){var r=Ne;if((r.flags&8772)!==0){var l=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:sr||vl(5,r);break;case 1:var p=r.stateNode;if(r.flags&4&&!sr)if(l===null)p.componentDidMount();else{var k=r.elementType===r.type?l.memoizedProps:Xr(r.type,l.memoizedProps);p.componentDidUpdate(k,l.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var R=r.updateQueue;R!==null&&Yv(r,R,p);break;case 3:var Q=r.updateQueue;if(Q!==null){if(l=null,r.child!==null)switch(r.child.tag){case 5:l=r.child.stateNode;break;case 1:l=r.child.stateNode}Yv(r,Q,l)}break;case 5:var te=r.stateNode;if(l===null&&r.flags&4){l=te;var ne=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":ne.autoFocus&&l.focus();break;case"img":ne.src&&(l.src=ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var pe=r.alternate;if(pe!==null){var Ee=pe.memoizedState;if(Ee!==null){var be=Ee.dehydrated;be!==null&&Oi(be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}sr||r.flags&512&&Sd(r)}catch(Te){Nt(r,r.return,Te)}}if(r===t){Ne=null;break}if(l=r.sibling,l!==null){l.return=r.return,Ne=l;break}Ne=r.return}}function Ym(t){for(;Ne!==null;){var r=Ne;if(r===t){Ne=null;break}var l=r.sibling;if(l!==null){l.return=r.return,Ne=l;break}Ne=r.return}}function Xm(t){for(;Ne!==null;){var r=Ne;try{switch(r.tag){case 0:case 11:case 15:var l=r.return;try{vl(4,r)}catch(ne){Nt(r,l,ne)}break;case 1:var p=r.stateNode;if(typeof p.componentDidMount=="function"){var k=r.return;try{p.componentDidMount()}catch(ne){Nt(r,k,ne)}}var R=r.return;try{Sd(r)}catch(ne){Nt(r,R,ne)}break;case 5:var Q=r.return;try{Sd(r)}catch(ne){Nt(r,Q,ne)}}}catch(ne){Nt(r,r.return,ne)}if(r===t){Ne=null;break}var te=r.sibling;if(te!==null){te.return=r.return,Ne=te;break}Ne=r.return}}var ib=Math.ceil,ml=O.ReactCurrentDispatcher,Ed=O.ReactCurrentOwner,zr=O.ReactCurrentBatchConfig,pt=0,Qt=null,Vt=null,tr=0,xr=0,Ua=Di(0),$t=0,Ns=null,Oo=0,gl=0,bd=0,js=null,wr=null,Cd=0,Va=1/0,ei=null,yl=!1,Pd=null,Vi=null,_l=!1,Bi=null,wl=0,Fs=0,Rd=null,Sl=-1,kl=0;function lr(){return(pt&6)!==0?Rt():Sl!==-1?Sl:Sl=Rt()}function qi(t){return(t.mode&1)===0?1:(pt&2)!==0&&tr!==0?tr&-tr:BE.transition!==null?(kl===0&&(kl=os()),kl):(t=lt,t!==0||(t=window.event,t=t===void 0?16:va(t.type)),t)}function tn(t,r,l,p){if(50<Fs)throw Fs=0,Rd=null,Error(n(185));go(t,l,p),((pt&2)===0||t!==Qt)&&(t===Qt&&((pt&2)===0&&(gl|=l),$t===4&&Hi(t,tr)),Sr(t,p),l===1&&pt===0&&(r.mode&1)===0&&(Va=Rt()+500,Ju&&Ni()))}function Sr(t,r){var l=t.callbackNode;mo(t,r);var p=qn(t,t===Qt?tr:0);if(p===0)l!==null&&gt(l),t.callbackNode=null,t.callbackPriority=0;else if(r=p&-p,t.callbackPriority!==r){if(l!=null&&gt(l),r===1)t.tag===0?VE(eg.bind(null,t)):Uv(eg.bind(null,t)),NE(function(){(pt&6)===0&&Ni()}),l=null;else{switch(mn(p)){case 1:l=ua;break;case 4:l=rs;break;case 16:l=fo;break;case 536870912:l=la;break;default:l=fo}l=cg(l,Zm.bind(null,t))}t.callbackPriority=r,t.callbackNode=l}}function Zm(t,r){if(Sl=-1,kl=0,(pt&6)!==0)throw Error(n(327));var l=t.callbackNode;if(Ba()&&t.callbackNode!==l)return null;var p=qn(t,t===Qt?tr:0);if(p===0)return null;if((p&30)!==0||(p&t.expiredLanes)!==0||r)r=Tl(t,p);else{r=p;var k=pt;pt|=2;var R=rg();(Qt!==t||tr!==r)&&(ei=null,Va=Rt()+500,Lo(t,r));do try{sb();break}catch(te){tg(t,te)}while(!0);$f(),ml.current=R,pt=k,Vt!==null?r=0:(Qt=null,tr=0,r=$t)}if(r!==0){if(r===2&&(k=is(t),k!==0&&(p=k,r=Od(t,k))),r===1)throw l=Ns,Lo(t,0),Hi(t,p),Sr(t,Rt()),l;if(r===6)Hi(t,p);else{if(k=t.current.alternate,(p&30)===0&&!ob(k)&&(r=Tl(t,p),r===2&&(R=is(t),R!==0&&(p=R,r=Od(t,R))),r===1))throw l=Ns,Lo(t,0),Hi(t,p),Sr(t,Rt()),l;switch(t.finishedWork=k,t.finishedLanes=p,r){case 0:case 1:throw Error(n(345));case 2:Ao(t,wr,ei);break;case 3:if(Hi(t,p),(p&130023424)===p&&(r=Cd+500-Rt(),10<r)){if(qn(t,0)!==0)break;if(k=t.suspendedLanes,(k&p)!==p){lr(),t.pingedLanes|=t.suspendedLanes&k;break}t.timeoutHandle=Mf(Ao.bind(null,t,wr,ei),r);break}Ao(t,wr,ei);break;case 4:if(Hi(t,p),(p&4194240)===p)break;for(r=t.eventTimes,k=-1;0<p;){var Q=31-Pr(p);R=1<<Q,Q=r[Q],Q>k&&(k=Q),p&=~R}if(p=k,p=Rt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*ib(p/1960))-p,10<p){t.timeoutHandle=Mf(Ao.bind(null,t,wr,ei),p);break}Ao(t,wr,ei);break;case 5:Ao(t,wr,ei);break;default:throw Error(n(329))}}}return Sr(t,Rt()),t.callbackNode===l?Zm.bind(null,t):null}function Od(t,r){var l=js;return t.current.memoizedState.isDehydrated&&(Lo(t,r).flags|=256),t=Tl(t,r),t!==2&&(r=wr,wr=l,r!==null&&Id(r)),t}function Id(t){wr===null?wr=t:wr.push.apply(wr,t)}function ob(t){for(var r=t;;){if(r.flags&16384){var l=r.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var p=0;p<l.length;p++){var k=l[p],R=k.getSnapshot;k=k.value;try{if(!Jr(R(),k))return!1}catch{return!1}}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Hi(t,r){for(r&=~bd,r&=~gl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var l=31-Pr(r),p=1<<l;t[l]=-1,r&=~p}}function eg(t){if((pt&6)!==0)throw Error(n(327));Ba();var r=qn(t,0);if((r&1)===0)return Sr(t,Rt()),null;var l=Tl(t,r);if(t.tag!==0&&l===2){var p=is(t);p!==0&&(r=p,l=Od(t,p))}if(l===1)throw l=Ns,Lo(t,0),Hi(t,r),Sr(t,Rt()),l;if(l===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Ao(t,wr,ei),Sr(t,Rt()),null}function Ld(t,r){var l=pt;pt|=1;try{return t(r)}finally{pt=l,pt===0&&(Va=Rt()+500,Ju&&Ni())}}function Io(t){Bi!==null&&Bi.tag===0&&(pt&6)===0&&Ba();var r=pt;pt|=1;var l=zr.transition,p=lt;try{if(zr.transition=null,lt=1,t)return t()}finally{lt=p,zr.transition=l,pt=r,(pt&6)===0&&Ni()}}function Ad(){xr=Ua.current,It(Ua)}function Lo(t,r){t.finishedWork=null,t.finishedLanes=0;var l=t.timeoutHandle;if(l!==-1&&(t.timeoutHandle=-1,ME(l)),Vt!==null)for(l=Vt.return;l!==null;){var p=l;switch(Bf(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Ku();break;case 3:Na(),It(gr),It(ir),ed();break;case 5:Xf(p);break;case 4:Na();break;case 13:It(Dt);break;case 19:It(Dt);break;case 10:Gf(p.type._context);break;case 22:case 23:Ad()}l=l.return}if(Qt=t,Vt=t=Wi(t.current,null),tr=xr=r,$t=0,Ns=null,bd=gl=Oo=0,wr=js=null,Co!==null){for(r=0;r<Co.length;r++)if(l=Co[r],p=l.interleaved,p!==null){l.interleaved=null;var k=p.next,R=l.pending;if(R!==null){var Q=R.next;R.next=k,p.next=Q}l.pending=p}Co=null}return t}function tg(t,r){do{var l=Vt;try{if($f(),al.current=ll,sl){for(var p=Mt.memoizedState;p!==null;){var k=p.queue;k!==null&&(k.pending=null),p=p.next}sl=!1}if(Ro=0,Kt=zt=Mt=null,Is=!1,Ls=0,Ed.current=null,l===null||l.return===null){$t=1,Ns=r,Vt=null;break}e:{var R=t,Q=l.return,te=l,ne=r;if(r=tr,te.flags|=32768,ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var pe=ne,Ee=te,be=Ee.tag;if((Ee.mode&1)===0&&(be===0||be===11||be===15)){var Te=Ee.alternate;Te?(Ee.updateQueue=Te.updateQueue,Ee.memoizedState=Te.memoizedState,Ee.lanes=Te.lanes):(Ee.updateQueue=null,Ee.memoizedState=null)}var De=Cm(Q);if(De!==null){De.flags&=-257,Pm(De,Q,te,R,r),De.mode&1&&bm(R,pe,r),r=De,ne=pe;var je=r.updateQueue;if(je===null){var Ve=new Set;Ve.add(ne),r.updateQueue=Ve}else je.add(ne);break e}else{if((r&1)===0){bm(R,pe,r),xd();break e}ne=Error(n(426))}}else if(At&&te.mode&1){var jt=Cm(Q);if(jt!==null){(jt.flags&65536)===0&&(jt.flags|=256),Pm(jt,Q,te,R,r),Wf(ja(ne,te));break e}}R=ne=ja(ne,te),$t!==4&&($t=2),js===null?js=[R]:js.push(R),R=Q;do{switch(R.tag){case 3:R.flags|=65536,r&=-r,R.lanes|=r;var se=Tm(R,ne,r);Jv(R,se);break e;case 1:te=ne;var ie=R.type,ue=R.stateNode;if((R.flags&128)===0&&(typeof ie.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(Vi===null||!Vi.has(ue)))){R.flags|=65536,r&=-r,R.lanes|=r;var Pe=Em(R,te,r);Jv(R,Pe);break e}}R=R.return}while(R!==null)}ig(l)}catch(We){r=We,Vt===l&&l!==null&&(Vt=l=l.return);continue}break}while(!0)}function rg(){var t=ml.current;return ml.current=ll,t===null?ll:t}function xd(){($t===0||$t===3||$t===2)&&($t=4),Qt===null||(Oo&268435455)===0&&(gl&268435455)===0||Hi(Qt,tr)}function Tl(t,r){var l=pt;pt|=2;var p=rg();(Qt!==t||tr!==r)&&(ei=null,Lo(t,r));do try{ab();break}catch(k){tg(t,k)}while(!0);if($f(),pt=l,ml.current=p,Vt!==null)throw Error(n(261));return Qt=null,tr=0,$t}function ab(){for(;Vt!==null;)ng(Vt)}function sb(){for(;Vt!==null&&!lo();)ng(Vt)}function ng(t){var r=sg(t.alternate,t,xr);t.memoizedProps=t.pendingProps,r===null?ig(t):Vt=r,Ed.current=null}function ig(t){var r=t;do{var l=r.alternate;if(t=r.return,(r.flags&32768)===0){if(l=ZE(l,r,xr),l!==null){Vt=l;return}}else{if(l=eb(l,r),l!==null){l.flags&=32767,Vt=l;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$t=6,Vt=null;return}}if(r=r.sibling,r!==null){Vt=r;return}Vt=r=t}while(r!==null);$t===0&&($t=5)}function Ao(t,r,l){var p=lt,k=zr.transition;try{zr.transition=null,lt=1,cb(t,r,l,p)}finally{zr.transition=k,lt=p}return null}function cb(t,r,l,p){do Ba();while(Bi!==null);if((pt&6)!==0)throw Error(n(327));l=t.finishedWork;var k=t.finishedLanes;if(l===null)return null;if(t.finishedWork=null,t.finishedLanes=0,l===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var R=l.lanes|l.childLanes;if(_f(t,R),t===Qt&&(Vt=Qt=null,tr=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||_l||(_l=!0,cg(fo,function(){return Ba(),null})),R=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||R){R=zr.transition,zr.transition=null;var Q=lt;lt=1;var te=pt;pt|=4,Ed.current=null,rb(t,l),Km(l,t),RE(xf),zn=!!Af,xf=Af=null,t.current=l,nb(l),Kr(),pt=te,lt=Q,zr.transition=R}else t.current=l;if(_l&&(_l=!1,Bi=t,wl=k),R=t.pendingLanes,R===0&&(Vi=null),Lu(l.stateNode),Sr(t,Rt()),r!==null)for(p=t.onRecoverableError,l=0;l<r.length;l++)k=r[l],p(k.value,{componentStack:k.stack,digest:k.digest});if(yl)throw yl=!1,t=Pd,Pd=null,t;return(wl&1)!==0&&t.tag!==0&&Ba(),R=t.pendingLanes,(R&1)!==0?t===Rd?Fs++:(Fs=0,Rd=t):Fs=0,Ni(),null}function Ba(){if(Bi!==null){var t=mn(wl),r=zr.transition,l=lt;try{if(zr.transition=null,lt=16>t?16:t,Bi===null)var p=!1;else{if(t=Bi,Bi=null,wl=0,(pt&6)!==0)throw Error(n(331));var k=pt;for(pt|=4,Ne=t.current;Ne!==null;){var R=Ne,Q=R.child;if((Ne.flags&16)!==0){var te=R.deletions;if(te!==null){for(var ne=0;ne<te.length;ne++){var pe=te[ne];for(Ne=pe;Ne!==null;){var Ee=Ne;switch(Ee.tag){case 0:case 11:case 15:Ms(8,Ee,R)}var be=Ee.child;if(be!==null)be.return=Ee,Ne=be;else for(;Ne!==null;){Ee=Ne;var Te=Ee.sibling,De=Ee.return;if(Hm(Ee),Ee===pe){Ne=null;break}if(Te!==null){Te.return=De,Ne=Te;break}Ne=De}}}var je=R.alternate;if(je!==null){var Ve=je.child;if(Ve!==null){je.child=null;do{var jt=Ve.sibling;Ve.sibling=null,Ve=jt}while(Ve!==null)}}Ne=R}}if((R.subtreeFlags&2064)!==0&&Q!==null)Q.return=R,Ne=Q;else e:for(;Ne!==null;){if(R=Ne,(R.flags&2048)!==0)switch(R.tag){case 0:case 11:case 15:Ms(9,R,R.return)}var se=R.sibling;if(se!==null){se.return=R.return,Ne=se;break e}Ne=R.return}}var ie=t.current;for(Ne=ie;Ne!==null;){Q=Ne;var ue=Q.child;if((Q.subtreeFlags&2064)!==0&&ue!==null)ue.return=Q,Ne=ue;else e:for(Q=ie;Ne!==null;){if(te=Ne,(te.flags&2048)!==0)try{switch(te.tag){case 0:case 11:case 15:vl(9,te)}}catch(We){Nt(te,te.return,We)}if(te===Q){Ne=null;break e}var Pe=te.sibling;if(Pe!==null){Pe.return=te.return,Ne=Pe;break e}Ne=te.return}}if(pt=k,Ni(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(ho,t)}catch{}p=!0}return p}finally{lt=l,zr.transition=r}}return!1}function og(t,r,l){r=ja(l,r),r=Tm(t,r,1),t=Fi(t,r,1),r=lr(),t!==null&&(go(t,1,r),Sr(t,r))}function Nt(t,r,l){if(t.tag===3)og(t,t,l);else for(;r!==null;){if(r.tag===3){og(r,t,l);break}else if(r.tag===1){var p=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Vi===null||!Vi.has(p))){t=ja(l,t),t=Em(r,t,1),r=Fi(r,t,1),t=lr(),r!==null&&(go(r,1,t),Sr(r,t));break}}r=r.return}}function ub(t,r,l){var p=t.pingCache;p!==null&&p.delete(r),r=lr(),t.pingedLanes|=t.suspendedLanes&l,Qt===t&&(tr&l)===l&&($t===4||$t===3&&(tr&130023424)===tr&&500>Rt()-Cd?Lo(t,0):bd|=l),Sr(t,r)}function ag(t,r){r===0&&((t.mode&1)===0?r=1:(r=Ci,Ci<<=1,(Ci&130023424)===0&&(Ci=4194304)));var l=lr();t=Yn(t,r),t!==null&&(go(t,r,l),Sr(t,l))}function lb(t){var r=t.memoizedState,l=0;r!==null&&(l=r.retryLane),ag(t,l)}function fb(t,r){var l=0;switch(t.tag){case 13:var p=t.stateNode,k=t.memoizedState;k!==null&&(l=k.retryLane);break;case 19:p=t.stateNode;break;default:throw Error(n(314))}p!==null&&p.delete(r),ag(t,l)}var sg;sg=function(t,r,l){if(t!==null)if(t.memoizedProps!==r.pendingProps||gr.current)_r=!0;else{if((t.lanes&l)===0&&(r.flags&128)===0)return _r=!1,XE(t,r,l);_r=(t.flags&131072)!==0}else _r=!1,At&&(r.flags&1048576)!==0&&Vv(r,Xu,r.index);switch(r.lanes=0,r.tag){case 2:var p=r.type;hl(t,r),t=r.pendingProps;var k=Oa(r,ir.current);Ma(r,l),k=nd(null,r,p,t,k,l);var R=id();return r.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,yr(p)?(R=!0,Qu(r)):R=!1,r.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,Jf(r),k.updater=fl,r.stateNode=k,k._reactInternals=r,ld(r,p,t,l),r=pd(null,r,p,!0,R,l)):(r.tag=0,At&&R&&Vf(r),ur(null,r,k,l),r=r.child),r;case 16:p=r.elementType;e:{switch(hl(t,r),t=r.pendingProps,k=p._init,p=k(p._payload),r.type=p,k=r.tag=hb(p),t=Xr(p,t),k){case 0:r=hd(null,r,p,t,l);break e;case 1:r=xm(null,r,p,t,l);break e;case 11:r=Rm(null,r,p,t,l);break e;case 14:r=Om(null,r,p,Xr(p.type,t),l);break e}throw Error(n(306,p,""))}return r;case 0:return p=r.type,k=r.pendingProps,k=r.elementType===p?k:Xr(p,k),hd(t,r,p,k,l);case 1:return p=r.type,k=r.pendingProps,k=r.elementType===p?k:Xr(p,k),xm(t,r,p,k,l);case 3:e:{if(Dm(r),t===null)throw Error(n(387));p=r.pendingProps,R=r.memoizedState,k=R.element,Qv(t,r),il(r,p,null,l);var Q=r.memoizedState;if(p=Q.element,R.isDehydrated)if(R={element:p,isDehydrated:!1,cache:Q.cache,pendingSuspenseBoundaries:Q.pendingSuspenseBoundaries,transitions:Q.transitions},r.updateQueue.baseState=R,r.memoizedState=R,r.flags&256){k=ja(Error(n(423)),r),r=Mm(t,r,p,l,k);break e}else if(p!==k){k=ja(Error(n(424)),r),r=Mm(t,r,p,l,k);break e}else for(Ar=xi(r.stateNode.containerInfo.firstChild),Lr=r,At=!0,Yr=null,l=Gv(r,null,p,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Aa(),p===k){r=Zn(t,r,l);break e}ur(t,r,p,l)}r=r.child}return r;case 5:return Xv(r),t===null&&Hf(r),p=r.type,k=r.pendingProps,R=t!==null?t.memoizedProps:null,Q=k.children,Df(p,k)?Q=null:R!==null&&Df(p,R)&&(r.flags|=32),Am(t,r),ur(t,r,Q,l),r.child;case 6:return t===null&&Hf(r),null;case 13:return Nm(t,r,l);case 4:return Yf(r,r.stateNode.containerInfo),p=r.pendingProps,t===null?r.child=xa(r,null,p,l):ur(t,r,p,l),r.child;case 11:return p=r.type,k=r.pendingProps,k=r.elementType===p?k:Xr(p,k),Rm(t,r,p,k,l);case 7:return ur(t,r,r.pendingProps,l),r.child;case 8:return ur(t,r,r.pendingProps.children,l),r.child;case 12:return ur(t,r,r.pendingProps.children,l),r.child;case 10:e:{if(p=r.type._context,k=r.pendingProps,R=r.memoizedProps,Q=k.value,Pt(tl,p._currentValue),p._currentValue=Q,R!==null)if(Jr(R.value,Q)){if(R.children===k.children&&!gr.current){r=Zn(t,r,l);break e}}else for(R=r.child,R!==null&&(R.return=r);R!==null;){var te=R.dependencies;if(te!==null){Q=R.child;for(var ne=te.firstContext;ne!==null;){if(ne.context===p){if(R.tag===1){ne=Xn(-1,l&-l),ne.tag=2;var pe=R.updateQueue;if(pe!==null){pe=pe.shared;var Ee=pe.pending;Ee===null?ne.next=ne:(ne.next=Ee.next,Ee.next=ne),pe.pending=ne}}R.lanes|=l,ne=R.alternate,ne!==null&&(ne.lanes|=l),Kf(R.return,l,r),te.lanes|=l;break}ne=ne.next}}else if(R.tag===10)Q=R.type===r.type?null:R.child;else if(R.tag===18){if(Q=R.return,Q===null)throw Error(n(341));Q.lanes|=l,te=Q.alternate,te!==null&&(te.lanes|=l),Kf(Q,l,r),Q=R.sibling}else Q=R.child;if(Q!==null)Q.return=R;else for(Q=R;Q!==null;){if(Q===r){Q=null;break}if(R=Q.sibling,R!==null){R.return=Q.return,Q=R;break}Q=Q.return}R=Q}ur(t,r,k.children,l),r=r.child}return r;case 9:return k=r.type,p=r.pendingProps.children,Ma(r,l),k=Hr(k),p=p(k),r.flags|=1,ur(t,r,p,l),r.child;case 14:return p=r.type,k=Xr(p,r.pendingProps),k=Xr(p.type,k),Om(t,r,p,k,l);case 15:return Im(t,r,r.type,r.pendingProps,l);case 17:return p=r.type,k=r.pendingProps,k=r.elementType===p?k:Xr(p,k),hl(t,r),r.tag=1,yr(p)?(t=!0,Qu(r)):t=!1,Ma(r,l),Sm(r,p,k),ld(r,p,k,l),pd(null,r,p,!0,t,l);case 19:return Fm(t,r,l);case 22:return Lm(t,r,l)}throw Error(n(156,r.tag))};function cg(t,r){return cr(t,r)}function db(t,r,l,p){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(t,r,l,p){return new db(t,r,l,p)}function Dd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hb(t){if(typeof t=="function")return Dd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===D)return 11;if(t===q)return 14}return 2}function Wi(t,r){var l=t.alternate;return l===null?(l=$r(t.tag,r,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=r,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&14680064,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,r=t.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l}function El(t,r,l,p,k,R){var Q=2;if(p=t,typeof t=="function")Dd(t)&&(Q=1);else if(typeof t=="string")Q=5;else e:switch(t){case y:return xo(l.children,k,R,r);case S:Q=8,k|=8;break;case C:return t=$r(12,l,r,k|2),t.elementType=C,t.lanes=R,t;case P:return t=$r(13,l,r,k),t.elementType=P,t.lanes=R,t;case K:return t=$r(19,l,r,k),t.elementType=K,t.lanes=R,t;case B:return bl(l,k,R,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case A:Q=10;break e;case F:Q=9;break e;case D:Q=11;break e;case q:Q=14;break e;case W:Q=16,p=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=$r(Q,l,r,k),r.elementType=t,r.type=p,r.lanes=R,r}function xo(t,r,l,p){return t=$r(7,t,p,r),t.lanes=l,t}function bl(t,r,l,p){return t=$r(22,t,p,r),t.elementType=B,t.lanes=l,t.stateNode={isHidden:!1},t}function Md(t,r,l){return t=$r(6,t,null,r),t.lanes=l,t}function Nd(t,r,l){return r=$r(4,t.children!==null?t.children:[],t.key,r),r.lanes=l,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function pb(t,r,l,p,k){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=as(0),this.expirationTimes=as(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=as(0),this.identifierPrefix=p,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function jd(t,r,l,p,k,R,Q,te,ne){return t=new pb(t,r,l,te,ne),r===1?(r=1,R===!0&&(r|=8)):r=0,R=$r(3,null,null,r),t.current=R,R.stateNode=t,R.memoizedState={element:p,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jf(R),t}function vb(t,r,l){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:b,key:p==null?null:""+p,children:t,containerInfo:r,implementation:l}}function ug(t){if(!t)return Mi;t=t._reactInternals;e:{if(rr(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(yr(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var l=t.type;if(yr(l))return jv(t,l,r)}return r}function lg(t,r,l,p,k,R,Q,te,ne){return t=jd(l,p,!0,t,k,R,Q,te,ne),t.context=ug(null),l=t.current,p=lr(),k=qi(l),R=Xn(p,k),R.callback=r??null,Fi(l,R,k),t.current.lanes=k,go(t,k,p),Sr(t,p),t}function Cl(t,r,l,p){var k=r.current,R=lr(),Q=qi(k);return l=ug(l),r.context===null?r.context=l:r.pendingContext=l,r=Xn(R,Q),r.payload={element:t},p=p===void 0?null:p,p!==null&&(r.callback=p),t=Fi(k,r,Q),t!==null&&(tn(t,k,Q,R),nl(t,k,Q)),Q}function Pl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fg(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<r?l:r}}function Fd(t,r){fg(t,r),(t=t.alternate)&&fg(t,r)}function mb(){return null}var dg=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ud(t){this._internalRoot=t}Rl.prototype.render=Ud.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));Cl(t,r,null,null)},Rl.prototype.unmount=Ud.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Io(function(){Cl(null,t,null,null)}),r[Gn]=null}};function Rl(t){this._internalRoot=t}Rl.prototype.unstable_scheduleHydration=function(t){if(t){var r=ls();t={blockedOn:null,target:t,priority:r};for(var l=0;l<Rr.length&&r!==0&&r<Rr[l].priority;l++);Rr.splice(l,0,t),l===0&&ha(t)}};function Vd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ol(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hg(){}function gb(t,r,l,p,k){if(k){if(typeof p=="function"){var R=p;p=function(){var pe=Pl(Q);R.call(pe)}}var Q=lg(r,p,t,0,null,!1,!1,"",hg);return t._reactRootContainer=Q,t[Gn]=Q.current,ks(t.nodeType===8?t.parentNode:t),Io(),Q}for(;k=t.lastChild;)t.removeChild(k);if(typeof p=="function"){var te=p;p=function(){var pe=Pl(ne);te.call(pe)}}var ne=jd(t,0,!1,null,null,!1,!1,"",hg);return t._reactRootContainer=ne,t[Gn]=ne.current,ks(t.nodeType===8?t.parentNode:t),Io(function(){Cl(r,ne,l,p)}),ne}function Il(t,r,l,p,k){var R=l._reactRootContainer;if(R){var Q=R;if(typeof k=="function"){var te=k;k=function(){var ne=Pl(Q);te.call(ne)}}Cl(r,Q,t,k)}else Q=gb(l,r,t,k,p);return Pl(Q)}cs=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var l=wt(r.pendingLanes);l!==0&&(ss(r,l|1),Sr(r,Rt()),(pt&6)===0&&(Va=Rt()+500,Ni()))}break;case 13:Io(function(){var p=Yn(t,1);if(p!==null){var k=lr();tn(p,t,1,k)}}),Fd(t,1)}},fa=function(t){if(t.tag===13){var r=Yn(t,134217728);if(r!==null){var l=lr();tn(r,t,134217728,l)}Fd(t,134217728)}},us=function(t){if(t.tag===13){var r=qi(t),l=Yn(t,r);if(l!==null){var p=lr();tn(l,t,r,p)}Fd(t,r)}},ls=function(){return lt},fs=function(t,r){var l=lt;try{return lt=t,r()}finally{lt=l}},ge=function(t,r,l){switch(r){case"input":if(Me(t,l),r=l.name,l.type==="radio"&&r!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<l.length;r++){var p=l[r];if(p!==t&&p.form===t.form){var k=Gu(p);if(!k)throw Error(n(90));Be(p),Me(p,k)}}}break;case"textarea":Y(t,l);break;case"select":r=l.value,r!=null&&qe(t,!!l.multiple,r,!1)}},mt=Ld,ot=Io;var yb={usingClientEntryPoint:!1,Events:[bs,Pa,Gu,vt,st,Ld]},Us={findFiberByHostInstance:ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_b={bundleType:Us.bundleType,version:Us.version,rendererPackageName:Us.rendererPackageName,rendererConfig:Us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bi(t),t===null?null:t.stateNode},findFiberByHostInstance:Us.findFiberByHostInstance||mb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ll.isDisabled&&Ll.supportsFiber)try{ho=Ll.inject(_b),Cr=Ll}catch{}}return kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yb,kr.createPortal=function(t,r){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vd(r))throw Error(n(200));return vb(t,r,null,l)},kr.createRoot=function(t,r){if(!Vd(t))throw Error(n(299));var l=!1,p="",k=dg;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onRecoverableError!==void 0&&(k=r.onRecoverableError)),r=jd(t,1,!1,null,null,l,!1,p,k),t[Gn]=r.current,ks(t.nodeType===8?t.parentNode:t),new Ud(r)},kr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=bi(r),t=t===null?null:t.stateNode,t},kr.flushSync=function(t){return Io(t)},kr.hydrate=function(t,r,l){if(!Ol(r))throw Error(n(200));return Il(null,t,r,!0,l)},kr.hydrateRoot=function(t,r,l){if(!Vd(t))throw Error(n(405));var p=l!=null&&l.hydratedSources||null,k=!1,R="",Q=dg;if(l!=null&&(l.unstable_strictMode===!0&&(k=!0),l.identifierPrefix!==void 0&&(R=l.identifierPrefix),l.onRecoverableError!==void 0&&(Q=l.onRecoverableError)),r=lg(r,null,t,1,l??null,k,!1,R,Q),t[Gn]=r.current,ks(t),p)for(t=0;t<p.length;t++)l=p[t],k=l._getVersion,k=k(l._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[l,k]:r.mutableSourceEagerHydrationData.push(l,k);return new Rl(r)},kr.render=function(t,r,l){if(!Ol(r))throw Error(n(200));return Il(null,t,r,!1,l)},kr.unmountComponentAtNode=function(t){if(!Ol(t))throw Error(n(40));return t._reactRootContainer?(Io(function(){Il(null,null,t,!1,function(){t._reactRootContainer=null,t[Gn]=null})}),!0):!1},kr.unstable_batchedUpdates=Ld,kr.unstable_renderSubtreeIntoContainer=function(t,r,l,p){if(!Ol(l))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Il(t,r,l,!1,p)},kr.version="18.3.1-next-f1338f8080-20240426",kr}var Sg;function ok(){if(Sg)return Hd.exports;Sg=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Hd.exports=Rb(),Hd.exports}var kg;function Ob(){if(kg)return Al;kg=1;var i=ok();return Al.createRoot=i.createRoot,Al.hydrateRoot=i.hydrateRoot,Al}var Ib=Ob();const Lb=Rp(Ib);ok();function hu(){return hu=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])}return i},hu.apply(this,arguments)}var Zi;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Zi||(Zi={}));const Tg="popstate";function Ab(i){i===void 0&&(i={});function e(a,s){let{pathname:o,search:c,hash:u}=a.location;return pp("",{pathname:o,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(a,s){return typeof s=="string"?s:Yl(s)}return Db(e,n,null,i)}function Ht(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Ip(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xb(){return Math.random().toString(36).substr(2,8)}function Eg(i,e){return{usr:i.state,key:i.key,idx:e}}function pp(i,e,n,a){return n===void 0&&(n=null),hu({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?Ya(e):e,{state:n,key:e&&e.key||a||xb()})}function Yl(i){let{pathname:e="/",search:n="",hash:a=""}=i;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function Ya(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substr(n),i=i.substr(0,n));let a=i.indexOf("?");a>=0&&(e.search=i.substr(a),i=i.substr(0,a)),i&&(e.pathname=i)}return e}function Db(i,e,n,a){a===void 0&&(a={});let{window:s=document.defaultView,v5Compat:o=!1}=a,c=s.history,u=Zi.Pop,f=null,h=v();h==null&&(h=0,c.replaceState(hu({},c.state,{idx:h}),""));function v(){return(c.state||{idx:null}).idx}function m(){u=Zi.Pop;let T=v(),N=T==null?null:T-h;h=T,f&&f({action:u,location:E.location,delta:N})}function g(T,N){u=Zi.Push;let j=pp(E.location,T,N);h=v()+1;let x=Eg(j,h),O=E.createHref(j);try{c.pushState(x,"",O)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(O)}o&&f&&f({action:u,location:E.location,delta:1})}function _(T,N){u=Zi.Replace;let j=pp(E.location,T,N);h=v();let x=Eg(j,h),O=E.createHref(j);c.replaceState(x,"",O),o&&f&&f({action:u,location:E.location,delta:0})}function w(T){let N=s.location.origin!=="null"?s.location.origin:s.location.href,j=typeof T=="string"?T:Yl(T);return j=j.replace(/ $/,"%20"),Ht(N,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,N)}let E={get action(){return u},get location(){return i(s,c)},listen(T){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(Tg,m),f=T,()=>{s.removeEventListener(Tg,m),f=null}},createHref(T){return e(s,T)},createURL:w,encodeLocation(T){let N=w(T);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:g,replace:_,go(T){return c.go(T)}};return E}var bg;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(bg||(bg={}));function Mb(i,e,n){return n===void 0&&(n="/"),Nb(i,e,n)}function Nb(i,e,n,a){let s=typeof e=="string"?Ya(e):e,o=Lp(s.pathname||"/",n);if(o==null)return null;let c=ak(i);jb(c);let u=null;for(let f=0;u==null&&f<c.length;++f){let h=Qb(o);u=$b(c[f],h)}return u}function ak(i,e,n,a){e===void 0&&(e=[]),n===void 0&&(n=[]),a===void 0&&(a="");let s=(o,c,u)=>{let f={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};f.relativePath.startsWith("/")&&(Ht(f.relativePath.startsWith(a),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(a.length));let h=to([a,f.relativePath]),v=n.concat(f);o.children&&o.children.length>0&&(Ht(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),ak(o.children,e,v,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:Wb(h,o.index),routesMeta:v})};return i.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,c);else for(let f of sk(o.path))s(o,c,f)}),e}function sk(i){let e=i.split("/");if(e.length===0)return[];let[n,...a]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(a.length===0)return s?[o,""]:[o];let c=sk(a.join("/")),u=[];return u.push(...c.map(f=>f===""?o:[o,f].join("/"))),s&&u.push(...c),u.map(f=>i.startsWith("/")&&f===""?"/":f)}function jb(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:zb(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}const Fb=/^:[\w-]+$/,Ub=3,Vb=2,Bb=1,qb=10,Hb=-2,Cg=i=>i==="*";function Wb(i,e){let n=i.split("/"),a=n.length;return n.some(Cg)&&(a+=Hb),e&&(a+=Vb),n.filter(s=>!Cg(s)).reduce((s,o)=>s+(Fb.test(o)?Ub:o===""?Bb:qb),a)}function zb(i,e){return i.length===e.length&&i.slice(0,-1).every((a,s)=>a===e[s])?i[i.length-1]-e[e.length-1]:0}function $b(i,e,n){let{routesMeta:a}=i,s={},o="/",c=[];for(let u=0;u<a.length;++u){let f=a[u],h=u===a.length-1,v=o==="/"?e:e.slice(o.length)||"/",m=Gb({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},v),g=f.route;if(!m)return null;Object.assign(s,m.params),c.push({params:s,pathname:to([o,m.pathname]),pathnameBase:eC(to([o,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(o=to([o,m.pathnameBase]))}return c}function Gb(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,a]=Kb(i.path,i.caseSensitive,i.end),s=e.match(n);if(!s)return null;let o=s[0],c=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:a.reduce((h,v,m)=>{let{paramName:g,isOptional:_}=v;if(g==="*"){let E=u[m]||"";c=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const w=u[m];return _&&!w?h[g]=void 0:h[g]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:c,pattern:i}}function Kb(i,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ip(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let a=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,f)=>(a.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(a.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function Qb(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ip(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function Lp(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=i.charAt(n);return a&&a!=="/"?null:i.slice(n)||"/"}const Jb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yb=i=>Jb.test(i);function Xb(i,e){e===void 0&&(e="/");let{pathname:n,search:a="",hash:s=""}=typeof i=="string"?Ya(i):i,o;if(n)if(Yb(n))o=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),Ip(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+n))}n.startsWith("/")?o=Pg(n.substring(1),"/"):o=Pg(n,e)}else o=e;return{pathname:o,search:tC(a),hash:rC(s)}}function Pg(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function $d(i,e,n,a){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Zb(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ck(i,e){let n=Zb(i);return e?n.map((a,s)=>s===n.length-1?a.pathname:a.pathnameBase):n.map(a=>a.pathnameBase)}function uk(i,e,n,a){a===void 0&&(a=!1);let s;typeof i=="string"?s=Ya(i):(s=hu({},i),Ht(!s.pathname||!s.pathname.includes("?"),$d("?","pathname","search",s)),Ht(!s.pathname||!s.pathname.includes("#"),$d("#","pathname","hash",s)),Ht(!s.search||!s.search.includes("#"),$d("#","search","hash",s)));let o=i===""||s.pathname==="",c=o?"/":s.pathname,u;if(c==null)u=n;else{let m=e.length-1;if(!a&&c.startsWith("..")){let g=c.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}u=m>=0?e[m]:"/"}let f=Xb(s,u),h=c&&c!=="/"&&c.endsWith("/"),v=(o||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||v)&&(f.pathname+="/"),f}const to=i=>i.join("/").replace(/\/\/+/g,"/"),eC=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),tC=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,rC=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function nC(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const lk=["post","put","patch","delete"];new Set(lk);const iC=["get",...lk];new Set(iC);function pu(){return pu=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])}return i},pu.apply(this,arguments)}const Ap=Ie.createContext(null),oC=Ie.createContext(null),ra=Ie.createContext(null),uf=Ie.createContext(null),so=Ie.createContext({outlet:null,matches:[],isDataRoute:!1}),fk=Ie.createContext(null);function aC(i,e){let{relative:n}=e===void 0?{}:e;wu()||Ht(!1);let{basename:a,navigator:s}=Ie.useContext(ra),{hash:o,pathname:c,search:u}=hk(i,{relative:n}),f=c;return a!=="/"&&(f=c==="/"?a:to([a,c])),s.createHref({pathname:f,search:u,hash:o})}function wu(){return Ie.useContext(uf)!=null}function lf(){return wu()||Ht(!1),Ie.useContext(uf).location}function dk(i){Ie.useContext(ra).static||Ie.useLayoutEffect(i)}function sC(){let{isDataRoute:i}=Ie.useContext(so);return i?SC():cC()}function cC(){wu()||Ht(!1);let i=Ie.useContext(Ap),{basename:e,future:n,navigator:a}=Ie.useContext(ra),{matches:s}=Ie.useContext(so),{pathname:o}=lf(),c=JSON.stringify(ck(s,n.v7_relativeSplatPath)),u=Ie.useRef(!1);return dk(()=>{u.current=!0}),Ie.useCallback(function(h,v){if(v===void 0&&(v={}),!u.current)return;if(typeof h=="number"){a.go(h);return}let m=uk(h,JSON.parse(c),o,v.relative==="path");i==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:to([e,m.pathname])),(v.replace?a.replace:a.push)(m,v.state,v)},[e,a,c,o,i])}function uC(){let{matches:i}=Ie.useContext(so),e=i[i.length-1];return e?e.params:{}}function hk(i,e){let{relative:n}=e===void 0?{}:e,{future:a}=Ie.useContext(ra),{matches:s}=Ie.useContext(so),{pathname:o}=lf(),c=JSON.stringify(ck(s,a.v7_relativeSplatPath));return Ie.useMemo(()=>uk(i,JSON.parse(c),o,n==="path"),[i,c,o,n])}function lC(i,e){return fC(i,e)}function fC(i,e,n,a){wu()||Ht(!1);let{navigator:s}=Ie.useContext(ra),{matches:o}=Ie.useContext(so),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let h=lf(),v;if(e){var m;let T=typeof e=="string"?Ya(e):e;f==="/"||(m=T.pathname)!=null&&m.startsWith(f)||Ht(!1),v=T}else v=h;let g=v.pathname||"/",_=g;if(f!=="/"){let T=f.replace(/^\//,"").split("/");_="/"+g.replace(/^\//,"").split("/").slice(T.length).join("/")}let w=Mb(i,{pathname:_}),E=mC(w&&w.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:to([f,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:to([f,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,n,a);return e&&E?Ie.createElement(uf.Provider,{value:{location:pu({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:Zi.Pop}},E):E}function dC(){let i=wC(),e=nC(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Ie.createElement(Ie.Fragment,null,Ie.createElement("h2",null,"Unexpected Application Error!"),Ie.createElement("h3",{style:{fontStyle:"italic"}},e),n?Ie.createElement("pre",{style:s},n):null,null)}const hC=Ie.createElement(dC,null);class pC extends Ie.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?Ie.createElement(so.Provider,{value:this.props.routeContext},Ie.createElement(fk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vC(i){let{routeContext:e,match:n,children:a}=i,s=Ie.useContext(Ap);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),Ie.createElement(so.Provider,{value:e},a)}function mC(i,e,n,a){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),a===void 0&&(a=null),i==null){var o;if(!n)return null;if(n.errors)i=n.matches;else if((o=a)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let c=i,u=(s=n)==null?void 0:s.errors;if(u!=null){let v=c.findIndex(m=>m.route.id&&u?.[m.route.id]!==void 0);v>=0||Ht(!1),c=c.slice(0,Math.min(c.length,v+1))}let f=!1,h=-1;if(n&&a&&a.v7_partialHydration)for(let v=0;v<c.length;v++){let m=c[v];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=v),m.route.id){let{loaderData:g,errors:_}=n,w=m.route.loader&&g[m.route.id]===void 0&&(!_||_[m.route.id]===void 0);if(m.route.lazy||w){f=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}return c.reduceRight((v,m,g)=>{let _,w=!1,E=null,T=null;n&&(_=u&&m.route.id?u[m.route.id]:void 0,E=m.route.errorElement||hC,f&&(h<0&&g===0?(kC("route-fallback"),w=!0,T=null):h===g&&(w=!0,T=m.route.hydrateFallbackElement||null)));let N=e.concat(c.slice(0,g+1)),j=()=>{let x;return _?x=E:w?x=T:m.route.Component?x=Ie.createElement(m.route.Component,null):m.route.element?x=m.route.element:x=v,Ie.createElement(vC,{match:m,routeContext:{outlet:v,matches:N,isDataRoute:n!=null},children:x})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?Ie.createElement(pC,{location:n.location,revalidation:n.revalidation,component:E,error:_,children:j(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):j()},null)}var pk=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(pk||{}),vk=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(vk||{});function gC(i){let e=Ie.useContext(Ap);return e||Ht(!1),e}function yC(i){let e=Ie.useContext(oC);return e||Ht(!1),e}function _C(i){let e=Ie.useContext(so);return e||Ht(!1),e}function mk(i){let e=_C(),n=e.matches[e.matches.length-1];return n.route.id||Ht(!1),n.route.id}function wC(){var i;let e=Ie.useContext(fk),n=yC(),a=mk();return e!==void 0?e:(i=n.errors)==null?void 0:i[a]}function SC(){let{router:i}=gC(pk.UseNavigateStable),e=mk(vk.UseNavigateStable),n=Ie.useRef(!1);return dk(()=>{n.current=!0}),Ie.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?i.navigate(s):i.navigate(s,pu({fromRouteId:e},o)))},[i,e])}const Rg={};function kC(i,e,n){Rg[i]||(Rg[i]=!0)}function TC(i,e){i?.v7_startTransition,i?.v7_relativeSplatPath}function vp(i){Ht(!1)}function EC(i){let{basename:e="/",children:n=null,location:a,navigationType:s=Zi.Pop,navigator:o,static:c=!1,future:u}=i;wu()&&Ht(!1);let f=e.replace(/^\/*/,"/"),h=Ie.useMemo(()=>({basename:f,navigator:o,static:c,future:pu({v7_relativeSplatPath:!1},u)}),[f,u,o,c]);typeof a=="string"&&(a=Ya(a));let{pathname:v="/",search:m="",hash:g="",state:_=null,key:w="default"}=a,E=Ie.useMemo(()=>{let T=Lp(v,f);return T==null?null:{location:{pathname:T,search:m,hash:g,state:_,key:w},navigationType:s}},[f,v,m,g,_,w,s]);return E==null?null:Ie.createElement(ra.Provider,{value:h},Ie.createElement(uf.Provider,{children:n,value:E}))}function bC(i){let{children:e,location:n}=i;return lC(mp(e),n)}new Promise(()=>{});function mp(i,e){e===void 0&&(e=[]);let n=[];return Ie.Children.forEach(i,(a,s)=>{if(!Ie.isValidElement(a))return;let o=[...e,s];if(a.type===Ie.Fragment){n.push.apply(n,mp(a.props.children,o));return}a.type!==vp&&Ht(!1),!a.props.index||!a.props.children||Ht(!1);let c={id:a.props.id||o.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(c.children=mp(a.props.children,o)),n.push(c)}),n}function gp(){return gp=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])}return i},gp.apply(this,arguments)}function CC(i,e){if(i==null)return{};var n={},a=Object.keys(i),s,o;for(o=0;o<a.length;o++)s=a[o],!(e.indexOf(s)>=0)&&(n[s]=i[s]);return n}function PC(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function RC(i,e){return i.button===0&&(!e||e==="_self")&&!PC(i)}const OC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IC="6";try{window.__reactRouterVersion=IC}catch{}const LC="startTransition",Og=bb[LC];function AC(i){let{basename:e,children:n,future:a,window:s}=i,o=Ie.useRef();o.current==null&&(o.current=Ab({window:s,v5Compat:!0}));let c=o.current,[u,f]=Ie.useState({action:c.action,location:c.location}),{v7_startTransition:h}=a||{},v=Ie.useCallback(m=>{h&&Og?Og(()=>f(m)):f(m)},[f,h]);return Ie.useLayoutEffect(()=>c.listen(v),[c,v]),Ie.useEffect(()=>TC(a),[a]),Ie.createElement(EC,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:c,future:a})}const xC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",DC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ig=Ie.forwardRef(function(e,n){let{onClick:a,relative:s,reloadDocument:o,replace:c,state:u,target:f,to:h,preventScrollReset:v,viewTransition:m}=e,g=CC(e,OC),{basename:_}=Ie.useContext(ra),w,E=!1;if(typeof h=="string"&&DC.test(h)&&(w=h,xC))try{let x=new URL(window.location.href),O=h.startsWith("//")?new URL(x.protocol+h):new URL(h),L=Lp(O.pathname,_);O.origin===x.origin&&L!=null?h=L+O.search+O.hash:E=!0}catch{}let T=aC(h,{relative:s}),N=MC(h,{replace:c,state:u,target:f,preventScrollReset:v,relative:s,viewTransition:m});function j(x){a&&a(x),x.defaultPrevented||N(x)}return Ie.createElement("a",gp({},g,{href:w||T,onClick:E||o?a:j,ref:n,target:f}))});var Lg;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(Lg||(Lg={}));var Ag;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(Ag||(Ag={}));function MC(i,e){let{target:n,replace:a,state:s,preventScrollReset:o,relative:c,viewTransition:u}=e===void 0?{}:e,f=sC(),h=lf(),v=hk(i,{relative:c});return Ie.useCallback(m=>{if(RC(m,n)){m.preventDefault();let g=a!==void 0?a:Yl(h)===Yl(v);f(i,{replace:g,state:s,preventScrollReset:o,relative:c,viewTransition:u})}},[h,f,v,a,s,n,i,o,c,u])}const NC=()=>{};var xg={};const gk=function(i){const e=[];let n=0;for(let a=0;a<i.length;a++){let s=i.charCodeAt(a);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&a+1<i.length&&(i.charCodeAt(a+1)&64512)===56320?(s=65536+((s&1023)<<10)+(i.charCodeAt(++a)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},jC=function(i){const e=[];let n=0,a=0;for(;n<i.length;){const s=i[n++];if(s<128)e[a++]=String.fromCharCode(s);else if(s>191&&s<224){const o=i[n++];e[a++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=i[n++],c=i[n++],u=i[n++],f=((s&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[a++]=String.fromCharCode(55296+(f>>10)),e[a++]=String.fromCharCode(56320+(f&1023))}else{const o=i[n++],c=i[n++];e[a++]=String.fromCharCode((s&15)<<12|(o&63)<<6|c&63)}}return e.join("")},yk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let s=0;s<i.length;s+=3){const o=i[s],c=s+1<i.length,u=c?i[s+1]:0,f=s+2<i.length,h=f?i[s+2]:0,v=o>>2,m=(o&3)<<4|u>>4;let g=(u&15)<<2|h>>6,_=h&63;f||(_=64,c||(g=64)),a.push(n[v],n[m],n[g],n[_])}return a.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(gk(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):jC(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let s=0;s<i.length;){const o=n[i.charAt(s++)],u=s<i.length?n[i.charAt(s)]:0;++s;const h=s<i.length?n[i.charAt(s)]:64;++s;const m=s<i.length?n[i.charAt(s)]:64;if(++s,o==null||u==null||h==null||m==null)throw new FC;const g=o<<2|u>>4;if(a.push(g),h!==64){const _=u<<4&240|h>>2;if(a.push(_),m!==64){const w=h<<6&192|m;a.push(w)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class FC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UC=function(i){const e=gk(i);return yk.encodeByteArray(e,!0)},Xl=function(i){return UC(i).replace(/\./g,"")},_k=function(i){try{return yk.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function VC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const BC=()=>VC().__FIREBASE_DEFAULTS__,qC=()=>{if(typeof process>"u"||typeof xg>"u")return;const i=xg.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},HC=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&_k(i[1]);return e&&JSON.parse(e)},xp=()=>{try{return NC()||BC()||qC()||HC()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},wk=i=>xp()?.emulatorHosts?.[i],Sk=i=>{const e=wk(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},kk=()=>xp()?.config,Tk=i=>xp()?.[`_${i}`];class WC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}function na(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dp(i){return(await fetch(i,{credentials:"include"})).ok}function zC(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",s=i.iat||0,o=i.sub||i.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${a}`,aud:a,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Xl(JSON.stringify(n)),Xl(JSON.stringify(c)),""].join(".")}const cu={};function $C(){const i={prod:[],emulator:[]};for(const e of Object.keys(cu))cu[e]?i.emulator.push(e):i.prod.push(e);return i}function GC(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Dg=!1;function Mp(i,e){if(typeof window>"u"||typeof document>"u"||!na(window.location.host)||cu[i]===e||cu[i]||Dg)return;cu[i]=e;function n(g){return`__firebase__banner__${g}`}const a="__firebase__banner",o=$C().prod.length>0;function c(){const g=document.getElementById(a);g&&g.remove()}function u(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function f(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Dg=!0,c()},g}function v(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=GC(a),_=n("text"),w=document.getElementById(_)||document.createElement("span"),E=n("learnmore"),T=document.getElementById(E)||document.createElement("a"),N=n("preprendIcon"),j=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const x=g.element;u(x),v(T,E);const O=h();f(j,N),x.append(j,w,T,O),document.body.appendChild(x)}o?(w.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function dr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dr())}function QC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JC(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function YC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XC(){const i=dr();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function ZC(){try{return typeof indexedDB=="object"}catch{return!1}}function eP(){return new Promise((i,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(a);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(a),i(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const tP="FirebaseError";class Un extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=tP,Object.setPrototypeOf(this,Un.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Su.prototype.create)}}class Su{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],c=o?rP(o,a):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new Un(s,u,a)}}function rP(i,e){return i.replace(nP,(n,a)=>{const s=e[a];return s!=null?String(s):`<${a}?>`})}const nP=/\{\$([^}]+)}/g;function iP(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Xo(i,e){if(i===e)return!0;const n=Object.keys(i),a=Object.keys(e);for(const s of n){if(!a.includes(s))return!1;const o=i[s],c=e[s];if(Mg(o)&&Mg(c)){if(!Xo(o,c))return!1}else if(o!==c)return!1}for(const s of a)if(!n.includes(s))return!1;return!0}function Mg(i){return i!==null&&typeof i=="object"}function ku(i){const e=[];for(const[n,a]of Object.entries(i))Array.isArray(a)?a.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function au(i){const e={};return i.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[s,o]=a.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function su(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function oP(i,e){const n=new aP(i,e);return n.subscribe.bind(n)}class aP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let s;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");sP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:a},s.next===void 0&&(s.next=Gd),s.error===void 0&&(s.error=Gd),s.complete===void 0&&(s.complete=Gd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sP(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Gd(){}function Mr(i){return i&&i._delegate?i._delegate:i}class io{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Go="[DEFAULT]";class cP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new WC;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&a.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lP(e))try{this.getOrInitializeService({instanceIdentifier:Go})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});a.resolve(o)}catch{}}}}clearInstance(e=Go){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Go){return this.instances.has(e)}getOptions(e=Go){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);a===u&&c.resolve(s)}return s}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(a)??new Set;s.add(e),this.onInitCallbacks.set(a,s);const o=this.instances.get(a);return o&&e(o,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const s of a)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:uP(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Go){return this.component?this.component.multipleInstances?e:Go:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uP(i){return i===Go?void 0:i}function lP(i){return i.instantiationMode==="EAGER"}class fP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var kt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(kt||(kt={}));const dP={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},hP=kt.INFO,pP={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},vP=(i,e,...n)=>{if(e<i.logLevel)return;const a=new Date().toISOString(),s=pP[e];if(s)console[s](`[${a}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Np{constructor(e){this.name=e,this._logLevel=hP,this._logHandler=vP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...e),this._logHandler(this,kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...e),this._logHandler(this,kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...e),this._logHandler(this,kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...e),this._logHandler(this,kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...e),this._logHandler(this,kt.ERROR,...e)}}const mP=(i,e)=>e.some(n=>i instanceof n);let Ng,jg;function gP(){return Ng||(Ng=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yP(){return jg||(jg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ek=new WeakMap,yp=new WeakMap,bk=new WeakMap,Kd=new WeakMap,jp=new WeakMap;function _P(i){const e=new Promise((n,a)=>{const s=()=>{i.removeEventListener("success",o),i.removeEventListener("error",c)},o=()=>{n(ro(i.result)),s()},c=()=>{a(i.error),s()};i.addEventListener("success",o),i.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&Ek.set(n,i)}).catch(()=>{}),jp.set(e,i),e}function wP(i){if(yp.has(i))return;const e=new Promise((n,a)=>{const s=()=>{i.removeEventListener("complete",o),i.removeEventListener("error",c),i.removeEventListener("abort",c)},o=()=>{n(),s()},c=()=>{a(i.error||new DOMException("AbortError","AbortError")),s()};i.addEventListener("complete",o),i.addEventListener("error",c),i.addEventListener("abort",c)});yp.set(i,e)}let _p={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return yp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||bk.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ro(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function SP(i){_p=i(_p)}function kP(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=i.call(Qd(this),e,...n);return bk.set(a,e.sort?e.sort():[e]),ro(a)}:yP().includes(i)?function(...e){return i.apply(Qd(this),e),ro(Ek.get(this))}:function(...e){return ro(i.apply(Qd(this),e))}}function TP(i){return typeof i=="function"?kP(i):(i instanceof IDBTransaction&&wP(i),mP(i,gP())?new Proxy(i,_p):i)}function ro(i){if(i instanceof IDBRequest)return _P(i);if(Kd.has(i))return Kd.get(i);const e=TP(i);return e!==i&&(Kd.set(i,e),jp.set(e,i)),e}const Qd=i=>jp.get(i);function EP(i,e,{blocked:n,upgrade:a,blocking:s,terminated:o}={}){const c=indexedDB.open(i,e),u=ro(c);return a&&c.addEventListener("upgradeneeded",f=>{a(ro(c.result),f.oldVersion,f.newVersion,ro(c.transaction),f)}),n&&c.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),u.then(f=>{o&&f.addEventListener("close",()=>o()),s&&f.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const bP=["get","getKey","getAll","getAllKeys","count"],CP=["put","add","delete","clear"],Jd=new Map;function Fg(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Jd.get(e))return Jd.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,s=CP.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(s||bP.includes(n)))return;const o=async function(c,...u){const f=this.transaction(c,s?"readwrite":"readonly");let h=f.store;return a&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),s&&f.done]))[0]};return Jd.set(e,o),o}SP(i=>({...i,get:(e,n,a)=>Fg(e,n)||i.get(e,n,a),has:(e,n)=>!!Fg(e,n)||i.has(e,n)}));class PP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RP(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function RP(i){return i.getComponent()?.type==="VERSION"}const wp="@firebase/app",Ug="0.14.6";const Si=new Np("@firebase/app"),OP="@firebase/app-compat",IP="@firebase/analytics-compat",LP="@firebase/analytics",AP="@firebase/app-check-compat",xP="@firebase/app-check",DP="@firebase/auth",MP="@firebase/auth-compat",NP="@firebase/database",jP="@firebase/data-connect",FP="@firebase/database-compat",UP="@firebase/functions",VP="@firebase/functions-compat",BP="@firebase/installations",qP="@firebase/installations-compat",HP="@firebase/messaging",WP="@firebase/messaging-compat",zP="@firebase/performance",$P="@firebase/performance-compat",GP="@firebase/remote-config",KP="@firebase/remote-config-compat",QP="@firebase/storage",JP="@firebase/storage-compat",YP="@firebase/firestore",XP="@firebase/ai",ZP="@firebase/firestore-compat",e0="firebase",t0="12.6.0";const Sp="[DEFAULT]",r0={[wp]:"fire-core",[OP]:"fire-core-compat",[LP]:"fire-analytics",[IP]:"fire-analytics-compat",[xP]:"fire-app-check",[AP]:"fire-app-check-compat",[DP]:"fire-auth",[MP]:"fire-auth-compat",[NP]:"fire-rtdb",[jP]:"fire-data-connect",[FP]:"fire-rtdb-compat",[UP]:"fire-fn",[VP]:"fire-fn-compat",[BP]:"fire-iid",[qP]:"fire-iid-compat",[HP]:"fire-fcm",[WP]:"fire-fcm-compat",[zP]:"fire-perf",[$P]:"fire-perf-compat",[GP]:"fire-rc",[KP]:"fire-rc-compat",[QP]:"fire-gcs",[JP]:"fire-gcs-compat",[YP]:"fire-fst",[ZP]:"fire-fst-compat",[XP]:"fire-vertex","fire-js":"fire-js",[e0]:"fire-js-all"};const vu=new Map,n0=new Map,kp=new Map;function Vg(i,e){try{i.container.addComponent(e)}catch(n){Si.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Zo(i){const e=i.name;if(kp.has(e))return Si.debug(`There were multiple attempts to register component ${e}.`),!1;kp.set(e,i);for(const n of vu.values())Vg(n,i);for(const n of n0.values())Vg(n,i);return!0}function ff(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Dr(i){return i==null?!1:i.settings!==void 0}const i0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},no=new Su("app","Firebase",i0);class o0{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw no.create("app-deleted",{appName:this._name})}}const Xa=t0;function Ck(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const a={name:Sp,automaticDataCollectionEnabled:!0,...e},s=a.name;if(typeof s!="string"||!s)throw no.create("bad-app-name",{appName:String(s)});if(n||(n=kk()),!n)throw no.create("no-options");const o=vu.get(s);if(o){if(Xo(n,o.options)&&Xo(a,o.config))return o;throw no.create("duplicate-app",{appName:s})}const c=new fP(s);for(const f of kp.values())c.addComponent(f);const u=new o0(n,a,c);return vu.set(s,u),u}function df(i=Sp){const e=vu.get(i);if(!e&&i===Sp&&kk())return Ck();if(!e)throw no.create("no-app",{appName:i});return e}function a0(){return Array.from(vu.values())}function Nn(i,e,n){let a=r0[i]??i;n&&(a+=`-${n}`);const s=a.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${a}" with version "${e}":`];s&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Si.warn(c.join(" "));return}Zo(new io(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const s0="firebase-heartbeat-database",c0=1,mu="firebase-heartbeat-store";let Yd=null;function Pk(){return Yd||(Yd=EP(s0,c0,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(mu)}catch(n){console.warn(n)}}}}).catch(i=>{throw no.create("idb-open",{originalErrorMessage:i.message})})),Yd}async function u0(i){try{const n=(await Pk()).transaction(mu),a=await n.objectStore(mu).get(Rk(i));return await n.done,a}catch(e){if(e instanceof Un)Si.warn(e.message);else{const n=no.create("idb-get",{originalErrorMessage:e?.message});Si.warn(n.message)}}}async function Bg(i,e){try{const a=(await Pk()).transaction(mu,"readwrite");await a.objectStore(mu).put(e,Rk(i)),await a.done}catch(n){if(n instanceof Un)Si.warn(n.message);else{const a=no.create("idb-set",{originalErrorMessage:n?.message});Si.warn(a.message)}}}function Rk(i){return`${i.name}!${i.options.appId}`}const l0=1024,f0=30;class d0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new p0(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=qg();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:n}),this._heartbeatsCache.heartbeats.length>f0){const s=v0(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Si.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=qg(),{heartbeatsToSend:n,unsentEntries:a}=h0(this._heartbeatsCache.heartbeats),s=Xl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Si.warn(e),""}}}function qg(){return new Date().toISOString().substring(0,10)}function h0(i,e=l0){const n=[];let a=i.slice();for(const s of i){const o=n.find(c=>c.agent===s.agent);if(o){if(o.dates.push(s.date),Hg(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Hg(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class p0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZC()?eP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await u0(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Bg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Bg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Hg(i){return Xl(JSON.stringify({version:2,heartbeats:i})).length}function v0(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let a=1;a<i.length;a++)i[a].date<n&&(n=i[a].date,e=a);return e}function m0(i){Zo(new io("platform-logger",e=>new PP(e),"PRIVATE")),Zo(new io("heartbeat",e=>new d0(e),"PRIVATE")),Nn(wp,Ug,i),Nn(wp,Ug,"esm2020"),Nn("fire-js","")}m0("");var g0="firebase",y0="12.6.0";Nn(g0,y0,"app");function Ok(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _0=Ok,Ik=new Su("auth","Firebase",Ok());const Zl=new Np("@firebase/auth");function w0(i,...e){Zl.logLevel<=kt.WARN&&Zl.warn(`Auth (${Xa}): ${i}`,...e)}function Wl(i,...e){Zl.logLevel<=kt.ERROR&&Zl.error(`Auth (${Xa}): ${i}`,...e)}function sn(i,...e){throw Fp(i,...e)}function jn(i,...e){return Fp(i,...e)}function Lk(i,e,n){const a={..._0(),[e]:n};return new Su("auth","Firebase",a).create(e,{appName:i.name})}function wi(i){return Lk(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fp(i,...e){if(typeof i!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=i.name),i._errorFactory.create(n,...a)}return Ik.create(i,...e)}function rt(i,e,...n){if(!i)throw Fp(e,...n)}function yi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Wl(e),new Error(e)}function ki(i,e){i||yi(e)}function Tp(){return typeof self<"u"&&self.location?.href||""}function S0(){return Wg()==="http:"||Wg()==="https:"}function Wg(){return typeof self<"u"&&self.location?.protocol||null}function k0(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(S0()||JC()||"connection"in navigator)?navigator.onLine:!0}function T0(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Tu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ki(n>e,"Short delay should be less than long delay!"),this.isMobile=KC()||YC()}get(){return k0()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Up(i,e){ki(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Ak{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const E0={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const b0=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],C0=new Tu(3e4,6e4);function co(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function uo(i,e,n,a,s={}){return xk(i,s,async()=>{let o={},c={};a&&(e==="GET"?c=a:o={body:JSON.stringify(a)});const u=ku({key:i.config.apiKey,...c}).slice(1),f=await i._getAdditionalHeaders();f["Content-Type"]="application/json",i.languageCode&&(f["X-Firebase-Locale"]=i.languageCode);const h={method:e,headers:f,...o};return QC()||(h.referrerPolicy="no-referrer"),i.emulatorConfig&&na(i.emulatorConfig.host)&&(h.credentials="include"),Ak.fetch()(await Dk(i,i.config.apiHost,n,u),h)})}async function xk(i,e,n){i._canInitEmulator=!1;const a={...E0,...e};try{const s=new R0(i),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw xl(i,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[f,h]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw xl(i,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw xl(i,"email-already-in-use",c);if(f==="USER_DISABLED")throw xl(i,"user-disabled",c);const v=a[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Lk(i,v,h);sn(i,v)}}catch(s){if(s instanceof Un)throw s;sn(i,"network-request-failed",{message:String(s)})}}async function Eu(i,e,n,a,s={}){const o=await uo(i,e,n,a,s);return"mfaPendingCredential"in o&&sn(i,"multi-factor-auth-required",{_serverResponse:o}),o}async function Dk(i,e,n,a){const s=`${e}${n}?${a}`,o=i,c=o.config.emulator?Up(i.config,s):`${i.config.apiScheme}://${s}`;return b0.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function P0(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class R0{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(jn(this.auth,"network-request-failed")),C0.get())})}}function xl(i,e,n){const a={appName:i.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const s=jn(i,e,a);return s.customData._tokenResponse=n,s}function zg(i){return i!==void 0&&i.enterprise!==void 0}class O0{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return P0(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function I0(i,e){return uo(i,"GET","/v2/recaptchaConfig",co(i,e))}async function L0(i,e){return uo(i,"POST","/v1/accounts:delete",e)}async function ef(i,e){return uo(i,"POST","/v1/accounts:lookup",e)}function uu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function A0(i,e=!1){const n=Mr(i),a=await n.getIdToken(e),s=Vp(a);rt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,c=o?.sign_in_provider;return{claims:s,token:a,authTime:uu(Xd(s.auth_time)),issuedAtTime:uu(Xd(s.iat)),expirationTime:uu(Xd(s.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Xd(i){return Number(i)*1e3}function Vp(i){const[e,n,a]=i.split(".");if(e===void 0||n===void 0||a===void 0)return Wl("JWT malformed, contained fewer than 3 sections"),null;try{const s=_k(n);return s?JSON.parse(s):(Wl("Failed to decode base64 JWT payload"),null)}catch(s){return Wl("Caught error parsing JWT payload as JSON",s?.toString()),null}}function $g(i){const e=Vp(i);return rt(e,"internal-error"),rt(typeof e.exp<"u","internal-error"),rt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function gu(i,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof Un&&x0(a)&&i.auth.currentUser===i&&await i.auth.signOut(),a}}function x0({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class D0{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ep{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uu(this.lastLoginAt),this.creationTime=uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function tf(i){const e=i.auth,n=await i.getIdToken(),a=await gu(i,ef(e,{idToken:n}));rt(a?.users.length,e,"internal-error");const s=a.users[0];i._notifyReloadListener(s);const o=s.providerUserInfo?.length?Mk(s.providerUserInfo):[],c=N0(i.providerData,o),u=i.isAnonymous,f=!(i.email&&s.passwordHash)&&!c?.length,h=u?f:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Ep(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(i,v)}async function M0(i){const e=Mr(i);await tf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function N0(i,e){return[...i.filter(a=>!e.some(s=>s.providerId===a.providerId)),...e]}function Mk(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function j0(i,e){const n=await xk(i,{},async()=>{const a=ku({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=i.config,c=await Dk(i,s,"/v1/token",`key=${o}`),u=await i._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:a};return i.emulatorConfig&&na(i.emulatorConfig.host)&&(f.credentials="include"),Ak.fetch()(c,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function F0(i,e){return uo(i,"POST","/v2/accounts:revokeToken",co(i,e))}class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){rt(e.idToken,"internal-error"),rt(typeof e.idToken<"u","internal-error"),rt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$g(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){rt(e.length!==0,"internal-error");const n=$g(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(rt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:s,expiresIn:o}=await j0(e,n);this.updateTokensAndExpiration(a,s,Number(o))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:s,expirationTime:o}=n,c=new Wa;return a&&(rt(typeof a=="string","internal-error",{appName:e}),c.refreshToken=a),s&&(rt(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),o&&(rt(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return yi("not implemented")}}function $i(i,e){rt(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class on{constructor({uid:e,auth:n,stsTokenManager:a,...s}){this.providerId="firebase",this.proactiveRefresh=new D0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ep(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await gu(this,this.stsTokenManager.getToken(this.auth,e));return rt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return A0(this,e)}reload(){return M0(this)}_assign(e){this!==e&&(rt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new on({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await tf(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dr(this.auth.app))return Promise.reject(wi(this.auth));const e=await this.getIdToken();return await gu(this,L0(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,c=n.photoURL??void 0,u=n.tenantId??void 0,f=n._redirectEventId??void 0,h=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:_,providerData:w,stsTokenManager:E}=n;rt(m&&E,e,"internal-error");const T=Wa.fromJSON(this.name,E);rt(typeof m=="string",e,"internal-error"),$i(a,e.name),$i(s,e.name),rt(typeof g=="boolean",e,"internal-error"),rt(typeof _=="boolean",e,"internal-error"),$i(o,e.name),$i(c,e.name),$i(u,e.name),$i(f,e.name),$i(h,e.name),$i(v,e.name);const N=new on({uid:m,auth:e,email:s,emailVerified:g,displayName:a,isAnonymous:_,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:T,createdAt:h,lastLoginAt:v});return w&&Array.isArray(w)&&(N.providerData=w.map(j=>({...j}))),f&&(N._redirectEventId=f),N}static async _fromIdTokenResponse(e,n,a=!1){const s=new Wa;s.updateFromServerResponse(n);const o=new on({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:a});return await tf(o),o}static async _fromGetAccountInfoResponse(e,n,a){const s=n.users[0];rt(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?Mk(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!o?.length,u=new Wa;u.updateFromIdToken(a);const f=new on({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Ep(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(f,h),f}}const Gg=new Map;function _i(i){ki(i instanceof Function,"Expected a class definition");let e=Gg.get(i);return e?(ki(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Gg.set(i,e),e)}class Nk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Nk.type="NONE";const Kg=Nk;function zl(i,e,n){return`firebase:${i}:${e}:${n}`}class za{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:s,name:o}=this.auth;this.fullUserKey=zl(this.userKey,s.apiKey,o),this.fullPersistenceKey=zl("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ef(this.auth,{idToken:e}).catch(()=>{});return n?on._fromGetAccountInfoResponse(this.auth,n,e):null}return on._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new za(_i(Kg),e,a);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=s[0]||_i(Kg);const c=zl(a,e.config.apiKey,e.name);let u=null;for(const h of n)try{const v=await h._get(c);if(v){let m;if(typeof v=="string"){const g=await ef(e,{idToken:v}).catch(()=>{});if(!g)break;m=await on._fromGetAccountInfoResponse(e,g,v)}else m=on._fromJSON(e,v);h!==o&&(u=m),o=h;break}}catch{}const f=s.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new za(o,e,a):(o=f[0],u&&await o._set(c,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==o)try{await h._remove(c)}catch{}})),new za(o,e,a))}}function Qg(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qk(e))return"Blackberry";if(Hk(e))return"Webos";if(Fk(e))return"Safari";if((e.includes("chrome/")||Uk(e))&&!e.includes("edge/"))return"Chrome";if(Bk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=i.match(n);if(a?.length===2)return a[1]}return"Other"}function jk(i=dr()){return/firefox\//i.test(i)}function Fk(i=dr()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Uk(i=dr()){return/crios\//i.test(i)}function Vk(i=dr()){return/iemobile/i.test(i)}function Bk(i=dr()){return/android/i.test(i)}function qk(i=dr()){return/blackberry/i.test(i)}function Hk(i=dr()){return/webos/i.test(i)}function Bp(i=dr()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function U0(i=dr()){return Bp(i)&&!!window.navigator?.standalone}function V0(){return XC()&&document.documentMode===10}function Wk(i=dr()){return Bp(i)||Bk(i)||Hk(i)||qk(i)||/windows phone/i.test(i)||Vk(i)}function zk(i,e=[]){let n;switch(i){case"Browser":n=Qg(dr());break;case"Worker":n=`${Qg(dr())}-${i}`;break;default:n=i}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xa}/${a}`}class B0{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=o=>new Promise((c,u)=>{try{const f=e(o);c(f)}catch(f){u(f)}});a.onAbort=n,this.queue.push(a);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function q0(i,e={}){return uo(i,"GET","/v2/passwordPolicy",co(i,e))}const H0=6;class W0{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??H0,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let s=0;s<e.length;s++)a=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class z0{constructor(e,n,a,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jg(this),this.idTokenSubscription=new Jg(this),this.beforeStateQueue=new B0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ik,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_i(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await za.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ef(this,{idToken:e}),a=await on._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Dr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=a?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(a=u.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(o){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=T0()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dr(this.app))return Promise.reject(wi(this));const n=e?Mr(e):null;return n&&rt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&rt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dr(this.app)?Promise.reject(wi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dr(this.app)?Promise.reject(wi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await q0(this),n=new W0(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Su("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await F0(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_i(e)||this._popupRedirectResolver;rt(n,this,"argument-error"),this.redirectPersistenceManager=await za.create(this,[_i(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(rt(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,a,s);return()=>{c=!0,f()}}else{const f=e.addObserver(n);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(Dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&w0(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ia(i){return Mr(i)}class Jg{constructor(e){this.auth=e,this.observer=null,this.addObserver=oP(n=>this.observer=n)}get next(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let hf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $0(i){hf=i}function $k(i){return hf.loadJS(i)}function G0(){return hf.recaptchaEnterpriseScript}function K0(){return hf.gapiScript}function Q0(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class J0{constructor(){this.enterprise=new Y0}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Y0{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const X0="recaptcha-enterprise",Gk="NO_RECAPTCHA";class Z0{constructor(e){this.type=X0,this.auth=ia(e)}async verify(e="verify",n=!1){async function a(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{I0(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new O0(f);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,c(h.siteKey)}}).catch(f=>{u(f)})})}function s(o,c,u){const f=window.grecaptcha;zg(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(h=>{c(h)}).catch(()=>{c(Gk)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new J0().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{a(this.auth).then(u=>{if(!n&&zg(window.grecaptcha))s(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=G0();f.length!==0&&(f+=u),$k(f).then(()=>{s(u,o,c)}).catch(h=>{c(h)})}}).catch(u=>{c(u)})})}}async function Yg(i,e,n,a=!1,s=!1){const o=new Z0(i);let c;if(s)c=Gk;else try{c=await o.verify(n)}catch{c=await o.verify(n,!0)}const u={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const f=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const f=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return a?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Xg(i,e,n,a,s){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Yg(i,e,n,n==="getOobCode");return a(i,o)}else return a(i,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Yg(i,e,n,n==="getOobCode");return a(i,c)}else return Promise.reject(o)})}function eR(i,e){const n=ff(i,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Xo(o,e??{}))return s;sn(s,"already-initialized")}return n.initialize({options:e})}function tR(i,e){const n=e?.persistence||[],a=(Array.isArray(n)?n:[n]).map(_i);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(a,e?.popupRedirectResolver)}function rR(i,e,n){const a=ia(i);rt(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const s=!1,o=Kk(e),{host:c,port:u}=nR(e),f=u===null?"":`:${u}`,h={url:`${o}//${c}${f}/`},v=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!a._canInitEmulator){rt(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),rt(Xo(h,a.config.emulator)&&Xo(v,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=h,a.emulatorConfig=v,a.settings.appVerificationDisabledForTesting=!0,na(c)?(Dp(`${o}//${c}${f}`),Mp("Auth",!0)):iR()}function Kk(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function nR(i){const e=Kk(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(a);if(s){const o=s[1];return{host:o,port:Zg(a.substr(o.length+1))}}else{const[o,c]=a.split(":");return{host:o,port:Zg(c)}}}function Zg(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function iR(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class qp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yi("not implemented")}_getIdTokenResponse(e){return yi("not implemented")}_linkToIdToken(e,n){return yi("not implemented")}_getReauthenticationResolver(e){return yi("not implemented")}}async function oR(i,e){return uo(i,"POST","/v1/accounts:signUp",e)}async function aR(i,e){return Eu(i,"POST","/v1/accounts:signInWithPassword",co(i,e))}async function sR(i,e){return Eu(i,"POST","/v1/accounts:signInWithEmailLink",co(i,e))}async function cR(i,e){return Eu(i,"POST","/v1/accounts:signInWithEmailLink",co(i,e))}class yu extends qp{constructor(e,n,a,s=null){super("password",a),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new yu(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new yu(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xg(e,n,"signInWithPassword",aR);case"emailLink":return sR(e,{email:this._email,oobCode:this._password});default:sn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xg(e,a,"signUpPassword",oR);case"emailLink":return cR(e,{idToken:n,email:this._email,oobCode:this._password});default:sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function $a(i,e){return Eu(i,"POST","/v1/accounts:signInWithIdp",co(i,e))}const uR="http://localhost";class ea extends qp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,...o}=n;if(!a||!s)return null;const c=new ea(a,s);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return $a(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,$a(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$a(e,n)}buildRequest(){const e={requestUri:uR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ku(n)}return e}}function lR(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fR(i){const e=au(su(i)).link,n=e?au(su(e)).deep_link_id:null,a=au(su(i)).deep_link_id;return(a?au(su(a)).link:null)||a||n||e||i}class Hp{constructor(e){const n=au(su(e)),a=n.apiKey??null,s=n.oobCode??null,o=lR(n.mode??null);rt(a&&s&&o,"argument-error"),this.apiKey=a,this.operation=o,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=fR(e);try{return new Hp(n)}catch{return null}}}class Za{constructor(){this.providerId=Za.PROVIDER_ID}static credential(e,n){return yu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=Hp.parseLink(n);return rt(a,"argument-error"),yu._fromEmailAndCode(e,a.code,a.tenantId)}}Za.PROVIDER_ID="password";Za.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Za.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Qk{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class bu extends Qk{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Qi extends bu{constructor(){super("facebook.com")}static credential(e){return ea._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qi.PROVIDER_ID="facebook.com";class Ji extends bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ea._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return Ji.credential(n,a)}catch{return null}}}Ji.GOOGLE_SIGN_IN_METHOD="google.com";Ji.PROVIDER_ID="google.com";class Yi extends bu{constructor(){super("github.com")}static credential(e){return ea._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.GITHUB_SIGN_IN_METHOD="github.com";Yi.PROVIDER_ID="github.com";class Xi extends bu{constructor(){super("twitter.com")}static credential(e,n){return ea._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return Xi.credential(n,a)}catch{return null}}}Xi.TWITTER_SIGN_IN_METHOD="twitter.com";Xi.PROVIDER_ID="twitter.com";async function dR(i,e){return Eu(i,"POST","/v1/accounts:signUp",co(i,e))}class oo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,s=!1){const o=await on._fromIdTokenResponse(e,a,s),c=ey(a);return new oo({user:o,providerId:c,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const s=ey(a);return new oo({user:e,providerId:s,_tokenResponse:a,operationType:n})}}function ey(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}async function hR(i){if(Dr(i.app))return Promise.reject(wi(i));const e=ia(i);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new oo({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await dR(e,{returnSecureToken:!0}),a=await oo._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(a.user),a}class rf extends Un{constructor(e,n,a,s){super(n.code,n.message),this.operationType=a,this.user=s,Object.setPrototypeOf(this,rf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,s){return new rf(e,n,a,s)}}function Jk(i,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?rf._fromErrorAndOperation(i,o,e,a):o})}async function pR(i,e,n=!1){const a=await gu(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return oo._forOperation(i,"link",a)}async function vR(i,e,n=!1){const{auth:a}=i;if(Dr(a.app))return Promise.reject(wi(a));const s="reauthenticate";try{const o=await gu(i,Jk(a,s,e,i),n);rt(o.idToken,a,"internal-error");const c=Vp(o.idToken);rt(c,a,"internal-error");const{sub:u}=c;return rt(i.uid===u,a,"user-mismatch"),oo._forOperation(i,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&sn(a,"user-mismatch"),o}}async function Yk(i,e,n=!1){if(Dr(i.app))return Promise.reject(wi(i));const a="signIn",s=await Jk(i,a,e),o=await oo._fromIdTokenResponse(i,a,s);return n||await i._updateCurrentUser(o.user),o}async function mR(i,e){return Yk(ia(i),e)}async function gR(i){const e=ia(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function yR(i,e,n){return Dr(i.app)?Promise.reject(wi(i)):mR(Mr(i),Za.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&gR(i),a})}function _R(i,e){return Mr(i).setPersistence(e)}function wR(i,e,n,a){return Mr(i).onIdTokenChanged(e,n,a)}function SR(i,e,n){return Mr(i).beforeAuthStateChanged(e,n)}function kR(i,e,n,a){return Mr(i).onAuthStateChanged(e,n,a)}function TR(i){return Mr(i).signOut()}const nf="__sak";class Xk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nf,"1"),this.storage.removeItem(nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const ER=1e3,bR=10;class Zk extends Xk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Wk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),s=this.localCache[n];a!==s&&e(n,s,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,u,f)=>{this.notifyListeners(c,f)});return}const a=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(a);!n&&this.localCache[a]===c||this.notifyListeners(a,c)},o=this.storage.getItem(a);V0()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,bR):s()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},ER)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zk.type="LOCAL";const eT=Zk;class tT extends Xk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tT.type="SESSION";const rT=tT;function CR(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class pf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const a=new pf(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:s,data:o}=n.data,c=this.handlersMap[s];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:s});const u=Array.from(c).map(async h=>h(n.origin,o)),f=await CR(u);n.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pf.receivers=[];function Wp(i="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return i+n}class PR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,c;return new Promise((u,f)=>{const h=Wp("",20);s.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},a);c={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(g.data.response);break;default:clearTimeout(v),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Fn(){return window}function RR(i){Fn().location.href=i}function nT(){return typeof Fn().WorkerGlobalScope<"u"&&typeof Fn().importScripts=="function"}async function OR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IR(){return navigator?.serviceWorker?.controller||null}function LR(){return nT()?self:null}const iT="firebaseLocalStorageDb",AR=1,of="firebaseLocalStorage",oT="fbase_key";class Cu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vf(i,e){return i.transaction([of],e?"readwrite":"readonly").objectStore(of)}function xR(){const i=indexedDB.deleteDatabase(iT);return new Cu(i).toPromise()}function bp(){const i=indexedDB.open(iT,AR);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const a=i.result;try{a.createObjectStore(of,{keyPath:oT})}catch(s){n(s)}}),i.addEventListener("success",async()=>{const a=i.result;a.objectStoreNames.contains(of)?e(a):(a.close(),await xR(),e(await bp()))})})}async function ty(i,e,n){const a=vf(i,!0).put({[oT]:e,value:n});return new Cu(a).toPromise()}async function DR(i,e){const n=vf(i,!1).get(e),a=await new Cu(n).toPromise();return a===void 0?null:a.value}function ry(i,e){const n=vf(i,!0).delete(e);return new Cu(n).toPromise()}const MR=800,NR=3;class aT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>NR)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pf._getInstance(LR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await OR(),!this.activeServiceWorker)return;this.sender=new PR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bp();return await ty(e,nf,"1"),await ry(e,nf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>ty(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>DR(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ry(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=vf(s,!1).getAll();return new Cu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)a.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!a.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aT.type="LOCAL";const jR=aT;new Tu(3e4,6e4);function FR(i,e){return e?_i(e):(rt(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class zp extends qp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $a(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $a(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $a(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function UR(i){return Yk(i.auth,new zp(i),i.bypassAuthState)}function VR(i){const{auth:e,user:n}=i;return rt(n,e,"internal-error"),vR(n,new zp(i),i.bypassAuthState)}async function BR(i){const{auth:e,user:n}=i;return rt(n,e,"internal-error"),pR(n,new zp(i),i.bypassAuthState)}class sT{constructor(e,n,a,s,o=!1){this.auth=e,this.resolver=a,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:s,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:n,sessionId:a,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UR;case"linkViaPopup":case"linkViaRedirect":return BR;case"reauthViaPopup":case"reauthViaRedirect":return VR;default:sn(this.auth,"internal-error")}}resolve(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qR=new Tu(2e3,1e4);class Ha extends sT{constructor(e,n,a,s,o){super(e,n,s,o),this.provider=a,this.authWindow=null,this.pollId=null,Ha.currentPopupAction&&Ha.currentPopupAction.cancel(),Ha.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return rt(e,this.auth,"internal-error"),e}async onExecution(){ki(this.filter.length===1,"Popup operations only handle one event");const e=Wp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ha.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qR.get())};e()}}Ha.currentPopupAction=null;const HR="pendingRedirect",$l=new Map;class WR extends sT{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=$l.get(this.auth._key());if(!e){try{const a=await zR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}$l.set(this.auth._key(),e)}return this.bypassAuthState||$l.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zR(i,e){const n=KR(e),a=GR(i);if(!await a._isAvailable())return!1;const s=await a._get(n)==="true";return await a._remove(n),s}function $R(i,e){$l.set(i._key(),e)}function GR(i){return _i(i._redirectPersistence)}function KR(i){return zl(HR,i.config.apiKey,i.name)}async function QR(i,e,n=!1){if(Dr(i.app))return Promise.reject(wi(i));const a=ia(i),s=FR(a,e),c=await new WR(a,s,n).execute();return c&&!n&&(delete c.user._redirectEventId,await a._persistUserIfCurrent(c.user),await a._setRedirectUser(null,e)),c}const JR=600*1e3;class YR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!cT(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";n.onError(jn(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JR&&this.cachedEventUids.clear(),this.cachedEventUids.has(ny(e))}saveEventToCache(e){this.cachedEventUids.add(ny(e)),this.lastProcessedEventTime=Date.now()}}function ny(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function cT({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function XR(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cT(i);default:return!1}}async function ZR(i,e={}){return uo(i,"GET","/v1/projects",e)}const eO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tO=/^https?/;async function rO(i){if(i.config.emulator)return;const{authorizedDomains:e}=await ZR(i);for(const n of e)try{if(nO(n))return}catch{}sn(i,"unauthorized-domain")}function nO(i){const e=Tp(),{protocol:n,hostname:a}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&a===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===a}if(!tO.test(n))return!1;if(eO.test(i))return a===i;const s=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}const iO=new Tu(3e4,6e4);function iy(){const i=Fn().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function oO(i){return new Promise((e,n)=>{function a(){iy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iy(),n(jn(i,"network-request-failed"))},timeout:iO.get()})}if(Fn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Fn().gapi?.load)a();else{const s=Q0("iframefcb");return Fn()[s]=()=>{gapi.load?a():n(jn(i,"network-request-failed"))},$k(`${K0()}?onload=${s}`).catch(o=>n(o))}}).catch(e=>{throw Gl=null,e})}let Gl=null;function aO(i){return Gl=Gl||oO(i),Gl}const sO=new Tu(5e3,15e3),cO="__/auth/iframe",uO="emulator/auth/iframe",lO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dO(i){const e=i.config;rt(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Up(e,uO):`https://${i.config.authDomain}/${cO}`,a={apiKey:e.apiKey,appName:i.name,v:Xa},s=fO.get(i.config.apiHost);s&&(a.eid=s);const o=i._getFrameworks();return o.length&&(a.fw=o.join(",")),`${n}?${ku(a).slice(1)}`}async function hO(i){const e=await aO(i),n=Fn().gapi;return rt(n,i,"internal-error"),e.open({where:document.body,url:dO(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lO,dontclear:!0},a=>new Promise(async(s,o)=>{await a.restyle({setHideOnLeave:!1});const c=jn(i,"network-request-failed"),u=Fn().setTimeout(()=>{o(c)},sO.get());function f(){Fn().clearTimeout(u),s(a)}a.ping(f).then(f,()=>{o(c)})}))}const pO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vO=500,mO=600,gO="_blank",yO="http://localhost";class oy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _O(i,e,n,a=vO,s=mO){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-a)/2,0).toString();let u="";const f={...pO,width:a.toString(),height:s.toString(),top:o,left:c},h=dr().toLowerCase();n&&(u=Uk(h)?gO:n),jk(h)&&(e=e||yO,f.scrollbars="yes");const v=Object.entries(f).reduce((g,[_,w])=>`${g}${_}=${w},`,"");if(U0(h)&&u!=="_self")return wO(e||"",u),new oy(null);const m=window.open(e||"",u,v);rt(m,i,"popup-blocked");try{m.focus()}catch{}return new oy(m)}function wO(i,e){const n=document.createElement("a");n.href=i,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}const SO="__/auth/handler",kO="emulator/auth/handler",TO=encodeURIComponent("fac");async function ay(i,e,n,a,s,o){rt(i.config.authDomain,i,"auth-domain-config-required"),rt(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:a,v:Xa,eventId:s};if(e instanceof Qk){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",iP(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,m]of Object.entries({}))c[v]=m}if(e instanceof bu){const v=e.getScopes().filter(m=>m!=="");v.length>0&&(c.scopes=v.join(","))}i.tenantId&&(c.tid=i.tenantId);const u=c;for(const v of Object.keys(u))u[v]===void 0&&delete u[v];const f=await i._getAppCheckToken(),h=f?`#${TO}=${encodeURIComponent(f)}`:"";return`${EO(i)}?${ku(u).slice(1)}${h}`}function EO({config:i}){return i.emulator?Up(i,kO):`https://${i.authDomain}/${SO}`}const Zd="webStorageSupport";class bO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rT,this._completeRedirectFn=QR,this._overrideRedirectResult=$R}async _openPopup(e,n,a,s){ki(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await ay(e,n,a,Tp(),s);return _O(e,o,Wp())}async _openRedirect(e,n,a,s){await this._originValidation(e);const o=await ay(e,n,a,Tp(),s);return RR(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(ki(o,"If manager is not set, promise should be"),o)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await hO(e),a=new YR(e);return n.register("authEvent",s=>(rt(s?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Zd,{type:Zd},s=>{const o=s?.[0]?.[Zd];o!==void 0&&n(!!o),sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Wk()||Fk()||Bp()}}const CO=bO;var sy="@firebase/auth",cy="1.11.1";class PO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function RO(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OO(i){Zo(new io("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=a.options;rt(c&&!c.includes(":"),"invalid-api-key",{appName:a.name});const f={apiKey:c,authDomain:u,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zk(i)},h=new z0(a,s,o,f);return tR(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),Zo(new io("auth-internal",e=>{const n=ia(e.getProvider("auth").getImmediate());return(a=>new PO(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nn(sy,cy,RO(i)),Nn(sy,cy,"esm2020")}const IO=300,LO=Tk("authIdTokenMaxAge")||IO;let uy=null;const AO=i=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>LO)return;const s=n?.token;uy!==s&&(uy=s,await fetch(i,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function xO(i=df()){const e=ff(i,"auth");if(e.isInitialized())return e.getImmediate();const n=eR(i,{popupRedirectResolver:CO,persistence:[jR,eT,rT]}),a=Tk("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(a,location.origin);if(location.origin===o.origin){const c=AO(o.toString());SR(n,c,()=>c(n.currentUser)),wR(n,u=>c(u))}}const s=wk("auth");return s&&rR(n,`http://${s}`),n}function DO(){return document.getElementsByTagName("head")?.[0]??document}$0({loadJS(i){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",i),a.onload=e,a.onerror=s=>{const o=jn("internal-error");o.customData=s,n(o)},a.type="text/javascript",a.charset="UTF-8",DO().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OO("Browser");var ly=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var $p;(function(){var i;function e(y,S){function C(){}C.prototype=S.prototype,y.F=S.prototype,y.prototype=new C,y.prototype.constructor=y,y.D=function(A,F,D){for(var P=Array(arguments.length-2),K=2;K<arguments.length;K++)P[K-2]=arguments[K];return S.prototype[F].apply(A,P)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(y,S,C){C||(C=0);const A=Array(16);if(typeof S=="string")for(var F=0;F<16;++F)A[F]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(F=0;F<16;++F)A[F]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=y.g[0],C=y.g[1],F=y.g[2];let D=y.g[3],P;P=S+(D^C&(F^D))+A[0]+3614090360&4294967295,S=C+(P<<7&4294967295|P>>>25),P=D+(F^S&(C^F))+A[1]+3905402710&4294967295,D=S+(P<<12&4294967295|P>>>20),P=F+(C^D&(S^C))+A[2]+606105819&4294967295,F=D+(P<<17&4294967295|P>>>15),P=C+(S^F&(D^S))+A[3]+3250441966&4294967295,C=F+(P<<22&4294967295|P>>>10),P=S+(D^C&(F^D))+A[4]+4118548399&4294967295,S=C+(P<<7&4294967295|P>>>25),P=D+(F^S&(C^F))+A[5]+1200080426&4294967295,D=S+(P<<12&4294967295|P>>>20),P=F+(C^D&(S^C))+A[6]+2821735955&4294967295,F=D+(P<<17&4294967295|P>>>15),P=C+(S^F&(D^S))+A[7]+4249261313&4294967295,C=F+(P<<22&4294967295|P>>>10),P=S+(D^C&(F^D))+A[8]+1770035416&4294967295,S=C+(P<<7&4294967295|P>>>25),P=D+(F^S&(C^F))+A[9]+2336552879&4294967295,D=S+(P<<12&4294967295|P>>>20),P=F+(C^D&(S^C))+A[10]+4294925233&4294967295,F=D+(P<<17&4294967295|P>>>15),P=C+(S^F&(D^S))+A[11]+2304563134&4294967295,C=F+(P<<22&4294967295|P>>>10),P=S+(D^C&(F^D))+A[12]+1804603682&4294967295,S=C+(P<<7&4294967295|P>>>25),P=D+(F^S&(C^F))+A[13]+4254626195&4294967295,D=S+(P<<12&4294967295|P>>>20),P=F+(C^D&(S^C))+A[14]+2792965006&4294967295,F=D+(P<<17&4294967295|P>>>15),P=C+(S^F&(D^S))+A[15]+1236535329&4294967295,C=F+(P<<22&4294967295|P>>>10),P=S+(F^D&(C^F))+A[1]+4129170786&4294967295,S=C+(P<<5&4294967295|P>>>27),P=D+(C^F&(S^C))+A[6]+3225465664&4294967295,D=S+(P<<9&4294967295|P>>>23),P=F+(S^C&(D^S))+A[11]+643717713&4294967295,F=D+(P<<14&4294967295|P>>>18),P=C+(D^S&(F^D))+A[0]+3921069994&4294967295,C=F+(P<<20&4294967295|P>>>12),P=S+(F^D&(C^F))+A[5]+3593408605&4294967295,S=C+(P<<5&4294967295|P>>>27),P=D+(C^F&(S^C))+A[10]+38016083&4294967295,D=S+(P<<9&4294967295|P>>>23),P=F+(S^C&(D^S))+A[15]+3634488961&4294967295,F=D+(P<<14&4294967295|P>>>18),P=C+(D^S&(F^D))+A[4]+3889429448&4294967295,C=F+(P<<20&4294967295|P>>>12),P=S+(F^D&(C^F))+A[9]+568446438&4294967295,S=C+(P<<5&4294967295|P>>>27),P=D+(C^F&(S^C))+A[14]+3275163606&4294967295,D=S+(P<<9&4294967295|P>>>23),P=F+(S^C&(D^S))+A[3]+4107603335&4294967295,F=D+(P<<14&4294967295|P>>>18),P=C+(D^S&(F^D))+A[8]+1163531501&4294967295,C=F+(P<<20&4294967295|P>>>12),P=S+(F^D&(C^F))+A[13]+2850285829&4294967295,S=C+(P<<5&4294967295|P>>>27),P=D+(C^F&(S^C))+A[2]+4243563512&4294967295,D=S+(P<<9&4294967295|P>>>23),P=F+(S^C&(D^S))+A[7]+1735328473&4294967295,F=D+(P<<14&4294967295|P>>>18),P=C+(D^S&(F^D))+A[12]+2368359562&4294967295,C=F+(P<<20&4294967295|P>>>12),P=S+(C^F^D)+A[5]+4294588738&4294967295,S=C+(P<<4&4294967295|P>>>28),P=D+(S^C^F)+A[8]+2272392833&4294967295,D=S+(P<<11&4294967295|P>>>21),P=F+(D^S^C)+A[11]+1839030562&4294967295,F=D+(P<<16&4294967295|P>>>16),P=C+(F^D^S)+A[14]+4259657740&4294967295,C=F+(P<<23&4294967295|P>>>9),P=S+(C^F^D)+A[1]+2763975236&4294967295,S=C+(P<<4&4294967295|P>>>28),P=D+(S^C^F)+A[4]+1272893353&4294967295,D=S+(P<<11&4294967295|P>>>21),P=F+(D^S^C)+A[7]+4139469664&4294967295,F=D+(P<<16&4294967295|P>>>16),P=C+(F^D^S)+A[10]+3200236656&4294967295,C=F+(P<<23&4294967295|P>>>9),P=S+(C^F^D)+A[13]+681279174&4294967295,S=C+(P<<4&4294967295|P>>>28),P=D+(S^C^F)+A[0]+3936430074&4294967295,D=S+(P<<11&4294967295|P>>>21),P=F+(D^S^C)+A[3]+3572445317&4294967295,F=D+(P<<16&4294967295|P>>>16),P=C+(F^D^S)+A[6]+76029189&4294967295,C=F+(P<<23&4294967295|P>>>9),P=S+(C^F^D)+A[9]+3654602809&4294967295,S=C+(P<<4&4294967295|P>>>28),P=D+(S^C^F)+A[12]+3873151461&4294967295,D=S+(P<<11&4294967295|P>>>21),P=F+(D^S^C)+A[15]+530742520&4294967295,F=D+(P<<16&4294967295|P>>>16),P=C+(F^D^S)+A[2]+3299628645&4294967295,C=F+(P<<23&4294967295|P>>>9),P=S+(F^(C|~D))+A[0]+4096336452&4294967295,S=C+(P<<6&4294967295|P>>>26),P=D+(C^(S|~F))+A[7]+1126891415&4294967295,D=S+(P<<10&4294967295|P>>>22),P=F+(S^(D|~C))+A[14]+2878612391&4294967295,F=D+(P<<15&4294967295|P>>>17),P=C+(D^(F|~S))+A[5]+4237533241&4294967295,C=F+(P<<21&4294967295|P>>>11),P=S+(F^(C|~D))+A[12]+1700485571&4294967295,S=C+(P<<6&4294967295|P>>>26),P=D+(C^(S|~F))+A[3]+2399980690&4294967295,D=S+(P<<10&4294967295|P>>>22),P=F+(S^(D|~C))+A[10]+4293915773&4294967295,F=D+(P<<15&4294967295|P>>>17),P=C+(D^(F|~S))+A[1]+2240044497&4294967295,C=F+(P<<21&4294967295|P>>>11),P=S+(F^(C|~D))+A[8]+1873313359&4294967295,S=C+(P<<6&4294967295|P>>>26),P=D+(C^(S|~F))+A[15]+4264355552&4294967295,D=S+(P<<10&4294967295|P>>>22),P=F+(S^(D|~C))+A[6]+2734768916&4294967295,F=D+(P<<15&4294967295|P>>>17),P=C+(D^(F|~S))+A[13]+1309151649&4294967295,C=F+(P<<21&4294967295|P>>>11),P=S+(F^(C|~D))+A[4]+4149444226&4294967295,S=C+(P<<6&4294967295|P>>>26),P=D+(C^(S|~F))+A[11]+3174756917&4294967295,D=S+(P<<10&4294967295|P>>>22),P=F+(S^(D|~C))+A[2]+718787259&4294967295,F=D+(P<<15&4294967295|P>>>17),P=C+(D^(F|~S))+A[9]+3951481745&4294967295,y.g[0]=y.g[0]+S&4294967295,y.g[1]=y.g[1]+(F+(P<<21&4294967295|P>>>11))&4294967295,y.g[2]=y.g[2]+F&4294967295,y.g[3]=y.g[3]+D&4294967295}a.prototype.v=function(y,S){S===void 0&&(S=y.length);const C=S-this.blockSize,A=this.C;let F=this.h,D=0;for(;D<S;){if(F==0)for(;D<=C;)s(this,y,D),D+=this.blockSize;if(typeof y=="string"){for(;D<S;)if(A[F++]=y.charCodeAt(D++),F==this.blockSize){s(this,A),F=0;break}}else for(;D<S;)if(A[F++]=y[D++],F==this.blockSize){s(this,A),F=0;break}}this.h=F,this.o+=S},a.prototype.A=function(){var y=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);y[0]=128;for(var S=1;S<y.length-8;++S)y[S]=0;S=this.o*8;for(var C=y.length-8;C<y.length;++C)y[C]=S&255,S/=256;for(this.v(y),y=Array(16),S=0,C=0;C<4;++C)for(let A=0;A<32;A+=8)y[S++]=this.g[C]>>>A&255;return y};function o(y,S){var C=u;return Object.prototype.hasOwnProperty.call(C,y)?C[y]:C[y]=S(y)}function c(y,S){this.h=S;const C=[];let A=!0;for(let F=y.length-1;F>=0;F--){const D=y[F]|0;A&&D==S||(C[F]=D,A=!1)}this.g=C}var u={};function f(y){return-128<=y&&y<128?o(y,function(S){return new c([S|0],S<0?-1:0)}):new c([y|0],y<0?-1:0)}function h(y){if(isNaN(y)||!isFinite(y))return m;if(y<0)return T(h(-y));const S=[];let C=1;for(let A=0;y>=C;A++)S[A]=y/C|0,C*=4294967296;return new c(S,0)}function v(y,S){if(y.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(y.charAt(0)=="-")return T(v(y.substring(1),S));if(y.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=h(Math.pow(S,8));let A=m;for(let D=0;D<y.length;D+=8){var F=Math.min(8,y.length-D);const P=parseInt(y.substring(D,D+F),S);F<8?(F=h(Math.pow(S,F)),A=A.j(F).add(h(P))):(A=A.j(C),A=A.add(h(P)))}return A}var m=f(0),g=f(1),_=f(16777216);i=c.prototype,i.m=function(){if(E(this))return-T(this).m();let y=0,S=1;for(let C=0;C<this.g.length;C++){const A=this.i(C);y+=(A>=0?A:4294967296+A)*S,S*=4294967296}return y},i.toString=function(y){if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(w(this))return"0";if(E(this))return"-"+T(this).toString(y);const S=h(Math.pow(y,6));var C=this;let A="";for(;;){const F=O(C,S).g;C=N(C,F.j(S));let D=((C.g.length>0?C.g[0]:C.h)>>>0).toString(y);if(C=F,w(C))return D+A;for(;D.length<6;)D="0"+D;A=D+A}},i.i=function(y){return y<0?0:y<this.g.length?this.g[y]:this.h};function w(y){if(y.h!=0)return!1;for(let S=0;S<y.g.length;S++)if(y.g[S]!=0)return!1;return!0}function E(y){return y.h==-1}i.l=function(y){return y=N(this,y),E(y)?-1:w(y)?0:1};function T(y){const S=y.g.length,C=[];for(let A=0;A<S;A++)C[A]=~y.g[A];return new c(C,~y.h).add(g)}i.abs=function(){return E(this)?T(this):this},i.add=function(y){const S=Math.max(this.g.length,y.g.length),C=[];let A=0;for(let F=0;F<=S;F++){let D=A+(this.i(F)&65535)+(y.i(F)&65535),P=(D>>>16)+(this.i(F)>>>16)+(y.i(F)>>>16);A=P>>>16,D&=65535,P&=65535,C[F]=P<<16|D}return new c(C,C[C.length-1]&-2147483648?-1:0)};function N(y,S){return y.add(T(S))}i.j=function(y){if(w(this)||w(y))return m;if(E(this))return E(y)?T(this).j(T(y)):T(T(this).j(y));if(E(y))return T(this.j(T(y)));if(this.l(_)<0&&y.l(_)<0)return h(this.m()*y.m());const S=this.g.length+y.g.length,C=[];for(var A=0;A<2*S;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(let F=0;F<y.g.length;F++){const D=this.i(A)>>>16,P=this.i(A)&65535,K=y.i(F)>>>16,q=y.i(F)&65535;C[2*A+2*F]+=P*q,j(C,2*A+2*F),C[2*A+2*F+1]+=D*q,j(C,2*A+2*F+1),C[2*A+2*F+1]+=P*K,j(C,2*A+2*F+1),C[2*A+2*F+2]+=D*K,j(C,2*A+2*F+2)}for(y=0;y<S;y++)C[y]=C[2*y+1]<<16|C[2*y];for(y=S;y<2*S;y++)C[y]=0;return new c(C,0)};function j(y,S){for(;(y[S]&65535)!=y[S];)y[S+1]+=y[S]>>>16,y[S]&=65535,S++}function x(y,S){this.g=y,this.h=S}function O(y,S){if(w(S))throw Error("division by zero");if(w(y))return new x(m,m);if(E(y))return S=O(T(y),S),new x(T(S.g),T(S.h));if(E(S))return S=O(y,T(S)),new x(T(S.g),S.h);if(y.g.length>30){if(E(y)||E(S))throw Error("slowDivide_ only works with positive integers.");for(var C=g,A=S;A.l(y)<=0;)C=L(C),A=L(A);var F=b(C,1),D=b(A,1);for(A=b(A,2),C=b(C,2);!w(A);){var P=D.add(A);P.l(y)<=0&&(F=F.add(C),D=P),A=b(A,1),C=b(C,1)}return S=N(y,F.j(S)),new x(F,S)}for(F=m;y.l(S)>=0;){for(C=Math.max(1,Math.floor(y.m()/S.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),D=h(C),P=D.j(S);E(P)||P.l(y)>0;)C-=A,D=h(C),P=D.j(S);w(D)&&(D=g),F=F.add(D),y=N(y,P)}return new x(F,y)}i.B=function(y){return O(this,y).h},i.and=function(y){const S=Math.max(this.g.length,y.g.length),C=[];for(let A=0;A<S;A++)C[A]=this.i(A)&y.i(A);return new c(C,this.h&y.h)},i.or=function(y){const S=Math.max(this.g.length,y.g.length),C=[];for(let A=0;A<S;A++)C[A]=this.i(A)|y.i(A);return new c(C,this.h|y.h)},i.xor=function(y){const S=Math.max(this.g.length,y.g.length),C=[];for(let A=0;A<S;A++)C[A]=this.i(A)^y.i(A);return new c(C,this.h^y.h)};function L(y){const S=y.g.length+1,C=[];for(let A=0;A<S;A++)C[A]=y.i(A)<<1|y.i(A-1)>>>31;return new c(C,y.h)}function b(y,S){const C=S>>5;S%=32;const A=y.g.length-C,F=[];for(let D=0;D<A;D++)F[D]=S>0?y.i(D+C)>>>S|y.i(D+C+1)<<32-S:y.i(D+C);return new c(F,y.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=h,c.fromString=v,$p=c}).apply(typeof ly<"u"?ly:typeof self<"u"?self:typeof window<"u"?window:{});var Dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var i,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dl=="object"&&Dl];for(var I=0;I<d.length;++I){var U=d[I];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")}var a=n(this);function s(d,I){if(I)e:{var U=a;d=d.split(".");for(var X=0;X<d.length-1;X++){var ce=d[X];if(!(ce in U))break e;U=U[ce]}d=d[d.length-1],X=U[d],I=I(X),I!=X&&I!=null&&e(U,d,{configurable:!0,writable:!0,value:I})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(I){var U=[],X;for(X in I)Object.prototype.hasOwnProperty.call(I,X)&&U.push([X,I[X]]);return U}});var o=o||{},c=this||self;function u(d){var I=typeof d;return I=="object"&&d!=null||I=="function"}function f(d,I,U){return d.call.apply(d.bind,arguments)}function h(d,I,U){return h=f,h.apply(null,arguments)}function v(d,I){var U=Array.prototype.slice.call(arguments,1);return function(){var X=U.slice();return X.push.apply(X,arguments),d.apply(this,X)}}function m(d,I){function U(){}U.prototype=I.prototype,d.Z=I.prototype,d.prototype=new U,d.prototype.constructor=d,d.Ob=function(X,ce,ve){for(var Le=Array(arguments.length-2),at=2;at<arguments.length;at++)Le[at-2]=arguments[at];return I.prototype[ce].apply(X,Le)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function _(d){const I=d.length;if(I>0){const U=Array(I);for(let X=0;X<I;X++)U[X]=d[X];return U}return[]}function w(d,I){for(let X=1;X<arguments.length;X++){const ce=arguments[X];var U=typeof ce;if(U=U!="object"?U:ce?Array.isArray(ce)?"array":U:"null",U=="array"||U=="object"&&typeof ce.length=="number"){U=d.length||0;const ve=ce.length||0;d.length=U+ve;for(let Le=0;Le<ve;Le++)d[U+Le]=ce[Le]}else d.push(ce)}}class E{constructor(I,U){this.i=I,this.j=U,this.h=0,this.g=null}get(){let I;return this.h>0?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function T(d){c.setTimeout(()=>{throw d},0)}function N(){var d=y;let I=null;return d.g&&(I=d.g,d.g=d.g.next,d.g||(d.h=null),I.next=null),I}class j{constructor(){this.h=this.g=null}add(I,U){const X=x.get();X.set(I,U),this.h?this.h.next=X:this.g=X,this.h=X}}var x=new E(()=>new O,d=>d.reset());class O{constructor(){this.next=this.g=this.h=null}set(I,U){this.h=I,this.g=U,this.next=null}reset(){this.next=this.g=this.h=null}}let L,b=!1,y=new j,S=()=>{const d=Promise.resolve(void 0);L=()=>{d.then(C)}};function C(){for(var d;d=N();){try{d.h.call(d.g)}catch(U){T(U)}var I=x;I.j(d),I.h<100&&(I.h++,d.next=I.g,I.g=d)}b=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(d,I){this.type=d,this.g=this.target=I,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,I=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const U=()=>{};c.addEventListener("test",U,I),c.removeEventListener("test",U,I)}catch{}return d})();function P(d){return/^[\s\xa0]*$/.test(d)}function K(d,I){F.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,I)}m(K,F),K.prototype.init=function(d,I){const U=this.type=d.type,X=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=I,I=d.relatedTarget,I||(U=="mouseover"?I=d.fromElement:U=="mouseout"&&(I=d.toElement)),this.relatedTarget=I,X?(this.clientX=X.clientX!==void 0?X.clientX:X.pageX,this.clientY=X.clientY!==void 0?X.clientY:X.pageY,this.screenX=X.screenX||0,this.screenY=X.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&K.Z.h.call(this)},K.prototype.h=function(){K.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var q="closure_listenable_"+(Math.random()*1e6|0),W=0;function B(d,I,U,X,ce){this.listener=d,this.proxy=null,this.src=I,this.type=U,this.capture=!!X,this.ha=ce,this.key=++W,this.da=this.fa=!1}function z(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function G(d,I,U){for(const X in d)I.call(U,d[X],X,d)}function J(d,I){for(const U in d)I.call(void 0,d[U],U,d)}function M(d){const I={};for(const U in d)I[U]=d[U];return I}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(d,I){let U,X;for(let ce=1;ce<arguments.length;ce++){X=arguments[ce];for(U in X)d[U]=X[U];for(let ve=0;ve<V.length;ve++)U=V[ve],Object.prototype.hasOwnProperty.call(X,U)&&(d[U]=X[U])}}function oe(d){this.src=d,this.g={},this.h=0}oe.prototype.add=function(d,I,U,X,ce){const ve=d.toString();d=this.g[ve],d||(d=this.g[ve]=[],this.h++);const Le=ae(d,I,X,ce);return Le>-1?(I=d[Le],U||(I.fa=!1)):(I=new B(I,this.src,ve,!!X,ce),I.fa=U,d.push(I)),I};function fe(d,I){const U=I.type;if(U in d.g){var X=d.g[U],ce=Array.prototype.indexOf.call(X,I,void 0),ve;(ve=ce>=0)&&Array.prototype.splice.call(X,ce,1),ve&&(z(I),d.g[U].length==0&&(delete d.g[U],d.h--))}}function ae(d,I,U,X){for(let ce=0;ce<d.length;++ce){const ve=d[ce];if(!ve.da&&ve.listener==I&&ve.capture==!!U&&ve.ha==X)return ce}return-1}var he="closure_lm_"+(Math.random()*1e6|0),we={};function ke(d,I,U,X,ce){if(Array.isArray(I)){for(let ve=0;ve<I.length;ve++)ke(d,I[ve],U,X,ce);return null}return U=me(U),d&&d[q]?d.J(I,U,u(X)?!!X.capture:!1,ce):Ge(d,I,U,!1,X,ce)}function Ge(d,I,U,X,ce,ve){if(!I)throw Error("Invalid event type");const Le=u(ce)?!!ce.capture:!!ce;let at=Ke(d);if(at||(d[he]=at=new oe(d)),U=at.add(I,U,X,Le,ve),U.proxy)return U;if(X=Ae(),U.proxy=X,X.src=d,X.listener=U,d.addEventListener)D||(ce=Le),ce===void 0&&(ce=!1),d.addEventListener(I.toString(),X,ce);else if(d.attachEvent)d.attachEvent(tt(I.toString()),X);else if(d.addListener&&d.removeListener)d.addListener(X);else throw Error("addEventListener and attachEvent are unavailable.");return U}function Ae(){function d(U){return I.call(d.src,d.listener,U)}const I=Je;return d}function Be(d,I,U,X,ce){if(Array.isArray(I))for(var ve=0;ve<I.length;ve++)Be(d,I[ve],U,X,ce);else X=u(X)?!!X.capture:!!X,U=me(U),d&&d[q]?(d=d.i,ve=String(I).toString(),ve in d.g&&(I=d.g[ve],U=ae(I,U,X,ce),U>-1&&(z(I[U]),Array.prototype.splice.call(I,U,1),I.length==0&&(delete d.g[ve],d.h--)))):d&&(d=Ke(d))&&(I=d.g[I.toString()],d=-1,I&&(d=ae(I,U,X,ce)),(U=d>-1?I[d]:null)&&Ze(U))}function Ze(d){if(typeof d!="number"&&d&&!d.da){var I=d.src;if(I&&I[q])fe(I.i,d);else{var U=d.type,X=d.proxy;I.removeEventListener?I.removeEventListener(U,X,d.capture):I.detachEvent?I.detachEvent(tt(U),X):I.addListener&&I.removeListener&&I.removeListener(X),(U=Ke(I))?(fe(U,d),U.h==0&&(U.src=null,I[he]=null)):z(d)}}}function tt(d){return d in we?we[d]:we[d]="on"+d}function Je(d,I){if(d.da)d=!0;else{I=new K(I,this);const U=d.listener,X=d.ha||d.src;d.fa&&Ze(d),d=U.call(X,I)}return d}function Ke(d){return d=d[he],d instanceof oe?d:null}var Me="__closure_events_fn_"+(Math.random()*1e9>>>0);function me(d){return typeof d=="function"?d:(d[Me]||(d[Me]=function(I){return d.handleEvent(I)}),d[Me])}function Ue(){A.call(this),this.i=new oe(this),this.M=this,this.G=null}m(Ue,A),Ue.prototype[q]=!0,Ue.prototype.removeEventListener=function(d,I,U,X){Be(this,d,I,U,X)};function Re(d,I){var U,X=d.G;if(X)for(U=[];X;X=X.G)U.push(X);if(d=d.M,X=I.type||I,typeof I=="string")I=new F(I,d);else if(I instanceof F)I.target=I.target||d;else{var ce=I;I=new F(X,d),ee(I,ce)}ce=!0;let ve,Le;if(U)for(Le=U.length-1;Le>=0;Le--)ve=I.g=U[Le],ce=qe(ve,X,!0,I)&&ce;if(ve=I.g=d,ce=qe(ve,X,!0,I)&&ce,ce=qe(ve,X,!1,I)&&ce,U)for(Le=0;Le<U.length;Le++)ve=I.g=U[Le],ce=qe(ve,X,!1,I)&&ce}Ue.prototype.N=function(){if(Ue.Z.N.call(this),this.i){var d=this.i;for(const I in d.g){const U=d.g[I];for(let X=0;X<U.length;X++)z(U[X]);delete d.g[I],d.h--}}this.G=null},Ue.prototype.J=function(d,I,U,X){return this.i.add(String(d),I,!1,U,X)},Ue.prototype.K=function(d,I,U,X){return this.i.add(String(d),I,!0,U,X)};function qe(d,I,U,X){if(I=d.i.g[String(I)],!I)return!0;I=I.concat();let ce=!0;for(let ve=0;ve<I.length;++ve){const Le=I[ve];if(Le&&!Le.da&&Le.capture==U){const at=Le.listener,xt=Le.ha||Le.src;Le.fa&&fe(d.i,Le),ce=at.call(xt,X)!==!1&&ce}}return ce&&!X.defaultPrevented}function $(d,I){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=h(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(I)>2147483647?-1:c.setTimeout(d,I||0)}function H(d){d.g=$(()=>{d.g=null,d.i&&(d.i=!1,H(d))},d.l);const I=d.h;d.h=null,d.m.apply(null,I)}class Y extends A{constructor(I,U){super(),this.m=I,this.l=U,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:H(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ye(d){A.call(this),this.h=d,this.g={}}m(ye,A);var Se=[];function Oe(d){G(d.g,function(I,U){this.g.hasOwnProperty(U)&&Ze(I)},d),d.g={}}ye.prototype.N=function(){ye.Z.N.call(this),Oe(this)},ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xe=c.JSON.stringify,Fe=c.JSON.parse,He=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function bt(){}function Gt(){}var Lt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ce(){F.call(this,"d")}m(Ce,F);function _e(){F.call(this,"c")}m(_e,F);var Z={},re=null;function de(){return re=re||new Ue}Z.Ia="serverreachability";function le(d){F.call(this,Z.Ia,d)}m(le,F);function ge(d){const I=de();Re(I,new le(I))}Z.STAT_EVENT="statevent";function Qe(d,I){F.call(this,Z.STAT_EVENT,d),this.stat=I}m(Qe,F);function $e(d){const I=de();Re(I,new Qe(I,d))}Z.Ja="timingevent";function St(d,I){F.call(this,Z.Ja,d),this.size=I}m(St,F);function vt(d,I){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},I)}function st(){this.g=!0}st.prototype.ua=function(){this.g=!1};function mt(d,I,U,X,ce,ve){d.info(function(){if(d.g)if(ve){var Le="",at=ve.split("&");for(let Tt=0;Tt<at.length;Tt++){var xt=at[Tt].split("=");if(xt.length>1){const Ut=xt[0];xt=xt[1];const Vr=Ut.split("_");Le=Vr.length>=2&&Vr[1]=="type"?Le+(Ut+"="+xt+"&"):Le+(Ut+"=redacted&")}}}else Le=null;else Le=ve;return"XMLHTTP REQ ("+X+") [attempt "+ce+"]: "+I+`
`+U+`
`+Le})}function ot(d,I,U,X,ce,ve,Le){d.info(function(){return"XMLHTTP RESP ("+X+") [ attempt "+ce+"]: "+I+`
`+U+`
`+ve+" "+Le})}function ut(d,I,U,X){d.info(function(){return"XMLHTTP TEXT ("+I+"): "+vr(d,U)+(X?" "+X:"")})}function Ft(d,I){d.info(function(){return"TIMEOUT: "+I})}st.prototype.info=function(){};function vr(d,I){if(!d.g)return I;if(!I)return null;try{const ve=JSON.parse(I);if(ve){for(d=0;d<ve.length;d++)if(Array.isArray(ve[d])){var U=ve[d];if(!(U.length<2)){var X=U[1];if(Array.isArray(X)&&!(X.length<1)){var ce=X[0];if(ce!="noop"&&ce!="stop"&&ce!="close")for(let Le=1;Le<X.length;Le++)X[Le]=""}}}}return xe(ve)}catch{return I}}var Vn={NO_ERROR:0,TIMEOUT:8},Nr={},un;function jr(){}m(jr,bt),jr.prototype.g=function(){return new XMLHttpRequest},un=new jr;function Fr(d){return encodeURIComponent(String(d))}function ln(d){var I=1;d=d.split(":");const U=[];for(;I>0&&d.length;)U.push(d.shift()),I--;return d.length&&U.push(d.join(":")),U}function Xt(d,I,U,X){this.j=d,this.i=I,this.l=U,this.S=X||1,this.V=new ye(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fn}function fn(){this.i=null,this.g="",this.h=!1}var dn={},Ei={};function rr(d,I,U){d.M=1,d.A=qn(Ur(I)),d.u=U,d.R=!0,Gr(d,null)}function Gr(d,I){d.F=Date.now(),Wt(d),d.B=Ur(d.A);var U=d.B,X=d.S;Array.isArray(X)||(X=[String(X)]),ls(U.i,"t",X),d.C=0,U=d.j.L,d.h=new fn,d.g=ju(d.j,U?I:null,!d.u),d.P>0&&(d.O=new Y(h(d.Y,d,d.g),d.P)),I=d.V,U=d.g,X=d.ba;var ce="readystatechange";Array.isArray(ce)||(ce&&(Se[0]=ce.toString()),ce=Se);for(let ve=0;ve<ce.length;ve++){const Le=ke(U,ce[ve],X||I.handleEvent,!1,I.h||I);if(!Le)break;I.g[Le.key]=Le}I=d.J?M(d.J):{},d.u?(d.v||(d.v="POST"),I["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,I)):(d.v="GET",d.g.ea(d.B,d.v,null,I)),ge(),mt(d.i,d.v,d.B,d.l,d.S,d.u)}Xt.prototype.ba=function(d){d=d.target;const I=this.O;I&&wn(d)==3?I.j():this.Y(d)},Xt.prototype.Y=function(d){try{if(d==this.g)e:{const at=wn(this.g),xt=this.g.ya(),Tt=this.g.ca();if(!(at<3)&&(at!=3||this.g&&(this.h.h||this.g.la()||Mu(this.g)))){this.K||at!=4||xt==7||(xt==8||Tt<=0?ge(3):ge(2)),gt(this);var I=this.g.ca();this.X=I;var U=Bn(this);if(this.o=I==200,ot(this.i,this.v,this.B,this.l,this.S,at,I),this.o){if(this.U&&!this.L){t:{if(this.g){var X,ce=this.g;if((X=ce.g?ce.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(X)){var ve=X;break t}}ve=null}if(d=ve)ut(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rt(this,d);else{this.o=!1,this.m=3,$e(12),Kr(this),lo(this);break e}}if(this.R){d=!0;let Ut;for(;!this.K&&this.C<U.length;)if(Ut=bi(this,U),Ut==Ei){at==4&&(this.m=4,$e(14),d=!1),ut(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==dn){this.m=4,$e(15),ut(this.i,this.l,U,"[Invalid Chunk]"),d=!1;break}else ut(this.i,this.l,Ut,null),Rt(this,Ut);if(hn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||U.length!=0||this.h.h||(this.m=1,$e(16),d=!1),this.o=this.o&&d,!d)ut(this.i,this.l,U,"[Invalid Chunked Response]"),Kr(this),lo(this);else if(U.length>0&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.aa&&!Le.P&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),wo(Le),Le.P=!0,$e(11))}}else ut(this.i,this.l,U,null),Rt(this,U);at==4&&Kr(this),this.o&&!this.K&&(at==4?ya(this.j,this):(this.o=!1,Wt(this)))}else ds(this.g),I==400&&U.indexOf("Unknown SID")>0?(this.m=3,$e(12)):(this.m=0,$e(13)),Kr(this),lo(this)}}}catch{}finally{}};function Bn(d){if(!hn(d))return d.g.la();const I=Mu(d.g);if(I==="")return"";let U="";const X=I.length,ce=wn(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Kr(d),lo(d),"";d.h.i=new c.TextDecoder}for(let ve=0;ve<X;ve++)d.h.h=!0,U+=d.h.i.decode(I[ve],{stream:!(ce&&ve==X-1)});return I.length=0,d.h.g+=U,d.C=0,d.h.g}function hn(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function bi(d,I){var U=d.C,X=I.indexOf(`
`,U);return X==-1?Ei:(U=Number(I.substring(U,X)),isNaN(U)?dn:(X+=1,X+U>I.length?Ei:(I=I.slice(X,X+U),d.C=X+U,I)))}Xt.prototype.cancel=function(){this.K=!0,Kr(this)};function Wt(d){d.T=Date.now()+d.H,cr(d,d.H)}function cr(d,I){if(d.D!=null)throw Error("WatchDog timer not null");d.D=vt(h(d.aa,d),I)}function gt(d){d.D&&(c.clearTimeout(d.D),d.D=null)}Xt.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ft(this.i,this.B),this.M!=2&&(ge(),$e(17)),Kr(this),this.m=2,lo(this)):cr(this,this.T-d)};function lo(d){d.j.I==0||d.K||ya(d.j,d)}function Kr(d){gt(d);var I=d.O;I&&typeof I.dispose=="function"&&I.dispose(),d.O=null,Oe(d.V),d.g&&(I=d.g,d.g=null,I.abort(),I.dispose())}function Rt(d,I){try{var U=d.j;if(U.I!=0&&(U.g==d||ns(U.h,d))){if(!d.L&&ns(U.h,d)&&U.I==3){try{var X=U.Ba.g.parse(I)}catch{X=null}if(Array.isArray(X)&&X.length==3){var ce=X;if(ce[0]==0){e:if(!U.v){if(U.g)if(U.g.F+3e3<d.F)ga(U),Or(U);else break e;Tn(U),$e(18)}}else U.xa=ce[1],0<U.xa-U.K&&ce[2]<37500&&U.F&&U.A==0&&!U.C&&(U.C=vt(h(U.Va,U),6e3));fo(U.h)<=1&&U.ta&&(U.ta=void 0)}else Ir(U,11)}else if((d.L||U.g==d)&&ga(U),!P(I))for(ce=U.Ba.g.parse(I),I=0;I<ce.length;I++){let Tt=ce[I];const Ut=Tt[0];if(!(Ut<=U.K))if(U.K=Ut,Tt=Tt[1],U.I==2)if(Tt[0]=="c"){U.M=Tt[1],U.ba=Tt[2];const Vr=Tt[3];Vr!=null&&(U.ka=Vr,U.j.info("VER="+U.ka));const En=Tt[4];En!=null&&(U.za=En,U.j.info("SVER="+U.za));const bn=Tt[5];bn!=null&&typeof bn=="number"&&bn>0&&(X=1.5*bn,U.O=X,U.j.info("backChannelRequestTimeoutMs_="+X)),X=U;const Cn=d.g;if(Cn){const Sa=Cn.g?Cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sa){var ve=X.h;ve.g||Sa.indexOf("spdy")==-1&&Sa.indexOf("quic")==-1&&Sa.indexOf("h2")==-1||(ve.j=ve.l,ve.g=new Set,ve.h&&(la(ve,ve.h),ve.h=null))}if(X.G){const vs=Cn.g?Cn.g.getResponseHeader("X-HTTP-Session-Id"):null;vs&&(X.wa=vs,wt(X.J,X.G,vs))}}U.I=3,U.l&&U.l.ra(),U.aa&&(U.T=Date.now()-d.F,U.j.info("Handshake RTT: "+U.T+"ms")),X=U;var Le=d;if(X.na=ps(X,X.L?X.ba:null,X.W),Le.L){ho(X.h,Le);var at=Le,xt=X.O;xt&&(at.H=xt),at.D&&(gt(at),Wt(at)),X.g=Le}else nr(X);U.i.length>0&&$n(U)}else Tt[0]!="stop"&&Tt[0]!="close"||Ir(U,7);else U.I==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?Ir(U,7):va(U):Tt[0]!="noop"&&U.l&&U.l.qa(Tt),U.A=0)}}ge(4)}catch{}}var yf=class{constructor(d,I){this.g=d,this.map=I}};function ua(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rs(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function fo(d){return d.h?1:d.g?d.g.size:0}function ns(d,I){return d.h?d.h==I:d.g?d.g.has(I):!1}function la(d,I){d.g?d.g.add(I):d.h=I}function ho(d,I){d.h&&d.h==I?d.h=null:d.g&&d.g.has(I)&&d.g.delete(I)}ua.prototype.cancel=function(){if(this.i=Cr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Cr(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let I=d.i;for(const U of d.g.values())I=I.concat(U.G);return I}return _(d.i)}var Lu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pr(d,I){if(d){d=d.split("&");for(let U=0;U<d.length;U++){const X=d[U].indexOf("=");let ce,ve=null;X>=0?(ce=d[U].substring(0,X),ve=d[U].substring(X+1)):ce=d[U],I(ce,ve?decodeURIComponent(ve.replace(/\+/g," ")):"")}}}function pn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let I;d instanceof pn?(this.l=d.l,po(this,d.j),this.o=d.o,this.g=d.g,vn(this,d.u),this.h=d.h,Ci(this,fs(d.i)),this.m=d.m):d&&(I=String(d).match(Lu))?(this.l=!1,po(this,I[1]||"",!0),this.o=vo(I[2]||""),this.g=vo(I[3]||"",!0),vn(this,I[4]),this.h=vo(I[5]||"",!0),Ci(this,I[6]||"",!0),this.m=vo(I[7]||"")):(this.l=!1,this.i=new lt(null,this.l))}pn.prototype.toString=function(){const d=[];var I=this.j;I&&d.push(mo(I,os,!0),":");var U=this.g;return(U||I=="file")&&(d.push("//"),(I=this.o)&&d.push(mo(I,os,!0),"@"),d.push(Fr(U).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U=this.u,U!=null&&d.push(":",String(U))),(U=this.h)&&(this.g&&U.charAt(0)!="/"&&d.push("/"),d.push(mo(U,U.charAt(0)=="/"?go:as,!0))),(U=this.i.toString())&&d.push("?",U),(U=this.m)&&d.push("#",mo(U,ss)),d.join("")},pn.prototype.resolve=function(d){const I=Ur(this);let U=!!d.j;U?po(I,d.j):U=!!d.o,U?I.o=d.o:U=!!d.g,U?I.g=d.g:U=d.u!=null;var X=d.h;if(U)vn(I,d.u);else if(U=!!d.h){if(X.charAt(0)!="/")if(this.g&&!this.h)X="/"+X;else{var ce=I.h.lastIndexOf("/");ce!=-1&&(X=I.h.slice(0,ce+1)+X)}if(ce=X,ce==".."||ce==".")X="";else if(ce.indexOf("./")!=-1||ce.indexOf("/.")!=-1){X=ce.lastIndexOf("/",0)==0,ce=ce.split("/");const ve=[];for(let Le=0;Le<ce.length;){const at=ce[Le++];at=="."?X&&Le==ce.length&&ve.push(""):at==".."?((ve.length>1||ve.length==1&&ve[0]!="")&&ve.pop(),X&&Le==ce.length&&ve.push("")):(ve.push(at),X=!0)}X=ve.join("/")}else X=ce}return U?I.h=X:U=d.i.toString()!=="",U?Ci(I,fs(d.i)):U=!!d.m,U&&(I.m=d.m),I};function Ur(d){return new pn(d)}function po(d,I,U){d.j=U?vo(I,!0):I,d.j&&(d.j=d.j.replace(/:$/,""))}function vn(d,I){if(I){if(I=Number(I),isNaN(I)||I<0)throw Error("Bad port number "+I);d.u=I}else d.u=null}function Ci(d,I,U){I instanceof lt?(d.i=I,da(d.i,d.l)):(U||(I=mo(I,_f)),d.i=new lt(I,d.l))}function wt(d,I,U){d.i.set(I,U)}function qn(d){return wt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function vo(d,I){return d?I?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function mo(d,I,U){return typeof d=="string"?(d=encodeURI(d).replace(I,is),U&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function is(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var os=/[#\/\?@]/g,as=/[#\?:]/g,go=/[#\?]/g,_f=/[#\?@]/g,ss=/#/g;function lt(d,I){this.h=this.g=null,this.i=d||null,this.j=!!I}function mn(d){d.g||(d.g=new Map,d.h=0,d.i&&Pr(d.i,function(I,U){d.add(decodeURIComponent(I.replace(/\+/g," ")),U)}))}i=lt.prototype,i.add=function(d,I){mn(this),this.i=null,d=gn(this,d);let U=this.g.get(d);return U||this.g.set(d,U=[]),U.push(I),this.h+=1,this};function cs(d,I){mn(d),I=gn(d,I),d.g.has(I)&&(d.i=null,d.h-=d.g.get(I).length,d.g.delete(I))}function fa(d,I){return mn(d),I=gn(d,I),d.g.has(I)}i.forEach=function(d,I){mn(this),this.g.forEach(function(U,X){U.forEach(function(ce){d.call(I,ce,X,this)},this)},this)};function us(d,I){mn(d);let U=[];if(typeof I=="string")fa(d,I)&&(U=U.concat(d.g.get(gn(d,I))));else for(d=Array.from(d.g.values()),I=0;I<d.length;I++)U=U.concat(d[I]);return U}i.set=function(d,I){return mn(this),this.i=null,d=gn(this,d),fa(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[I]),this.h+=1,this},i.get=function(d,I){return d?(d=us(this,d),d.length>0?String(d[0]):I):I};function ls(d,I,U){cs(d,I),U.length>0&&(d.i=null,d.g.set(gn(d,I),_(U)),d.h+=U.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],I=Array.from(this.g.keys());for(let X=0;X<I.length;X++){var U=I[X];const ce=Fr(U);U=us(this,U);for(let ve=0;ve<U.length;ve++){let Le=ce;U[ve]!==""&&(Le+="="+Fr(U[ve])),d.push(Le)}}return this.i=d.join("&")};function fs(d){const I=new lt;return I.i=d.i,d.g&&(I.g=new Map(d.g),I.h=d.h),I}function gn(d,I){return I=String(I),d.j&&(I=I.toLowerCase()),I}function da(d,I){I&&!d.j&&(mn(d),d.i=null,d.g.forEach(function(U,X){const ce=X.toLowerCase();X!=ce&&(cs(this,X),ls(this,ce,U))},d)),d.j=I}function yn(d,I){const U=new st;if(c.Image){const X=new Image;X.onload=v(Zt,U,"TestLoadImage: loaded",!0,I,X),X.onerror=v(Zt,U,"TestLoadImage: error",!1,I,X),X.onabort=v(Zt,U,"TestLoadImage: abort",!1,I,X),X.ontimeout=v(Zt,U,"TestLoadImage: timeout",!1,I,X),c.setTimeout(function(){X.ontimeout&&X.ontimeout()},1e4),X.src=d}else I(!1)}function _n(d,I){const U=new st,X=new AbortController,ce=setTimeout(()=>{X.abort(),Zt(U,"TestPingServer: timeout",!1,I)},1e4);fetch(d,{signal:X.signal}).then(ve=>{clearTimeout(ce),ve.ok?Zt(U,"TestPingServer: ok",!0,I):Zt(U,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(ce),Zt(U,"TestPingServer: error",!1,I)})}function Zt(d,I,U,X,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),X(U)}catch{}}function yo(){this.g=new He}function Hn(d){this.i=d.Sb||null,this.h=d.ab||!1}m(Hn,bt),Hn.prototype.g=function(){return new Rr(this.i,this.h)};function Rr(d,I){Ue.call(this),this.H=d,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Rr,Ue),i=Rr.prototype,i.open=function(d,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=I,this.readyState=1,Qr(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const I={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(I.body=d),(this.H||c).fetch(new Request(this.D,I)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pi(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Qr(this)),this.g&&(this.readyState=3,Qr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Au(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Au(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var I=d.value?d.value:new Uint8Array(0);(I=this.B.decode(I,{stream:!d.done}))&&(this.response=this.responseText+=I)}d.done?Pi(this):Qr(this),this.readyState==3&&Au(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,Pi(this))},i.Na=function(d){this.g&&(this.response=d,Pi(this))},i.ga=function(){this.g&&Pi(this)};function Pi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Qr(d)}i.setRequestHeader=function(d,I){this.A.append(d,I)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],I=this.h.entries();for(var U=I.next();!U.done;)U=U.value,d.push(U[0]+": "+U[1]),U=I.next();return d.join(`\r
`)};function Qr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Rr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function xu(d){let I="";return G(d,function(U,X){I+=X,I+=":",I+=U,I+=`\r
`}),I}function ha(d,I,U){e:{for(X in U){var X=!1;break e}X=!0}X||(U=xu(U),typeof d=="string"?U!=null&&Fr(U):wt(d,I,U))}function Ct(d){Ue.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Ct,Ue);var Du=/^https?$/i,wf=["POST","PUT"];i=Ct.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,I,U,X){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);I=I?I.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():un.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(I,String(d),!0),this.B=!1}catch(ve){Ri(this,ve);return}if(d=U||"",U=new Map(this.headers),X)if(Object.getPrototypeOf(X)===Object.prototype)for(var ce in X)U.set(ce,X[ce]);else if(typeof X.keys=="function"&&typeof X.get=="function")for(const ve of X.keys())U.set(ve,X.get(ve));else throw Error("Unknown input type for opt_headers: "+String(X));X=Array.from(U.keys()).find(ve=>ve.toLowerCase()=="content-type"),ce=c.FormData&&d instanceof c.FormData,!(Array.prototype.indexOf.call(wf,I,void 0)>=0)||X||ce||U.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ve,Le]of U)this.g.setRequestHeader(ve,Le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(ve){Ri(this,ve)}};function Ri(d,I){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=I,d.o=5,Oi(d),zn(d)}function Oi(d){d.A||(d.A=!0,Re(d,"complete"),Re(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Re(this,"complete"),Re(this,"abort"),zn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zn(this,!0)),Ct.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Wn(this):this.Xa())},i.Xa=function(){Wn(this)};function Wn(d){if(d.h&&typeof o<"u"){if(d.v&&wn(d)==4)setTimeout(d.Ca.bind(d),0);else if(Re(d,"readystatechange"),wn(d)==4){d.h=!1;try{const ve=d.ca();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var U;if(!(U=I)){var X;if(X=ve===0){let Le=String(d.D).match(Lu)[1]||null;!Le&&c.self&&c.self.location&&(Le=c.self.location.protocol.slice(0,-1)),X=!Du.test(Le?Le.toLowerCase():"")}U=X}if(U)Re(d,"complete"),Re(d,"success");else{d.o=6;try{var ce=wn(d)>2?d.g.statusText:""}catch{ce=""}d.l=ce+" ["+d.ca()+"]",Oi(d)}}finally{zn(d)}}}}function zn(d,I){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const U=d.g;d.g=null,I||Re(d,"ready");try{U.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function wn(d){return d.g?d.g.readyState:0}i.ca=function(){try{return wn(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var I=this.g.responseText;return d&&I.indexOf(d)==0&&(I=I.substring(d.length)),Fe(I)}};function Mu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ds(d){const I={};d=(d.g&&wn(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let X=0;X<d.length;X++){if(P(d[X]))continue;var U=ln(d[X]);const ce=U[0];if(U=U[1],typeof U!="string")continue;U=U.trim();const ve=I[ce]||[];I[ce]=ve,ve.push(U)}J(I,function(X){return X.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sn(d,I,U){return U&&U.internalChannelParams&&U.internalChannelParams[d]||I}function pa(d){this.za=0,this.i=[],this.j=new st,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sn("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sn("baseRetryDelayMs",5e3,d),this.Za=Sn("retryDelaySeedMs",1e4,d),this.Ta=Sn("forwardChannelMaxRetries",2,d),this.va=Sn("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new ua(d&&d.concurrentRequestLimit),this.Ba=new yo,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=pa.prototype,i.ka=8,i.I=1,i.connect=function(d,I,U,X){$e(0),this.W=d,this.H=I||{},U&&X!==void 0&&(this.H.OSID=U,this.H.OAID=X),this.F=this.X,this.J=ps(this,null,this.W),$n(this)};function va(d){if(ma(d),d.I==3){var I=d.V++,U=Ur(d.J);if(wt(U,"SID",d.M),wt(U,"RID",I),wt(U,"TYPE","terminate"),kn(d,U),I=new Xt(d,d.j,I),I.M=2,I.A=qn(Ur(U)),U=!1,c.navigator&&c.navigator.sendBeacon)try{U=c.navigator.sendBeacon(I.A.toString(),"")}catch{}!U&&c.Image&&(new Image().src=I.A,U=!0),U||(I.g=ju(I.j,null),I.g.ea(I.A)),I.F=Date.now(),Wt(I)}So(d)}function Or(d){d.g&&(wo(d),d.g.cancel(),d.g=null)}function ma(d){Or(d),d.v&&(c.clearTimeout(d.v),d.v=null),ga(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&c.clearTimeout(d.m),d.m=null)}function $n(d){if(!rs(d.h)&&!d.m){d.m=!0;var I=d.Ea;L||S(),b||(L(),b=!0),y.add(I,d),d.D=0}}function Nu(d,I){return fo(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=I.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=vt(h(d.Ea,d,I),_a(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const ce=new Xt(this,this.j,d);let ve=this.o;if(this.U&&(ve?(ve=M(ve),ee(ve,this.U)):ve=this.U),this.u!==null||this.R||(ce.J=ve,ve=null),this.S)e:{for(var I=0,U=0;U<this.i.length;U++){t:{var X=this.i[U];if("__data__"in X.map&&(X=X.map.__data__,typeof X=="string")){X=X.length;break t}X=void 0}if(X===void 0)break;if(I+=X,I>4096){I=U;break e}if(I===4096||U===this.i.length-1){I=U+1;break e}}I=1e3}else I=1e3;I=hs(this,ce,I),U=Ur(this.J),wt(U,"RID",d),wt(U,"CVER",22),this.G&&wt(U,"X-HTTP-Session-Id",this.G),kn(this,U),ve&&(this.R?I="headers="+Fr(xu(ve))+"&"+I:this.u&&ha(U,this.u,ve)),la(this.h,ce),this.Ra&&wt(U,"TYPE","init"),this.S?(wt(U,"$req",I),wt(U,"SID","null"),ce.U=!0,rr(ce,U,null)):rr(ce,U,I),this.I=2}}else this.I==3&&(d?_o(this,d):this.i.length==0||rs(this.h)||_o(this))};function _o(d,I){var U;I?U=I.l:U=d.V++;const X=Ur(d.J);wt(X,"SID",d.M),wt(X,"RID",U),wt(X,"AID",d.K),kn(d,X),d.u&&d.o&&ha(X,d.u,d.o),U=new Xt(d,d.j,U,d.D+1),d.u===null&&(U.J=d.o),I&&(d.i=I.G.concat(d.i)),I=hs(d,U,1e3),U.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),la(d.h,U),rr(U,X,I)}function kn(d,I){d.H&&G(d.H,function(U,X){wt(I,X,U)}),d.l&&G({},function(U,X){wt(I,X,U)})}function hs(d,I,U){U=Math.min(d.i.length,U);const X=d.l?h(d.l.Ka,d.l,d):null;e:{var ce=d.i;let at=-1;for(;;){const xt=["count="+U];at==-1?U>0?(at=ce[0].g,xt.push("ofs="+at)):at=0:xt.push("ofs="+at);let Tt=!0;for(let Ut=0;Ut<U;Ut++){var ve=ce[Ut].g;const Vr=ce[Ut].map;if(ve-=at,ve<0)at=Math.max(0,ce[Ut].g-100),Tt=!1;else try{ve="req"+ve+"_"||"";try{var Le=Vr instanceof Map?Vr:Object.entries(Vr);for(const[En,bn]of Le){let Cn=bn;u(bn)&&(Cn=xe(bn)),xt.push(ve+En+"="+encodeURIComponent(Cn))}}catch(En){throw xt.push(ve+"type="+encodeURIComponent("_badmap")),En}}catch{X&&X(Vr)}}if(Tt){Le=xt.join("&");break e}}Le=void 0}return d=d.i.splice(0,U),I.G=d,Le}function nr(d){if(!d.g&&!d.v){d.Y=1;var I=d.Da;L||S(),b||(L(),b=!0),y.add(I,d),d.A=0}}function Tn(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=vt(h(d.Da,d),_a(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,Ii(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=vt(h(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$e(10),Or(this),Ii(this))};function wo(d){d.B!=null&&(c.clearTimeout(d.B),d.B=null)}function Ii(d){d.g=new Xt(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var I=Ur(d.na);wt(I,"RID","rpc"),wt(I,"SID",d.M),wt(I,"AID",d.K),wt(I,"CI",d.F?"0":"1"),!d.F&&d.ia&&wt(I,"TO",d.ia),wt(I,"TYPE","xmlhttp"),kn(d,I),d.u&&d.o&&ha(I,d.u,d.o),d.O&&(d.g.H=d.O);var U=d.g;d=d.ba,U.M=1,U.A=qn(Ur(I)),U.u=null,U.R=!0,Gr(U,d)}i.Va=function(){this.C!=null&&(this.C=null,Or(this),Tn(this),$e(19))};function ga(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function ya(d,I){var U=null;if(d.g==I){ga(d),wo(d),d.g=null;var X=2}else if(ns(d.h,I))U=I.G,ho(d.h,I),X=1;else return;if(d.I!=0){if(I.o)if(X==1){U=I.u?I.u.length:0,I=Date.now()-I.F;var ce=d.D;X=de(),Re(X,new St(X,U)),$n(d)}else nr(d);else if(ce=I.m,ce==3||ce==0&&I.X>0||!(X==1&&Nu(d,I)||X==2&&Tn(d)))switch(U&&U.length>0&&(I=d.h,I.i=I.i.concat(U)),ce){case 1:Ir(d,5);break;case 4:Ir(d,10);break;case 3:Ir(d,6);break;default:Ir(d,2)}}}function _a(d,I){let U=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(U*=2),U*I}function Ir(d,I){if(d.j.info("Error code "+I),I==2){var U=h(d.bb,d),X=d.Ua;const ce=!X;X=new pn(X||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||po(X,"https"),qn(X),ce?yn(X.toString(),U):_n(X.toString(),U)}else $e(2);d.I=0,d.l&&d.l.pa(I),So(d),ma(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),$e(2)):(this.j.info("Failed to ping google.com"),$e(1))};function So(d){if(d.I=0,d.ja=[],d.l){const I=Cr(d.h);(I.length!=0||d.i.length!=0)&&(w(d.ja,I),w(d.ja,d.i),d.h.i.length=0,_(d.i),d.i.length=0),d.l.oa()}}function ps(d,I,U){var X=U instanceof pn?Ur(U):new pn(U);if(X.g!="")I&&(X.g=I+"."+X.g),vn(X,X.u);else{var ce=c.location;X=ce.protocol,I=I?I+"."+ce.hostname:ce.hostname,ce=+ce.port;const ve=new pn(null);X&&po(ve,X),I&&(ve.g=I),ce&&vn(ve,ce),U&&(ve.h=U),X=ve}return U=d.G,I=d.wa,U&&I&&wt(X,U,I),wt(X,"VER",d.ka),kn(d,X),X}function ju(d,I,U){if(I&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return I=d.Aa&&!d.ma?new Ct(new Hn({ab:U})):new Ct(d.ma),I.Fa(d.L),I}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fu(){}i=Fu.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function mr(d,I){Ue.call(this),this.g=new pa(I),this.l=d,this.h=I&&I.messageUrlParams||null,d=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(d?d["X-WebChannel-Content-Type"]=I.messageContentType:d={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.sa&&(d?d["X-WebChannel-Client-Profile"]=I.sa:d={"X-WebChannel-Client-Profile":I.sa}),this.g.U=d,(d=I&&I.Qb)&&!P(d)&&(this.g.u=d),this.A=I&&I.supportsCrossDomainXhr||!1,this.v=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!P(I)&&(this.g.G=I,d=this.h,d!==null&&I in d&&(d=this.h,I in d&&delete d[I])),this.j=new Li(this)}m(mr,Ue),mr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mr.prototype.close=function(){va(this.g)},mr.prototype.o=function(d){var I=this.g;if(typeof d=="string"){var U={};U.__data__=d,d=U}else this.v&&(U={},U.__data__=xe(d),d=U);I.i.push(new yf(I.Ya++,d)),I.I==3&&$n(I)},mr.prototype.N=function(){this.g.l=null,delete this.j,va(this.g),delete this.g,mr.Z.N.call(this)};function wa(d){Ce.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var I=d.__sm__;if(I){e:{for(const U in I){d=U;break e}d=void 0}(this.i=d)&&(d=this.i,I=I!==null&&d in I?I[d]:void 0),this.data=I}else this.data=d}m(wa,Ce);function Uu(){_e.call(this),this.status=1}m(Uu,_e);function Li(d){this.g=d}m(Li,Fu),Li.prototype.ra=function(){Re(this.g,"a")},Li.prototype.qa=function(d){Re(this.g,new wa(d))},Li.prototype.pa=function(d){Re(this.g,new Uu)},Li.prototype.oa=function(){Re(this.g,"b")},mr.prototype.send=mr.prototype.o,mr.prototype.open=mr.prototype.m,mr.prototype.close=mr.prototype.close,Vn.NO_ERROR=0,Vn.TIMEOUT=8,Vn.HTTP_ERROR=6,Nr.COMPLETE="complete",Gt.EventType=Lt,Lt.OPEN="a",Lt.CLOSE="b",Lt.ERROR="c",Lt.MESSAGE="d",Ue.prototype.listen=Ue.prototype.J,Ct.prototype.listenOnce=Ct.prototype.K,Ct.prototype.getLastError=Ct.prototype.Ha,Ct.prototype.getLastErrorCode=Ct.prototype.ya,Ct.prototype.getStatus=Ct.prototype.ca,Ct.prototype.getResponseJson=Ct.prototype.La,Ct.prototype.getResponseText=Ct.prototype.la,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Fa}).apply(typeof Dl<"u"?Dl:typeof self<"u"?self:typeof window<"u"?window:{});const fy="@firebase/firestore",dy="4.9.2";class fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");let Pu="12.3.0";const Qa=new Np("@firebase/firestore");function an(i,...e){if(Qa.logLevel<=kt.DEBUG){const n=e.map(Gp);Qa.debug(`Firestore (${Pu}): ${i}`,...n)}}function uT(i,...e){if(Qa.logLevel<=kt.ERROR){const n=e.map(Gp);Qa.error(`Firestore (${Pu}): ${i}`,...n)}}function MO(i,...e){if(Qa.logLevel<=kt.WARN){const n=e.map(Gp);Qa.warn(`Firestore (${Pu}): ${i}`,...n)}}function Gp(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function _u(i,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,lT(i,a,n)}function lT(i,e,n){let a=`FIRESTORE (${Pu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw uT(a),new Error(a)}function lu(i,e,n,a){let s="Unexpected state";typeof n=="string"?s=n:a=n,i||lT(e,s,a)}const dt={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class ht extends Un{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fu{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class fT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(fr.UNAUTHENTICATED)))}shutdown(){}}class jO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class FO{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){lu(this.o===void 0,42304);let a=this.i;const s=f=>this.i!==a?(a=this.i,n(f)):Promise.resolve();let o=new fu;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new fu,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},u=f=>{an("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(an("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new fu)}}),0),c()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(an("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(lu(typeof a.accessToken=="string",31837,{l:a}),new fT(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lu(e===null||typeof e=="string",2055,{h:e}),new fr(e)}}class UO{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class VO{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new UO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(fr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){lu(this.o===void 0,3512);const a=o=>{o.error!=null&&an("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,an("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>a(o)))};const s=o=>{an("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):an("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new hy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(lu(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new hy(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function qO(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<i;a++)n[a]=Math.floor(256*Math.random());return n}class HO{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const s=qO(40);for(let o=0;o<s.length;++o)a.length<20&&s[o]<n&&(a+=e.charAt(s[o]%62))}return a}}function ao(i,e){return i<e?-1:i>e?1:0}function WO(i,e){const n=Math.min(i.length,e.length);for(let a=0;a<n;a++){const s=i.charAt(a),o=e.charAt(a);if(s!==o)return eh(s)===eh(o)?ao(s,o):eh(s)?1:-1}return ao(i.length,e.length)}const zO=55296,$O=57343;function eh(i){const e=i.charCodeAt(0);return e>=zO&&e<=$O}const py="__name__";class xn{constructor(e,n,a){n===void 0?n=0:n>e.length&&_u(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&_u(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return xn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xn?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let s=0;s<a;s++){const o=xn.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return ao(e.length,n.length)}static compareSegments(e,n){const a=xn.isNumericId(e),s=xn.isNumericId(n);return a&&!s?-1:!a&&s?1:a&&s?xn.extractNumericId(e).compare(xn.extractNumericId(n)):WO(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $p.fromString(e.substring(4,e.length-2))}}class nn extends xn{construct(e,n,a){return new nn(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new ht(dt.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((s=>s.length>0)))}return new nn(n)}static emptyPath(){return new nn([])}}const GO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ko extends xn{construct(e,n,a){return new Ko(e,n,a)}static isValidIdentifier(e){return GO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ko.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===py}static keyField(){return new Ko([py])}static fromServerFormat(e){const n=[];let a="",s=0;const o=()=>{if(a.length===0)throw new ht(dt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new ht(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ht(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=f,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(a+=u,s++):(o(),s++)}if(o(),c)throw new ht(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ko(n)}static emptyPath(){return new Ko([])}}class Qo{constructor(e){this.path=e}static fromPath(e){return new Qo(nn.fromString(e))}static fromName(e){return new Qo(nn.fromString(e).popFirst(5))}static empty(){return new Qo(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qo(new nn(e.slice()))}}function KO(i,e,n,a){if(e===!0&&a===!0)throw new ht(dt.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function QO(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function JO(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":_u(12329,{type:typeof i})}function YO(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ht(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=JO(i);throw new ht(dt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function qt(i,e){const n={typeString:i};return e&&(n.value=e),n}function Ru(i,e){if(!QO(i))throw new ht(dt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const s=e[a].typeString,o="value"in e[a]?{value:e[a].value}:void 0;if(!(a in i)){n=`JSON missing required field: '${a}'`;break}const c=i[a];if(s&&typeof c!==s){n=`JSON field '${a}' must be a ${s}.`;break}if(o!==void 0&&c!==o.value){n=`Expected '${a}' field to equal '${o.value}'`;break}}if(n)throw new ht(dt.INVALID_ARGUMENT,n);return!0}const vy=-62135596800,my=1e6;class Dn{static now(){return Dn.fromMillis(Date.now())}static fromDate(e){return Dn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*my);return new Dn(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ht(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ht(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<vy)throw new ht(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ht(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/my}_compareTo(e){return this.seconds===e.seconds?ao(this.nanoseconds,e.nanoseconds):ao(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ru(e,Dn._jsonSchema))return new Dn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dn._jsonSchemaVersion="firestore/timestamp/1.0",Dn._jsonSchema={type:qt("string",Dn._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};function XO(i){return i.name==="IndexedDbTransactionError"}class ZO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ta{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ZO("Invalid base64 string: "+o):o}})(e);return new ta(n)}static fromUint8Array(e){const n=(function(s){let o="";for(let c=0;c<s.length;++c)o+=String.fromCharCode(s[c]);return o})(e);return new ta(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let s=0;s<n.length;s++)a[s]=n.charCodeAt(s);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ao(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ta.EMPTY_BYTE_STRING=new ta("");const Cp="(default)";class af{constructor(e,n){this.projectId=e,this.database=n||Cp}static empty(){return new af("","")}get isDefaultDatabase(){return this.database===Cp}isEqual(e){return e instanceof af&&e.projectId===this.projectId&&e.database===this.database}}class e1{constructor(e,n=null,a=[],s=[],o=null,c="F",u=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=s,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function t1(i){return new e1(i)}var gy,ft;(ft=gy||(gy={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";new $p([4294967295,4294967295],0);const r1=41943040;const n1=1048576;function th(){return typeof document<"u"?document:null}class i1{constructor(e,n,a=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=a,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-a);s>0&&an("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}class Kp{constructor(e,n,a,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=s,this.removalCallback=o,this.deferred=new fu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,s,o){const c=Date.now()+a,u=new Kp(e,n,c,s,o);return u.start(a),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht(dt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var yy,_y;(_y=yy||(yy={})).Ma="default",_y.Cache="cache";function o1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const wy=new Map;const dT="firestore.googleapis.com",Sy=!0;class ky{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ht(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dT,this.ssl=Sy}else this.host=e.host,this.ssl=e.ssl??Sy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=r1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<n1)throw new ht(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=o1(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ht(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ht(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ht(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,s){return a.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hT{constructor(e,n,a,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ky({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ht(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ht(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ky(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new NO;switch(a.type){case"firstParty":return new VO(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new ht(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=wy.get(n);a&&(an("ComponentProvider","Removing Datastore"),wy.delete(n),a.terminate())})(this),Promise.resolve()}}function a1(i,e,n,a={}){i=YO(i,hT);const s=na(e),o=i._getSettings(),c={...o,emulatorOptions:i._getEmulatorOptions()},u=`${e}:${n}`;s&&(Dp(`https://${u}`),Mp("Firestore",!0)),o.host!==dT&&o.host!==u&&MO("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:u,ssl:s,emulatorOptions:a};if(!Xo(f,c)&&(i._setSettings(f),a.mockUserToken)){let h,v;if(typeof a.mockUserToken=="string")h=a.mockUserToken,v=fr.MOCK_USER;else{h=zC(a.mockUserToken,i._app?.options.projectId);const m=a.mockUserToken.sub||a.mockUserToken.user_id;if(!m)throw new ht(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new fr(m)}i._authCredentials=new jO(new fT(h,v))}}class Qp{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Qp(this.firestore,e,this._query)}}class Mn{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mn(this.firestore,e,this._key)}toJSON(){return{type:Mn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(Ru(n,Mn._jsonSchema))return new Mn(e,a||null,new Qo(nn.fromString(n.referencePath)))}}Mn._jsonSchemaVersion="firestore/documentReference/1.0",Mn._jsonSchema={type:qt("string",Mn._jsonSchemaVersion),referencePath:qt("string")};class Jp extends Qp{constructor(e,n,a){super(e,n,t1(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mn(this.firestore,null,new Qo(e))}withConverter(e){return new Jp(this.firestore,e,this._path)}}const Ty="AsyncQueue";class Ey{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new i1(this,"async_queue_retry"),this._c=()=>{const a=th();a&&an(Ty,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=th();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=th();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new fu;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!XO(e))throw e;an(Ty,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,uT("INTERNAL UNHANDLED ERROR: ",by(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Kp.createAndSchedule(this,e,n,a,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&_u(47125,{Pc:by(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function by(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class s1 extends hT{constructor(e,n,a,s){super(e,n,a,s),this.type="firestore",this._queue=new Ey,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ey(e),this._firestoreClient=void 0,await e}}}function c1(i,e){const n=typeof i=="object"?i:df(),a=typeof i=="string"?i:Cp,s=ff(n,"firestore").getImmediate({identifier:a});if(!s._initialized){const o=Sk("firestore");o&&a1(s,...o)}return s}class gi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gi(ta.fromBase64String(e))}catch(n){throw new ht(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gi(ta.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ru(e,gi._jsonSchema))return gi.fromBase64String(e.bytes)}}gi._jsonSchemaVersion="firestore/bytes/1.0",gi._jsonSchema={type:qt("string",gi._jsonSchemaVersion),bytes:qt("string")};class pT{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ht(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ko(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Jo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ht(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ht(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ao(this._lat,e._lat)||ao(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Jo._jsonSchemaVersion}}static fromJSON(e){if(Ru(e,Jo._jsonSchema))return new Jo(e.latitude,e.longitude)}}Jo._jsonSchemaVersion="firestore/geoPoint/1.0",Jo._jsonSchema={type:qt("string",Jo._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};class Yo{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,s){if(a.length!==s.length)return!1;for(let o=0;o<a.length;++o)if(a[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Yo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ru(e,Yo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Yo(e.vectorValues);throw new ht(dt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yo._jsonSchemaVersion="firestore/vectorValue/1.0",Yo._jsonSchema={type:qt("string",Yo._jsonSchemaVersion),vectorValues:qt("object")};const u1=new RegExp("[~\\*/\\[\\]]");function l1(i,e,n){if(e.search(u1)>=0)throw Cy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i);try{return new pT(...e.split("."))._internalPath}catch{throw Cy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i)}}function Cy(i,e,n,a,s){let o=`Function ${e}() called with invalid data`;o+=". ";let c="";return new ht(dt.INVALID_ARGUMENT,o+i+c)}class vT{constructor(e,n,a,s,o){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new f1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(mT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class f1 extends vT{data(){return super.data()}}function mT(i,e){return typeof e=="string"?l1(i,e):e instanceof pT?e._internalPath:e._delegate._internalPath}class Ml{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ga extends vT{constructor(e,n,a,s,o,c){super(e,n,a,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(mT("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(dt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ga._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ga._jsonSchema={type:qt("string",Ga._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};class Kl extends Ga{data(e={}){return super.data(e)}}class du{constructor(e,n,a,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ml(s.hasPendingWrites,s.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new Kl(this._firestore,this._userDataWriter,a.key,a,new Ml(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ht(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((u=>{const f=new Kl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Ml(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const f=new Kl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Ml(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,v=-1;return u.type!==0&&(h=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),v=c.indexOf(u.doc.key)),{type:d1(u.type),doc:f,oldIndex:h,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(dt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=du._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=HO.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),a.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function d1(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _u(61501,{type:i})}}du._jsonSchemaVersion="firestore/querySnapshot/1.0",du._jsonSchema={type:qt("string",du._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};(function(e,n=!0){(function(s){Pu=s})(Xa),Zo(new io("firestore",((a,{instanceIdentifier:s,options:o})=>{const c=a.getProvider("app").getImmediate(),u=new s1(new FO(a.getProvider("auth-internal")),new BO(c,a.getProvider("app-check-internal")),(function(h,v){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ht(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new af(h.options.projectId,v)})(c,s),c);return o={useFetchStreams:n,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Nn(fy,dy,e),Nn(fy,dy,"esm2020")})();const h1={apiKey:"AIzaSyACPSdWefPUoqIXVB1IQagZXgUstihppD8",authDomain:"studio-3998158591-ecbfd.firebaseapp.com",projectId:"studio-3998158591-ecbfd",storageBucket:"studio-3998158591-ecbfd.firebasestorage.app",messagingSenderId:"162624743961E",appId:"1:162624743961:web:3e4302378478570eb79888"},gT=a0().length?df():Ck(h1),eo=xO(gT);c1(gT);typeof window<"u"&&_R(eo,eT).catch(i=>{console.error("Auth persistence error:",i)});const p1="type.googleapis.com/google.protobuf.Int64Value",v1="type.googleapis.com/google.protobuf.UInt64Value";function yT(i,e){const n={};for(const a in i)i.hasOwnProperty(a)&&(n[a]=e(i[a]));return n}function sf(i){if(i==null)return null;if(i instanceof Number&&(i=i.valueOf()),typeof i=="number"&&isFinite(i)||i===!0||i===!1||Object.prototype.toString.call(i)==="[object String]")return i;if(i instanceof Date)return i.toISOString();if(Array.isArray(i))return i.map(e=>sf(e));if(typeof i=="function"||typeof i=="object")return yT(i,e=>sf(e));throw new Error("Data cannot be encoded in JSON: "+i)}function Ja(i){if(i==null)return i;if(i["@type"])switch(i["@type"]){case p1:case v1:{const e=Number(i.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+i);return e}default:throw new Error("Data cannot be decoded from JSON: "+i)}return Array.isArray(i)?i.map(e=>Ja(e)):typeof i=="function"||typeof i=="object"?yT(i,e=>Ja(e)):i}const Yp="functions";const Py={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class br extends Un{constructor(e,n,a){super(`${Yp}/${e}`,n||""),this.details=a,Object.setPrototypeOf(this,br.prototype)}}function m1(i){if(i>=200&&i<300)return"ok";switch(i){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function cf(i,e){let n=m1(i),a=n,s;try{const o=e&&e.error;if(o){const c=o.status;if(typeof c=="string"){if(!Py[c])return new br("internal","internal");n=Py[c],a=c}const u=o.message;typeof u=="string"&&(a=u),s=o.details,s!==void 0&&(s=Ja(s))}}catch{}return n==="ok"?null:new br(n,a,s)}class g1{constructor(e,n,a,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Dr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=a.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||a.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),a=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:a,appCheckToken:s}}}const Pp="us-central1",y1=/^data: (.*?)(?:\n|$)/;function _1(i){let e=null;return{promise:new Promise((n,a)=>{e=setTimeout(()=>{a(new br("deadline-exceeded","deadline-exceeded"))},i)}),cancel:()=>{e&&clearTimeout(e)}}}class w1{constructor(e,n,a,s,o=Pp,c=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new g1(e,n,a,s),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(o);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=Pp}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function S1(i,e,n){const a=na(e);i.emulatorOrigin=`http${a?"s":""}://${e}:${n}`,a&&(Dp(i.emulatorOrigin+"/backends"),Mp("Functions",!0))}function k1(i,e,n){const a=s=>E1(i,e,s,{});return a.stream=(s,o)=>C1(i,e,s,o),a}function _T(i){return i.emulatorOrigin&&na(i.emulatorOrigin)?"include":void 0}async function T1(i,e,n,a,s){n["Content-Type"]="application/json";let o;try{o=await a(i,{method:"POST",body:JSON.stringify(e),headers:n,credentials:_T(s)})}catch{return{status:0,json:null}}let c=null;try{c=await o.json()}catch{}return{status:o.status,json:c}}async function wT(i,e){const n={},a=await i.contextProvider.getContext(e.limitedUseAppCheckTokens);return a.authToken&&(n.Authorization="Bearer "+a.authToken),a.messagingToken&&(n["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=a.appCheckToken),n}function E1(i,e,n,a){const s=i._url(e);return b1(i,s,n,a)}async function b1(i,e,n,a){n=sf(n);const s={data:n},o=await wT(i,a),c=a.timeout||7e4,u=_1(c),f=await Promise.race([T1(e,s,o,i.fetchImpl,i),u.promise,i.cancelAllRequests]);if(u.cancel(),!f)throw new br("cancelled","Firebase Functions instance was deleted.");const h=cf(f.status,f.json);if(h)throw h;if(!f.json)throw new br("internal","Response is not valid JSON object.");let v=f.json.data;if(typeof v>"u"&&(v=f.json.result),typeof v>"u")throw new br("internal","Response is missing data field.");return{data:Ja(v)}}function C1(i,e,n,a){const s=i._url(e);return P1(i,s,n,a||{})}async function P1(i,e,n,a){n=sf(n);const s={data:n},o=await wT(i,a);o["Content-Type"]="application/json",o.Accept="text/event-stream";let c;try{c=await i.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:o,signal:a?.signal,credentials:_T(i)})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const w=new br("cancelled","Request was cancelled.");return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}const _=cf(0,null);return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}let u,f;const h=new Promise((g,_)=>{u=g,f=_});a?.signal?.addEventListener("abort",()=>{const g=new br("cancelled","Request was cancelled.");f(g)});const v=c.body.getReader(),m=R1(v,u,f,a?.signal);return{stream:{[Symbol.asyncIterator](){const g=m.getReader();return{async next(){const{value:_,done:w}=await g.read();return{value:_,done:w}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:h}}function R1(i,e,n,a){const s=(c,u)=>{const f=c.match(y1);if(!f)return;const h=f[1];try{const v=JSON.parse(h);if("result"in v){e(Ja(v.result));return}if("message"in v){u.enqueue(Ja(v.message));return}if("error"in v){const m=cf(0,v);u.error(m),n(m);return}}catch(v){if(v instanceof br){u.error(v),n(v);return}}},o=new TextDecoder;return new ReadableStream({start(c){let u="";return f();async function f(){if(a?.aborted){const h=new br("cancelled","Request was cancelled");return c.error(h),n(h),Promise.resolve()}try{const{value:h,done:v}=await i.read();if(v){u.trim()&&s(u.trim(),c),c.close();return}if(a?.aborted){const g=new br("cancelled","Request was cancelled");c.error(g),n(g),await i.cancel();return}u+=o.decode(h,{stream:!0});const m=u.split(`
`);u=m.pop()||"";for(const g of m)g.trim()&&s(g.trim(),c);return f()}catch(h){const v=h instanceof br?h:cf(0,null);c.error(v),n(v)}}},cancel(){return i.cancel()}})}const Ry="@firebase/functions",Oy="0.13.1";const O1="auth-internal",I1="app-check-internal",L1="messaging-internal";function A1(i){const e=(n,{instanceIdentifier:a})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider(O1),c=n.getProvider(L1),u=n.getProvider(I1);return new w1(s,o,c,u,a)};Zo(new io(Yp,e,"PUBLIC").setMultipleInstances(!0)),Nn(Ry,Oy,i),Nn(Ry,Oy,"esm2020")}function x1(i=df(),e=Pp){const a=ff(Mr(i),Yp).getImmediate({identifier:e}),s=Sk("functions");return s&&D1(a,...s),a}function D1(i,e,n){S1(Mr(i),e,n)}function M1(i,e,n){return k1(Mr(i),e)}A1();var Ql={exports:{}},Tr={},Ln={},Gi={},rh,Iy;function N1(){return Iy||(Iy=1,rh=(function(i){var e=i.location,n=i.URL;return[e,n].some(function(a){return!a})?function(s){return Promise.reject(new Error("Failed to import: ".concat(s,": dynamicImport is not supported")))}:(i.__twilioVideoImportedModules={},function(s){return s in i.__twilioVideoImportedModules?Promise.resolve(i.__twilioVideoImportedModules[s]):new Function("scope","return import('".concat(new n(s,e),"').then(m => scope.__twilioVideoImportedModules['").concat(s,"'] = m);"))(i)})})(globalThis)),rh}var nh,Ly;function ST(){if(Ly)return nh;Ly=1;var i=function(){},e="undefined",n=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"];function s(w,E){var T=w[E];if(typeof T.bind=="function")return T.bind(w);try{return Function.prototype.bind.call(T,w)}catch{return function(){return Function.prototype.apply.apply(T,[w,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(w){return w==="debug"&&(w="log"),typeof console===e?!1:w==="trace"&&n?o:console[w]!==void 0?s(console,w):console.log!==void 0?s(console,"log"):i}function u(w,E){for(var T=0;T<a.length;T++){var N=a[T];this[N]=T<w?i:this.methodFactory(N,w,E)}this.log=this.debug}function f(w,E,T){return function(){typeof console!==e&&(u.call(this,E,T),this[w].apply(this,arguments))}}function h(w,E,T){return c(w)||f.apply(this,arguments)}function v(w,E,T){var N=this,j,x="loglevel";typeof w=="string"?x+=":"+w:typeof w=="symbol"&&(x=void 0);function O(y){var S=(a[y]||"silent").toUpperCase();if(!(typeof window===e||!x)){try{window.localStorage[x]=S;return}catch{}try{window.document.cookie=encodeURIComponent(x)+"="+S+";"}catch{}}}function L(){var y;if(!(typeof window===e||!x)){try{y=window.localStorage[x]}catch{}if(typeof y===e)try{var S=window.document.cookie,C=S.indexOf(encodeURIComponent(x)+"=");C!==-1&&(y=/^([^;]+)/.exec(S.slice(C))[1])}catch{}return N.levels[y]===void 0&&(y=void 0),y}}N.name=w,N.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},N.methodFactory=T||h,N.getLevel=function(){return j},N.setLevel=function(y,S){if(typeof y=="string"&&N.levels[y.toUpperCase()]!==void 0&&(y=N.levels[y.toUpperCase()]),typeof y=="number"&&y>=0&&y<=N.levels.SILENT){if(j=y,S!==!1&&O(y),u.call(N,y,w),typeof console===e&&y<N.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+y},N.setDefaultLevel=function(y){L()||N.setLevel(y,!1)},N.enableAll=function(y){N.setLevel(N.levels.TRACE,y)},N.disableAll=function(y){N.setLevel(N.levels.SILENT,y)};var b=L();b==null&&(b=E??"WARN"),N.setLevel(b,!1)}var m=new v,g={};m.getLogger=function(E){if(typeof E!="symbol"&&typeof E!="string"||E==="")throw new TypeError("You must supply a name when creating a logger.");var T=g[E];return T||(T=g[E]=new v(E,m.getLevel(),m.methodFactory)),T};var _=typeof window!==e?window.log:void 0;return m.noConflict=function(){return typeof window!==e&&window.log===m&&(window.log=_),m},m.getLoggers=function(){return g},m.default=m,nh=m,nh}var Jl={exports:{}};const j1="twilio-video",F1="2.33.0",kT={name:j1,version:F1};Jl.exports;var Ay;function Et(){return Ay||(Ay=1,(function(i){var e=kT;i.exports.SDK_NAME="".concat(e.name,".js"),i.exports.SDK_VERSION=e.version,i.exports.SDP_FORMAT="unified",i.exports.hardwareDevicePublisheriPad={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPad",hwDeviceType:"tablet",platformName:"iOS"},i.exports.hardwareDevicePublisheriPhone={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPhone",hwDeviceType:"mobile",platformName:"iOS"},i.exports.DEFAULT_ENVIRONMENT="prod",i.exports.DEFAULT_REALM="us1",i.exports.DEFAULT_REGION="gll",i.exports.DEFAULT_LOG_LEVEL="warn",i.exports.DEFAULT_LOGGER_NAME="twilio-video",i.exports.WS_SERVER=function(a,s){return s=s==="gll"?"global":encodeURIComponent(s),a==="prod"?"wss://".concat(s,".vss.twilio.com/signaling"):"wss://".concat(s,".vss.").concat(a,".twilio.com/signaling")},i.exports.PUBLISH_MAX_ATTEMPTS=5,i.exports.PUBLISH_BACKOFF_JITTER=10,i.exports.PUBLISH_BACKOFF_MS=20;function n(a){return["a","e","i","o","u"].includes(a.toLowerCase()[0])?"an":"a"}i.exports.typeErrors={ILLEGAL_INVOKE:function(a,s){return new TypeError("Illegal call to ".concat(a,": ").concat(s))},INVALID_TYPE:function(a,s){return new TypeError("".concat(a," must be ").concat(n(s)," ").concat(s))},INVALID_VALUE:function(a,s){return new RangeError("".concat(a," must be one of ").concat(s.join(", ")))},REQUIRED_ARGUMENT:function(a){return new TypeError("".concat(a," must be specified"))}},i.exports.DEFAULT_FRAME_RATE=24,i.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,i.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,i.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,i.exports.DEFAULT_NQ_LEVEL_LOCAL=1,i.exports.DEFAULT_NQ_LEVEL_REMOTE=0,i.exports.MAX_NQ_LEVEL=3,i.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,i.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,i.exports.iceRestartBackoffConfig={factor:1.1,min:1,max:i.exports.DEFAULT_SESSION_TIMEOUT_SEC*1e3,jitter:1},i.exports.reconnectBackoffConfig={factor:1.5,min:80,jitter:1},i.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},i.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},i.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},i.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},i.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}})(Jl)),Jl.exports}var Do,xy;function cn(){if(xy)return Do;xy=1;var i=Do&&Do.__read||function(E,T){var N=typeof Symbol=="function"&&E[Symbol.iterator];if(!N)return E;var j=N.call(E),x,O=[],L;try{for(;(T===void 0||T-- >0)&&!(x=j.next()).done;)O.push(x.value)}catch(b){L={error:b}}finally{try{x&&!x.done&&(N=j.return)&&N.call(j)}finally{if(L)throw L.error}}return O},e=Do&&Do.__spreadArray||function(E,T,N){if(N||arguments.length===2)for(var j=0,x=T.length,O;j<x;j++)(O||!(j in T))&&(O||(O=Array.prototype.slice.call(T,0,j)),O[j]=T[j]);return E.concat(O||Array.prototype.slice.call(T))},n=ST().getLogger,a=Et(),s=a.DEFAULT_LOG_LEVEL,o=a.DEFAULT_LOGGER_NAME,c=Et().typeErrors,u;function f(E){if(u=u||new Map,u.has(E))return u.get(E);var T=new Set;return u.set(E,T),T}var h=(function(){function E(T,N,j,x,O){if(typeof T!="string")throw c.INVALID_TYPE("moduleName","string");if(!N)throw c.REQUIRED_ARGUMENT("component");typeof j!="object"&&(j={}),O=O||n,w(j),Object.defineProperties(this,{_component:{value:N},_logLevels:{value:j},_warnings:{value:new Set},_loggerName:{get:function(){var b=x&&typeof x=="string"?x:o;return this._logLevelsEqual||(b="".concat(b,"-").concat(T)),b}},_logger:{get:function(){var b=O(this._loggerName),y=this._logLevels[T]||s;return y=y==="off"?"silent":y,b.setDefaultLevel(y),b}},_logLevelsEqual:{get:function(){return new Set(Object.values(this._logLevels)).size===1}},logLevel:{get:function(){return E.getLevelByName(j[T]||s)}},name:{get:N.toString.bind(N)}})}return E.getLevelByName=function(T){return isNaN(T)?(T=T.toUpperCase(),_(T),E[T]):parseInt(T,10)},E.prototype.createLog=function(T,N){var j=this._loggerName;return this._logLevelsEqual||(j=j.substring(0,j.lastIndexOf("-"))),new E(T,N,this._logLevels,j)},E.prototype.setLevels=function(T){return w(T),Object.assign(this._logLevels,T),this},E.prototype.log=function(T,N){var j=E._levels[T];if(!j)throw c.INVALID_VALUE("logLevel",m);j=j.toLowerCase();var x=[new Date().toISOString(),j,this.name];return(this._logger[j]||function(){}).apply(void 0,e([],i(x.concat(N)),!1)),this},E.prototype.debug=function(){return this.log(E.DEBUG,[].slice.call(arguments))},E.prototype.deprecated=function(T){var N=f(this._component.constructor);return N.has(T)?this:(N.add(T),this.warn(T))},E.prototype.info=function(){return this.log(E.INFO,[].slice.call(arguments))},E.prototype.warn=function(){return this.log(E.WARN,[].slice.call(arguments))},E.prototype.warnOnce=function(T){return this._warnings.has(T)?this:(this._warnings.add(T),this.warn(T))},E.prototype.error=function(){return this.log(E.ERROR,[].slice.call(arguments))},E.prototype.throw=function(T,N){throw T.clone&&(T=T.clone(N)),this.log(E.ERROR,T),T},E})();Object.defineProperties(h,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var v={},m=[],g=h._levels.map(function(E,T){return v[E]=!0,m.push(T),E});function _(E){if(!(E in v))throw c.INVALID_VALUE("level",g)}function w(E){Object.keys(E).forEach(function(T){_(E[T].toUpperCase())})}return Do=h,Do}var Dy;function U1(){if(Dy)return Gi;Dy=1;var i=Gi&&Gi.__awaiter||function(u,f,h,v){function m(g){return g instanceof h?g:new h(function(_){_(g)})}return new(h||(h=Promise))(function(g,_){function w(N){try{T(v.next(N))}catch(j){_(j)}}function E(N){try{T(v.throw(N))}catch(j){_(j)}}function T(N){N.done?g(N.value):m(N.value).then(w,E)}T((v=v.apply(u,f||[])).next())})},e=Gi&&Gi.__generator||function(u,f){var h={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},v,m,g,_=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return _.next=w(0),_.throw=w(1),_.return=w(2),typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function w(T){return function(N){return E([T,N])}}function E(T){if(v)throw new TypeError("Generator is already executing.");for(;_&&(_=0,T[0]&&(h=0)),h;)try{if(v=1,m&&(g=T[0]&2?m.return:T[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,T[1])).done)return g;switch(m=0,g&&(T=[T[0]&2,g.value]),T[0]){case 0:case 1:g=T;break;case 4:return h.label++,{value:T[1],done:!1};case 5:h.label++,m=T[1],T=[0];continue;case 7:T=h.ops.pop(),h.trys.pop();continue;default:if(g=h.trys,!(g=g.length>0&&g[g.length-1])&&(T[0]===6||T[0]===2)){h=0;continue}if(T[0]===3&&(!g||T[1]>g[0]&&T[1]<g[3])){h.label=T[1];break}if(T[0]===6&&h.label<g[1]){h.label=g[1],g=T;break}if(g&&h.label<g[2]){h.label=g[2],h.ops.push(T);break}g[2]&&h.ops.pop(),h.trys.pop();continue}T=f.call(u,h)}catch(N){T=[6,N],m=0}finally{v=g=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}};Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.createNoiseCancellationAudioProcessor=c;var n=N1();cn();var a={krisp:{supportedVersion:"1.0.0",pluginFile:"krispsdk.mjs"},rnnoise:{supportedVersion:"0.6.0",pluginFile:"rnnoise_sdk.mjs"}},s=function(u){var f=u.supportedVersion,h=u.plugin,v=u.log;if(!h.getVersion||!h.isSupported)throw new Error("Plugin does not export getVersion/isSupported api. Are you using old version of the plugin ?");var m=h.getVersion();v.debug("Plugin Version = ".concat(m));var g=f.split(".").map(function(T){return Number(T)}),_=m.split(".").map(function(T){return Number(T)});if(g.length!==3||_.length!==3)throw new Error("Unsupported Plugin version format: ".concat(f,", ").concat(m));if(g[0]!==_[0])throw new Error("Major version mismatch: [Plugin version ".concat(m,"],  [Supported Version ").concat(f,"]"));if(_[1]<g[1])throw new Error("Minor version mismatch: [Plugin version ".concat(m,"] < [Supported Version ").concat(f,"]"));var w=new AudioContext,E=h.isSupported(w);if(w.close(),!E)throw new Error("Noise Cancellation plugin is not supported on your browser")},o=new Map;function c(u,f){return i(this,void 0,void 0,function(){var h,v,m,g,_,w,E,T,N;return e(this,function(j){switch(j.label){case 0:if(h=o.get(u.vendor),h)return[3,6];if(v=a[u.vendor],!v)throw new Error("Unsupported NoiseCancellationOptions.vendor: ".concat(u.vendor));m=v.supportedVersion,g=v.pluginFile,_=u.sdkAssetsPath,w="".concat(_,"/").concat(g),j.label=1;case 1:return j.trys.push([1,5,,6]),f.debug("loading noise cancellation sdk: ",w),[4,n(w)];case 2:return E=j.sent(),f.debug("Loaded noise cancellation sdk:",E),T=E.default,s({supportedVersion:m,plugin:T,log:f}),T.isInitialized()?[3,4]:(f.debug("initializing noise cancellation sdk: ",_),[4,T.init({rootDir:_})]);case 3:j.sent(),f.debug("noise cancellation sdk initialized!"),j.label=4;case 4:return h={vendor:u.vendor,isInitialized:function(){return T.isInitialized()},isConnected:function(){return T.isConnected()},isEnabled:function(){return T.isEnabled()},disconnect:function(){return T.disconnect()},enable:function(){return T.enable()},disable:function(){return T.disable()},destroy:function(){return T.destroy()},setLogging:function(x){return T.setLogging(x)},connect:function(x){f.debug("connect: ",x.id),T.isConnected()&&T.disconnect();var O=T.connect(new MediaStream([x]));if(!O)throw new Error("Error connecting with noise cancellation sdk");var L=O.getAudioTracks()[0];if(!L)throw new Error("Error getting clean track from noise cancellation sdk");return T.enable(),L}},o.set(u.vendor,h),[3,6];case 5:throw N=j.sent(),f.error("Error loading noise cancellation sdk:".concat(w),N),N;case 6:return[2,h]}})})}return Gi}var My;function V1(){if(My)return Ln;My=1;var i=Ln&&Ln.__awaiter||function(o,c,u,f){function h(v){return v instanceof u?v:new u(function(m){m(v)})}return new(u||(u=Promise))(function(v,m){function g(E){try{w(f.next(E))}catch(T){m(T)}}function _(E){try{w(f.throw(E))}catch(T){m(T)}}function w(E){E.done?v(E.value):h(E.value).then(g,_)}w((f=f.apply(o,c||[])).next())})},e=Ln&&Ln.__generator||function(o,c){var u={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},f,h,v,m=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return m.next=g(0),m.throw=g(1),m.return=g(2),typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function g(w){return function(E){return _([w,E])}}function _(w){if(f)throw new TypeError("Generator is already executing.");for(;m&&(m=0,w[0]&&(u=0)),u;)try{if(f=1,h&&(v=w[0]&2?h.return:w[0]?h.throw||((v=h.return)&&v.call(h),0):h.next)&&!(v=v.call(h,w[1])).done)return v;switch(h=0,v&&(w=[w[0]&2,v.value]),w[0]){case 0:case 1:v=w;break;case 4:return u.label++,{value:w[1],done:!1};case 5:u.label++,h=w[1],w=[0];continue;case 7:w=u.ops.pop(),u.trys.pop();continue;default:if(v=u.trys,!(v=v.length>0&&v[v.length-1])&&(w[0]===6||w[0]===2)){u=0;continue}if(w[0]===3&&(!v||w[1]>v[0]&&w[1]<v[3])){u.label=w[1];break}if(w[0]===6&&u.label<v[1]){u.label=v[1],v=w;break}if(v&&u.label<v[2]){u.label=v[2],u.ops.push(w);break}v[2]&&u.ops.pop(),u.trys.pop();continue}w=c.call(o,u)}catch(E){w=[6,E],h=0}finally{f=v=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}};Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.NoiseCancellationImpl=void 0,Ln.applyNoiseCancellation=s;var n=U1();cn();var a=(function(){function o(c,u){this._processor=c,this._sourceTrack=u,this._disabledPermanent=!1}return Object.defineProperty(o.prototype,"vendor",{get:function(){return this._processor.vendor},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"sourceTrack",{get:function(){return this._sourceTrack},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isEnabled",{get:function(){return this._processor.isEnabled()},enumerable:!1,configurable:!0}),o.prototype.enable=function(){if(this._disabledPermanent)throw new Error("".concat(this.vendor," noise cancellation is disabled permanently for this track"));return this._processor.enable(),Promise.resolve()},o.prototype.disable=function(){return this._processor.disable(),Promise.resolve()},o.prototype.reacquireTrack=function(c){return i(this,void 0,void 0,function(){var u,f,h;return e(this,function(v){switch(v.label){case 0:return u=this._processor.isEnabled(),this._processor.disconnect(),[4,c()];case 1:return f=v.sent(),this._sourceTrack=f,[4,this._processor.connect(f)];case 2:return h=v.sent(),u?this._processor.enable():this._processor.disable(),[2,h]}})})},o.prototype.disablePermanently=function(){return this._disabledPermanent=!0,this.disable()},o.prototype.stop=function(){this._processor.disconnect(),this._sourceTrack.stop()},o})();Ln.NoiseCancellationImpl=a;function s(o,c,u){return i(this,void 0,void 0,function(){var f,h,v,m;return e(this,function(g){switch(g.label){case 0:return g.trys.push([0,2,,3]),[4,(0,n.createNoiseCancellationAudioProcessor)(c,u)];case 1:return f=g.sent(),h=f.connect(o),v=new a(f,o),[2,{cleanTrack:h,noiseCancellation:v}];case 2:return m=g.sent(),u.warn("Failed to create noise cancellation. Returning normal audio track: ".concat(m)),[2,{cleanTrack:o}];case 3:return[2]}})})}return Ln}var it={},Bt={},Ny;function hr(){if(Ny)return Bt;Ny=1;var i=Bt&&Bt.__read||function(L,b){var y=typeof Symbol=="function"&&L[Symbol.iterator];if(!y)return L;var S=y.call(L),C,A=[],F;try{for(;(b===void 0||b-- >0)&&!(C=S.next()).done;)A.push(C.value)}catch(D){F={error:D}}finally{try{C&&!C.done&&(y=S.return)&&y.call(S)}finally{if(F)throw F.error}}return A},e=Bt&&Bt.__spreadArray||function(L,b,y){if(y||arguments.length===2)for(var S=0,C=b.length,A;S<C;S++)(A||!(S in b))&&(A||(A=Array.prototype.slice.call(b,0,S)),A[S]=b[S]);return L.concat(A||Array.prototype.slice.call(b))};function n(){var L={};return L.promise=new Promise(function(b,y){L.resolve=b,L.reject=y}),L}function a(L,b,y,S){if(!(S in b)&&!S.match(/^on[a-z]+$/)){var C=!1;try{var A=Object.getOwnPropertyDescriptor(L,S);C=A&&!!A.get}catch{}if(!C){var F;try{F=typeof L[S]}catch{}F==="function"&&(b[S]=function(){return this[y][S].apply(this[y],arguments)})}}}function s(L,b,y){for(var S in L)a(L,b,y,S)}function o(L,b){L=Array.isArray(L)?new Set(L):new Set(L.values()),b=Array.isArray(b)?new Set(b):new Set(b.values());var y=new Set;return L.forEach(function(S){b.has(S)||y.add(S)}),y}function c(L,b){var y=L instanceof Map||L instanceof Set?Array.from(L.values()):L;return y.reduce(function(S,C){return S.concat(b(C))},[])}function u(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:null}function f(L){return typeof L>"u"&&(L=u()),/Chrome|CriOS/.test(L)?"chrome":/Firefox|FxiOS/.test(L)?"firefox":/Safari|iPhone|iPad|iPod/.test(L)?"safari":null}function h(L){typeof L>"u"&&(L=u());var b={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[f(L)];if(!b)return null;var y=new RegExp("(".concat(b,")/([^\\s]+)")),S=i(L.match(y)||[],3),C=S[2];if(!C)return null;var A=C.split(".").map(Number);return{major:isNaN(A[0])?null:A[0],minor:isNaN(A[1])?null:A[1]}}function v(L){return typeof L>"u"&&(L=u()),/Mobi/.test(L)&&f()==="chrome"&&/iPad|iPhone|iPod/.test(L)}function m(L,b){var y=null;Object.defineProperty(L,"on"+b,{get:function(){return y},set:function(S){y&&this.removeEventListener(b,y),typeof S=="function"?(y=S,this.addEventListener(b,y)):y=null}})}function g(L,b,y){return b?L.then(b,y):L}function _(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(L){var b=Math.random()*16|0,y=L==="x"?b:b&3|8;return y.toString(16)})}function w(L,b,y){Object.getOwnPropertyNames(L).forEach(function(S){E(L,b,y,S)})}function E(L,b,y,S){if(!(S in b)){if(S.match(/^on[a-z]+$/)){Object.defineProperty(b,S,{value:null,writable:!0}),y.addEventListener(S.slice(2),function(){for(var C=[],A=0;A<arguments.length;A++)C[A]=arguments[A];return b.dispatchEvent.apply(b,e([],i(C),!1))});return}Object.defineProperty(b,S,{enumerable:!0,get:function(){return y[S]}})}}function T(){return typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function"&&typeof RTCPeerConnection=="function"}function N(L){if(typeof RTCRtpSender<"u"&&typeof RTCRtpSender.getCapabilities=="function")return Promise.resolve(new Set(RTCRtpSender.getCapabilities(L).codecs.map(function(y){var S=y.mimeType;return S.split("/")[1].toLowerCase()})));if(typeof RTCPeerConnection>"u"||typeof RTCPeerConnection.prototype>"u"||typeof RTCPeerConnection.prototype.addTransceiver!="function"||typeof RTCPeerConnection.prototype.close!="function"||typeof RTCPeerConnection.prototype.createOffer!="function")return Promise.resolve(new Set);var b=new RTCPeerConnection;return b.addTransceiver(L),b.createOffer().then(function(y){var S=y.sdp;return b.close(),new Set((S.match(/^a=rtpmap:.+$/gm)||[]).map(function(C){return C.match(/^a=rtpmap:.+ ([^/]+)/)[1].toLowerCase()}))},function(){return b.close(),new Set})}var j=new Map;function x(L,b){var y=j.get(b);return y?Promise.resolve(y.has(L.toLowerCase())):N(b).then(function(S){return j.set(b,S),S.has(L.toLowerCase())})}function O(){j.clear()}return Bt.clearCachedSupportedCodecs=O,Bt.defer=n,Bt.delegateMethods=s,Bt.difference=o,Bt.flatMap=c,Bt.guessBrowser=f,Bt.guessBrowserVersion=h,Bt.isCodecSupported=x,Bt.isIOSChrome=v,Bt.interceptEvent=m,Bt.legacyPromise=g,Bt.makeUUID=_,Bt.proxyProperties=w,Bt.support=T,Bt}var Nl={},jy;function TT(){if(jy)return Nl;jy=1;var i="1234567890abcdef",e=32;function n(a){for(var s="",o=0;o<e;o++)s+=i.charAt(Math.floor(Math.random()*i.length));return"".concat(a).concat(s)}return Nl.sessionSID=n("SS"),Nl.createSID=n,Nl}var ih,Fy;function ET(){if(Fy)return ih;Fy=1;var i={recordingMediaLost:"recording-media-lost"};return ih=i,ih}var Uy;function _t(){if(Uy)return it;Uy=1;var i=it&&it.__extends||(function(){var $=function(H,Y){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ye,Se){ye.__proto__=Se}||function(ye,Se){for(var Oe in Se)Object.prototype.hasOwnProperty.call(Se,Oe)&&(ye[Oe]=Se[Oe])},$(H,Y)};return function(H,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");$(H,Y);function ye(){this.constructor=H}H.prototype=Y===null?Object.create(Y):(ye.prototype=Y.prototype,new ye)}})(),e=it&&it.__read||function($,H){var Y=typeof Symbol=="function"&&$[Symbol.iterator];if(!Y)return $;var ye=Y.call($),Se,Oe=[],xe;try{for(;(H===void 0||H-- >0)&&!(Se=ye.next()).done;)Oe.push(Se.value)}catch(Fe){xe={error:Fe}}finally{try{Se&&!Se.done&&(Y=ye.return)&&Y.call(ye)}finally{if(xe)throw xe.error}}return Oe},n=it&&it.__spreadArray||function($,H,Y){if(Y||arguments.length===2)for(var ye=0,Se=H.length,Oe;ye<Se;ye++)(Oe||!(ye in H))&&(Oe||(Oe=Array.prototype.slice.call(H,0,ye)),Oe[ye]=H[ye]);return $.concat(Oe||Array.prototype.slice.call(H))},a=Et(),s=a.typeErrors,o=a.trackPriority,c=hr(),u=TT().sessionSID,f=ET();function h($,H){if($ instanceof H.LocalAudioTrack||$ instanceof H.LocalVideoTrack||$ instanceof H.LocalDataTrack)return $;if($ instanceof H.MediaStreamTrack)return $.kind==="audio"?new H.LocalAudioTrack($,H):new H.LocalVideoTrack($,H);throw s.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}function v($,H,Y,ye){var Se={audio:ye.LocalAudioTrackPublication,video:ye.LocalVideoTrackPublication,data:ye.LocalDataTrackPublication}[$.kind];return new Se(H,$,Y,ye)}function m($){return $[0].toUpperCase()+$.slice(1)}function g($,H,Y,ye){var Se=new Set;H.on("newListener",function Oe(xe){Y.has(xe)&&!Se.has(xe)&&(ye.deprecated("".concat($,"#").concat(xe," has been deprecated and scheduled for removal in twilio-video.js@2.0.0.").concat(Y.get(xe)?" Use ".concat($,"#").concat(Y.get(xe)," instead."):"")),Se.add(xe)),Se.size>=Y.size&&H.removeListener("newListener",Oe)})}function _($,H){$=Array.isArray($)?new Set($):new Set($.values()),H=Array.isArray(H)?new Set(H):new Set(H.values());var Y=new Set;return $.forEach(function(ye){H.has(ye)||Y.add(ye)}),Y}function w($,H){return Object.keys($).reduce(function(Y,ye){return $[ye]!==H&&(Y[ye]=$[ye]),Y},{})}function E($,H){var Y=$ instanceof Map||$ instanceof Set?Array.from($.values()):$;return H=H||function(Se){return Se},Y.reduce(function(ye,Se){var Oe=H(Se);return ye.concat(Oe)},[])}function T(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"Unknown"}function N(){var $=T(),H=e($.match(/\(([^)]+)\)/)||[],2),Y=H[1],ye=Y===void 0?"unknown":Y,Se=e(ye.split(";").map(function(xe){return xe.trim()}),1),Oe=Se[0];return Oe.toLowerCase()}function j(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function($){var H=Math.random()*16|0,Y=$==="x"?H:H&3|8;return Y.toString(16)})}function x($){var H=null;function Y(){H=null,$()}return function(){H&&clearTimeout(H),H=setTimeout(Y)}}function O($,H,Y,ye){return new Promise(function(Se,Oe){function xe(){var He=[].slice.call(arguments);ye&&H.removeListener(ye,Fe),Se.apply(void 0,n([],e(He),!1))}function Fe(){var He=[].slice.call(arguments);H.removeListener(Y,xe),Oe.apply(void 0,n([],e(He),!1))}H.once(Y,xe),ye&&H.once(ye,Fe),$()})}function L($,H){return H.split(".").reduce(function(Y,ye){return Y?Y[ye]:null},$)}function b(){var $={};return $.promise=new Promise(function(H,Y){$.resolve=H,$.reject=Y}),$}function y($,H,Y,ye){if(!(ye in H)&&!ye.match(/^on[a-z]+$/)){var Se;try{Se=typeof $[ye]}catch{}Se==="function"&&(H[ye]=function(){for(var Oe,xe=[],Fe=0;Fe<arguments.length;Fe++)xe[Fe]=arguments[Fe];return(Oe=this[Y])[ye].apply(Oe,n([],e(xe),!1))})}}function S($,H,Y){for(var ye in $)y($,H,Y,ye)}function C($,H){if($===H)return!0;if(typeof $!=typeof H)return!1;if($===null)return H===null;if(H===null)return!1;if(Array.isArray($))return Array.isArray(H)&&$.length===H.length&&$.every(function(Se,Oe){return C(Se,H[Oe])});if(typeof $=="object"){var Y=Object.keys($).sort(),ye=Object.keys(H).sort();return!Array.isArray(H)&&C(Y,ye)&&Y.every(function(Se){return C($[Se],H[Se])})}return!1}function A($){return typeof $=="object"&&!Array.isArray($)}function F($,H,Y){Object.getOwnPropertyNames($).forEach(function(ye){D($,H,Y,ye)})}function D($,H,Y,ye){if(!(ye in H)){if(ye.match(/^on[a-z]+$/)){Object.defineProperty(H,ye,{value:null,writable:!0}),Y.addEventListener(ye.slice(2),function(){for(var Se=[],Oe=0;Oe<arguments.length;Oe++)Se[Oe]=arguments[Oe];H.dispatchEvent.apply(H,n([],e(Se),!1))});return}Object.defineProperty(H,ye,{enumerable:!0,get:function(){return Y[ye]}})}}function P($,H,Y){return H?$.then(function(ye){H(ye)},function(ye){Y(ye)}):$}function K($){return typeof $=="string"?{default:$,media:$,signaling:$,webrtc:$}:$}function q($,H){return H=H?"Local":"","".concat(H+($.kind||"").replace(/\w{1}/,function(Y){return Y.toUpperCase()}),"Track")}function W($,H){return H=H?"Local":"","".concat(H+($.kind||"").replace(/\w{1}/,function(Y){return Y.toUpperCase()}),"TrackPublication")}function B($){Object.getOwnPropertyNames($).forEach(function(H){H.startsWith("_")&&G($,H)})}function z($,H){return(function(Y){i(ye,Y);function ye(){for(var Se=[],Oe=0;Oe<arguments.length;Oe++)Se[Oe]=arguments[Oe];var xe=Y.apply(this,n([],e(Se),!1))||this;return B(xe),J(xe,H),xe}return ye})($)}function G($,H){var Y=Object.getOwnPropertyDescriptor($,H);Y.enumerable=!1,Object.defineProperty($,H,Y)}function J($,H){H===void 0&&(H=[]),H.forEach(function(Y){$.hasOwnProperty(Y)&&G($,Y)})}function M($){return $.map(fe)}function V($){return M(n([],e($),!1))}function ee($){return n([],e($.entries()),!1).reduce(function(H,Y){var ye,Se=e(Y,2),Oe=Se[0],xe=Se[1];return Object.assign((ye={},ye[Oe]=fe(xe),ye),H)},{})}function oe($){return Object.entries($).reduce(function(H,Y){var ye,Se=e(Y,2),Oe=Se[0],xe=Se[1];return Object.assign((ye={},ye[Oe]=fe(xe),ye),H)},{})}function fe($){return Array.isArray($)?M($):$ instanceof Set?V($):$ instanceof Map?ee($):$&&typeof $=="object"?oe($):$}function ae($){return $?"true":"false"}function he($){var H={sessionSID:u,iceServers:($.iceServers||[]).length,audioTracks:($.tracks||[]).filter(function(Se){return Se.kind==="audio"}).length,videoTracks:($.tracks||[]).filter(function(Se){return Se.kind==="video"}).length,dataTracks:($.tracks||[]).filter(function(Se){return Se.kind==="data"}).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach(function(Se){var Oe=e(Se,2),xe=Oe[0],Fe=Oe[1];Fe=Fe||xe,H[Fe]=ae(!!$[xe])}),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach(function(Se){var Oe=e(Se,2),xe=Oe[0],Fe=Oe[1];Fe=Fe||xe,typeof $[xe]=="number"?H[Fe]=$[xe]:isNaN(Number($[xe]))||(H[Fe]=Number($[xe]))}),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach(function(Se){var Oe=e(Se,2),xe=Oe[0],Fe=Oe[1];Fe=Fe||xe,typeof $[xe]=="string"?H[Fe]=$[xe]:typeof $[xe]=="number"&&xe==="name"&&(H[Fe]=$[xe].toString())}),["preferredAudioCodecs","preferredVideoCodecs"].forEach(function(Se){Se in $&&(H[Se]=JSON.stringify($[Se]))}),"networkQuality"in $&&(H.networkQualityConfiguration={},A($.networkQuality)?["local","remote"].forEach(function(Se){typeof $.networkQuality[Se]=="number"&&(H.networkQualityConfiguration[Se]=$.networkQuality[Se])}):(H.networkQualityConfiguration.remote=0,H.networkQualityConfiguration.local=$.networkQuality?1:0)),$.bandwidthProfile&&$.bandwidthProfile.video){var Y=$.bandwidthProfile.video||{};H.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach(function(Se){typeof Y[Se]=="number"||typeof Y[Se]=="string"?H.bandwidthProfileOptions[Se]=Y[Se]:typeof Y[Se]=="boolean"?H.bandwidthProfileOptions[Se]=ae(Y[Se]):typeof Y[Se]=="object"&&(H.bandwidthProfileOptions[Se]=JSON.stringify(Y[Se]))})}var ye={RTCPeerConnection:"customRTCPeerConnectionImpl",MediaStream:"customMediaStreamImpl",getUserMedia:"customGetUserMediaImpl",enumerateDevices:"customEnumerateDevicesImpl"};return Object.entries(ye).forEach(function(Se){var Oe=e(Se,2),xe=Oe[0],Fe=Oe[1];H[Fe]=ae(typeof $[xe]<"u")}),{group:"room",name:"connecting",level:"info",payload:H}}function we(){return{group:"room",name:"connected",level:"info"}}function ke($){return tt($,[{prop:"video",type:"object",transform:Ge}])}function Ge($){return tt($,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:Ze},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function Ae($,H,Y,ye,Se,Oe,xe){var Fe={transports:[{type:"data-channel"}]};return Object.assign($?{active_speaker:Fe}:{},H?{network_quality:Fe}:{},Oe?{render_hints:Fe}:{},Se?{publisher_hints:Fe}:{},Y?{track_priority:Fe}:{},ye?{track_switch_off:Fe}:{},xe?{extension_transcriptions:Fe}:{})}function Be($){return tt($,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function Ze($){var H=o.PRIORITY_HIGH,Y=o.PRIORITY_LOW,ye=o.PRIORITY_STANDARD;return tt($,[{prop:H,type:"object",transform:Be},{prop:Y,type:"object",transform:Be},{prop:ye,type:"object",transform:Be}])}function tt($,H){return H.reduce(function(Y,ye){var Se,Oe=ye.prop,xe=ye.type,Fe=ye.payloadProp,He=Fe===void 0?Oe:Fe,bt=ye.transform,Gt=bt===void 0?function(Lt){return Lt}:bt;return typeof $[Oe]===xe?Object.assign((Se={},Se[He]=Gt($[Oe]),Se),Y):Y},{})}function Je($){return{rules:[{type:$?"include":"exclude",all:!0}],revision:1}}function Ke($){var H,Y=(H={},H[f.recordingMediaLost]="recordings",H);return $.map(function(ye){return Y[ye]}).filter(function(ye){return!!ye})}function Me($,H){var Y=Math.random();return $-H+Math.floor(2*H*Y+.5)}function me($,H,Y){return H<=$&&$<=Y}function Ue($){return c.guessBrowser()==="chrome"&&$.kind==="video"&&"displaySurface"in $.getSettings()}function Re($){return $===void 0&&($=10),new Promise(function(H){return setTimeout(H,$)})}function qe($,H){return new Promise(function(Y){$.addEventListener(H,function ye(Se){$.removeEventListener(H,ye),Y(Se)})})}return it.constants=a,it.createBandwidthProfilePayload=ke,it.createMediaSignalingPayload=Ae,it.createMediaWarningsPayload=Ke,it.createRoomConnectingEventPayload=he,it.createRoomConnectedEventPayload=we,it.boolToString=ae,it.createSubscribePayload=Je,it.asLocalTrack=h,it.asLocalTrackPublication=v,it.capitalize=m,it.deprecateEvents=g,it.difference=_,it.filterObject=w,it.flatMap=E,it.getPlatform=N,it.getUserAgent=T,it.hidePrivateProperties=B,it.hidePrivateAndCertainPublicPropertiesInClass=z,it.isDeepEqual=C,it.isNonArrayObject=A,it.inRange=me,it.makeUUID=j,it.oncePerTick=x,it.promiseFromEvents=O,it.getOrNull=L,it.defer=b,it.delegateMethods=S,it.proxyProperties=F,it.legacyPromise=P,it.buildLogLevels=K,it.trackClass=q,it.trackPublicationClass=W,it.valueToJSON=fe,it.withJitter=Me,it.isChromeScreenShareTrack=Ue,it.waitForSometime=Re,it.waitForEvent=qe,it}var rn={},Vy;function Ou(){if(Vy)return rn;Vy=1;var i=hr(),e=i.flatMap,n=i.guessBrowser,a=null;function s(){if(typeof a=="boolean")return a;if(typeof RTCPeerConnection>"u")return a=!1,a;try{new RTCPeerConnection({sdpSemantics:"foo"}),a=!1}catch{a=!0}return a}var o=null;function c(){o=null}function u(){if(!o)if(typeof RTCPeerConnection<"u"&&"addTransceiver"in RTCPeerConnection.prototype){var C=new RTCPeerConnection;try{C.addTransceiver("audio"),o="unified"}catch{o="planb"}C.close()}else o="planb";return o}function f(C){return!C||!s()?u():{"plan-b":"planb","unified-plan":"unified"}[C]}function h(){return typeof RTCRtpTransceiver<"u"&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}function v(C){return{chrome:f(C),firefox:"unified",safari:h()}[n()]||null}function m(C,A){var F=A.match(new RegExp(C,"gm"))||[];return F.reduce(function(D,P){var K=P.match(new RegExp(C));return K?D.add(K[1]):D},new Set)}function g(C,A){return m(C,A)}function _(C){return g("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",C)}function w(C){return g("^a=msid:.+ +(.+) *$",C)}function E(C,A){var F="^a=ssrc:([0-9]+) +msid:[^ ]+ +".concat(A," *$");return m(F,C)}function T(C,A,F){return A===void 0&&(A=".*"),F===void 0&&(F=".*"),C.split(`\r
m=`).slice(1).map(function(D){return"m=".concat(D)}).filter(function(D){var P=new RegExp("m=".concat(A),"gm"),K=new RegExp("a=".concat(F),"gm");return P.test(D)&&K.test(D)})}function N(C){return Array.from(m("^a=ssrc:([0-9]+) +.*$",C))}function j(C,A){var F=T(C),D=new RegExp("^a=msid:[^ ]+ +".concat(A," *$"),"gm"),P=F.filter(function(K){return K.match(D)});return new Set(e(P,N))}function x(C,A,F){return new Map(Array.from(C(F)).map(function(D){return[D,A(F,D)]}))}function O(C){return x(_,E,C)}function L(C){return x(w,j,C)}function b(C,A,F){var D=C(F),P=new Map;D.forEach(function(W,B){if(!A.has(B)){A.set(B,W);return}var z=Array.from(A.get(B)),G=Array.from(W);z.forEach(function(J,M){var V=G[M];P.set(V,J);var ee="^a=ssrc:".concat(V," (.*)$"),oe="a=ssrc:".concat(J," $1");F=F.replace(new RegExp(ee,"gm"),oe)})});var K="^(a=ssrc-group:[^ ]+ +)(.*)$",q=F.match(new RegExp(K,"gm"))||[];return q.forEach(function(W){var B=W.match(new RegExp(K));if(B){var z=B[1],G=B[2],J=G.split(" ").map(function(M){var V=P.get(M);return V||M}).join(" ");F=F.replace(B[0],z+J)}}),F}function y(C,A){return b(O,C,A)}function S(C,A){return b(L,C,A)}return rn.clearChromeCachedSdpFormat=c,rn.getSdpFormat=v,rn.getMediaSections=T,rn.getPlanBTrackIds=_,rn.getUnifiedPlanTrackIds=w,rn.getPlanBSSRCs=E,rn.getUnifiedPlanSSRCs=j,rn.updatePlanBTrackIdsToSSRCs=y,rn.updateUnifiedPlanTrackIdsToSSRCs=S,rn}var Mo,By;function B1(){if(By)return Mo;By=1;var i=Mo&&Mo.__values||function(P){var K=typeof Symbol=="function"&&Symbol.iterator,q=K&&P[K],W=0;if(q)return q.call(P);if(P&&typeof P.length=="number")return{next:function(){return P&&W>=P.length&&(P=void 0),{value:P&&P[W++],done:!P}}};throw new TypeError(K?"Object is not iterable.":"Symbol.iterator is not defined.")},e=Mo&&Mo.__read||function(P,K){var q=typeof Symbol=="function"&&P[Symbol.iterator];if(!q)return P;var W=q.call(P),B,z=[],G;try{for(;(K===void 0||K-- >0)&&!(B=W.next()).done;)z.push(B.value)}catch(J){G={error:J}}finally{try{B&&!B.done&&(q=W.return)&&q.call(W)}finally{if(G)throw G.error}}return z},n=hr(),a=n.flatMap,s=n.guessBrowser,o=n.guessBrowserVersion,c=Ou().getSdpFormat,u=s(),f=o(),h=u==="chrome",v=u==="firefox",m=u==="safari",g=h?f.major:null,_=32767;function w(P,K){return typeof P.get=="function"?P.get(K):P.find(function(q){return q.id===K})}function E(P,K,q){var W,B,z,G,J,M,V,ee,oe,fe,ae,he,we,ke,Ge,Ae,Be,Ze,tt,Je,Ke,Me;q===void 0&&(q=!1);var me;if(Array.isArray(P))me=new Map(P.map(function(gt){return[gt.id||String(Math.random()),gt]}));else if(P instanceof Map)me=P;else if(typeof P=="object"&&P!==null){var Ue=new Map;Object.keys(P).forEach(function(gt){Ue.set(gt,P[gt])}),me=Ue}else return new Map;if(!me||!K)return new Map;var Re=new Map,qe=K.id,$=K.kind,H=null,Y=null,ye=null;try{for(var Se=i(me),Oe=Se.next();!Oe.done;Oe=Se.next()){var xe=e(Oe.value,2),Fe=xe[0],He=xe[1];if(q&&He.type==="inbound-rtp"&&He.trackIdentifier===qe){H=He,Y=Fe,ye=He.ssrc;break}else if(!q&&He.type==="media-source"&&He.trackIdentifier===qe){H=He,Y=Fe;break}else He.type==="track"&&He.trackIdentifier===qe&&(H||(H=He,Y=Fe))}}catch(gt){W={error:gt}}finally{try{Oe&&!Oe.done&&(B=Se.return)&&B.call(Se)}finally{if(W)throw W.error}}if(!H)if(q){var bt=[];try{for(var Gt=i(me),Lt=Gt.next();!Lt.done;Lt=Gt.next()){var Ce=e(Lt.value,2),Fe=Ce[0],He=Ce[1];He.type==="inbound-rtp"&&(He.kind===$||He.mediaType===$)&&bt.push({id:Fe,stat:He})}}catch(gt){z={error:gt}}finally{try{Lt&&!Lt.done&&(G=Gt.return)&&G.call(Gt)}finally{if(z)throw z.error}}(bt.length===1||bt.length>1)&&(H=bt[0].stat,Y=bt[0].id,ye=H.ssrc)}else try{for(var _e=i(me),Z=_e.next();!Z.done;Z=_e.next()){var re=e(Z.value,2),Fe=re[0],He=re[1];if(He.type==="media-source"&&He.kind===$){H=He,Y=Fe;break}}}catch(gt){J={error:gt}}finally{try{Z&&!Z.done&&(M=_e.return)&&M.call(_e)}finally{if(J)throw J.error}}if(!H)return Re;Re.set(Y,H);var de=new Set;if(q){if(H.codecId&&de.add(H.codecId),H.transportId&&de.add(H.transportId),H.remoteId&&de.add(H.remoteId),ye)try{for(var le=i(me),ge=le.next();!ge.done;ge=le.next()){var Qe=e(ge.value,2),Fe=Qe[0],He=Qe[1];He.type==="remote-outbound-rtp"&&He.ssrc===ye&&de.add(Fe)}}catch(gt){V={error:gt}}finally{try{ge&&!ge.done&&(ee=le.return)&&ee.call(le)}finally{if(V)throw V.error}}try{for(var $e=i(de),St=$e.next();!St.done;St=$e.next()){var vt=St.value;me.has(vt)&&Re.set(vt,me.get(vt))}}catch(gt){oe={error:gt}}finally{try{St&&!St.done&&(fe=$e.return)&&fe.call($e)}finally{if(oe)throw oe.error}}try{for(var st=i(me),mt=st.next();!mt.done;mt=st.next()){var ot=e(mt.value,2),Fe=ot[0],He=ot[1];He.type==="track"&&He.trackIdentifier===qe&&Re.set(Fe,He)}}catch(gt){ae={error:gt}}finally{try{mt&&!mt.done&&(he=st.return)&&he.call(st)}finally{if(ae)throw ae.error}}}else{try{for(var ut=i(me),Ft=ut.next();!Ft.done;Ft=ut.next()){var vr=e(Ft.value,2),Fe=vr[0],He=vr[1];if(He.type==="outbound-rtp"&&He.mediaSourceId===Y){Re.set(Fe,He),He.codecId&&de.add(He.codecId),He.transportId&&de.add(He.transportId);var Vn=Fe;try{for(var Nr=(Ge=void 0,i(me)),un=Nr.next();!un.done;un=Nr.next()){var jr=e(un.value,2),Fr=jr[0],ln=jr[1];ln.type==="remote-inbound-rtp"&&ln.localId===Vn&&Re.set(Fr,ln)}}catch(Kr){Ge={error:Kr}}finally{try{un&&!un.done&&(Ae=Nr.return)&&Ae.call(Nr)}finally{if(Ge)throw Ge.error}}}}}catch(gt){we={error:gt}}finally{try{Ft&&!Ft.done&&(ke=ut.return)&&ke.call(ut)}finally{if(we)throw we.error}}try{for(var Xt=i(de),fn=Xt.next();!fn.done;fn=Xt.next()){var vt=fn.value;me.has(vt)&&Re.set(vt,me.get(vt))}}catch(gt){Be={error:gt}}finally{try{fn&&!fn.done&&(Ze=Xt.return)&&Ze.call(Xt)}finally{if(Be)throw Be.error}}}var dn=null,Ei=new Set;try{for(var rr=i(Re.values()),Gr=rr.next();!Gr.done;Gr=rr.next()){var He=Gr.value;He.transportId&&Ei.add(He.transportId)}}catch(gt){tt={error:gt}}finally{try{Gr&&!Gr.done&&(Je=rr.return)&&Je.call(rr)}finally{if(tt)throw tt.error}}try{for(var Bn=i(Ei),hn=Bn.next();!hn.done;hn=Bn.next()){var bi=hn.value;if(me.has(bi)){var Wt=me.get(bi);Re.set(bi,Wt),Wt.selectedCandidatePairId&&(dn=Wt.selectedCandidatePairId),Wt.localCertificateId&&me.has(Wt.localCertificateId)&&Re.set(Wt.localCertificateId,me.get(Wt.localCertificateId)),Wt.remoteCertificateId&&me.has(Wt.remoteCertificateId)&&Re.set(Wt.remoteCertificateId,me.get(Wt.remoteCertificateId))}}}catch(gt){Ke={error:gt}}finally{try{hn&&!hn.done&&(Me=Bn.return)&&Me.call(Bn)}finally{if(Ke)throw Ke.error}}if(dn&&me.has(dn)){var cr=me.get(dn);Re.set(dn,cr),cr.localCandidateId&&me.has(cr.localCandidateId)&&Re.set(cr.localCandidateId,me.get(cr.localCandidateId)),cr.remoteCandidateId&&me.has(cr.remoteCandidateId)&&Re.set(cr.remoteCandidateId,me.get(cr.remoteCandidateId))}return Re}function T(P,K){return P&&typeof P.getStats=="function"?N(P,K):Promise.reject(new Error("Given PeerConnection does not support getStats"))}function N(P,K){var q=L(P,"audio","local"),W=L(P,"video","local"),B=L(P,"audio"),z=L(P,"video"),G={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},J=a([[q,"localAudioTrackStats",!1],[W,"localVideoTrackStats",!1],[B,"remoteAudioTrackStats",!0],[z,"remoteVideoTrackStats",!0]],function(M){var V=e(M,3),ee=V[0],oe=V[1],fe=V[2];return ee.map(function(ae){return y(P,ae,Object.assign({isRemote:fe},K)).then(function(he){he.forEach(function(we){we.trackId=ae.id,G[oe].push(we)})})})});return Promise.all(J).then(function(){return j(P,K)}).then(function(M){return G.activeIceCandidatePair=M,G})}function j(P,K){return K===void 0&&(K={}),typeof K.testForChrome<"u"||h||typeof K.testForSafari<"u"||m?P.getStats().then(x):typeof K.testForFirefox<"u"||v?P.getStats().then(O):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function x(P){var K=Array.from(P.values()).find(function(M){var V=M.nominated,ee=M.type;return ee==="candidate-pair"&&V});if(!K)return null;var q=w(P,K.localCandidateId),W=w(P,K.remoteCandidateId),B=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],z=B.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"},{key:"networkType",type:"string"}]),G=q?z.reduce(function(M,V){var ee=V.key,oe=V.type;return M[ee]=typeof q[ee]===oe?q[ee]:ee==="deleted"?!1:null,M},{}):null,J=W?B.reduce(function(M,V){var ee=V.key,oe=V.type;return M[ee]=typeof W[ee]===oe?W[ee]:null,M},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(M){return M==="inprogress"?"in-progress":M}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(M,V){var ee=V.key,oe=V.type,fe=V.fixup;return M[ee]=typeof K[ee]===oe?fe?fe(K[ee]):K[ee]:null,M},{localCandidate:G,remoteCandidate:J})}function O(P){var K=Array.from(P.values()).find(function(V){var ee=V.nominated,oe=V.type;return oe==="candidate-pair"&&ee});if(!K)return null;var q=w(P,K.localCandidateId),W=w(P,K.remoteCandidateId),B=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],z=B.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),G={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},J=q?z.reduce(function(V,ee){var oe=ee.ffKeys,fe=ee.key,ae=ee.type,he=oe&&oe.find(function(we){return we in q})||fe;return V[fe]=typeof q[he]===ae?he==="candidateType"&&G[q[he]]||q[he]:he==="deleted"?!1:null,V},{}):null,M=W?B.reduce(function(V,ee){var oe=ee.ffKeys,fe=ee.key,ae=ee.type,he=oe&&oe.find(function(we){return we in W})||fe;return V[fe]=typeof W[he]===ae?he==="candidateType"&&G[W[he]]||W[he]:null,V},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(V,ee){var oe=ee.key,fe=ee.type;return V[oe]=typeof K[oe]===fe?K[oe]:null,V},{localCandidate:J,remoteCandidate:M})}function L(P,K,q){var W=q==="local"?"getSenders":"getReceivers";if(P[W])return P[W]().map(function(G){var J=G.track;return J}).filter(function(G){return G&&G.kind===K});var B=q==="local"?"getLocalStreams":"getRemoteStreams",z=K==="audio"?"getAudioTracks":"getVideoTracks";return a(P[B](),function(G){return G[z]()})}function b(P,K){var q,W,B,z,G,J;if(!P||!K)return!1;if(P.getReceivers){var M=P.getReceivers();try{for(var V=i(M),ee=V.next();!ee.done;ee=V.next()){var oe=ee.value;if(oe.track&&oe.track.id===K.id)return!0}}catch(Ze){q={error:Ze}}finally{try{ee&&!ee.done&&(W=V.return)&&W.call(V)}finally{if(q)throw q.error}}}if(P.getRemoteStreams){var fe=P.getRemoteStreams();try{for(var ae=i(fe),he=ae.next();!he.done;he=ae.next()){var we=he.value,ke=we.getTracks();try{for(var Ge=(G=void 0,i(ke)),Ae=Ge.next();!Ae.done;Ae=Ge.next()){var Be=Ae.value;if(Be.id===K.id)return!0}}catch(Ze){G={error:Ze}}finally{try{Ae&&!Ae.done&&(J=Ge.return)&&J.call(Ge)}finally{if(G)throw G.error}}}}catch(Ze){B={error:Ze}}finally{try{he&&!he.done&&(z=ae.return)&&z.call(ae)}finally{if(B)throw B.error}}}return!1}function y(P,K,q){return q===void 0&&(q={}),typeof q.testForChrome<"u"||h?S(P,K,q):typeof q.testForFirefox<"u"||v?C(P,K,q):typeof q.testForSafari<"u"||m?typeof q.testForSafari<"u"||c()==="unified"?S(P,K,q):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" "))):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function S(P,K,q){var W=q.log;return g&&g<67?new Promise(function(B,z){P.getStats(function(G){B([A(G,K)])},null,z)}):P.getStats(K).then(function(B){return W.info("getStats by track successful"),F(B,q)}).catch(function(){return W.warn("getStats by track failed. Getting default stats"),P.getStats().then(function(B){W.info("getStats by default successful");var z=b(P,K);W.info("Starting filtering stats for ".concat(z?"remote":"local"," track"));var G=E(B,K,z);return W.info("Completed filtering stats for ".concat(z?"remote":"local"," track")),F(G,q)})})}function C(P,K,q){return P.getStats(K).then(function(W){return[D(W,q)]})}function A(P,K){var q=P.result().find(function(B){return B.type==="ssrc"&&B.stat("googTrackId")===K.id}),W={};return q&&(W.timestamp=Math.round(Number(q.timestamp)),W=q.names().reduce(function(B,z){switch(z){case"googCodecName":B.codecName=q.stat(z);break;case"googRtt":B.roundTripTime=Number(q.stat(z));break;case"googJitterReceived":B.jitter=Number(q.stat(z));break;case"googFrameWidthInput":B.frameWidthInput=Number(q.stat(z));break;case"googFrameHeightInput":B.frameHeightInput=Number(q.stat(z));break;case"googFrameWidthSent":B.frameWidthSent=Number(q.stat(z));break;case"googFrameHeightSent":B.frameHeightSent=Number(q.stat(z));break;case"googFrameWidthReceived":B.frameWidthReceived=Number(q.stat(z));break;case"googFrameHeightReceived":B.frameHeightReceived=Number(q.stat(z));break;case"googFrameRateInput":B.frameRateInput=Number(q.stat(z));break;case"googFrameRateSent":B.frameRateSent=Number(q.stat(z));break;case"googFrameRateReceived":B.frameRateReceived=Number(q.stat(z));break;case"ssrc":B[z]=q.stat(z);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":B[z]=Number(q.stat(z));break}return B},W)),W}function F(P,K){var q=K.simulateExceptionWhileStandardizingStats,W=q===void 0?!1:q;if(W)throw new Error("Error while gathering stats");var B=null,z=[],G=null,J=null,M=null,V=null,ee=null;P.forEach(function(we){var ke=we.type;switch(ke){case"inbound-rtp":B=we;break;case"outbound-rtp":z.push(we);break;case"media-source":ee=we;break;case"track":M=we;break;case"codec":V=we;break;case"remote-inbound-rtp":G=we;break;case"remote-outbound-rtp":J=we;break}});var oe=M?M.remoteSource:!ee,fe=oe?[B]:z,ae=[],he=oe?J:G;return fe.forEach(function(we){var ke={},Ge=[we,ee,M,V,he&&he.ssrc===we.ssrc?he:null];function Ae(Z){var re=Ge.find(function(de){return de&&typeof de[Z]<"u"})||null;return re?re[Z]:null}var Be=Ae("ssrc");typeof Be=="number"&&(ke.ssrc=String(Be));var Ze=Ae("timestamp");ke.timestamp=Math.round(Ze);var tt=Ae("mimeType");typeof tt=="string"&&(tt=tt.split("/"),ke.codecName=tt[tt.length-1]);var Je=Ae("roundTripTime");typeof Je=="number"&&(ke.roundTripTime=Math.round(Je*1e3));var Ke=Ae("jitter");typeof Ke=="number"&&(ke.jitter=Math.round(Ke*1e3));var Me=Ae("frameWidth");typeof Me=="number"&&(oe?ke.frameWidthReceived=Me:(ke.frameWidthSent=Me,ke.frameWidthInput=M?M.frameWidth:ee.width));var me=Ae("frameHeight");typeof me=="number"&&(oe?ke.frameHeightReceived=me:(ke.frameHeightSent=me,ke.frameHeightInput=M?M.frameHeight:ee.height));var Ue=Ae("framesPerSecond");(typeof Ue=="number"||Ue===null)&&(ke[oe?"frameRateReceived":"frameRateSent"]=Ue);var Re=Ae("qualityLimitationReason");typeof Re=="string"&&(ke.qualityLimitationReason=Re);var qe=Ae("bytesReceived");typeof qe=="number"&&(ke.bytesReceived=qe);var $=Ae("bytesSent");typeof $=="number"&&(ke.bytesSent=$);var H=Ae("packetsLost");typeof H=="number"&&(ke.packetsLost=H);var Y=Ae("packetsReceived");typeof Y=="number"&&(ke.packetsReceived=Y);var ye=Ae("packetsSent");typeof ye=="number"&&(ke.packetsSent=ye);var Se=Ae("audioLevel");typeof Se=="number"&&(Se=Math.round(Se*_),oe?ke.audioOutputLevel=Se:ke.audioInputLevel=Se);var Oe=Ae("totalPacketSendDelay");typeof Oe=="number"&&(ke.totalPacketSendDelay=Oe);var xe=Ae("totalEncodeTime");typeof xe=="number"&&(ke.totalEncodeTime=xe);var Fe=Ae("framesEncoded");typeof Fe=="number"&&(ke.framesEncoded=Fe);var He=Ae("estimatedPlayoutTimestamp");typeof He=="number"&&(ke.estimatedPlayoutTimestamp=He);var bt=Ae("totalDecodeTime");typeof bt=="number"&&(ke.totalDecodeTime=bt);var Gt=Ae("framesDecoded");typeof Gt=="number"&&(ke.framesDecoded=Gt);var Lt=Ae("jitterBufferDelay");typeof Lt=="number"&&(ke.jitterBufferDelay=Lt);var Ce=Ae("jitterBufferEmittedCount");typeof Ce=="number"&&(ke.jitterBufferEmittedCount=Ce);var _e=Ae("freezeCount");typeof _e=="number"&&(ke.freezeCount=_e),ae.push(ke)}),ae}function D(P,K){P===void 0&&(P=new Map);var q=K.isRemote,W=K.simulateExceptionWhileStandardizingStats,B=W===void 0?!1:W;if(B)throw new Error("Error while gathering stats");var z=null,G=null;P.forEach(function(Y){var ye=Y.isRemote,Se=Y.remoteId,Oe=Y.type;if(!ye)switch(Oe){case"inbound-rtp":z=Y,G=w(P,Se);break;case"outbound-rtp":G=Y,z=w(P,Se);break}});var J=q?z:G,M=q?G:z;function V(Y){return J&&typeof J[Y]<"u"?J[Y]:M&&typeof M[Y]<"u"?M[Y]:null}var ee={},oe=V("timestamp");ee.timestamp=Math.round(oe);var fe=V("ssrc");typeof fe=="number"&&(ee.ssrc=String(fe));var ae=V("bytesSent");typeof ae=="number"&&(ee.bytesSent=ae);var he=V("packetsLost");typeof he=="number"&&(ee.packetsLost=he);var we=V("packetsSent");typeof we=="number"&&(ee.packetsSent=we);var ke=V("roundTripTime");typeof ke=="number"&&(ee.roundTripTime=Math.round(ke*1e3));var Ge=V("jitter");typeof Ge=="number"&&(ee.jitter=Math.round(Ge*1e3));var Ae=V("framesPerSecond");(typeof Ae=="number"||Ae===null)&&(ee.frameRateSent=Ae);var Be=V("bytesReceived");typeof Be=="number"&&(ee.bytesReceived=Be);var Ze=V("packetsReceived");typeof Ze=="number"&&(ee.packetsReceived=Ze);var tt=V("framesPerSecond");(typeof tt=="number"||tt===null)&&(ee.frameRateReceived=tt);var Je=V("totalPacketSendDelay");typeof Je=="number"&&(ee.totalPacketSendDelay=Je);var Ke=V("totalEncodeTime");typeof Ke=="number"&&(ee.totalEncodeTime=Ke);var Me=V("framesEncoded");typeof Me=="number"&&(ee.framesEncoded=Me);var me=V("estimatedPlayoutTimestamp");typeof me=="number"&&(ee.estimatedPlayoutTimestamp=me);var Ue=V("totalDecodeTime");typeof Ue=="number"&&(ee.totalDecodeTime=Ue);var Re=V("framesDecoded");typeof Re=="number"&&(ee.framesDecoded=Re);var qe=V("jitterBufferDelay");typeof qe=="number"&&(ee.jitterBufferDelay=qe);var $=V("jitterBufferEmittedCount");typeof $=="number"&&(ee.jitterBufferEmittedCount=$);var H=V("freezeCount");return typeof H=="number"&&(ee.freezeCount=H),ee}return Mo=T,Mo}var oh,qy;function q1(){if(qy)return oh;qy=1;function i(e){return e===void 0&&(e={audio:!0,video:!0}),typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function"?navigator.mediaDevices.getUserMedia(e):Promise.reject(new Error("getUserMedia is not supported"))}return oh=i,oh}var jl={exports:{}},Hy;function bT(){return Hy||(Hy=1,typeof MediaStream=="function"?jl.exports=MediaStream:jl.exports=function(){throw new Error("MediaStream is not supported")}),jl.exports}var Fl={exports:{}},Wy;function H1(){return Wy||(Wy=1,typeof MediaStreamTrack=="function"?Fl.exports=MediaStreamTrack:Fl.exports=function(){throw new Error("MediaStreamTrack is not supported")}),Fl.exports}var Ul={exports:{}},zy;function W1(){return zy||(zy=1,typeof RTCIceCandidate=="function"?Ul.exports=RTCIceCandidate:Ul.exports=function(){throw new Error("RTCIceCandidate is not supported")}),Ul.exports}var No={exports:{}},ah,$y;function CT(){if($y)return ah;$y=1;var i=(function(){function e(n){this.descriptionInitDict=n;var a=n&&n.type==="rollback"?null:new RTCSessionDescription(n);Object.defineProperties(this,{_description:{get:function(){return a}}})}return Object.defineProperty(e.prototype,"sdp",{get:function(){return this._description?this._description.sdp:this.descriptionInitDict.sdp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._description?this._description.type:this.descriptionInitDict.type},enumerable:!1,configurable:!0}),e})();return ah=i,ah}var Vl={exports:{}},Gy;function pr(){if(Gy)return Vl.exports;Gy=1;var i=typeof Reflect=="object"?Reflect:null,e=i&&typeof i.apply=="function"?i.apply:function(L,b,y){return Function.prototype.apply.call(L,b,y)},n;i&&typeof i.ownKeys=="function"?n=i.ownKeys:Object.getOwnPropertySymbols?n=function(L){return Object.getOwnPropertyNames(L).concat(Object.getOwnPropertySymbols(L))}:n=function(L){return Object.getOwnPropertyNames(L)};function a(O){console&&console.warn&&console.warn(O)}var s=Number.isNaN||function(L){return L!==L};function o(){o.init.call(this)}Vl.exports=o,Vl.exports.once=N,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var c=10;function u(O){if(typeof O!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof O)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(O){if(typeof O!="number"||O<0||s(O))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+O+".");c=O}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(L){if(typeof L!="number"||L<0||s(L))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+L+".");return this._maxListeners=L,this};function f(O){return O._maxListeners===void 0?o.defaultMaxListeners:O._maxListeners}o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(L){for(var b=[],y=1;y<arguments.length;y++)b.push(arguments[y]);var S=L==="error",C=this._events;if(C!==void 0)S=S&&C.error===void 0;else if(!S)return!1;if(S){var A;if(b.length>0&&(A=b[0]),A instanceof Error)throw A;var F=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw F.context=A,F}var D=C[L];if(D===void 0)return!1;if(typeof D=="function")e(D,this,b);else for(var P=D.length,K=w(D,P),y=0;y<P;++y)e(K[y],this,b);return!0};function h(O,L,b,y){var S,C,A;if(u(b),C=O._events,C===void 0?(C=O._events=Object.create(null),O._eventsCount=0):(C.newListener!==void 0&&(O.emit("newListener",L,b.listener?b.listener:b),C=O._events),A=C[L]),A===void 0)A=C[L]=b,++O._eventsCount;else if(typeof A=="function"?A=C[L]=y?[b,A]:[A,b]:y?A.unshift(b):A.push(b),S=f(O),S>0&&A.length>S&&!A.warned){A.warned=!0;var F=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(L)+" listeners added. Use emitter.setMaxListeners() to increase limit");F.name="MaxListenersExceededWarning",F.emitter=O,F.type=L,F.count=A.length,a(F)}return O}o.prototype.addListener=function(L,b){return h(this,L,b,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(L,b){return h(this,L,b,!0)};function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(O,L,b){var y={fired:!1,wrapFn:void 0,target:O,type:L,listener:b},S=v.bind(y);return S.listener=b,y.wrapFn=S,S}o.prototype.once=function(L,b){return u(b),this.on(L,m(this,L,b)),this},o.prototype.prependOnceListener=function(L,b){return u(b),this.prependListener(L,m(this,L,b)),this},o.prototype.removeListener=function(L,b){var y,S,C,A,F;if(u(b),S=this._events,S===void 0)return this;if(y=S[L],y===void 0)return this;if(y===b||y.listener===b)--this._eventsCount===0?this._events=Object.create(null):(delete S[L],S.removeListener&&this.emit("removeListener",L,y.listener||b));else if(typeof y!="function"){for(C=-1,A=y.length-1;A>=0;A--)if(y[A]===b||y[A].listener===b){F=y[A].listener,C=A;break}if(C<0)return this;C===0?y.shift():E(y,C),y.length===1&&(S[L]=y[0]),S.removeListener!==void 0&&this.emit("removeListener",L,F||b)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(L){var b,y,S;if(y=this._events,y===void 0)return this;if(y.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):y[L]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete y[L]),this;if(arguments.length===0){var C=Object.keys(y),A;for(S=0;S<C.length;++S)A=C[S],A!=="removeListener"&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(b=y[L],typeof b=="function")this.removeListener(L,b);else if(b!==void 0)for(S=b.length-1;S>=0;S--)this.removeListener(L,b[S]);return this};function g(O,L,b){var y=O._events;if(y===void 0)return[];var S=y[L];return S===void 0?[]:typeof S=="function"?b?[S.listener||S]:[S]:b?T(S):w(S,S.length)}o.prototype.listeners=function(L){return g(this,L,!0)},o.prototype.rawListeners=function(L){return g(this,L,!1)},o.listenerCount=function(O,L){return typeof O.listenerCount=="function"?O.listenerCount(L):_.call(O,L)},o.prototype.listenerCount=_;function _(O){var L=this._events;if(L!==void 0){var b=L[O];if(typeof b=="function")return 1;if(b!==void 0)return b.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function w(O,L){for(var b=new Array(L),y=0;y<L;++y)b[y]=O[y];return b}function E(O,L){for(;L+1<O.length;L++)O[L]=O[L+1];O.pop()}function T(O){for(var L=new Array(O.length),b=0;b<L.length;++b)L[b]=O[b].listener||O[b];return L}function N(O,L){return new Promise(function(b,y){function S(A){O.removeListener(L,C),y(A)}function C(){typeof O.removeListener=="function"&&O.removeListener("error",S),b([].slice.call(arguments))}x(O,L,C,{once:!0}),L!=="error"&&j(O,S,{once:!0})})}function j(O,L,b){typeof O.on=="function"&&x(O,"error",L,b)}function x(O,L,b,y){if(typeof O.on=="function")y.once?O.once(L,b):O.on(L,b);else if(typeof O.addEventListener=="function")O.addEventListener(L,function S(C){y.once&&O.removeEventListener(L,S),b(C)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof O)}return Vl.exports}var jo,Ky;function Xp(){if(Ky)return jo;Ky=1;var i=jo&&jo.__read||function(s,o){var c=typeof Symbol=="function"&&s[Symbol.iterator];if(!c)return s;var u=c.call(s),f,h=[],v;try{for(;(o===void 0||o-- >0)&&!(f=u.next()).done;)h.push(f.value)}catch(m){v={error:m}}finally{try{f&&!f.done&&(c=u.return)&&c.call(u)}finally{if(v)throw v.error}}return h},e=jo&&jo.__spreadArray||function(s,o,c){if(c||arguments.length===2)for(var u=0,f=o.length,h;u<f;u++)(h||!(u in o))&&(h||(h=Array.prototype.slice.call(o,0,u)),h[u]=o[u]);return s.concat(h||Array.prototype.slice.call(o))},n=pr().EventEmitter,a=(function(){function s(){Object.defineProperties(this,{_eventEmitter:{value:new n}})}return s.prototype.dispatchEvent=function(o){return this._eventEmitter.emit(o.type,o)},s.prototype.addEventListener=function(){var o;return(o=this._eventEmitter).addListener.apply(o,e([],i(arguments),!1))},s.prototype.removeEventListener=function(){var o;return(o=this._eventEmitter).removeListener.apply(o,e([],i(arguments),!1))},s})();return jo=a,jo}var sh,Qy;function PT(){if(Qy)return sh;Qy=1;var i=hr().defer,e={high:new Set(["low"]),low:new Set(["high"])},n=(function(){function s(o){o===void 0&&(o="low");var c=o;Object.defineProperties(this,{_state:{set:function(u){var f=this;if(c!==u){c=u;var h=this._whenDeferreds.get(c);h.forEach(function(v){return v.resolve(f)}),h.clear()}},get:function(){return c}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])}})}return Object.defineProperty(s.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),s.prototype.lower=function(){return this.transition("low")},s.prototype.raise=function(){return this.transition("high")},s.prototype.transition=function(o){if(!e[this.state].has(o))throw a(this.state,o);return this._state=o,this},s.prototype.when=function(o){if(this.state===o)return Promise.resolve(this);if(!e[this.state].has(o))return Promise.reject(a(this.state,o));var c=i();return this._whenDeferreds.get(o).add(c),c.promise},s})();function a(s,o){return new Error('Cannot transition from "'.concat(s,'" to "').concat(o,'"'))}return sh=n,sh}var ch,Jy;function z1(){if(Jy)return ch;Jy=1;var i=(function(){function e(n){Object.defineProperties(this,{track:{enumerable:!0,value:n,writable:!0}})}return e})();return ch=i,ch}var ti,Yy;function $1(){if(Yy)return ti;Yy=1;var i=ti&&ti.__extends||(function(){var D=function(P,K){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,W){q.__proto__=W}||function(q,W){for(var B in W)Object.prototype.hasOwnProperty.call(W,B)&&(q[B]=W[B])},D(P,K)};return function(P,K){if(typeof K!="function"&&K!==null)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");D(P,K);function q(){this.constructor=P}P.prototype=K===null?Object.create(K):(q.prototype=K.prototype,new q)}})(),e=ti&&ti.__read||function(D,P){var K=typeof Symbol=="function"&&D[Symbol.iterator];if(!K)return D;var q=K.call(D),W,B=[],z;try{for(;(P===void 0||P-- >0)&&!(W=q.next()).done;)B.push(W.value)}catch(G){z={error:G}}finally{try{W&&!W.done&&(K=q.return)&&K.call(q)}finally{if(z)throw z.error}}return B},n=ti&&ti.__spreadArray||function(D,P,K){if(K||arguments.length===2)for(var q=0,W=P.length,B;q<W;q++)(B||!(q in P))&&(B||(B=Array.prototype.slice.call(P,0,q)),B[q]=P[q]);return D.concat(B||Array.prototype.slice.call(P))},a=CT(),s=Xp(),o=PT(),c=bT(),u=z1(),f=Ou(),h=f.getSdpFormat,v=f.updatePlanBTrackIdsToSSRCs,m=f.updateUnifiedPlanTrackIdsToSSRCs,g=hr(),_=g.delegateMethods,w=g.interceptEvent,E=g.isIOSChrome,T=g.legacyPromise,N=g.proxyProperties,j=h()==="unified",x=(function(D){i(P,D);function P(K,q){K===void 0&&(K={});var W=D.call(this)||this,B=Object.assign(K.iceTransportPolicy?{iceTransports:K.iceTransportPolicy}:{},K);w(W,"datachannel"),w(W,"signalingstatechange");var z=h(B.sdpSemantics),G=new RTCPeerConnection(B,q);return Object.defineProperties(W,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new c},_peerConnection:{value:G},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:z},_senders:{value:new Map},_signalingStateLatch:{value:new o},_tracksToSSRCs:{value:new Map,writable:!0}}),G.addEventListener("datachannel",function(J){A(J.channel),W.dispatchEvent(J)}),G.addEventListener("signalingstatechange",function(){for(var J=[],M=0;M<arguments.length;M++)J[M]=arguments[M];G.signalingState==="stable"&&(W._appliedTracksToSSRCs=new Map(W._tracksToSSRCs)),!W._pendingLocalOffer&&!W._pendingRemoteOffer&&W.dispatchEvent.apply(W,n([],e(J),!1))}),G.ontrack=function(){},typeof G.addTrack!="function"&&G.addStream(W._localStream),N(RTCPeerConnection.prototype,W,G),W}return Object.defineProperty(P.prototype,"localDescription",{get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"signalingState",{get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),P.prototype.addTrack=function(K){for(var q,W=[],B=1;B<arguments.length;B++)W[B-1]=arguments[B];if(typeof this._peerConnection.addTrack=="function")return(q=this._peerConnection).addTrack.apply(q,n([K],e(W),!1));if(this._peerConnection.signalingState==="closed")throw new Error("Cannot add MediaStreamTrack [".concat(K.id,`, 
        `).concat(K.kind,"]: RTCPeerConnection is closed"));var z=this._senders.get(K);if(z&&z.track)throw new Error("Cannot add MediaStreamTrack ['".concat(K.id,`, 
        `).concat(K.kind,"]: RTCPeerConnection already has it"));return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(K),this._peerConnection.addStream(this._localStream),z=new u(K),this._senders.set(K,z),z},P.prototype.removeTrack=function(K){if(this._peerConnection.signalingState==="closed")throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");if(typeof this._peerConnection.addTrack=="function")try{return this._peerConnection.removeTrack(K)}catch{}else{var q=K.track;if(!q)return;K=this._senders.get(q),K&&K.track&&(K.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(q),this._peerConnection.addStream(this._localStream))}},P.prototype.getSenders=function(){return typeof this._peerConnection.addTrack=="function"?this._peerConnection.getSenders():Array.from(this._senders.values())},P.prototype.addIceCandidate=function(K){for(var q=this,W=[],B=1;B<arguments.length;B++)W[B-1]=arguments[B];var z;return this.signalingState==="have-remote-offer"?z=this._signalingStateLatch.when("low").then(function(){return q._peerConnection.addIceCandidate(K)}):z=this._peerConnection.addIceCandidate(K),W.length>0?T.apply(void 0,n([z],e(W),!1)):z},P.prototype.close=function(){this.signalingState!=="closed"&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},P.prototype.createAnswer=function(){for(var K=this,q=[],W=0;W<arguments.length;W++)q[W]=arguments[W];var B;return this._pendingRemoteOffer?B=this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return K._signalingStateLatch.lower(),K._peerConnection.createAnswer()}).then(function(z){return K._pendingRemoteOffer=null,K._rolledBackTracksToSSRCs.clear(),new a({type:"answer",sdp:F(K._sdpFormat,K._tracksToSSRCs,z.sdp)})},function(z){throw K._pendingRemoteOffer=null,z}):B=this._peerConnection.createAnswer().then(function(z){return K._rolledBackTracksToSSRCs.clear(),new a({type:"answer",sdp:F(K._sdpFormat,K._tracksToSSRCs,z.sdp)})}),q.length>1?T.apply(void 0,n([B],e(q),!1)):B},P.prototype.createOffer=function(){for(var K=this,q=[],W=0;W<arguments.length;W++)q[W]=arguments[W];var B=e(q,3),z=B[0],G=B[1],J=B[2],M=J||z||{};if(E()){if(M.offerToReceiveVideo&&!this._audioTransceiver&&!(j&&b(this,"audio"))){delete M.offerToReceiveAudio;try{this._audioTransceiver=j?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(ee){return Promise.reject(ee)}}if(M.offerToReceiveVideo&&!this._videoTransceiver&&!(j&&b(this,"video"))){delete M.offerToReceiveVideo;try{this._videoTransceiver=j?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(ee){return Promise.reject(ee)}}}var V=this._peerConnection.createOffer(M).then(function(ee){return K._rolledBackTracksToSSRCs.clear(),new a({type:ee.type,sdp:F(K._sdpFormat,K._tracksToSSRCs,ee.sdp)})});return q.length>1?T(V,z,G):V},P.prototype.createDataChannel=function(K,q){q=C(q);var W=this._peerConnection.createDataChannel(K,q);return A(W),W},P.prototype.setLocalDescription=function(){for(var K=[],q=0;q<arguments.length;q++)K[q]=arguments[q];var W=e(K,3),B=W[0],z=W[1],G=W[2];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var J=O(this,!0,B);return K.length>1?T(J,z,G):J},P.prototype.setRemoteDescription=function(){for(var K=[],q=0;q<arguments.length;q++)K[q]=arguments[q];var W=e(K,3),B=W[0],z=W[1],G=W[2];this._rolledBackTracksToSSRCs.clear();var J=O(this,!1,B);return K.length>1?T(J,z,G):J},P})(s);_(RTCPeerConnection.prototype,x.prototype,"_peerConnection");function O(D,P,K){function q(ee){P?D._pendingLocalOffer=ee:D._pendingRemoteOffer=ee}function W(){P?D._pendingLocalOffer=null:D._pendingRemoteOffer=null}var B=P?D._pendingLocalOffer:D._pendingRemoteOffer,z=P?D._pendingRemoteOffer:D._pendingLocalOffer,G=P?"have-local-offer":"have-remote-offer",J=P?"setLocalDescription":"setRemoteDescription",M;if(!P&&z&&K.type==="answer")M=L(D,K);else if(K.type==="offer"){if(D.signalingState!==G&&D.signalingState!=="stable")return Promise.reject(new Error("Cannot set ".concat(P?"local":"remote"," offer in state ").concat(D.signalingState)));!B&&D._signalingStateLatch.state==="low"&&D._signalingStateLatch.raise();var V=D.signalingState;q(y(K)),M=Promise.resolve(),D.signalingState!==V&&M.then(function(){return D.dispatchEvent(new Event("signalingstatechange"))})}else K.type==="rollback"&&(D.signalingState!==G?M=Promise.reject(new Error("Cannot rollback ".concat(P?"local":"remote"," description in ").concat(D.signalingState))):(W(),D._rolledBackTracksToSSRCs=new Map(D._tracksToSSRCs),D._tracksToSSRCs=new Map(D._appliedTracksToSSRCs),M=Promise.resolve(),M.then(function(){return D.dispatchEvent(new Event("signalingstatechange"))})));return M||D._peerConnection[J](y(K))}function L(D,P){var K=D._pendingLocalOffer;return D._peerConnection.setLocalDescription(K).then(function(){return D._pendingLocalOffer=null,D.setRemoteDescription(P)}).then(function(){D._signalingStateLatch.lower()})}function b(D,P){return!!D.getTransceivers().find(function(K){var q=K.receiver,W=q===void 0?{}:q,B=W.track,z=B===void 0?{}:B;return z.kind===P})}function y(D){return D instanceof a&&D._description?D._description:new RTCSessionDescription(D)}function S(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function C(D){return D=Object.assign({},D),S()&&"maxPacketLifeTime"in D&&(D.maxRetransmitTime=D.maxPacketLifeTime),D}function A(D){return Object.defineProperty(D,"maxRetransmits",{value:D.maxRetransmits===65535?null:D.maxRetransmits}),S()&&Object.defineProperty(D,"maxPacketLifeTime",{value:D.maxRetransmitTime===65535?null:D.maxRetransmitTime}),D}function F(D,P,K){return D==="unified"?m(P,K):v(P,K)}return ti=x,ti}var uh,Xy;function RT(){return Xy||(Xy=1,uh=RTCSessionDescription),uh}var ri,Zy;function G1(){if(Zy)return ri;Zy=1;var i=ri&&ri.__extends||(function(){var E=function(T,N){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,x){j.__proto__=x}||function(j,x){for(var O in x)Object.prototype.hasOwnProperty.call(x,O)&&(j[O]=x[O])},E(T,N)};return function(T,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");E(T,N);function j(){this.constructor=T}T.prototype=N===null?Object.create(N):(j.prototype=N.prototype,new j)}})(),e=ri&&ri.__read||function(E,T){var N=typeof Symbol=="function"&&E[Symbol.iterator];if(!N)return E;var j=N.call(E),x,O=[],L;try{for(;(T===void 0||T-- >0)&&!(x=j.next()).done;)O.push(x.value)}catch(b){L={error:b}}finally{try{x&&!x.done&&(N=j.return)&&N.call(j)}finally{if(L)throw L.error}}return O},n=ri&&ri.__spreadArray||function(E,T,N){if(N||arguments.length===2)for(var j=0,x=T.length,O;j<x;j++)(O||!(j in T))&&(O||(O=Array.prototype.slice.call(T,0,j)),O[j]=T[j]);return E.concat(O||Array.prototype.slice.call(T))},a=Xp(),s=RT(),o=Ou().updateUnifiedPlanTrackIdsToSSRCs,c=hr(),u=c.delegateMethods,f=c.interceptEvent,h=c.legacyPromise,v=c.proxyProperties,m=(function(E){i(T,E);function T(N){var j=E.call(this)||this;f(j,"signalingstatechange");var x=new RTCPeerConnection(N);Object.defineProperties(j,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:x},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},peerIdentity:{enumerable:!0,value:Promise.resolve({idp:"",name:""})}});var O;return x.addEventListener("signalingstatechange",function(){for(var L=[],b=0;b<arguments.length;b++)L[b]=arguments[b];!j._rollingBack&&j.signalingState!==O&&(O=j.signalingState,j._isClosed?setTimeout(function(){return j.dispatchEvent.apply(j,n([],e(L),!1))}):j.dispatchEvent.apply(j,n([],e(L),!1)))}),v(RTCPeerConnection.prototype,j,x),j}return Object.defineProperty(T.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"localDescription",{get:function(){return w(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),T.prototype.createAnswer=function(){for(var N=this,j=[],x=0;x<arguments.length;x++)j[x]=arguments[x];var O;return O=this._peerConnection.createAnswer().then(function(L){return _(N,L),w(L,N._initiallyNegotiatedDtlsRole)}),typeof j[0]=="function"?h.apply(void 0,n([O],e(j),!1)):O},T.prototype.createOffer=function(){for(var N=this,j=[],x=0;x<arguments.length;x++)j[x]=arguments[x];var O=e(j,3),L=O[0],b=O[1],y=O[2],S=y||L||{},C;if(this.signalingState==="have-local-offer"||this.signalingState==="have-remote-offer"){var A=this.signalingState==="have-local-offer";C=g(this,A,function(){return N.createOffer(S)})}else C=this._peerConnection.createOffer(S);return C=C.then(function(F){return new s({type:F.type,sdp:o(N._tracksToSSRCs,F.sdp)})}),j.length>1?h(C,L,b):C},T.prototype.setLocalDescription=function(){for(var N,j=[],x=0;x<arguments.length;x++)j[x]=arguments[x];var O=e(j),L=O[0],b=O.slice(1),y;return L&&L.type==="answer"&&this.signalingState==="have-local-offer"&&(y=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),y?j.length>1?h.apply(void 0,n([y],e(b),!1)):y:(N=this._peerConnection).setLocalDescription.apply(N,n([],e(j),!1))},T.prototype.setRemoteDescription=function(){for(var N=this,j=[],x=0;x<arguments.length;x++)j[x]=arguments[x];var O=e(j),L=O[0],b=O.slice(1),y;return L&&this.signalingState==="have-remote-offer"&&(L.type==="answer"?y=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):L.type==="offer"&&(y=g(this,!1,function(){return N._peerConnection.setRemoteDescription(L)}))),y||(y=this._peerConnection.setRemoteDescription(L)),y=y.then(function(){return _(N,L,!0)}),j.length>1?h.apply(void 0,n([y],e(b),!1)):y},T.prototype.close=function(){this.signalingState!=="closed"&&(this._isClosed=!0,this._peerConnection.close())},T})(a);u(RTCPeerConnection.prototype,m.prototype,"_peerConnection");function g(E,T,N){var j=T?"setLocalDescription":"setRemoteDescription";return E._rollingBack=!0,E._peerConnection[j](new s({type:"rollback"})).then(N).then(function(x){return E._rollingBack=!1,x},function(x){throw E._rollingBack=!1,x})}function _(E,T,N){if(!(E._initiallyNegotiatedDtlsRole||T.type==="offer")){var j=T.sdp.match(/a=setup:([a-z]+)/);if(j){var x=j[1];E._initiallyNegotiatedDtlsRole=N?{active:"passive",passive:"active"}[x]:x}}}function w(E,T){return E&&E.type==="answer"&&T?new s({type:E.type,sdp:E.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+T)}):E}return ri=m,ri}var ni,e_;function K1(){if(e_)return ni;e_=1;var i=ni&&ni.__extends||(function(){var O=function(L,b){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,S){y.__proto__=S}||function(y,S){for(var C in S)Object.prototype.hasOwnProperty.call(S,C)&&(y[C]=S[C])},O(L,b)};return function(L,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");O(L,b);function y(){this.constructor=L}L.prototype=b===null?Object.create(b):(y.prototype=b.prototype,new y)}})(),e=ni&&ni.__read||function(O,L){var b=typeof Symbol=="function"&&O[Symbol.iterator];if(!b)return O;var y=b.call(O),S,C=[],A;try{for(;(L===void 0||L-- >0)&&!(S=y.next()).done;)C.push(S.value)}catch(F){A={error:F}}finally{try{S&&!S.done&&(b=y.return)&&b.call(y)}finally{if(A)throw A.error}}return C},n=ni&&ni.__spreadArray||function(O,L,b){if(b||arguments.length===2)for(var y=0,S=L.length,C;y<S;y++)(C||!(y in L))&&(C||(C=Array.prototype.slice.call(L,0,y)),C[y]=L[y]);return O.concat(C||Array.prototype.slice.call(L))},a=Xp(),s=PT(),o=Ou(),c=o.getSdpFormat,u=o.updatePlanBTrackIdsToSSRCs,f=o.updateUnifiedPlanTrackIdsToSSRCs,h=hr(),v=h.delegateMethods,m=h.interceptEvent,g=h.proxyProperties,_=c()==="unified",w=_?f:u,E=(function(O){i(L,O);function L(b){var y=O.call(this)||this;m(y,"datachannel"),m(y,"iceconnectionstatechange"),m(y,"signalingstatechange"),m(y,"track");var S=new RTCPeerConnection(b);return Object.defineProperties(y,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:S},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new s},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0}}),S.addEventListener("datachannel",function(C){x(C.channel),y.dispatchEvent(C)}),S.addEventListener("iceconnectionstatechange",function(){for(var C=[],A=0;A<arguments.length;A++)C[A]=arguments[A];y._isClosed||y.dispatchEvent.apply(y,n([],e(C),!1))}),S.addEventListener("signalingstatechange",function(){for(var C=[],A=0;A<arguments.length;A++)C[A]=arguments[A];y._isClosed||(S.signalingState==="stable"&&(y._appliedTracksToSSRCs=new Map(y._tracksToSSRCs)),!y._pendingLocalOffer&&!y._pendingRemoteOffer&&y.dispatchEvent.apply(y,n([],e(C),!1)))}),S.addEventListener("track",function(C){y._pendingRemoteOffer=null,y.dispatchEvent(C)}),g(RTCPeerConnection.prototype,y,S),y}return Object.defineProperty(L.prototype,"localDescription",{get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"iceConnectionState",{get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),L.prototype.addIceCandidate=function(b){var y=this;return this.signalingState==="have-remote-offer"?this._signalingStateLatch.when("low").then(function(){return y._peerConnection.addIceCandidate(b)}):this._peerConnection.addIceCandidate(b)},L.prototype.createOffer=function(b){var y=this;if(b=Object.assign({},b),b.offerToReceiveVideo&&!this._audioTransceiver&&!(_&&j(this,"audio"))){delete b.offerToReceiveAudio;try{this._audioTransceiver=_?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(S){return Promise.reject(S)}}if(b.offerToReceiveVideo&&!this._videoTransceiver&&!(_&&j(this,"video"))){delete b.offerToReceiveVideo;try{this._videoTransceiver=_?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(S){return Promise.reject(S)}}return this._peerConnection.createOffer(b).then(function(S){return y._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:S.type,sdp:w(y._tracksToSSRCs,S.sdp)})})},L.prototype.createAnswer=function(b){var y=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return y._signalingStateLatch.lower(),y._peerConnection.createAnswer()}).then(function(S){return y._pendingRemoteOffer=null,y._rolledBackTracksToSSRCs.clear(),_?new RTCSessionDescription({type:S.type,sdp:w(y._tracksToSSRCs,S.sdp)}):S},function(S){throw y._pendingRemoteOffer=null,S}):this._peerConnection.createAnswer(b).then(function(S){return y._rolledBackTracksToSSRCs.clear(),_?new RTCSessionDescription({type:S.type,sdp:w(y._tracksToSSRCs,S.sdp)}):S})},L.prototype.createDataChannel=function(b,y){var S=this._peerConnection.createDataChannel(b,y);return x(S),S},L.prototype.removeTrack=function(b){b.replaceTrack(null),this._peerConnection.removeTrack(b)},L.prototype.setLocalDescription=function(b){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),T(this,!0,b)},L.prototype.setRemoteDescription=function(b){return this._rolledBackTracksToSSRCs.clear(),T(this,!1,b)},L.prototype.close=function(){var b=this;this._isClosed||(this._isClosed=!0,this._peerConnection.close(),setTimeout(function(){b.dispatchEvent(new Event("iceconnectionstatechange")),b.dispatchEvent(new Event("signalingstatechange"))}))},L})(a);v(RTCPeerConnection.prototype,E.prototype,"_peerConnection");function T(O,L,b){function y(K){L?O._pendingLocalOffer=K:O._pendingRemoteOffer=K}function S(){L?O._pendingLocalOffer=null:O._pendingRemoteOffer=null}var C=L?O._pendingLocalOffer:O._pendingRemoteOffer,A=L?O._pendingRemoteOffer:O._pendingLocalOffer,F=L?"have-local-offer":"have-remote-offer",D=L?"setLocalDescription":"setRemoteDescription";if(!L&&A&&b.type==="answer")return N(O,b);if(b.type==="offer"){if(O.signalingState!==F&&O.signalingState!=="stable")return Promise.reject(new Error("Cannot set ".concat(L?"local":"remote",`
        offer in state `).concat(O.signalingState)));!C&&O._signalingStateLatch.state==="low"&&O._signalingStateLatch.raise();var P=O.signalingState;return y(b),O.signalingState!==P?Promise.resolve().then(function(){return O.dispatchEvent(new Event("signalingstatechange"))}):Promise.resolve()}else if(b.type==="rollback")return O.signalingState!==F?Promise.reject(new Error(`Cannot rollback 
        `.concat(L?"local":"remote"," description in ").concat(O.signalingState))):(S(),O._rolledBackTracksToSSRCs=new Map(O._tracksToSSRCs),O._tracksToSSRCs=new Map(O._appliedTracksToSSRCs),Promise.resolve().then(function(){return O.dispatchEvent(new Event("signalingstatechange"))}));return O._peerConnection[D](b)}function N(O,L){var b=O._pendingLocalOffer;return O._peerConnection.setLocalDescription(b).then(function(){return O._pendingLocalOffer=null,O.setRemoteDescription(L)}).then(function(){return O._signalingStateLatch.lower()})}function j(O,L){return!!O.getTransceivers().find(function(b){var y=b.receiver,S=y===void 0?{}:y,C=S.track,A=C===void 0?{}:C;return A.kind===L})}function x(O){return Object.defineProperties(O,{maxPacketLifeTime:{value:O.maxPacketLifeTime===65535?null:O.maxPacketLifeTime},maxRetransmits:{value:O.maxRetransmits===65535?null:O.maxRetransmits}})}return ni=E,ni}var t_;function Q1(){if(t_)return No.exports;if(t_=1,typeof RTCPeerConnection=="function"){var i=hr().guessBrowser;switch(i()){case"chrome":No.exports=$1();break;case"firefox":No.exports=G1();break;case"safari":No.exports=K1();break;default:No.exports=RTCPeerConnection;break}}else No.exports=function(){throw new Error("RTCPeerConnection is not supported")};return No.exports}var qa={exports:{}},r_;function J1(){if(r_)return qa.exports;if(r_=1,typeof RTCSessionDescription=="function"){var i=hr().guessBrowser;switch(i()){case"chrome":qa.exports=CT();break;case"firefox":qa.exports=RT();break;default:qa.exports=RTCSessionDescription;break}}else qa.exports=function(){throw new Error("RTCSessionDescription is not supported")};return qa.exports}var lh,n_;function oa(){if(n_)return lh;n_=1;var i={};return Object.defineProperties(i,{getStats:{enumerable:!0,value:B1()},getUserMedia:{enumerable:!0,value:q1()},MediaStream:{enumerable:!0,value:bT()},MediaStreamTrack:{enumerable:!0,value:H1()},RTCIceCandidate:{enumerable:!0,value:W1()},RTCPeerConnection:{enumerable:!0,value:Q1()},RTCSessionDescription:{enumerable:!0,value:J1()}}),lh=i,lh}var fh,i_;function Zp(){return i_||(i_=1,fh=function(e,n){if(e&&n)if(e.super_=n,typeof Object.create=="function")e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});else{var a=(function(){function s(){}return s})();a.prototype=n.prototype,e.prototype=new a,e.prototype.constructor=e}}),fh}var Bs,o_;function aa(){if(o_)return Bs;o_=1;var i=Bs&&Bs.__read||function(m,g){var _=typeof Symbol=="function"&&m[Symbol.iterator];if(!_)return m;var w=_.call(m),E,T=[],N;try{for(;(g===void 0||g-- >0)&&!(E=w.next()).done;)T.push(E.value)}catch(j){N={error:j}}finally{try{E&&!E.done&&(_=w.return)&&_.call(w)}finally{if(N)throw N.error}}return T};function e(){return/Android/.test(navigator.userAgent)}function n(){return!!(navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2)}function a(){return n()&&window.screen.width>=744&&(/Macintosh/i.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPad/.test(navigator.platform))}function s(){return n()&&window.screen.width<=476&&(/Macintosh/i.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform))}function o(){return a()||s()}function c(){return/Mobi/.test(navigator.userAgent)}function u(m){return m==="chrome"&&/Edge/.test(navigator.userAgent)&&(typeof chrome>"u"||typeof chrome.runtime>"u")}function f(m){if(m!=="chrome")return null;if("brave"in navigator)return"brave";var g=v(navigator.userAgent),_=g.reduce(function(N,j){return N.replace(j,"")},navigator.userAgent),w=_.match(/[^\s]+/g)||[],E=i(w.map(function(N){return N.split("/")[0].toLowerCase()})),T=E.slice(2);return T.find(function(N){return!["chrome","mobile","safari"].includes(N)})||null}function h(m){return m!=="safari"?null:"brave"in navigator?"brave":["edge","edg"].find(function(g){return navigator.userAgent.toLowerCase().includes(g)})||null}function v(m){for(var g=[],_=[],w=0;w<m.length;w++)if(m[w]==="(")g.push(w);else if(m[w]===")"&&g.length>0){var E=g.pop();g.length===0&&_.push(m.substring(E,w+1))}return _}return Bs={isAndroid:e,isIOS:o,isIpad:a,isIphone:s,isMobile:c,isNonChromiumEdge:u,mobileWebKitBrowser:h,rebrandedChromeBrowser:f},Bs}var dh,a_;function OT(){if(a_)return dh;a_=1;function i(n){return n=typeof n=="number"?n:0,new Promise(function(a){return setTimeout(a,n)})}function e(n,a,s){s=typeof s=="number"?s:250;var o=n.createMediaStreamSource(a),c=n.createAnalyser();c.fftSize=2048,o.connect(c);var u=new Uint8Array(c.fftSize),f=!1;setTimeout(function(){f=!0},s);function h(){return f?Promise.resolve(!0):(c.getByteTimeDomainData(u),u.some(function(v){return v!==128&&v!==0})?Promise.resolve(!1):i().then(h))}return h().then(function(v){return o.disconnect(),v},function(v){throw o.disconnect(),v})}return dh=e,dh}var hh,s_;function mf(){if(s_)return hh;s_=1;var i=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:null,e=(function(){function n(a){a=Object.assign({AudioContext:i},a),Object.defineProperties(this,{_AudioContext:{value:a.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:n}})}return n.prototype.getOrCreate=function(a){if(!this._holders.has(a)&&(this._holders.add(a),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch{}return this._audioContext},n.prototype.release=function(a){this._holders.has(a)&&(this._holders.delete(a),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},n})();return hh=new e,hh}var ph,c_;function IT(){if(c_)return ph;c_=1;var i=OT(),e=3,n=250;function a(s){var o=mf(),c={},u=o.getOrCreate(c),f=e;function h(){return f--,i(u,s.srcObject,n).then(function(v){return v?f>0?h():!0:!1}).catch(function(){return!0})}return h().finally(function(){o.release(c)})}return ph=a,ph}var vh,u_;function LT(){if(u_)return vh;u_=1;var i=_t().defer,e=(function(){function n(){Object.defineProperties(this,{_audio:{value:i(),writable:!0},_video:{value:i(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return n.prototype.resolveDeferred=function(a){a==="audio"?this._audio.resolve():this._video.resolve()},n.prototype.startDeferred=function(a){a==="audio"?this._audio=i():this._video=i()},n.prototype.whenResolved=function(a){return a==="audio"?this._audio.promise:this._video.promise},n})();return vh=new e,vh}var mh,l_;function Iu(){if(l_)return mh;l_=1;var i=pr().EventEmitter,e=_t().hidePrivateAndCertainPublicPropertiesInClass;return mh=e(i,["domain"]),mh}var qs,f_;function ev(){if(f_)return qs;f_=1;var i=qs&&qs.__extends||(function(){var h=function(v,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&(g[w]=_[w])},h(v,m)};return function(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");h(v,m);function g(){this.constructor=v}v.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}})(),e=Iu(),n=_t(),a=n.buildLogLevels,s=n.valueToJSON,o=Et().DEFAULT_LOG_LEVEL,c=cn(),u=0,f=(function(h){i(v,h);function v(m,g,_){var w=this;_=Object.assign({name:m,log:null,logLevel:o},_),w=h.call(this)||this;var E=String(_.name),T=a(_.logLevel),N=_.log?_.log.createLog("media",w):new c("media",w,T,_.loggerName);return Object.defineProperties(w,{_instanceId:{value:++u},_log:{value:N},kind:{enumerable:!0,value:g},name:{enumerable:!0,value:E}}),w}return v.prototype.toJSON=function(){return s(this)},v})(e);return qs=f,qs}var Hs,d_;function AT(){if(d_)return Hs;d_=1;var i=Hs&&Hs.__extends||(function(){var m=function(g,_){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,E){w.__proto__=E}||function(w,E){for(var T in E)Object.prototype.hasOwnProperty.call(E,T)&&(w[T]=E[T])},m(g,_)};return function(g,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");m(g,_);function w(){this.constructor=g}g.prototype=_===null?Object.create(_):(w.prototype=_.prototype,new w)}})(),e=aa().isIOS,n=oa().MediaStream,a=_t(),s=a.waitForEvent,o=a.waitForSometime,c=LT(),u=ev(),f=(function(m){i(g,m);function g(_,w){var E=this;w=Object.assign({playPausedElementsIfNotBackgrounded:e()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"},w),E=m.call(this,_.id,_.kind,w)||this;var T=!1;if(w=Object.assign({MediaStream:n},w),typeof w.MediaStream!="function")throw new Error("MediaTrack received an invalid MediaStream constructor: "+w.MediaStream);return Object.defineProperties(E,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return T},set:function(N){T=N}},_playPausedElementsIfNotBackgrounded:{value:w.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:w.workaroundWebKitBug212780||w.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:w.MediaStream},_mapMediaElement:{value:w.mapMediaElement},_disposeMediaElement:{value:w.disposeMediaElement},isStarted:{enumerable:!0,get:function(){return T}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||_.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),E._initialize(),E}return g.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},g.prototype._initialize=function(){var _=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack&&this.mediaStreamTrack.addEventListener?this.mediaStreamTrack.addEventListener("ended",function w(){_._end(),_.mediaStreamTrack.removeEventListener("ended",w)}):this.mediaStreamTrack&&(this.mediaStreamTrack.onended=function(){_._end(),_.mediaStreamTrack.onended=null}),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},g.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._disposeMediaElement?this._disposeMediaElement(this._dummyEl):this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},g.prototype.attach=function(_){var w=this;if(typeof _=="string"?_=this._selectElement(_):_||(_=this._createElement()),this._log.debug("Attempting to attach to element:",_),_=this._attach(_),this._shouldShimAttachedElements&&!this._elShims.has(_)){var E=this._playPausedElementsIfNotBackgrounded?function(){return h(_,w._log)}:null;this._elShims.set(_,v(_,E))}return _},g.prototype._attach=function(_,w){w===void 0&&(w=this.processedTrack||this.mediaStreamTrack);var E=_.srcObject;E instanceof this._MediaStream||(E=new this._MediaStream);var T=w.kind==="audio"?"getAudioTracks":"getVideoTracks";return E[T]().forEach(function(N){E.removeTrack(N)}),E.addTrack(w),this._mapMediaElement&&(this._log.debug("Mapping element using mapMediaElement before attaching media to element"),this._mapMediaElement(_)),_.srcObject=E,_.autoplay=!0,_.playsInline=!0,this._attachments.has(_)||this._attachments.add(_),_},g.prototype._selectElement=function(_){var w=document.querySelector(_);if(!w)throw new Error("Selector matched no element: ".concat(_));return w},g.prototype._updateElementsMediaStreamTrack=function(){var _=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach(function(w){return _._attach(w)})},g.prototype._createElement=function(){return typeof document<"u"?document.createElement(this.kind):null},g.prototype.detach=function(_){var w;return typeof _=="string"?w=[this._selectElement(_)]:_?w=[_]:w=this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",w),this._detachElements(w),_?w[0]:w},g.prototype._detachElements=function(_){return _.map(this._detachElement.bind(this))},g.prototype._detachElement=function(_){if(!this._attachments.has(_))return _;var w=_.srcObject;if(w instanceof this._MediaStream&&w.removeTrack(this.processedTrack||this.mediaStreamTrack),this._disposeMediaElement&&(this._log.debug("Disposing element using disposeMediaElement after removing media from element"),this._disposeMediaElement(_)),this._attachments.delete(_),this._shouldShimAttachedElements&&this._elShims.has(_)){var E=this._elShims.get(_);E.unShim(),this._elShims.delete(_)}return _},g.prototype._getAllAttachedElements=function(){var _=[];return this._attachments.forEach(function(w){_.push(w)}),_},g})(u);function h(m,g){var _=m.tagName.toLowerCase();g.warn("Unintentionally paused:",m),Promise.race([s(document,"visibilitychange"),o(1e3)]).then(function(){document.visibilityState==="visible"&&c.whenResolved("audio").then(function(){return g.info("Playing unintentionally paused <".concat(_,"> element")),g.debug("Element:",m),m.play()}).then(function(){g.info("Successfully played unintentionally paused <".concat(_,"> element")),g.debug("Element:",m)}).catch(function(w){g.warn("Error while playing unintentionally paused <".concat(_,"> element:"),{error:w,el:m})})})}function v(m,g){g===void 0&&(g=null);var _=m.pause,w=m.play,E=!1;m.pause=function(){return E=!0,_.call(m)},m.play=function(){return E=!1,w.call(m)};var T=g?function(){E||g()}:null;return T&&m.addEventListener("pause",T),{pausedIntentionally:function(){return E},unShim:function(){m.pause=_,m.play=w,T&&m.removeEventListener("pause",T)}}}return Hs=f,Hs}var Ws,h_;function xT(){if(h_)return Ws;h_=1;var i=Ws&&Ws.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=AT(),n=(function(a){i(s,a);function s(o,c){return a.call(this,o,c)||this}return s.prototype.attach=function(){return a.prototype.attach.apply(this,arguments)},s.prototype.detach=function(){return a.prototype.detach.apply(this,arguments)},s})(e);return Ws=n,Ws}var gh,p_;function DT(){if(p_)return gh;p_=1;var i=null,e=3,n=50,a=250,s=50;function o(u){try{var f=i.getContext("2d");f.drawImage(u,0,0,s,n);var h=f.getImageData(0,0,s,n),v=h.data.filter(function(g,_){return(_+1)%4}),m=Math.max.apply(Math,v);return m===0}catch(g){return console.log("Error checking silence: ",g),!1}}function c(u){return i=i||document.createElement("canvas"),new Promise(function(f){var h=e;setTimeout(function v(){return h--,o(u)?h>0?setTimeout(v,a):f(!0):f(!1)},a)})}return gh=c,gh}var yh,v_;function gf(){if(v_)return yh;v_=1;var i=(function(){function e(n){n===void 0&&(n=1);var a=this;Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){a._emitVisible(document.visibilityState==="visible")}}});for(var s=0;s<n;s++)this._listeners.push([])}return e.prototype.clear=function(){for(var n=this._listeners.length,a=0;a<n;a++)this._listeners[a]=[]},e.prototype._listenerCount=function(){return this._listeners.reduce(function(n,a){return n+a.length},0)},e.prototype._emitVisible=function(n){for(var a=this,s=Promise.resolve(),o=function(u){s=s.then(function(){return a._emitVisiblePhase(u,n)})},c=1;c<=this._listeners.length;c++)o(c);return s},e.prototype._emitVisiblePhase=function(n,a){var s=this._listeners[n-1];return Promise.all(s.map(function(o){var c=o(a);return c instanceof Promise?c:Promise.resolve(c)}))},e.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},e.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},e.prototype.onVisibilityChange=function(n,a){if(typeof n!="number"||n<=0||n>this._listeners.length)throw new Error("invalid phase: ",n);var s=this._listeners[n-1];return s.push(a),this._listenerCount()===1&&this._start(),this},e.prototype.offVisibilityChange=function(n,a){if(typeof n!="number"||n<=0||n>this._listeners.length)throw new Error("invalid phase: ",n);var s=this._listeners[n-1],o=s.indexOf(a);return o!==-1&&(s.splice(o,1),this._listenerCount()===0&&this._stop()),this},e})();return yh=new i(2),yh}var _h,m_;function MT(){if(m_)return _h;m_=1;var i=OT();function e(n,a,s,o,c){o=typeof o=="number"?o:3;var u=0,f=mf(),h={},v=f.getOrCreate(h);function m(){return a(s).then(function(g){var _=s.audio?i(v,g,c).catch(function(w){return n.warn("Encountered an error while detecting silence",w),!0}):Promise.resolve(!1);return _.then(function(w){if(w){if(o<=0)return n.warn("Got a silent audio MediaStreamTrack. Normally we would try 	to get a new one, but we've run out of retries; returning it anyway."),g}else return n.info("Got a non-silent audio MediaStreamTrack; returning it."),g;return n.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #".concat(++u,".")),g.getTracks().forEach(function(E){return E.stop()}),o--,m()})})}return m().then(function(g){return f.release(h),g},function(g){throw f.release(h),g})}return _h=e,_h}var ii,g_;function NT(){if(g_)return ii;g_=1;var i=ii&&ii.__extends||(function(){var o=function(c,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(f[v]=h[v])},o(c,u)};return function(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");o(c,u);function f(){this.constructor=c}c.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}})(),e=ii&&ii.__read||function(o,c){var u=typeof Symbol=="function"&&o[Symbol.iterator];if(!u)return o;var f=u.call(o),h,v=[],m;try{for(;(c===void 0||c-- >0)&&!(h=f.next()).done;)v.push(h.value)}catch(g){m={error:g}}finally{try{h&&!h.done&&(u=f.return)&&u.call(f)}finally{if(m)throw m.error}}return v},n=ii&&ii.__spreadArray||function(o,c,u){if(u||arguments.length===2)for(var f=0,h=c.length,v;f<h;f++)(v||!(f in c))&&(v||(v=Array.prototype.slice.call(c,0,f)),v[f]=c[f]);return o.concat(v||Array.prototype.slice.call(c))},a=pr().EventEmitter,s=(function(o){i(c,o);function c(){var u=o.call(this)||this;return Object.defineProperties(u,{_queuedEvents:{value:new Map}}),u}return c.prototype.dequeue=function(u){var f=this,h=!0;if(!u)return this._queuedEvents.forEach(function(m,g){h=this.dequeue(g)&&h},this),h;var v=this._queuedEvents.get(u)||[];return this._queuedEvents.delete(u),v.reduce(function(m,g){return f.emit.apply(f,n([],e([u].concat(g)),!1))&&m},h)},c.prototype.queue=function(){var u=[].slice.call(arguments);if(this.emit.apply(this,n([],e(u),!1)))return!0;var f=u[0];return this._queuedEvents.has(f)||this._queuedEvents.set(f,[]),this._queuedEvents.get(f).push(u.slice(1)),!1},c})(a);return ii=s,ii}var zs,y_;function jT(){if(y_)return zs;y_=1;var i=zs&&zs.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=NT(),n=(function(a){i(s,a);function s(o,c){var u=a.call(this)||this;return Object.defineProperties(u,{id:{enumerable:!0,value:o},kind:{enumerable:!0,value:c}}),u}return s.prototype.stop=function(){this.emit("stopped")},s})(e);return zs=n,zs}var $s,__;function FT(){if(__)return $s;__=1;var i=$s&&$s.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=jT(),n=(function(a){i(s,a);function s(o,c){var u=a.call(this,o,c.kind)||this;return Object.defineProperties(u,{_track:{value:c,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),u}return s.prototype.stop=function(){this.track.stop(),a.prototype.stop.call(this)},s})(e);return $s=n,$s}var Fo,w_;function UT(){if(w_)return Fo;w_=1;var i=Fo&&Fo.__extends||(function(){var s=function(o,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])},s(o,c)};return function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(o,c);function u(){this.constructor=o}o.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}})(),e=Fo&&Fo.__read||function(s,o){var c=typeof Symbol=="function"&&s[Symbol.iterator];if(!c)return s;var u=c.call(s),f,h=[],v;try{for(;(o===void 0||o-- >0)&&!(f=u.next()).done;)h.push(f.value)}catch(m){v={error:m}}finally{try{f&&!f.done&&(c=u.return)&&c.call(u)}finally{if(v)throw v.error}}return h},n=FT(),a=(function(s){i(o,s);function o(c){var u=s.call(this,c.id,c)||this;return Object.defineProperties(u,{_clones:{value:new Set},_eventsToReemitters:{value:new Map([["mute",function(){return u.queue("muted")}],["unmute",function(){return u.queue("unmuted")}]])},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{enumerable:!0,get:function(){return!!this._clones.size}},muted:{enumerable:!0,get:function(){return this._track.muted}}}),u._reemitMediaStreamTrackEvents(),u}return o.prototype._reemitMediaStreamTrackEvents=function(c){c===void 0&&(c=this._track);var u=this,f=u._eventsToReemitters,h=u._track;if(c.addEventListener?f.forEach(function(m,g){return c.addEventListener(g,m)}):f.forEach(function(m,g){c["on".concat(g)]=m}),h!==c&&(f.forEach(function(m,g){return h.removeEventListener(g,m)}),h.muted!==c.muted)){var v=f.get(c.muted?"mute":"unmute");v()}},o.prototype.clone=function(){var c=new o(this.track.clone());return this._clones.add(c),c},o.prototype.removeClone=function(c){this._clones.delete(c)},o.prototype.setMediaStreamTrack=function(c){var u=this,f=Array.from(this._clones),h=Array.from(this._senders);return Promise.all(f.map(function(v){return v.setMediaStreamTrack(c.clone())}).concat(h.map(function(v){return u._replaceTrack(v,c)}))).finally(function(){u._reemitMediaStreamTrackEvents(c),u._track=c})},o.prototype.addSender=function(c,u){return this._senders.add(c),u&&this._senderToPublisherHintCallbacks.set(c,u),this},o.prototype.removeSender=function(c){return this._senders.delete(c),this._senderToPublisherHintCallbacks.delete(c),this},o.prototype.setPublisherHint=function(c){var u=e(Array.from(this._senderToPublisherHintCallbacks.values()),1),f=u[0];return f?f(c):Promise.resolve("COULD_NOT_APPLY_HINT")},o.prototype._replaceTrack=function(c,u){var f=this;return c.replaceTrack(u).then(function(h){return f.setPublisherHint(null).catch(function(){}),f.emit("replaced"),h})},o})(n);return Fo=a,Fo}var Gs,S_;function VT(){if(S_)return Gs;S_=1;var i=Gs&&Gs.__extends||(function(){var N=function(j,x){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,L){O.__proto__=L}||function(O,L){for(var b in L)Object.prototype.hasOwnProperty.call(L,b)&&(O[b]=L[b])},N(j,x)};return function(j,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");N(j,x);function O(){this.constructor=j}j.prototype=x===null?Object.create(x):(O.prototype=x.prototype,new O)}})(),e=oa().getUserMedia,n=aa().isIOS,a=_t(),s=a.capitalize,o=a.defer,c=a.waitForSometime,u=a.waitForEvent,f=Et().typeErrors.ILLEGAL_INVOKE,h=IT(),v=DT(),m=gf(),g=LT(),_=MT(),w=UT();function E(N){return(function(j){i(x,j);function x(O,L){var b=this,y=n()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string";L=Object.assign({getUserMedia:e,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:y,gUMSilentTrackWorkaround:_},L);var S=new w(O),C=S.kind;return b=j.call(this,S,L)||this,Object.defineProperties(b,{_constraints:{value:typeof L[C]=="object"?L[C]:{},writable:!0},_getUserMedia:{value:L.getUserMedia},_gUMSilentTrackWorkaround:{value:L.gUMSilentTrackWorkaround},_eventsToReemitters:{value:new Map([["muted",function(){return b.emit("muted",b)}],["unmuted",function(){return b.emit("unmuted",b)}]])},_workaroundWebKitBug1208516:{value:L.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:L.isCreatedByCreateLocalTracks},_noiseCancellation:{value:L.noiseCancellation||null},_trackSender:{value:S},id:{enumerable:!0,value:S.id},isEnabled:{enumerable:!0,get:function(){return S.enabled}},isMuted:{enumerable:!0,get:function(){return S.muted}},isStopped:{enumerable:!0,get:function(){return S.readyState==="ended"}}}),b._workaroundWebKitBug1208516&&(b._workaroundWebKitBug1208516Cleanup=T(b)),b._reemitTrackSenderEvents(),b}return x.prototype._end=function(){var O=this;this._didCallEnd||(j.prototype._end.call(this),this._didCallEnd=!0,this._eventsToReemitters.forEach(function(L,b){return O._trackSender.removeListener(b,L)}),this.emit("stopped",this))},x.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),this._eventsToReemitters&&this._reemitTrackSenderEvents(),j.prototype._initialize.call(this)},x.prototype._reacquireTrack=function(O){var L,b=this,y=b._getUserMedia,S=b._gUMSilentTrackWorkaround,C=b._log,A=b.mediaStreamTrack.kind;C.info("Re-acquiring the MediaStreamTrack"),C.debug("Constraints:",O);var F=Object.assign({audio:!1,video:!1},(L={},L[A]=O,L)),D=this._workaroundWebKitBug1208516Cleanup?S(C,y,F):y(F);return D.then(function(P){return P.getTracks()[0]})},x.prototype._reemitTrackSenderEvents=function(){var O=this;this._eventsToReemitters.forEach(function(L,b){return O._trackSender.on(b,L)}),this._trackSender.dequeue("muted"),this._trackSender.dequeue("unmuted")},x.prototype._restart=function(O){var L=this,b=this._log;return O=O||this._constraints,this._stop(),this._reacquireTrack(O).catch(function(y){throw b.error("Failed to re-acquire the MediaStreamTrack:",{error:y,constraints:O}),y}).then(function(y){return b.info("Re-acquired the MediaStreamTrack"),b.debug("MediaStreamTrack:",y),L._constraints=Object.assign({},O),L._setMediaStreamTrack(y)})},x.prototype._setMediaStreamTrack=function(O){var L=this;return O.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then(function(){L._unprocessedTrack=O}):this._trackSender.setMediaStreamTrack(O).catch(function(b){L._log.warn("setMediaStreamTrack failed:",{error:b,mediaStreamTrack:O})})).then(function(){L._initialize(),L._getAllAttachedElements().forEach(function(b){return L._attach(b)})})},x.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},x.prototype.enable=function(O){return O=typeof O=="boolean"?O:!0,O!==this.mediaStreamTrack.enabled&&(this._log.info("".concat(O?"En":"Dis","abling")),this.mediaStreamTrack.enabled=O,this.emit(O?"enabled":"disabled",this)),this},x.prototype.disable=function(){return this.enable(!1)},x.prototype.restart=function(O){var L=this,b=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(f("restart","can only be called on a"+" Local".concat(s(b),"Track that is created using createLocalTracks")+" or createLocal".concat(s(b),"Track.")));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var y=this._restart(O);return this._workaroundWebKitBug1208516&&(y=y.finally(function(){L._workaroundWebKitBug1208516Cleanup=T(L)})),y},x.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},x})(N)}function T(N){var j=N._log,x=N.kind,O=N._noiseCancellation,L={audio:h,video:v}[x],b=function(){return O?O.sourceTrack:N.mediaStreamTrack},y=N._dummyEl,S=b(),C=null;function A(){return y.play().then(function(){return L(y)}).then(function(B){return B?j.warn("Silence detected"):j.info("Non-silence detected"),B}).catch(function(B){j.warn("Failed to detect silence:",B)}).finally(function(){N.processedTrack||y.pause()})}function F(){var B=N._workaroundWebKitBug1208516Cleanup,z=N.isStopped,G=z&&!!B,J=b().muted;return Promise.resolve().then(function(){return document.visibilityState==="visible"&&!C&&(J||G||A())})}function D(){return Promise.race([u(S,"unmute"),c(50)]).then(function(){return F()}).then(function(B){B&&!C&&(C=o(),N._restart().finally(function(){y=N._dummyEl,q(),S=b(),K(),C.resolve(),C=null}).catch(function(G){j.error("failed to restart track: ",G)}));var z=C&&C.promise||Promise.resolve();return z.finally(function(){return g.resolveDeferred(x)})}).catch(function(B){j.error("error in maybeRestart: ".concat(B.message))})}function P(){var B=N._log,z=N.kind;B.info("Muted"),B.debug("LocalMediaTrack:",N),g.startDeferred(z)}function K(){S.addEventListener?(S.addEventListener("ended",D),S.addEventListener("mute",P),S.addEventListener("unmute",D)):(S.onended=D,S.onmute=P,S.onunmute=D)}function q(){S.removeEventListener?(S.removeEventListener("ended",D),S.removeEventListener("mute",P),S.removeEventListener("unmute",D)):(S.onended=null,S.onmute=null,S.onunmute=null)}var W=function(B){return B?D():!1};return m.onVisibilityChange(1,W),K(),function(){m.offVisibilityChange(1,W),q()}}return Gs=E,Gs}var Ks,k_;function Y1(){if(k_)return Ks;k_=1;var i=Ks&&Ks.__extends||(function(){var f=function(h,v){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(m[_]=g[_])},f(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");f(h,v);function m(){this.constructor=h}h.prototype=v===null?Object.create(v):(m.prototype=v.prototype,new m)}})(),e=aa().isIOS,n=IT(),a=hr().isIOSChrome,s=xT(),o=VT(),c=o(s),u=(function(f){i(h,f);function h(v,m){var g=this,_=m?.noiseCancellation||null;g=f.call(this,v,m)||this;var w=g._log,E=v.label,T=E===void 0?"":E,N=v.getSettings(),j=N.deviceId,x=j===void 0?"":j,O=N.groupId,L=O===void 0?"":O;return Object.defineProperties(g,{_currentDefaultDeviceInfo:{value:{deviceId:x,groupId:L,label:T},writable:!0},_enumerateDevices:{value:typeof m?.enumerateDevices=="function"?m.enumerateDevices:navigator.mediaDevices.enumerateDevices},_defaultDeviceCaptureMode:{value:(!e()||_)&&g._isCreatedByCreateLocalTracks&&typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.addEventListener=="function"&&(typeof m?.enumerateDevices=="function"||typeof navigator.mediaDevices.enumerateDevices=="function")?m?.defaultDeviceCaptureMode||"auto":"manual"},_onDeviceChange:{value:function(){g._enumerateDevices().then(function(b){var y=b.find(function(S){var C=S.deviceId,A=S.kind;return A==="audioinput"&&C!=="default"});y&&["deviceId","groupId"].some(function(S){return y[S]!==g._currentDefaultDeviceInfo[S]})&&(w.info("Default device changed, restarting the LocalAudioTrack"),w.debug('Old default device: "'.concat(g._currentDefaultDeviceInfo.deviceId,'" => "').concat(g._currentDefaultDeviceInfo.label,'"')),w.debug('New default device: "'.concat(y.deviceId,'" => "').concat(y.label,'"')),g._currentDefaultDeviceInfo=y,g._restartDefaultDevice().catch(function(S){return w.warn("Failed to restart: ".concat(S.message))}))},function(b){w.warn("Failed to run enumerateDevices(): ".concat(b.message))})}},_restartOnDefaultDeviceChangeCleanup:{value:null,writable:!0},noiseCancellation:{enumerable:!0,value:_,writable:!1}}),w.debug("defaultDeviceCaptureMode:",g._defaultDeviceCaptureMode),g._maybeRestartOnDefaultDeviceChange(),g}return h.prototype.toString=function(){return"[LocalAudioTrack #".concat(this._instanceId,": ").concat(this.id,"]")},h.prototype.attach=function(v){return v=f.prototype.attach.call(this,v),v.muted=!0,v},h.prototype._end=function(){return f.prototype._end.apply(this,arguments)},h.prototype._maybeRestartOnDefaultDeviceChange=function(){var v=this,m=this,g=m._constraints,_=m._defaultDeviceCaptureMode,w=m._log,E=this.noiseCancellation?this.noiseCancellation.sourceTrack:this.mediaStreamTrack,T=E.getSettings().deviceId,N=function(x){return x!==T||x==="default"},j=(function x(O){return O===void 0&&(O={}),typeof O=="string"?N(O):Array.isArray(O)?O.every(N):O.exact?x(O.exact):O.ideal?x(O.ideal):!0})(g.deviceId);_==="auto"&&j?this._restartOnDefaultDeviceChangeCleanup||(w.info("LocalAudioTrack will be restarted if the default device changes"),navigator.mediaDevices.addEventListener("devicechange",this._onDeviceChange),this._restartOnDefaultDeviceChangeCleanup=function(){w.info("Cleaning up the listener to restart the LocalAudioTrack if the default device changes"),navigator.mediaDevices.removeEventListener("devicechange",v._onDeviceChange),v._restartOnDefaultDeviceChangeCleanup=null}):(w.info("LocalAudioTrack will NOT be restarted if the default device changes"),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup())},h.prototype._reacquireTrack=function(v){var m=this;return this._log.debug("_reacquireTrack: ",v),this.noiseCancellation?this.noiseCancellation.reacquireTrack(function(){return f.prototype._reacquireTrack.call(m,v)}):f.prototype._reacquireTrack.call(this,v)},h.prototype._restartDefaultDevice=function(){var v=this,m=Object.assign({},this._constraints),g=Object.assign({},m,{deviceId:this._currentDefaultDeviceInfo.deviceId});return this.restart(g).then(function(){v._constraints=m,v._maybeRestartOnDefaultDeviceChange()})},h.prototype._setMediaStreamTrack=function(v){var m=this,g=this,_=g._log,w=g.noiseCancellation,E=f.prototype._setMediaStreamTrack.call(this,v);return a()&&w&&(_.debug("iOS Chrome detected, checking if the restarted Krisp audio is silent"),E=E.then(function(){return n(m._dummyEl)}).then(function(T){return _.debug("Krisp audio is ".concat(T?"silent, using source audio":"not silent")),T&&w.disablePermanently().then(function(){return f.prototype._setMediaStreamTrack.call(m,w.sourceTrack)})})),E},h.prototype.disable=function(){return f.prototype.disable.apply(this,arguments)},h.prototype.enable=function(){return f.prototype.enable.apply(this,arguments)},h.prototype.restart=function(){return f.prototype.restart.apply(this,arguments)},h.prototype.stop=function(){return this.noiseCancellation&&this.noiseCancellation.stop(),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup(),f.prototype.stop.apply(this,arguments)},h})(c);return Ks=u,Ks}var wh,T_;function X1(){if(T_)return wh;T_=1;var i=Zp(),e=Y1();function n(a,s){var o=new e(a,s);return Object.setPrototypeOf(o,n.prototype),o}return i(n,e),wh=n,wh}var Qs,E_;function Z1(){if(E_)return Qs;E_=1;var i=Qs&&Qs.__read||function(s,o){var c=typeof Symbol=="function"&&s[Symbol.iterator];if(!c)return s;var u=c.call(s),f,h=[],v;try{for(;(o===void 0||o-- >0)&&!(f=u.next()).done;)h.push(f.value)}catch(m){v={error:m}}finally{try{f&&!f.done&&(c=u.return)&&c.call(u)}finally{if(v)throw v.error}}return h},e=Et().DEFAULT_FRAME_RATE;function n(s,o){var c=i(s.srcObject.getVideoTracks(),1),u=c[0],f=u.getSettings().frameRate,h=f===void 0?e:f,v,m=new ReadableStream({start:function(_){v=setInterval(function(){return _.enqueue()},1e3/h)}}),g=new TransformStream({transform:function(){return o()}});return m.pipeThrough(g).pipeTo(new WritableStream).then(function(){}),function(){clearInterval(v)}}function a(s,o,c){var u=i(s.srcObject.getVideoTracks(),1),f=u[0],h=new MediaStreamTrackProcessor({track:f}).readable,v=new MediaStreamTrackGenerator({kind:"video"}),m=!1,g=new TransformStream({transform:function(_,w){var E=c==="videoframe"?o(_):Promise.resolve(_.close()).then(o);return E.finally(function(){m&&w.terminate()})}});return h.pipeThrough(g).pipeTo(v.writable).then(function(){}),function(){m=!0}}return Qs=typeof MediaStreamTrackGenerator=="function"&&typeof MediaStreamTrackProcessor=="function"?a:n,Qs}var Js,b_;function eI(){if(b_)return Js;b_=1;var i=Js&&Js.__extends||(function(){var s=function(o,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])},s(o,c)};return function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(o,c);function u(){this.constructor=o}o.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}})(),e=pr().EventEmitter,n=Et().DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,a=(function(s){i(o,s);function o(c){var u=s.call(this)||this;return Object.defineProperties(u,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:c},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),u.on("add",function(f){u._lastStatsSaveTime=Date.now(),u._lastStatsPublishTime=Date.now(),u._processorInfo=f,u._stats=[],u._reemitEvent("add",u._getEventData())}),u.on("remove",function(){var f=u._getEventData();u._lastStatsSaveTime=null,u._lastStatsPublishTime=null,u._processorInfo=null,u._stats=null,u._reemitEvent("remove",f)}),u.on("start",function(){u._reemitEvent("start",u._getEventData())}),u.on("stop",function(f){u._reemitEvent("stop",Object.assign({message:f},u._getEventData()))}),u.on("stats",function(){return u._maybeEmitStats()}),u}return o.prototype._getEventData=function(){if(!this._processorInfo)return{};var c=this._processorInfo,u=c.processor,f=c.captureHeight,h=c.captureWidth,v=c.inputFrameRate,m=c.isRemoteVideoTrack,g=c.inputFrameBufferType,_=c.outputFrameBufferContextType,w={captureHeight:f,captureWidth:h,inputFrameRate:v,isRemoteVideoTrack:m,inputFrameBufferType:g,outputFrameBufferContextType:_};return w.name=u._name||"VideoProcessor",["assetsPath","blurFilterRadius","debounce","fitType","isSimdEnabled","maskBlurRadius","pipeline","version"].forEach(function(E){var T=u["_".concat(E)];typeof T<"u"&&(w[E]=T)}),Object.keys(w).forEach(function(E){var T=w[E];typeof T=="boolean"&&(w[E]=T?"true":"false")}),w},o.prototype._maybeEmitStats=function(){if(!(!this._stats||!this._processorInfo)){var c=this._processorInfo.processor._benchmark;if(c){var u=Date.now();if(!(u-this._lastStatsSaveTime<1e3)){var f={outputFrameRate:c.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach(function(m){f[m]=c.getAverageDelay(m)}),this._lastStatsSaveTime=u,this._stats.push(f),!(u-this._lastStatsPublishTime<n)){this._lastStatsPublishTime=u;var h=this._stats.splice(0),v=h.reduce(function(m,g,_){return Object.keys(f).forEach(function(w){m[w]||(m[w]=0),m[w]=(m[w]*_+g[w])/(_+1)}),m},{});Object.keys(v).forEach(function(m){v[m]=parseFloat(v[m].toFixed(2))}),this._reemitEvent("stats",Object.assign({},v,this._getEventData()))}}}}},o.prototype._reemitEvent=function(c,u){this._log.debug("VideoProcessor:".concat(c),u),this.emit("event",{name:c,data:u})},o})(e);return Js=a,Js}var Ys,C_;function BT(){if(C_)return Ys;C_=1;var i=Ys&&Ys.__extends||(function(){var v=function(m,g){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,w){_.__proto__=w}||function(_,w){for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&(_[E]=w[E])},v(m,g)};return function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");v(m,g);function _(){this.constructor=m}m.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}})(),e=AT(),n=Z1(),a=eI(),s=Et().DEFAULT_FRAME_RATE,o=(function(v){i(m,v);function m(g,_){var w=v.call(this,g,_)||this;return Object.defineProperties(w,{_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_processorOptions:{value:{},writable:!0},_stopCapture:{value:function(){},writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0},_documentPipWindow:{value:null,writable:!0},_documentPipEnterListener:{value:null,writable:!0},_documentPipExitListener:{value:null,writable:!0}}),w._processorEventObserver=new(_.VideoProcessorEventObserver||a)(w._log),w}return m.prototype._checkIfCanCaptureFrames=function(g){g===void 0&&(g=!1);var _=!0,w="",E=this.mediaStreamTrack,T=E.enabled,N=E.readyState;return T||(_=!1,w="MediaStreamTrack is disabled"),N==="ended"&&(_=!1,w="MediaStreamTrack is ended"),this.processor||(_=!1,w="VideoProcessor not detected."),!this._attachments.size&&!g&&(_=!1,w="VideoTrack is not publishing and there is no attached element."),w&&this._log.debug(w),{canCaptureFrames:_,message:w}},m.prototype._captureFrames=function(){var g=this;if(this._isCapturing){this._log.debug("Ignoring captureFrames call. Capture is already in progress");return}if(!this._checkIfCanCaptureFrames().canCaptureFrames){this._isCapturing=!1,this._log.debug("Cannot capture frames. Ignoring captureFrames call.");return}this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var _=this._processorOptions.inputFrameBufferType;this._dummyEl.play().then(function(){var w=function(E){var T=g._checkIfCanCaptureFrames();if(!T.canCaptureFrames)return E&&E.close(),g._isCapturing=!1,g._stopCapture(),g._processorEventObserver.emit("stop",T.message),g._log.debug("Cannot capture frames. Stopping capturing frames."),Promise.resolve();var N=g.mediaStreamTrack.getSettings(),j=N.width,x=j===void 0?0:j,O=N.height,L=O===void 0?0:O;g._outputFrame&&g._outputFrame.width!==x&&(g._outputFrame.width=x,g._outputFrame.height=L),g._inputFrame&&(g._inputFrame.width!==x&&(g._inputFrame.width=x,g._inputFrame.height=L),g._inputFrame.getContext("2d").drawImage(g._dummyEl,0,0,x,L));var b=E||(["video","videoframe"].includes(_)?g._dummyEl:g._inputFrame),y=null;try{y=g.processor.processFrame(b,g._outputFrame)}catch(S){g._log.debug("Exception detected after calling processFrame.",S)}return(y instanceof Promise?y:Promise.resolve(y)).then(function(){g._outputFrame&&(typeof g.processedTrack.requestFrame=="function"&&g.processedTrack.requestFrame(),g._processorEventObserver.emit("stats"))})};g._stopCapture=n(g._dummyEl,w,_)}).catch(function(w){return g._log.error("Video element cannot be played",{error:w,track:g})})},m.prototype._initialize=function(){var g=this;v.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){c(g,g._dummyEl)&&(g.dimensions.width=g._dummyEl.videoWidth,g.dimensions.height=g._dummyEl.videoHeight)},this._dummyEl.onresize=function(){c(g,g._dummyEl)&&(g.dimensions.width=g._dummyEl.videoWidth,g.dimensions.height=g._dummyEl.videoHeight,g.isStarted&&(g._log.debug("Dimensions changed:",g.dimensions),g.emit(m.DIMENSIONS_CHANGED,g)))})},m.prototype._restartProcessor=function(){var g=this.processor;if(g){var _=Object.assign({},this._processorOptions);this.removeProcessor(g),this.addProcessor(g,_)}},m.prototype._start=function(g){return this.dimensions.width=g.videoWidth,this.dimensions.height=g.videoHeight,this._log.debug("Dimensions:",this.dimensions),this.emit(m.DIMENSIONS_CHANGED,this),v.prototype._start.call(this,g)},m.prototype.addProcessor=function(g,_){var w=this;if(!g||typeof g.processFrame!="function")throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",g),this._unmuteHandler||(this._unmuteHandler=function(){w._log.debug("mediaStreamTrack unmuted"),w.processedTrack.muted&&(w._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),w._restartProcessor())},this.mediaStreamTrack.addEventListener?this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler):this.mediaStreamTrack.onunmute=this._unmuteHandler.bind(this)),this._processorOptions=_||{};var E=this._processorOptions,T=E.inputFrameBufferType,N=E.outputFrameBufferContextType;if(typeof OffscreenCanvas>"u"&&T==="offscreencanvas")throw new Error("OffscreenCanvas is not supported by this browser.");if(T&&T!=="videoframe"&&T!=="video"&&T!=="canvas"&&T!=="offscreencanvas")throw new Error("Invalid inputFrameBufferType of ".concat(T));T||(T=typeof OffscreenCanvas>"u"?"canvas":"offscreencanvas");var j=this.mediaStreamTrack.getSettings(),x=j.width,O=x===void 0?0:x,L=j.height,b=L===void 0?0:L,y=j.frameRate,S=y===void 0?s:y;T==="offscreencanvas"&&(this._inputFrame=new OffscreenCanvas(O,b)),T==="canvas"&&(this._inputFrame=document.createElement("canvas")),this._inputFrame&&(this._inputFrame.width=O,this._inputFrame.height=b),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=O,this._outputFrame.height=b,N=N||"2d";var C=this._outputFrame.getContext(N);if(!C)throw new Error("Cannot get outputFrameBufferContextType: ".concat(N,"."));var A=typeof CanvasCaptureMediaStreamTrack<"u"&&CanvasCaptureMediaStreamTrack.prototype&&typeof CanvasCaptureMediaStreamTrack.prototype.requestFrame=="function"?0:void 0;return this.processedTrack=this._outputFrame.captureStream(A).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=g,this._processorEventObserver.emit("add",{processor:g,captureHeight:b,captureWidth:O,inputFrameRate:S,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack"),inputFrameBufferType:T,outputFrameBufferContextType:N}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},m.prototype.attach=function(){var g=v.prototype.attach.apply(this,arguments);return this._attachments.size===1&&u(this),this.processor&&this._captureFrames(),g},m.prototype.detach=function(){var g=v.prototype.detach.apply(this,arguments);return this._attachments.size===0&&f(this),g},m.prototype.removeProcessor=function(g){if(!g)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(g!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",g),this._stopCapture(),this._stopCapture=function(){},this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._processorOptions={},this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},m})(e);o.DIMENSIONS_CHANGED="dimensionsChanged";function c(v,m){return v.dimensions.width!==m.videoWidth||v.dimensions.height!==m.videoHeight}function u(v){!v._documentPipEnterListener&&"documentPictureInPicture"in globalThis&&globalThis.documentPictureInPicture&&typeof globalThis.documentPictureInPicture.addEventListener=="function"&&(v._documentPipEnterListener=function(m){v._log.debug("document pip entered"),v._documentPipWindow=m.window,v._documentPipExitListener=function(){v._log.debug("document pip exited"),v._documentPipWindow=null,typeof v._onDocumentPipExit=="function"&&v._onDocumentPipExit()},m.window&&typeof m.window.addEventListener=="function"&&m.window.addEventListener("pagehide",v._documentPipExitListener),h(v),typeof v._onDocumentPipEnter=="function"&&v._onDocumentPipEnter(m)},globalThis.documentPictureInPicture.addEventListener("enter",v._documentPipEnterListener))}function f(v){v._documentPipEnterListener&&(globalThis.documentPictureInPicture&&typeof globalThis.documentPictureInPicture.removeEventListener=="function"&&globalThis.documentPictureInPicture.removeEventListener("enter",v._documentPipEnterListener),v._documentPipWindow&&v._documentPipExitListener&&typeof v._documentPipWindow.removeEventListener=="function"&&v._documentPipWindow.removeEventListener("pagehide",v._documentPipExitListener),v._documentPipEnterListener=null,v._documentPipExitListener=null,v._documentPipWindow=null)}function h(v){if(v._documentPipWindow)try{var m=new WeakSet(v._documentPipWindow.document.querySelectorAll("video"));v._attachments.forEach(function(g){m.has(g)&&g.paused&&g.play().then(function(){v._log.debug("Successfully played inadvertently paused video element in document PiP window")}).catch(function(_){v._log.debug("Failed to play inadvertently paused video element in document PiP window",_)})})}catch(g){v._log.debug("Error checking document PiP video playback:",g)}}return o._ensureDocumentPipVideosPlaying=h,Ys=o,Ys}var Xs,P_;function tI(){if(P_)return Xs;P_=1;var i=Xs&&Xs.__extends||(function(){var f=function(h,v){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(m[_]=g[_])},f(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");f(h,v);function m(){this.constructor=h}h.prototype=v===null?Object.create(v):(m.prototype=v.prototype,new m)}})(),e=aa().isIOS,n=DT(),a=VT(),s=BT(),o=a(s),c=(function(f){i(h,f);function h(v,m){var g=this;return m=Object.assign({workaroundSilentLocalVideo:e()&&typeof document<"u"&&typeof document.createElement=="function"},m),g=f.call(this,v,m)||this,Object.defineProperties(g,{_workaroundSilentLocalVideo:{value:m.workaroundSilentLocalVideo?u:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0},_pipIntersectionObserver:{value:null,writable:!0}}),g._workaroundSilentLocalVideo&&(g._workaroundSilentLocalVideoCleanup=g._workaroundSilentLocalVideo(g,document)),g}return h.prototype.toString=function(){return"[LocalVideoTrack #".concat(this._instanceId,": ").concat(this.id,"]")},h.prototype._onDocumentPipEnter=function(){this._log.debug("LocalVideoTrack: Setting up PiP intersection observer"),this._setupPipIntersectionObserver()},h.prototype._onDocumentPipExit=function(){this._log.debug("LocalVideoTrack: Cleaning up PiP intersection observer"),this._cleanupPipIntersectionObserver()},h.prototype._setupPipIntersectionObserver=function(){var v=this;!this._pipIntersectionObserver&&this._documentPipWindow&&(this._log.debug("LocalVideoTrack: Creating PiP intersection observer"),this._pipIntersectionObserver=new IntersectionObserver(function(m){var g=m.some(function(_){return _.isIntersecting});g&&(v._log.debug("LocalVideoTrack: Element visible in PiP, ensuring videos are playing"),s._ensureDocumentPipVideosPlaying(v))},{threshold:.25}),this._attachments.forEach(function(m){v._log.debug("LocalVideoTrack: Observing element for PiP visibility"),v._pipIntersectionObserver.observe(m)}))},h.prototype._cleanupPipIntersectionObserver=function(){this._pipIntersectionObserver&&(this._log.debug("LocalVideoTrack: Disconnecting PiP intersection observer"),this._pipIntersectionObserver.disconnect(),this._pipIntersectionObserver=null)},h.prototype.attach=function(){var v=f.prototype.attach.apply(this,arguments);return this._pipIntersectionObserver&&(this._log.debug("LocalVideoTrack: Observing newly attached element for PiP visibility"),this._pipIntersectionObserver.observe(v)),v},h.prototype.detach=function(){var v=this,m=f.prototype.detach.apply(this,arguments),g=Array.isArray(m)?m:[m];return this._pipIntersectionObserver&&g.forEach(function(_){v._log.debug("LocalVideoTrack: Unobserving detached element from PiP visibility"),v._pipIntersectionObserver.unobserve(_)}),m},h.prototype._checkIfCanCaptureFrames=function(){return f.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},h.prototype._end=function(){return f.prototype._end.apply(this,arguments)},h.prototype._setSenderMediaStreamTrack=function(v){var m=this,g=this.mediaStreamTrack,_=v?this.processedTrack:g;return this._trackSender.setMediaStreamTrack(_).catch(function(w){return m._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:w,mediaStreamTrack:_})}).then(function(){m._unprocessedTrack=v?g:null})},h.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var v=f.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),v):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},h.prototype.removeProcessor=function(){var v=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var m=f.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then(function(){return v._updateElementsMediaStreamTrack()}),m},h.prototype.disable=function(){var v=f.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),v},h.prototype.enable=function(v){v===void 0&&(v=!0);var m=f.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=v,v&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),m},h.prototype.restart=function(){var v=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var m=f.prototype.restart.apply(this,arguments);return this.processor&&(m=m.then(function(){return v._restartProcessor()})),this._workaroundSilentLocalVideo&&m.finally(function(){v._workaroundSilentLocalVideoCleanup=v._workaroundSilentLocalVideo(v,document)}),m},h.prototype._restartProcessor=function(){var v=this.processor,m=Object.assign({},this._processorOptions);return f.prototype.removeProcessor.apply(this,[v]),f.prototype.addProcessor.apply(this,[v,m]),this._setSenderMediaStreamTrack(!0)},h.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),this._cleanupPipIntersectionObserver(),f.prototype.stop.apply(this,arguments)},h})(o);function u(f,h){var v=f._log,m=f._dummyEl,g=f.mediaStreamTrack;function _(){f.isEnabled&&(v.info("Unmuted, checking silence"),m.play().then(function(){return n(m,h)}).then(function(w){if(!w){v.info("Non-silent frames detected, so no need to restart");return}return v.warn("Silence detected, restarting"),f._stop(),f._restart()}).catch(function(w){v.warn("Failed to detect silence and restart:",w)}).finally(function(){m=f._dummyEl,m&&!m.paused&&!f.processedTrack&&m.pause(),g.removeEventListener("unmute",_),g=f.mediaStreamTrack,g.addEventListener?g.addEventListener("unmute",_):g.onunmute=_}))}return g.addEventListener?g.addEventListener("unmute",_):g.onunmute=_,function(){g.removeEventListener?g.removeEventListener("unmute",_):g.onunmute=null}}return Xs=c,Xs}var Sh,R_;function rI(){if(R_)return Sh;R_=1;var i=Zp(),e=tI();function n(a,s){var o=new e(a,s);return Object.setPrototypeOf(o,n.prototype),o}return i(n,e),Sh=n,Sh}var Zs,O_;function qT(){if(O_)return Zs;O_=1;var i=Zs&&Zs.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=jT(),n=(function(a){i(s,a);function s(o,c,u,f){var h=a.call(this,o,"data")||this;return Object.defineProperties(h,{maxPacketLifeTime:{enumerable:!0,value:c},maxRetransmits:{enumerable:!0,value:u},ordered:{enumerable:!0,value:f}}),h}return s})(e);return Zs=n,Zs}var ec,I_;function nI(){if(I_)return ec;I_=1;var i=ec&&ec.__extends||(function(){var s=function(o,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])},s(o,c)};return function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(o,c);function u(){this.constructor=o}o.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}})(),e=qT(),n=_t().makeUUID,a=(function(s){i(o,s);function o(c,u,f){var h=s.call(this,n(),c,u,f)||this;return Object.defineProperties(h,{_clones:{value:new Set},_dataChannels:{value:new Set}}),h}return o.prototype._addClone=function(c){this._clones.add(c)},o.prototype.removeClone=function(c){this._clones.delete(c)},o.prototype.addDataChannel=function(c){return this._dataChannels.add(c),this},o.prototype.clone=function(){var c=this,u=new o(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(u),u.once("stopped",function(){return c.removeClone(u)}),u},o.prototype.removeDataChannel=function(c){return this._dataChannels.delete(c),this},o.prototype.send=function(c){return this._dataChannels.forEach(function(u){try{u.send(c)}catch{}}),this._clones.forEach(function(u){try{u.send(c)}catch{}}),this},o.prototype.stop=function(){this._dataChannels.forEach(function(c){return c.close()}),this._clones.forEach(function(c){return c.stop()}),s.prototype.stop.call(this)},o})(e);return ec=a,ec}var tc,L_;function iI(){if(L_)return tc;L_=1;var i=tc&&tc.__extends||(function(){var s=function(o,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])},s(o,c)};return function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(o,c);function u(){this.constructor=o}o.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}})(),e=ev(),n=nI(),a=(function(s){i(o,s);function o(c){var u=this;c=Object.assign({DataTrackSender:n,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},c);var f=c.DataTrackSender,h=new f(c.maxPacketLifeTime,c.maxRetransmits,c.ordered);return u=s.call(this,h.id,"data",c)||this,Object.defineProperties(u,{_trackSender:{value:h},id:{enumerable:!0,value:h.id},maxPacketLifeTime:{enumerable:!0,value:c.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:c.maxRetransmits},ordered:{enumerable:!0,value:c.ordered},reliable:{enumerable:!0,value:c.maxPacketLifeTime===null&&c.maxRetransmits===null}}),u}return o.prototype.send=function(c){this._trackSender.send(c)},o})(e);return tc=a,tc}var kh,A_;function oI(){if(A_)return kh;A_=1;var i=Zp(),e=iI();function n(a){var s=new e(a);return Object.setPrototypeOf(s,n.prototype),s}return i(n,e),kh=n,kh}var Th,x_;function Ka(){return x_||(x_=1,Th={LocalAudioTrack:X1(),LocalVideoTrack:rI(),LocalDataTrack:oI()}),Th}var Eh,D_;function aI(){if(D_)return Eh;D_=1;var i=(function(){function e(n){this._telemetry=n}return e.prototype.typeChanged=function(n){this._telemetry.info({group:"network",name:"network-type-changed",payload:{networkType:n}})},e.prototype.informationChanged=function(n){var a=n.downlink,s=n.downlinkMax,o=n.effectiveType,c=n.rtt,u=n.saveData,f=n.type;this._telemetry.info({group:"network",name:"network-information-changed",payload:{downlink:a,downlinkMax:s,effectiveType:o,rtt:c,saveData:u,type:f}})},e})();return Eh=i,Eh}var bh,M_;function sI(){if(M_)return bh;M_=1;var i=(function(){function e(n){this._telemetry=n}return e.prototype.succeeded=function(){this._telemetry.info({group:"get-user-media",name:"succeeded"})},e.prototype.denied=function(){this._telemetry.info({group:"get-user-media",name:"denied"})},e.prototype.failed=function(n){this._telemetry.info({group:"get-user-media",name:"failed",payload:{name:n.name,message:n.message}})},e})();return bh=i,bh}var Ch,N_;function cI(){if(N_)return Ch;N_=1;var i=(function(){function e(n){this._telemetry=n}return e.prototype.limitationChanged=function(n,a){this._telemetry.info({group:"quality",name:"quality-limitation-state-changed",payload:{trackSid:n,qualityLimitationReason:a}})},e.prototype.statsReport=function(n){this._telemetry.info({group:"quality",name:"stats-report",payload:n})},e.prototype.iceCandidatePair=function(n){this._telemetry.info({group:"quality",name:"active-ice-candidate-pair",payload:n})},e})();return Ch=i,Ch}var Ph,j_;function uI(){if(j_)return Ph;j_=1;var i=(function(){function e(n){this._telemetry=n}return e.prototype.stalled=function(n,a,s,o){o===void 0&&(o="video"),this._telemetry.warning({group:"track-warning-raised",name:"track-stalled",payload:{trackSid:n,frameRate:a,threshold:s,trackType:o}})},e.prototype.resumed=function(n,a,s,o){o===void 0&&(o="video"),this._telemetry.info({group:"track-warning-cleared",name:"track-stalled",payload:{trackSid:n,frameRate:a,threshold:s,trackType:o}})},e})();return Ph=i,Ph}var Rh,F_;function lI(){if(F_)return Rh;F_=1;var i=(function(){function e(n){this._telemetry=n}return e.prototype.resumed=function(){this._telemetry.info({group:"application",name:"resumed"})},e.prototype.backgrounded=function(){this._telemetry.info({group:"application",name:"backgrounded"})},e.prototype.terminated=function(){this._telemetry.info({group:"application",name:"terminated"})},e})();return Rh=i,Rh}var Oh,U_;function fI(){if(U_)return Oh;U_=1;var i=(function(){function e(n){this._telemetry=n}return e.prototype.cpuPressureChanged=function(n){this._telemetry.info({group:"system",name:"cpu-pressure-changed",payload:{resourceType:"cpu",pressure:n}})},e})();return Oh=i,Oh}var Ih,V_;function es(){if(V_)return Ih;V_=1;var i=aI(),e=sI(),n=cI(),a=uI(),s=lI(),o=fI(),c=(function(){function u(){this._publisher=null,this._connectTimestamp=null,this._log=null,this.network=new i(this),this.getUserMedia=new e(this),this.quality=new n(this),this.track=new a(this),this.application=new s(this),this.system=new o(this)}return u.prototype.configure=function(f){var h=f.publisher,v=f.log,m=f.connectTimestamp;if(!h||!v||typeof m!="number")throw new Error("Telemetry.configure requires publisher, log, and connectTimestamp");return this._publisher&&this.reset(),this._publisher=h,this._log=v,this._connectTimestamp=m,this},u.prototype.reset=function(){return this._publisher=null,this._connectTimestamp=null,this._log=null,this},Object.defineProperty(u.prototype,"isEnabled",{get:function(){return this._publisher!==null},enumerable:!1,configurable:!0}),u.prototype._emit=function(f,h,v,m){if(!(!this._publisher||!this._log||this._connectTimestamp===null)){var g=Date.now(),_=g-this._connectTimestamp,w=Object.assign({elapsedTime:_,level:v},m||{});this._publisher.publish(f,h,w);var E=Object.assign({elapsedTime:_,group:f,level:v,name:h,timestamp:g},m?{payload:m}:{}),T={debug:"debug",error:"error",info:"info",warning:"warn"}[v];this._log[T]("telemetry",E)}},u.prototype.info=function(f){var h=f.group,v=f.name,m=f.payload;return this._emit(h,v,"info",m)},u.prototype.warning=function(f){var h=f.group,v=f.name,m=f.payload;return this._emit(h,v,"warning",m)},u.prototype.error=function(f){var h=f.group,v=f.name,m=f.payload;return this._emit(h,v,"error",m)},u})();return Ih=new c,Ih}var B_;function dI(){if(B_)return Tr;B_=1;var i=Tr&&Tr.__assign||function(){return i=Object.assign||function(y){for(var S,C=1,A=arguments.length;C<A;C++){S=arguments[C];for(var F in S)Object.prototype.hasOwnProperty.call(S,F)&&(y[F]=S[F])}return y},i.apply(this,arguments)},e=Tr&&Tr.__awaiter||function(y,S,C,A){function F(D){return D instanceof C?D:new C(function(P){P(D)})}return new(C||(C=Promise))(function(D,P){function K(B){try{W(A.next(B))}catch(z){P(z)}}function q(B){try{W(A.throw(B))}catch(z){P(z)}}function W(B){B.done?D(B.value):F(B.value).then(K,q)}W((A=A.apply(y,S||[])).next())})},n=Tr&&Tr.__generator||function(y,S){var C={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},A,F,D,P=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return P.next=K(0),P.throw=K(1),P.return=K(2),typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function K(W){return function(B){return q([W,B])}}function q(W){if(A)throw new TypeError("Generator is already executing.");for(;P&&(P=0,W[0]&&(C=0)),C;)try{if(A=1,F&&(D=W[0]&2?F.return:W[0]?F.throw||((D=F.return)&&D.call(F),0):F.next)&&!(D=D.call(F,W[1])).done)return D;switch(F=0,D&&(W=[W[0]&2,D.value]),W[0]){case 0:case 1:D=W;break;case 4:return C.label++,{value:W[1],done:!1};case 5:C.label++,F=W[1],W=[0];continue;case 7:W=C.ops.pop(),C.trys.pop();continue;default:if(D=C.trys,!(D=D.length>0&&D[D.length-1])&&(W[0]===6||W[0]===2)){C=0;continue}if(W[0]===3&&(!D||W[1]>D[0]&&W[1]<D[3])){C.label=W[1];break}if(W[0]===6&&C.label<D[1]){C.label=D[1],D=W;break}if(D&&C.label<D[2]){C.label=D[2],C.ops.push(W);break}D[2]&&C.ops.pop(),C.trys.pop();continue}W=S.call(y,C)}catch(B){W=[6,B],F=0}finally{A=D=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}},a=Tr&&Tr.__read||function(y,S){var C=typeof Symbol=="function"&&y[Symbol.iterator];if(!C)return y;var A=C.call(y),F,D=[],P;try{for(;(S===void 0||S-- >0)&&!(F=A.next()).done;)D.push(F.value)}catch(K){P={error:K}}finally{try{F&&!F.done&&(C=A.return)&&C.call(A)}finally{if(P)throw P.error}}return D},s=Tr&&Tr.__spreadArray||function(y,S,C){if(C||arguments.length===2)for(var A=0,F=S.length,D;A<F;A++)(D||!(A in S))&&(D||(D=Array.prototype.slice.call(S,0,A)),D[A]=S[A]);return y.concat(D||Array.prototype.slice.call(S))};Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.createLocalTracks=b;var o=V1(),c=_t().buildLogLevels,u=oa(),f=u.getUserMedia,h=u.MediaStreamTrack,v=Ka(),m=v.LocalAudioTrack,g=v.LocalDataTrack,_=v.LocalVideoTrack,w=cn(),E=Et(),T=E.DEFAULT_LOG_LEVEL,N=E.DEFAULT_LOGGER_NAME,j=E.typeErrors.INVALID_VALUE,x=MT(),O=es(),L=0;function b(y){return e(this,void 0,void 0,function(){var S,C,A,F,D,P,K,q,W,B,z,G,J,M=this;return n(this,function(V){switch(V.label){case 0:if(S=!(y&&("audio"in y||"video"in y)),C=i({audio:S,getUserMedia:f,loggerName:N,logLevel:T,LocalAudioTrack:m,LocalDataTrack:g,LocalVideoTrack:_,MediaStreamTrack:h,Log:w,video:S},y),A="[createLocalTracks #".concat(++L,"]"),F=c(C.logLevel),D=new C.Log("default",A,F,C.loggerName),P=Object.assign({log:D},C),delete P.name,C.audio===!1&&C.video===!1)return D.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(C.tracks)return D.info("Adding user-provided LocalTracks"),D.debug("LocalTracks:",C.tracks),[2,C.tracks];if(K={audio:typeof C.audio=="object"&&C.audio.name?{name:C.audio.name}:{defaultDeviceCaptureMode:"auto"},video:typeof C.video=="object"&&C.video.name?{name:C.video.name}:{}},K.audio.isCreatedByCreateLocalTracks=!0,K.video.isCreatedByCreateLocalTracks=!0,typeof C.audio=="object")if(typeof C.audio.workaroundWebKitBug1208516=="boolean"&&(K.audio.workaroundWebKitBug1208516=C.audio.workaroundWebKitBug1208516),"noiseCancellationOptions"in C.audio&&(q=C.audio.noiseCancellationOptions,delete C.audio.noiseCancellationOptions),!("defaultDeviceCaptureMode"in C.audio))K.audio.defaultDeviceCaptureMode="auto";else{if(["auto","manual"].every(function(ee){return ee!==C.audio.defaultDeviceCaptureMode}))throw j("CreateLocalAudioTrackOptions.defaultDeviceCaptureMode",["auto","manual"]);K.audio.defaultDeviceCaptureMode=C.audio.defaultDeviceCaptureMode}typeof C.video=="object"&&typeof C.video.workaroundWebKitBug1208516=="boolean"&&(K.video.workaroundWebKitBug1208516=C.video.workaroundWebKitBug1208516),typeof C.audio=="object"&&delete C.audio.name,typeof C.video=="object"&&delete C.video.name,W={audio:C.audio,video:C.video},B=typeof C.audio=="object"&&C.audio.workaroundWebKitBug180748,V.label=1;case 1:return V.trys.push([1,4,,5]),[4,B?x(D,C.getUserMedia,W):C.getUserMedia(W)];case 2:return z=V.sent(),O.getUserMedia.succeeded(),G=s(s([],a(z.getAudioTracks()),!1),a(z.getVideoTracks()),!1),D.info("Call to getUserMedia successful; got tracks:",G),[4,Promise.all(G.map(function(ee){return e(M,void 0,void 0,function(){var oe,fe,ae;return n(this,function(he){switch(he.label){case 0:return ee.kind==="audio"&&q?[4,(0,o.applyNoiseCancellation)(ee,q,D)]:[3,2];case 1:return oe=he.sent(),fe=oe.cleanTrack,ae=oe.noiseCancellation,[2,new P.LocalAudioTrack(fe,i(i(i({},K.audio),P),{noiseCancellation:ae}))];case 2:if(ee.kind==="audio")return[2,new P.LocalAudioTrack(ee,i(i({},K.audio),P))];he.label=3;case 3:return[2,new P.LocalVideoTrack(ee,i(i({},K.video),P))]}})})}))];case 3:return[2,V.sent()];case 4:throw J=V.sent(),J.name==="NotAllowedError"||J.name==="PermissionDeniedError"?O.getUserMedia.denied():O.getUserMedia.failed(J),D.warn("Call to getUserMedia failed:",J),J;case 5:return[2]}})})}return Tr}var Er={},rc={},q_;function hI(){if(q_)return rc;q_=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.Timer=void 0;var i=(function(){function e(){this._end=void 0,this.start()}return e.prototype.start=function(){return this._start=Date.now(),this},e.prototype.stop=function(){return this._end=Date.now(),this},e.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:this._end===void 0?void 0:this._end-this._start}},e})();return rc.Timer=i,rc}var nc={},H_;function pI(){if(H_)return nc;H_=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.calculateMOS=e,nc.mosToScore=n;var i=94.768;function e(a,s,o){var c=a+s*2+10,u=0;switch(!0){case c<160:u=i-c/40;break;case c<1e3:u=i-(c-120)/10;break}switch(!0){case o<=u/2.5:u=Math.max(u-o*2.5,6.52);break;default:u=0;break}var f=1+.035*u+7e-6*u*(u-60)*(100-u);return f}function n(a){var s=0;return a?a>4.2?s=5:a>4?s=4:a>3.6?s=3:a>3?s=2:s=1:s=0,s}return nc}var An={},W_;function vI(){if(W_)return An;W_=1;var i=An&&An.__awaiter||function(u,f,h,v){function m(g){return g instanceof h?g:new h(function(_){_(g)})}return new(h||(h=Promise))(function(g,_){function w(N){try{T(v.next(N))}catch(j){_(j)}}function E(N){try{T(v.throw(N))}catch(j){_(j)}}function T(N){N.done?g(N.value):m(N.value).then(w,E)}T((v=v.apply(u,f||[])).next())})},e=An&&An.__generator||function(u,f){var h={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},v,m,g,_=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return _.next=w(0),_.throw=w(1),_.return=w(2),typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function w(T){return function(N){return E([T,N])}}function E(T){if(v)throw new TypeError("Generator is already executing.");for(;_&&(_=0,T[0]&&(h=0)),h;)try{if(v=1,m&&(g=T[0]&2?m.return:T[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,T[1])).done)return g;switch(m=0,g&&(T=[T[0]&2,g.value]),T[0]){case 0:case 1:g=T;break;case 4:return h.label++,{value:T[1],done:!1};case 5:h.label++,m=T[1],T=[0];continue;case 7:T=h.ops.pop(),h.trys.pop();continue;default:if(g=h.trys,!(g=g.length>0&&g[g.length-1])&&(T[0]===6||T[0]===2)){h=0;continue}if(T[0]===3&&(!g||T[1]>g[0]&&T[1]<g[3])){h.label=T[1];break}if(T[0]===6&&h.label<g[1]){h.label=g[1],g=T;break}if(g&&h.label<g[2]){h.label=g[2],h.ops.push(T);break}g[2]&&h.ops.pop(),h.trys.pop();continue}T=f.call(u,h)}catch(N){T=[6,N],m=0}finally{v=g=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},n=An&&An.__read||function(u,f){var h=typeof Symbol=="function"&&u[Symbol.iterator];if(!h)return u;var v=h.call(u),m,g=[],_;try{for(;(f===void 0||f-- >0)&&!(m=v.next()).done;)g.push(m.value)}catch(w){_={error:w}}finally{try{m&&!m.done&&(h=v.return)&&h.call(v)}finally{if(_)throw _.error}}return g};Object.defineProperty(An,"__esModule",{value:!0}),An.getCombinedConnectionStats=s;function a(u,f,h,v){var m=[];return u.forEach(function(g){(v.length===0||v.includes(g.type))&&(h.length===0||h.includes(g.kind))&&typeof g[f]=="number"&&m.push(g[f])}),m}function s(u){return i(this,arguments,void 0,function(f){var h,v,m,g,_,w,E,T,N,j,x,O,L,b,y,S=f.publisher,C=f.subscriber;return e(this,function(A){switch(A.label){case 0:return[4,Promise.all([S,C].map(function(F){return F.getStats()}))];case 1:return h=n.apply(void 0,[A.sent(),2]),v=h[0],m=h[1],g=a(m,"timestamp",["audio"],["inbound-rtp"]),_=g.length>0?g[0]:0,w=a(m,"jitter",["audio"],["inbound-rtp"]).reduce(function(F,D){return Math.max(F,D)},0),E=a(m,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce(function(F,D){return F+D},0),T=a(m,"packetsLost",["audio","video"],["inbound-rtp"]).reduce(function(F,D){return F+D},0),N=a(v,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce(function(F,D){return Math.max(F,D)},0),j=a(m,"currentRoundTripTime",[],["candidate-pair"]).reduce(function(F,D){return Math.max(F,D)},0),x=(j||N)*1e3,O=a(v,"bytesSent",[],["candidate-pair"]).reduce(function(F,D){return F+D},0),L=a(m,"bytesReceived",[],["candidate-pair"]).reduce(function(F,D){return F+D},0),b=c(m),y=[],m.forEach(function(F){(F.type==="local-candidate"||F.type==="remote-candidate")&&y.push(o(F))}),[2,{timestamp:_,jitter:w,packets:E,packetsLost:T,roundTripTime:x,bytesSent:O,bytesReceived:L,selectedIceCandidatePairStats:b,iceCandidateStats:y}]}})})}function o(u){var f=[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}];return f.reduce(function(h,v){var m=[v.key];v.altKeys&&(m=m.concat(v.altKeys));var g=m.find(function(_){return _ in u});return g&&typeof u[g]===v.type&&(h[v.key]=u[g]),h},{})}function c(u){var f=null,h=[];u.forEach(function(w){w.type==="transport"&&w.selectedCandidatePairId?f=w.selectedCandidatePairId:w.type==="candidate-pair"&&h.push(w)});var v=h.find(function(w){return w.selected||f&&w.id===f});if(!v)return null;var m=v,g=u.get(m.localCandidateId),_=u.get(m.remoteCandidateId);return!g||!_?null:{localCandidate:o(g),remoteCandidate:o(_)}}return An}var Bl={},oi,z_;function ts(){if(z_)return oi;z_=1;var i=oi&&oi.__extends||(function(){var g=function(_,w){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,T){E.__proto__=T}||function(E,T){for(var N in T)Object.prototype.hasOwnProperty.call(T,N)&&(E[N]=T[N])},g(_,w)};return function(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");g(_,w);function E(){this.constructor=_}_.prototype=w===null?Object.create(w):(E.prototype=w.prototype,new E)}})(),e=oi&&oi.__read||function(g,_){var w=typeof Symbol=="function"&&g[Symbol.iterator];if(!w)return g;var E=w.call(g),T,N=[],j;try{for(;(_===void 0||_-- >0)&&!(T=E.next()).done;)N.push(T.value)}catch(x){j={error:x}}finally{try{T&&!T.done&&(w=E.return)&&w.call(E)}finally{if(j)throw j.error}}return N},n=oi&&oi.__spreadArray||function(g,_,w){if(w||arguments.length===2)for(var E=0,T=_.length,N;E<T;E++)(N||!(E in _))&&(N||(N=Array.prototype.slice.call(_,0,E)),N[E]=_[E]);return g.concat(N||Array.prototype.slice.call(_))},a=pr().EventEmitter,s=_t(),o=(function(g){i(_,g);function _(w,E){var T=g.call(this)||this,N=null,j=w;return E=v(E),Object.defineProperties(T,{_lock:{get:function(){return N},set:function(x){N=x}},_reachableStates:{value:f(E)},_state:{get:function(){return j},set:function(x){j=x}},_states:{value:E},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return N!==null}},state:{enumerable:!0,get:function(){return j}}}),T.on("stateChanged",function(x){T._whenDeferreds.forEach(function(O){O.when(x,O.resolve,O.reject)})}),T}return _.prototype._whenPromise=function(w){var E=this;if(typeof w!="function")return Promise.reject(new Error("when() executor must be a function"));var T=s.defer();return T.when=w,this._whenDeferreds.add(T),T.promise.then(function(N){return E._whenDeferreds.delete(T),N},function(N){throw E._whenDeferreds.delete(T),N})},_.prototype.bracket=function(w,E){var T,N=this;function j(x){if(N.hasLock(T)&&N.releaseLockCompletely(T),x)throw x}return this.takeLock(w).then(function(O){return T=O,E(T)}).then(function(O){return j(),O},j)},_.prototype.hasLock=function(w){return this._lock===w},_.prototype.preempt=function(w,E,T){if(!c(this._states,this.state,w))throw new Error('Cannot transition from "'.concat(this.state,'" to "').concat(w,'"'));var N;this.isLocked&&(N=this._lock,this._lock=null);var j=null;E&&(j=this.takeLockSync(E));var x=j?null:this.takeLockSync("preemption");return this.transition(w,j||x,T),N&&N.resolve(),x&&this.releaseLock(x),j},_.prototype.releaseLock=function(w){if(this.isLocked){if(!this.hasLock(w))throw new Error("Could not release the lock for ".concat(w.name," because ").concat(this._lock.name," has the lock"))}else throw new Error("Could not release the lock for ".concat(w.name," because the StateMachine is not locked"));w.depth===0?(this._lock=null,w.resolve()):w.depth--},_.prototype.releaseLockCompletely=function(w){if(this.isLocked){if(!this.hasLock(w))throw new Error("Could not release the lock for ".concat(w.name," because ").concat(this._lock.name," has the lock"))}else throw new Error("Could not release the lock for ".concat(w.name," because the StateMachine is not locked"));w.depth=0,this._lock=null,w.resolve()},_.prototype.takeLock=function(w){var E=this;if(typeof w=="object"){var T=w;return new Promise(function(x){x(E.takeLockSync(T))})}var N=w;if(this.isLocked){var j=this.takeLock.bind(this,N);return this._lock.promise.then(j)}return Promise.resolve(this.takeLockSync(N))},_.prototype.takeLockSync=function(w){var E=typeof w=="string"?null:w,T=E?E.name:w;if(E&&!this.hasLock(E)||!E&&this.isLocked)throw new Error("Could not take the lock for ".concat(T," because the lock for ").concat(this._lock.name," was not released"));if(E)return E.depth++,E;var N=u(T);return this._lock=N,N},_.prototype.transition=function(w,E,T){if(T=T||[],this.isLocked)if(E){if(!this.hasLock(E))throw new Error("Could not transition using the key for ".concat(E.name," because ").concat(this._lock.name," has the lock"))}else throw new Error("You must provide the key in order to transition");else if(E)throw new Error("Key provided for ".concat(E.name,", but the StateMachine was not locked (possibly due to preemption)"));if(!c(this._states,this.state,w))throw new Error('Cannot transition from "'.concat(this.state,'" to "').concat(w,'"'));this._state=w,this.emit.apply(this,n([],e(["stateChanged",w].concat(T)),!1))},_.prototype.tryTransition=function(w,E,T){try{this.transition(w,E,T)}catch{return!1}return!0},_.prototype.when=function(w){var E=this;return this.state===w?Promise.resolve(this):c(this._reachableStates,this.state,w)?this._whenPromise(function(T,N,j){T===w?N(E):c(E._reachableStates,T,w)||j(m(T,w))}):Promise.reject(m(this.state,w))},_})(a);function c(g,_,w){return g.get(_).has(w)}function u(g){var _=s.defer();return _.name=g,_.depth=0,_}function f(g){return Array.from(g.keys()).reduce(function(_,w){return _.set(w,h(g,w))},new Map)}function h(g,_,w){return w=w||new Set,g.get(_).forEach(function(E){w.has(E)||(w.add(E),h(g,E,w).forEach(w.add,w))}),w}function v(g){var _=new Map;for(var w in g)_.set(w,new Set(g[w]));return _}function m(g,_){return new Error('"'.concat(_,'" cannot be reached from "').concat(g,'"'))}return oi=o,oi}var Lh,$_;function mI(){if($_)return Lh;$_=1;var i=(function(){function e(n,a){var s=this;a=Object.assign({navigator,window},a);var o=a.navigator,c=o.connection||{type:null},u=c.type,f=c.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var g=u!==s.type&&s.isOnline;u=s.type,g&&n()}},_target:{value:c}}:{_events:{value:["online"]},_listener:{value:n},_target:{value:a.window}},h=f._events,v=f._listener,m=f._target;Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return typeof o.onLine=="boolean"?o.onLine:!0}},type:{enumerable:!0,get:function(){return c.type||null}},_listener:v,_events:h,_target:m})}return e.prototype.start=function(){var n=this;this._events.forEach(function(a){n._target.addEventListener(a,n._listener)})},e.prototype.stop=function(){var n=this;this._events.forEach(function(a){n._target.removeEventListener(a,n._listener)})},e})();return Lh=i,Lh}var Ah,G_;function sa(){if(G_)return Ah;G_=1;var i=(function(){function e(n,a,s){s===void 0&&(s=!0),Object.defineProperties(this,{_delay:{value:a,writable:!0},_fn:{value:n},_timeout:{value:null,writable:!0}}),s&&this.start()}return Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),e.prototype.setDelay=function(n){this._delay=n},e.prototype.start=function(){var n=this;this.isSet||(this._timeout=setTimeout(function(){var a=n._fn;n.clear(),a()},this._delay))},e.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},e.prototype.reset=function(){this.clear(),this.start()},e})();return Ah=i,Ah}var xh,K_;function HT(){return K_||(K_=1,xh=WebSocket),xh}var ai,Q_;function WT(){if(Q_)return ai;Q_=1;var i=ai&&ai.__extends||(function(){var z=function(G,J){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,V){M.__proto__=V}||function(M,V){for(var ee in V)Object.prototype.hasOwnProperty.call(V,ee)&&(M[ee]=V[ee])},z(G,J)};return function(G,J){if(typeof J!="function"&&J!==null)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");z(G,J);function M(){this.constructor=G}G.prototype=J===null?Object.create(J):(M.prototype=J.prototype,new M)}})(),e=ai&&ai.__read||function(z,G){var J=typeof Symbol=="function"&&z[Symbol.iterator];if(!J)return z;var M=J.call(z),V,ee=[],oe;try{for(;(G===void 0||G-- >0)&&!(V=M.next()).done;)ee.push(V.value)}catch(fe){oe={error:fe}}finally{try{V&&!V.done&&(J=M.return)&&J.call(M)}finally{if(oe)throw oe.error}}return ee},n=ai&&ai.__spreadArray||function(z,G,J){if(J||arguments.length===2)for(var M=0,V=G.length,ee;M<V;M++)(ee||!(M in G))&&(ee||(ee=Array.prototype.slice.call(G,0,M)),ee[M]=G[M]);return z.concat(ee||Array.prototype.slice.call(G))},a=ts(),s=_t(),o=s.buildLogLevels,c=s.makeUUID,u=cn(),f=mI(),h=sa(),v=0,m={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},g={closed:"close",open:"open",waiting:"waiting"},_=2,w=3,E=3,T=5e3,N=15e3,j=5e3,x=200,O=1e3,L=3e3,b=3001,y=3002,S=3003,C=3004,A=3005,F=3006,D=3007,P=globalThis,K=P.WebSocket?P.WebSocket:HT(),q={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},W=new Map([[L,q.TIMEOUT],[b,q.TIMEOUT],[y,q.FAILED],[S,q.FAILED],[C,q.TIMEOUT],[F,q.BUSY],[D,q.TIMEOUT]]),B=(function(z){i(G,z);function G(J,M){var V=z.call(this,"early",m)||this;M=Object.assign({helloBody:null,maxConsecutiveFailedHellos:E,maxConsecutiveMissedHeartbeats:w,requestedHeartbeatTimeout:T,openTimeout:N,welcomeTimeout:j,Log:u,WebSocket:K},M);var ee=o(M.logLevel),oe=new M.Log("default",V,ee,M.loggerName),fe=M.networkMonitor?new f(function(){var he=fe.type,we="Network changed".concat(he?" to ".concat(he):"");oe.debug(we),V._close({code:C,reason:we})}):null;Object.defineProperties(V,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:M.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:M.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++v},_log:{value:oe},_messageQueue:{value:[]},_networkMonitor:{value:fe},_options:{value:M},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:J},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var ae={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return V.on("stateChanged",function(he){for(var we=[],ke=1;ke<arguments.length;ke++)we[ke-1]=arguments[ke];he in g&&V.emit.apply(V,n([g[he]],e(we),!1));var Ge={name:he,group:"signaling",level:ae[V.state]};if(he==="closed"){var Ae=e(we,1),Be=Ae[0];Ge.payload={reason:Be},Ge.level=Be===q.LOCAL?"info":"error"}V._eventObserver.emit("event",Ge)}),V._eventObserver.emit("event",{name:V.state,group:"signaling",level:ae[V.state]}),V._connect(),V}return G.prototype.toString=function(){return"[TwilioConnection #".concat(this._instanceId,": ").concat(this._ws.url,"]")},G.prototype._close=function(J){var M=J.code,V=J.reason;if(this.state!=="closed"){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&M!==A&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var ee=this._log;M===O?(ee.debug("Closed"),this.transition("closed",null,[q.LOCAL])):(ee.warn("Closed: ".concat(M," - ").concat(V)),M!==A&&this.transition("closed",null,[W.get(M)||q.REMOTE]));var oe=this._ws.readyState,fe=this._options.WebSocket;oe!==fe.CLOSING&&oe!==fe.CLOSED&&this._ws.close(M,V)}},G.prototype._connect=function(){var J=this,M=this._log;if(this.state==="waiting")this.transition("early");else if(this.state!=="early"){M.warn('Unexpected state "'.concat(this.state,'" for connecting to the')+" TCMP server.");return}this._ws=new this._options.WebSocket(this._serverUrl);var V=this._ws;M.debug("Created a new WebSocket:",V),V.addEventListener("close",function(oe){return J._close(oe)});var ee=this._options.openTimeout;this._openTimeout=new h(function(){var oe="Failed to open in ".concat(ee," ms");J._close({code:D,reason:oe})},ee),V.addEventListener("open",function(){M.debug("WebSocket opened:",V),J._openTimeout.clear(),J._startHandshake(),J._networkMonitor&&J._networkMonitor.start()}),V.addEventListener("message",function(oe){M.debug("Incoming: ".concat(oe.data));try{oe=JSON.parse(oe.data)}catch(fe){J.emit("error",fe);return}switch(oe.type){case"bad":J._handleBad(oe);break;case"busy":J._handleBusy(oe);break;case"bye":break;case"msg":J._handleMessage(oe);case"heartbeat":J._handleHeartbeat();break;case"welcome":J._handleWelcome(oe);break;default:J._log.debug("Unknown message type: ".concat(oe.type)),J.emit("error",new Error("Unknown message type: ".concat(oe.type)));break}})},G.prototype._handleBad=function(J){var M=J.reason,V=this._log;if(!["connecting","open"].includes(this.state)){V.warn('Unexpected state "'.concat(this.state,'" for handling a "bad" message')+" from the TCMP server.");return}if(this.state==="connecting"){V.warn("Closing: ".concat(y," - ").concat(M)),this._close({code:y,reason:M});return}V.debug("Error: ".concat(M)),this.emit("error",new Error(M))},G.prototype._handleBusy=function(J){var M=this,V=J.cookie,ee=J.keepAlive,oe=J.retryAfter,fe=this._log;if(!["connecting","waiting"].includes(this.state)){fe.warn('Unexpected state "'.concat(this.state,'" for handling a "busy" message')+" from the TCMP server.");return}this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var ae=oe<0?'Received terminal "busy" message':'Received "busy" message, retrying after '.concat(oe," ms");if(oe<0){fe.warn("Closing: ".concat(F," - ").concat(ae)),this._close({code:F,reason:ae});return}var he=this._options.maxConsecutiveFailedHellos;this._hellosLeft=he,this._cookie=V||null,ee?(fe.warn(ae),this._busyWaitTimeout=new h(function(){return M._startHandshake()},oe)):(fe.warn("Closing: ".concat(A," - ").concat(ae)),this._close({code:A,reason:ae}),this._busyWaitTimeout=new h(function(){return M._connect()},oe)),this.transition("waiting",null,[ee,oe])},G.prototype._handleHeartbeat=function(){if(this.state!=="open"){this._log.warn('Unexpected state "'.concat(this.state,'" for handling a "heartbeat"')+" message from the TCMP server.");return}this._heartbeatTimeout.reset()},G.prototype._handleHeartbeatTimeout=function(){if(this.state==="open"){var J=this._log,M=this._options.maxConsecutiveMissedHeartbeats;J.debug("Consecutive heartbeats missed: ".concat(M));var V="Missed ".concat(M,' "heartbeat" messages');J.warn("Closing: ".concat(b," - ").concat(V)),this._close({code:b,reason:V})}},G.prototype._handleMessage=function(J){var M=J.body;if(this.state!=="open"){this._log.warn('Unexpected state "'.concat(this.state,'" for handling a "msg" message')+" from the TCMP server.");return}this.emit("message",M)},G.prototype._handleWelcome=function(J){var M=this,V=J.negotiatedTimeout,ee=this._log;if(!["connecting","waiting"].includes(this.state)){ee.warn('Unexpected state "'.concat(this.state,'" for handling a "welcome"')+" message from the TCMP server.");return}this.state==="waiting"&&(ee.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var oe=this._options.maxConsecutiveMissedHeartbeats,fe=V*oe,ae=V-x;this._welcomeTimeout.clear(),this._heartbeatTimeout=new h(function(){return M._handleHeartbeatTimeout()},fe),this._messageQueue.splice(0).forEach(function(he){return M._send(he)}),this._sendHeartbeatTimeout=new h(function(){return M._sendHeartbeat()},ae),this.transition("open")},G.prototype._handleWelcomeTimeout=function(){if(this.state==="connecting"){var J=this._log;if(this._hellosLeft<=0){var M="All handshake attempts failed";J.warn("Closing: ".concat(L," - ").concat(M)),this._close({code:L,reason:M});return}var V=this._options.maxConsecutiveFailedHellos;J.warn("Handshake attempt ".concat(V-this._hellosLeft," failed")),this._startHandshake()}},G.prototype._send=function(J){var M=this._ws.readyState,V=this._options.WebSocket;if(M===V.OPEN){var ee=JSON.stringify(J);this._log.debug("Outgoing: ".concat(ee));try{this._ws.send(ee),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch{var oe="Failed to send message";this._log.warn("Closing: ".concat(S," - ").concat(oe)),this._close({code:S,reason:oe})}}},G.prototype._sendHeartbeat=function(){this.state!=="closed"&&this._send({type:"heartbeat"})},G.prototype._sendHello=function(){var J=this._options,M=J.helloBody,V=J.requestedHeartbeatTimeout,ee={id:c(),timeout:V,type:"hello",version:_};this._cookie&&(ee.cookie=this._cookie),M&&(ee.body=M),this._send(ee)},G.prototype._sendOrEnqueue=function(J){var M=this;if(this.state!=="closed"){var V=this.state==="open"?function(ee){return M._send(ee)}:function(ee){return M._messageQueue.push(ee)};V(J)}},G.prototype._startHandshake=function(){var J=this;if(["early","waiting"].includes(this.state)&&this.transition("connecting"),this.state==="connecting"){this._hellosLeft--,this._sendHello();var M=this._options.welcomeTimeout;this._welcomeTimeout=new h(function(){return J._handleWelcomeTimeout()},M)}},G.prototype.close=function(){this.state!=="closed"&&(this._sendOrEnqueue({type:"bye"}),this._close({code:O,reason:"Normal"}))},G.prototype.sendMessage=function(J){this._sendOrEnqueue({body:J,type:"msg"})},G})(a);return B.CloseReason=q,ai=B,ai}var ze={},si,J_;function gI(){if(J_)return si;J_=1;var i=si&&si.__extends||(function(){var s=function(o,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])},s(o,c)};return function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(o,c);function u(){this.constructor=o}o.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}})(),e=si&&si.__read||function(s,o){var c=typeof Symbol=="function"&&s[Symbol.iterator];if(!c)return s;var u=c.call(s),f,h=[],v;try{for(;(o===void 0||o-- >0)&&!(f=u.next()).done;)h.push(f.value)}catch(m){v={error:m}}finally{try{f&&!f.done&&(c=u.return)&&c.call(u)}finally{if(v)throw v.error}}return h},n=si&&si.__spreadArray||function(s,o,c){if(c||arguments.length===2)for(var u=0,f=o.length,h;u<f;u++)(h||!(u in o))&&(h||(h=Array.prototype.slice.call(o,0,u)),h[u]=o[u]);return s.concat(h||Array.prototype.slice.call(o))},a=(function(s){i(o,s);function o(c){var u=this,f=[].slice.call(arguments,1);u=s.apply(this,n([],e(f),!1))||this,Object.setPrototypeOf(u,o.prototype);var h=Error.apply(u,f);return h.name="TwilioError",Object.defineProperty(u,"code",{value:c,enumerable:!0}),Object.getOwnPropertyNames(h).forEach(function(v){Object.defineProperty(this,v,{value:h[v],enumerable:!0})},u),u}return o.prototype.toString=function(){var c=this.message?": ".concat(this.message):"";return"".concat(this.name," ").concat(this.code).concat(c)},o})(Error);return si=a,si}var Y_;function Ti(){if(Y_)return ze;Y_=1;var i=ze&&ze.__extends||(function(){var $=function(H,Y){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ye,Se){ye.__proto__=Se}||function(ye,Se){for(var Oe in Se)Object.prototype.hasOwnProperty.call(Se,Oe)&&(ye[Oe]=Se[Oe])},$(H,Y)};return function(H,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");$(H,Y);function ye(){this.constructor=H}H.prototype=Y===null?Object.create(Y):(ye.prototype=Y.prototype,new ye)}})(),e=gI(),n={};ze.createTwilioError=function(H,Y){return H=typeof H=="number"?H:0,Y=typeof Y=="string"&&Y?Y:"Unknown error",n[H]?new n[H]:new e(H,Y)};var a=(function($){i(H,$);function H(){var Y=$.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.AccessTokenInvalidError=a,Object.defineProperty(n,20101,{value:a});var s=(function($){i(H,$);function H(){var Y=$.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.AccessTokenHeaderInvalidError=s,Object.defineProperty(n,20102,{value:s});var o=(function($){i(H,$);function H(){var Y=$.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.AccessTokenIssuerInvalidError=o,Object.defineProperty(n,20103,{value:o});var c=(function($){i(H,$);function H(){var Y=$.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.AccessTokenExpiredError=c,Object.defineProperty(n,20104,{value:c});var u=(function($){i(H,$);function H(){var Y=$.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.AccessTokenNotYetValidError=u,Object.defineProperty(n,20105,{value:u});var f=(function($){i(H,$);function H(){var Y=$.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.AccessTokenGrantsInvalidError=f,Object.defineProperty(n,20106,{value:f});var h=(function($){i(H,$);function H(){var Y=$.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.AccessTokenSignatureInvalidError=h,Object.defineProperty(n,20107,{value:h});var v=(function($){i(H,$);function H(){var Y=$.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.SignalingConnectionError=v,Object.defineProperty(n,53e3,{value:v});var m=(function($){i(H,$);function H(){var Y=$.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.SignalingConnectionDisconnectedError=m,Object.defineProperty(n,53001,{value:m});var g=(function($){i(H,$);function H(){var Y=$.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.SignalingConnectionTimeoutError=g,Object.defineProperty(n,53002,{value:g});var _=(function($){i(H,$);function H(){var Y=$.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.SignalingIncomingMessageInvalidError=_,Object.defineProperty(n,53003,{value:_});var w=(function($){i(H,$);function H(){var Y=$.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.SignalingOutgoingMessageInvalidError=w,Object.defineProperty(n,53004,{value:w});var E=(function($){i(H,$);function H(){var Y=$.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.SignalingServerBusyError=E,Object.defineProperty(n,53006,{value:E});var T=(function($){i(H,$);function H(){var Y=$.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomNameInvalidError=T,Object.defineProperty(n,53100,{value:T});var N=(function($){i(H,$);function H(){var Y=$.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomNameTooLongError=N,Object.defineProperty(n,53101,{value:N});var j=(function($){i(H,$);function H(){var Y=$.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomNameCharsInvalidError=j,Object.defineProperty(n,53102,{value:j});var x=(function($){i(H,$);function H(){var Y=$.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomCreateFailedError=x,Object.defineProperty(n,53103,{value:x});var O=(function($){i(H,$);function H(){var Y=$.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomConnectFailedError=O,Object.defineProperty(n,53104,{value:O});var L=(function($){i(H,$);function H(){var Y=$.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomMaxParticipantsExceededError=L,Object.defineProperty(n,53105,{value:L});var b=(function($){i(H,$);function H(){var Y=$.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomNotFoundError=b,Object.defineProperty(n,53106,{value:b});var y=(function($){i(H,$);function H(){var Y=$.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomMaxParticipantsOutOfRangeError=y,Object.defineProperty(n,53107,{value:y});var S=(function($){i(H,$);function H(){var Y=$.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomTypeInvalidError=S,Object.defineProperty(n,53108,{value:S});var C=(function($){i(H,$);function H(){var Y=$.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomTimeoutOutOfRangeError=C,Object.defineProperty(n,53109,{value:C});var A=(function($){i(H,$);function H(){var Y=$.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomStatusCallbackMethodInvalidError=A,Object.defineProperty(n,53110,{value:A});var F=(function($){i(H,$);function H(){var Y=$.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomStatusCallbackInvalidError=F,Object.defineProperty(n,53111,{value:F});var D=(function($){i(H,$);function H(){var Y=$.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomStatusInvalidError=D,Object.defineProperty(n,53112,{value:D});var P=(function($){i(H,$);function H(){var Y=$.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomRoomExistsError=P,Object.defineProperty(n,53113,{value:P});var K=(function($){i(H,$);function H(){var Y=$.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomInvalidParametersError=K,Object.defineProperty(n,53114,{value:K});var q=(function($){i(H,$);function H(){var Y=$.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomMediaRegionInvalidError=q,Object.defineProperty(n,53115,{value:q});var W=(function($){i(H,$);function H(){var Y=$.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomMediaRegionUnavailableError=W,Object.defineProperty(n,53116,{value:W});var B=(function($){i(H,$);function H(){var Y=$.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomSubscriptionOperationNotSupportedError=B,Object.defineProperty(n,53117,{value:B});var z=(function($){i(H,$);function H(){var Y=$.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomCompletedError=z,Object.defineProperty(n,53118,{value:z});var G=(function($){i(H,$);function H(){var Y=$.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomAudioOnlyFlagNotSupportedError=G,Object.defineProperty(n,53124,{value:G});var J=(function($){i(H,$);function H(){var Y=$.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.RoomTrackKindNotSupportedError=J,Object.defineProperty(n,53125,{value:J});var M=(function($){i(H,$);function H(){var Y=$.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.ParticipantIdentityInvalidError=M,Object.defineProperty(n,53200,{value:M});var V=(function($){i(H,$);function H(){var Y=$.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.ParticipantIdentityTooLongError=V,Object.defineProperty(n,53201,{value:V});var ee=(function($){i(H,$);function H(){var Y=$.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.ParticipantIdentityCharsInvalidError=ee,Object.defineProperty(n,53202,{value:ee});var oe=(function($){i(H,$);function H(){var Y=$.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.ParticipantMaxTracksExceededError=oe,Object.defineProperty(n,53203,{value:oe});var fe=(function($){i(H,$);function H(){var Y=$.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.ParticipantNotFoundError=fe,Object.defineProperty(n,53204,{value:fe});var ae=(function($){i(H,$);function H(){var Y=$.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.ParticipantDuplicateIdentityError=ae,Object.defineProperty(n,53205,{value:ae});var he=(function($){i(H,$);function H(){var Y=$.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.TrackInvalidError=he,Object.defineProperty(n,53300,{value:he});var we=(function($){i(H,$);function H(){var Y=$.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.TrackNameInvalidError=we,Object.defineProperty(n,53301,{value:we});var ke=(function($){i(H,$);function H(){var Y=$.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.TrackNameTooLongError=ke,Object.defineProperty(n,53302,{value:ke});var Ge=(function($){i(H,$);function H(){var Y=$.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.TrackNameCharsInvalidError=Ge,Object.defineProperty(n,53303,{value:Ge});var Ae=(function($){i(H,$);function H(){var Y=$.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.TrackNameIsDuplicatedError=Ae,Object.defineProperty(n,53304,{value:Ae});var Be=(function($){i(H,$);function H(){var Y=$.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.TrackServerTrackCapacityReachedError=Be,Object.defineProperty(n,53305,{value:Be});var Ze=(function($){i(H,$);function H(){var Y=$.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.MediaClientLocalDescFailedError=Ze,Object.defineProperty(n,53400,{value:Ze});var tt=(function($){i(H,$);function H(){var Y=$.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.MediaServerLocalDescFailedError=tt,Object.defineProperty(n,53401,{value:tt});var Je=(function($){i(H,$);function H(){var Y=$.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.MediaClientRemoteDescFailedError=Je,Object.defineProperty(n,53402,{value:Je});var Ke=(function($){i(H,$);function H(){var Y=$.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.MediaServerRemoteDescFailedError=Ke,Object.defineProperty(n,53403,{value:Ke});var Me=(function($){i(H,$);function H(){var Y=$.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.MediaNoSupportedCodecError=Me,Object.defineProperty(n,53404,{value:Me});var me=(function($){i(H,$);function H(){var Y=$.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.MediaConnectionError=me,Object.defineProperty(n,53405,{value:me});var Ue=(function($){i(H,$);function H(){var Y=$.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.MediaDTLSTransportFailedError=Ue,Object.defineProperty(n,53407,{value:Ue});var Re=(function($){i(H,$);function H(){var Y=$.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);ze.ConfigurationAcquireFailedError=Re,Object.defineProperty(n,53500,{value:Re});var qe=(function($){i(H,$);function H(){var Y=$.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(Y,H.prototype),Y}return H})(e);return ze.ConfigurationAcquireTurnFailedError=qe,Object.defineProperty(n,53501,{value:qe}),ze}var X_;function yI(){if(X_)return Bl;X_=1,Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.getTurnCredentials=c;var i=WT(),e=Et().ICE_VERSION,n=Ti(),a=n.createTwilioError,s=n.SignalingConnectionError,o=pr();function c(u,f){return new Promise(function(h,v){var m=new o.EventEmitter,g={networkMonitor:null,eventObserver:m,helloBody:{edge:"roaming",preflight:!0,token:u,type:"ice",version:e}},_=new i(f,g),w=!1;_.once("close",function(){w||(w=!0,v(new s))}),_.on("message",function(E){var T=E.code,N=E.message,j=E.ice_servers,x=E.type;(x==="iced"||x==="error")&&!w&&(w=!0,x==="iced"?h(j):v(a(T,N)),_.close())})})}return Bl}var Ki={},Z_;function _I(){if(Z_)return Ki;Z_=1;var i=Ki&&Ki.__read||function(a,s){var o=typeof Symbol=="function"&&a[Symbol.iterator];if(!o)return a;var c=o.call(a),u,f=[],h;try{for(;(s===void 0||s-- >0)&&!(u=c.next()).done;)f.push(u.value)}catch(v){h={error:v}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(h)throw h.error}}return f},e=Ki&&Ki.__spreadArray||function(a,s,o){if(o||arguments.length===2)for(var c=0,u=s.length,f;c<u;c++)(f||!(c in s))&&(f||(f=Array.prototype.slice.call(s,0,c)),f[c]=s[c]);return a.concat(f||Array.prototype.slice.call(s))};Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.makeStat=n;function n(a){if(a&&a.length){var s=Math.min.apply(Math,e([],i(a),!1)),o=Math.max.apply(Math,e([],i(a),!1)),c=a.reduce(function(u,f){return u+f},0)/a.length;return{min:s,max:o,average:c}}return null}return Ki}var ql={},ew;function wI(){if(ew)return ql;ew=1,Object.defineProperty(ql,"__esModule",{value:!0}),ql.syntheticAudio=i;function i(){var e=mf(),n={},a=e.getOrCreate(n),s=a.createOscillator(),o=s.connect(a.createMediaStreamDestination());s.start();var c=o.stream.getAudioTracks()[0],u=c.stop;return c.stop=function(){u.call(c),e.release(n)},c}return ql}var Hl={},tw;function SI(){if(tw)return Hl;tw=1,Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.syntheticVideo=i;function i(e){var n=e===void 0?{}:e,a=n.width,s=a===void 0?640:a,o=n.height,c=o===void 0?480:o,u=Object.assign(document.createElement("canvas"),{width:s,height:c}),f=u.getContext("2d");f.fillStyle="green",f.fillRect(0,0,u.width,u.height);var h=!1;requestAnimationFrame(function _(){if(!h){var w=Math.round(Math.random()*255),E=Math.round(Math.random()*255),T=Math.round(Math.random()*255),N=Math.round(Math.random()*255);f.fillStyle="rgba(".concat(w,", ").concat(E,", ").concat(T,", ").concat(N,")"),f.fillRect(Math.random()*s,Math.random()*c,50,50),requestAnimationFrame(_)}});var v=u.captureStream(30),m=v.getTracks()[0],g=m.stop;return m.stop=function(){h=!0,g.call(m)},m}return Hl}var Dh,rw;function zT(){if(rw)return Dh;rw=1;var i=(function(){function e(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return e.prototype.get=function(){var n=this._samples,a=n[1].denominator-n[0].denominator||1/0,s=n[1].numerator-n[0].numerator;return s/a},e.prototype.putSample=function(n,a){var s=this._samples;s.shift(),s.push({denominator:a,numerator:n})},e})();return Dh=i,Dh}var ic,nw;function $T(){if(nw)return ic;nw=1;var i=ic&&ic.__extends||(function(){var o=function(c,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(f[v]=h[v])},o(c,u)};return function(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");o(c,u);function f(){this.constructor=c}c.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}})(),e=pr().EventEmitter,n=["signaling","room","media","quality","video-processor","preflight"],a=["debug","error","info","warning"],s=(function(o){i(c,o);function c(u,f,h,v){v===void 0&&(v=null);var m=o.call(this)||this;return m.on("event",function(g){var _=g.name,w=g.group,E=g.level,T=g.payload;if(typeof _!="string")throw h.error("Unexpected name: ",_),new Error("Unexpected name: ",_);if(!n.includes(w))throw h.error("Unexpected group: ",w),new Error("Unexpected group: ",w);if(!a.includes(E))throw h.error("Unexpected level: ",E),new Error("Unexpected level: ",E);var N=Date.now(),j=N-f,x=Object.assign({elapsedTime:j,level:E},T||{});u.publish(w,_,x);var O=Object.assign({elapsedTime:j,group:w,level:E,name:_,timestamp:N},T?{payload:T}:{}),L={debug:"debug",error:"error",info:"info",warning:"warn"}[E];h[L]("event",O),v&&w==="signaling"&&v.emit("event",O)}),m}return c})(e);return ic=s,ic}var Uo,iw;function GT(){if(iw)return Uo;iw=1;var i=Uo&&Uo.__extends||(function(){var x=function(O,L){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,y){b.__proto__=y}||function(b,y){for(var S in y)Object.prototype.hasOwnProperty.call(y,S)&&(b[S]=y[S])},x(O,L)};return function(O,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");x(O,L);function b(){this.constructor=O}O.prototype=L===null?Object.create(L):(b.prototype=L.prototype,new b)}})(),e=Uo&&Uo.__assign||function(){return e=Object.assign||function(x){for(var O,L=1,b=arguments.length;L<b;L++){O=arguments[L];for(var y in O)Object.prototype.hasOwnProperty.call(O,y)&&(x[y]=O[y])}return x},e.apply(this,arguments)},n=pr().EventEmitter,a=_t().getUserAgent,s=5,o=50,c=1e3,u=globalThis,f=u.WebSocket?u.WebSocket:HT(),h=Et(),v=h.hardwareDevicePublisheriPad,m=h.hardwareDevicePublisheriPhone,g=_t(),_=aa(),w=(function(x){i(O,x);function O(L,b,y,S,C,A){var F=x.call(this)||this;return A=Object.assign({gateway:"".concat(T(S,C),"/v1/VideoEvents"),maxReconnectAttempts:s,reconnectIntervalMs:o,userAgent:a(),WebSocket:f},A),Object.defineProperties(F,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:g.defer()},_reconnectAttemptsLeft:{value:A.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:A.WebSocket}}),F._readyToConnect.promise.then(function(D){var P=D.roomSid,K=D.participantSid,q=F;F.on("disconnected",function W(B){if(q._session=null,B&&q._reconnectAttemptsLeft>0){q.emit("reconnecting"),j(q,L,b,y,P,K,A);return}q.removeListener("disconnected",W)}),E(F,L,b,y,P,K,A)}).catch(function(){}),F}return O.prototype.connect=function(L,b){this._readyToConnect.resolve({roomSid:L,participantSid:b})},O.prototype._publish=function(L){L.session=this._session,this._ws.send(JSON.stringify(L))},O.prototype.disconnect=function(){if(this._ws===null||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch{}return this.emit("disconnected"),!0},O.prototype.publish=function(L,b,y){if(this._ws!==null&&(this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED))return!1;var S=typeof this._session=="string"?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue);return S({group:L,name:b,payload:y,timestamp:Date.now(),type:"event",version:1}),!0},O})(n);function E(x,O,L,b,y,S,C){x._connectTimestamp=Date.now(),x._reconnectAttemptsLeft--,x._ws=new C.WebSocket(C.gateway);var A=x._ws;A.addEventListener("close",function(F){if(F.code===c){x.emit("disconnected");return}x.emit("disconnected",new Error("WebSocket Error ".concat(F.code,": ").concat(F.reason)))}),A.addEventListener("message",function(F){N(x,JSON.parse(F.data),C)}),A.addEventListener("open",function(){var F={type:"connect",token:O,version:1};F.publisher={name:L,sdkVersion:b,userAgent:C.userAgent,participantSid:S,roomSid:y},_.isIpad()?F.publisher=e(e({},F.publisher),v):_.isIphone()&&(F.publisher=e(e({},F.publisher),m)),A.send(JSON.stringify(F))})}function T(x,O){return x==="prod"?"wss://sdkgw.".concat(O,".twilio.com"):"wss://sdkgw.".concat(x,"-").concat(O,".twilio.com")}function N(x,O,L){switch(O.type){case"connected":x._session=O.session,x._reconnectAttemptsLeft=L.maxReconnectAttempts,x._eventQueue.splice(0).forEach(x._publish,x),x.emit("connected");break;case"error":x._ws.close(),x.emit("disconnected",new Error(O.message));break}}function j(x,O,L,b,y,S,C){var A=Date.now()-x._connectTimestamp,F=C.reconnectIntervalMs-A;if(F>0){setTimeout(function(){E(x,O,L,b,y,S,C)},F);return}E(x,O,L,b,y,S,C)}return Uo=w,Uo}var ow;function kI(){if(ow)return Er;ow=1;var i=Er&&Er.__extends||(function(){var B=function(z,G){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,M){J.__proto__=M}||function(J,M){for(var V in M)Object.prototype.hasOwnProperty.call(M,V)&&(J[V]=M[V])},B(z,G)};return function(z,G){if(typeof G!="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");B(z,G);function J(){this.constructor=z}z.prototype=G===null?Object.create(G):(J.prototype=G.prototype,new J)}})(),e=Er&&Er.__assign||function(){return e=Object.assign||function(B){for(var z,G=1,J=arguments.length;G<J;G++){z=arguments[G];for(var M in z)Object.prototype.hasOwnProperty.call(z,M)&&(B[M]=z[M])}return B},e.apply(this,arguments)},n=Er&&Er.__awaiter||function(B,z,G,J){function M(V){return V instanceof G?V:new G(function(ee){ee(V)})}return new(G||(G=Promise))(function(V,ee){function oe(he){try{ae(J.next(he))}catch(we){ee(we)}}function fe(he){try{ae(J.throw(he))}catch(we){ee(we)}}function ae(he){he.done?V(he.value):M(he.value).then(oe,fe)}ae((J=J.apply(B,z||[])).next())})},a=Er&&Er.__generator||function(B,z){var G={label:0,sent:function(){if(V[0]&1)throw V[1];return V[1]},trys:[],ops:[]},J,M,V,ee=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return ee.next=oe(0),ee.throw=oe(1),ee.return=oe(2),typeof Symbol=="function"&&(ee[Symbol.iterator]=function(){return this}),ee;function oe(ae){return function(he){return fe([ae,he])}}function fe(ae){if(J)throw new TypeError("Generator is already executing.");for(;ee&&(ee=0,ae[0]&&(G=0)),G;)try{if(J=1,M&&(V=ae[0]&2?M.return:ae[0]?M.throw||((V=M.return)&&V.call(M),0):M.next)&&!(V=V.call(M,ae[1])).done)return V;switch(M=0,V&&(ae=[ae[0]&2,V.value]),ae[0]){case 0:case 1:V=ae;break;case 4:return G.label++,{value:ae[1],done:!1};case 5:G.label++,M=ae[1],ae=[0];continue;case 7:ae=G.ops.pop(),G.trys.pop();continue;default:if(V=G.trys,!(V=V.length>0&&V[V.length-1])&&(ae[0]===6||ae[0]===2)){G=0;continue}if(ae[0]===3&&(!V||ae[1]>V[0]&&ae[1]<V[3])){G.label=ae[1];break}if(ae[0]===6&&G.label<V[1]){G.label=V[1],V=ae;break}if(V&&G.label<V[2]){G.label=V[2],G.ops.push(ae);break}V[2]&&G.ops.pop(),G.trys.pop();continue}ae=z.call(B,G)}catch(he){ae=[6,he],M=0}finally{J=V=0}if(ae[0]&5)throw ae[1];return{value:ae[0]?ae[1]:void 0,done:!0}}};Object.defineProperty(Er,"__esModule",{value:!0}),Er.PreflightTest=void 0,Er.runPreflight=W;var s=Et(),o=hI(),c=pI(),u=vI(),f=yI(),h=_I(),v=wI(),m=SI(),g=_t(),_=Et().WS_SERVER,w=cn(),E=Iu(),T=zT(),N=$T(),j=GT(),x=TT(),O=x.createSID,L=x.sessionSID,b=Ti(),y=b.SignalingConnectionTimeoutError,S=b.MediaConnectionError,C=1e3,A=10*C,F={mediaAcquired:"mediaAcquired",connected:"connected",mediaSubscribed:"mediaSubscribed",mediaStarted:"mediaStarted",dtlsConnected:"dtlsConnected",peerConnectionConnected:"peerConnectionConnected",iceConnected:"iceConnected"};function D(B){return B!==null&&typeof B<"u"}var P=0,K=(function(B){i(z,B);function z(G,J){var M=B.call(this)||this;M._testTiming=new o.Timer,M._dtlsTiming=new o.Timer,M._iceTiming=new o.Timer,M._peerConnectionTiming=new o.Timer,M._mediaTiming=new o.Timer,M._connectTiming=new o.Timer,M._sentBytesMovingAverage=new T,M._packetLossMovingAverage=new T,M._progressEvents=[],M._receivedBytesMovingAverage=new T;var V=J,ee=V.environment,oe=ee===void 0?"prod":ee,fe=V.region,ae=fe===void 0?"gll":fe,he=V.duration,we=he===void 0?A:he,ke=V.wsServer||_(oe,ae);return M._log=new w("default",M,s.DEFAULT_LOG_LEVEL,s.DEFAULT_LOGGER_NAME),M._testDuration=we,M._instanceId=P++,M._testTiming.start(),M._runPreflightTest(G,oe,ke),M}return z.prototype.toString=function(){return"[Preflight #".concat(this._instanceId,"]")},z.prototype.stop=function(){this._stopped=!0},z.prototype._generatePreflightReport=function(G){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:(0,h.makeStat)(G?.jitter),rtt:(0,h.makeStat)(G?.rtt),packetLoss:(0,h.makeStat)(G?.packetLoss)},selectedIceCandidatePairStats:G?G.selectedIceCandidatePairStats:null,iceCandidateStats:G?G.iceCandidateStats:[],progressEvents:this._progressEvents,mos:(0,h.makeStat)(G?.mos)}},z.prototype._executePreflightStep=function(G,J,M){return n(this,void 0,void 0,function(){var V,ee,oe,fe,ae;return a(this,function(he){switch(he.label){case 0:if(this._log.debug("Executing step: ",G),V=this._testDuration+10*C,this._stopped)throw new Error("stopped");ee=Promise.resolve().then(J),oe=null,fe=new Promise(function(we,ke){oe=setTimeout(function(){ke(M||new Error("".concat(G," timeout.")))},V)}),he.label=1;case 1:return he.trys.push([1,,3,4]),[4,Promise.race([fe,ee])];case 2:return ae=he.sent(),[2,ae];case 3:return oe!==null&&clearTimeout(oe),[7];case 4:return[2]}})})},z.prototype._collectNetworkTimings=function(G){var J=this;return new Promise(function(M){var V;G.addEventListener("iceconnectionstatechange",function(){G.iceConnectionState==="checking"&&J._iceTiming.start(),G.iceConnectionState==="connected"&&(J._iceTiming.stop(),J._updateProgress(F.iceConnected),(!V||V&&V.state==="connected")&&M())}),G.addEventListener("connectionstatechange",function(){G.connectionState==="connecting"&&J._peerConnectionTiming.start(),G.connectionState==="connected"&&(J._peerConnectionTiming.stop(),J._updateProgress(F.peerConnectionConnected))});var ee=G.getSenders(),oe=ee.map(function(fe){return fe.transport}).find(D);typeof oe<"u"&&(V=oe,V.addEventListener("statechange",function(){V.state==="connecting"&&J._dtlsTiming.start(),V.state==="connected"&&(J._dtlsTiming.stop(),J._updateProgress(F.dtlsConnected),G.iceConnectionState==="connected"&&M())}))})},z.prototype._setupInsights=function(G){var J=G.token,M=G.environment,V=M===void 0?s.DEFAULT_ENVIRONMENT:M,ee=G.realm,oe=ee===void 0?s.DEFAULT_REALM:ee,fe={},ae=new j(J,s.SDK_NAME,s.SDK_VERSION,V,oe,fe);ae.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var he=new N(ae,Date.now(),this._log),we=void 0;return{reportToInsights:function(ke){var Ge,Ae,Be=ke.report,Ze=Be.stats.jitter||we,tt=Be.stats.rtt||we,Je=Be.stats.packetLoss||we,Ke=Be.mos||we,Me=new Map;Be.iceCandidateStats.forEach(function(Re){if(Re.candidateType&&Re.protocol){var qe=Me.get(Re.candidateType)||[];qe.indexOf(Re.protocol)<0&&qe.push(Re.protocol),Me.set(Re.candidateType,qe)}});var me=JSON.stringify(Object.fromEntries(Me)),Ue={name:"report",group:"preflight",level:Be.error?"error":"info",payload:{sessionSID:L,preflightSID:O("PF"),progressEvents:JSON.stringify(Be.progressEvents),testTiming:Be.testTiming,dtlsTiming:Be.networkTiming.dtls,iceTiming:Be.networkTiming.ice,peerConnectionTiming:Be.networkTiming.peerConnection,connectTiming:Be.networkTiming.connect,mediaTiming:Be.networkTiming.media,selectedLocalCandidate:(Ge=Be.selectedIceCandidatePairStats)===null||Ge===void 0?void 0:Ge.localCandidate,selectedRemoteCandidate:(Ae=Be.selectedIceCandidatePairStats)===null||Ae===void 0?void 0:Ae.remoteCandidate,iceCandidateStats:me,jitterStats:Ze,rttStats:tt,packetLossStats:Je,mosStats:Ke,error:Be.error}};he.emit("event",Ue),setTimeout(function(){return ae.disconnect()},2e3)}}},z.prototype._runPreflightTest=function(G,J,M){return n(this,void 0,void 0,function(){var V,ee,oe,fe,ae,he,we,ke,Ge,Ae,Be,Ze,tt=this;return a(this,function(Je){switch(Je.label){case 0:V=[],ee=[],oe=this._setupInsights({token:G,environment:J}).reportToInsights,Je.label=1;case 1:return Je.trys.push([1,8,9,10]),fe=[],[4,this._executePreflightStep("Acquire media",function(){return[(0,v.syntheticAudio)(),(0,m.syntheticVideo)({width:640,height:480})]})];case 2:return V=Je.sent(),this._updateProgress(F.mediaAcquired),this.emit("debug",{localTracks:V}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",function(){return(0,f.getTurnCredentials)(G,M)},new y)];case 3:return ae=Je.sent(),this._connectTiming.stop(),this._updateProgress(F.connected),he=new RTCPeerConnection({iceServers:ae,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),we=new RTCPeerConnection({iceServers:ae,bundlePolicy:"max-bundle"}),ee.push(he),ee.push(we),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",function(){return n(tt,void 0,void 0,function(){var Ke,Me,me,Ue;return a(this,function(Re){switch(Re.label){case 0:return he.addEventListener("icecandidate",function(qe){return qe.candidate&&we.addIceCandidate(qe.candidate)}),we.addEventListener("icecandidate",function(qe){return qe.candidate&&he.addIceCandidate(qe.candidate)}),V.forEach(function(qe){return he.addTrack(qe)}),Ke=new Promise(function(qe){var $=[];we.addEventListener("track",function(H){$.push(H.track),$.length===V.length&&qe($)})}),[4,he.createOffer()];case 1:return Me=Re.sent(),me=Me,[4,he.setLocalDescription(me)];case 2:return Re.sent(),[4,we.setRemoteDescription(me)];case 3:return Re.sent(),[4,we.createAnswer()];case 4:return Ue=Re.sent(),[4,we.setLocalDescription(Ue)];case 5:return Re.sent(),[4,he.setRemoteDescription(Ue)];case 6:return Re.sent(),[4,this._collectNetworkTimings(he)];case 7:return Re.sent(),[2,Ke]}})})},new S)];case 4:return ke=Je.sent(),this.emit("debug",{remoteTracks:ke}),ke.forEach(function(Ke){Ke.addEventListener("ended",function(){return tt._log.warn(Ke.kind+":ended")}),Ke.addEventListener("mute",function(){return tt._log.warn(Ke.kind+":muted")}),Ke.addEventListener("unmute",function(){return tt._log.warn(Ke.kind+":unmuted")})}),this._updateProgress(F.mediaSubscribed),[4,this._executePreflightStep("Wait for tracks to start",function(){return new Promise(function(Ke){var Me=document.createElement("video");Me.autoplay=!0,Me.playsInline=!0,Me.muted=!0,Me.srcObject=new MediaStream(ke),fe.push(Me),tt.emit("debugElement",Me),Me.oncanplay=Ke})},new S)];case 5:return Je.sent(),this._mediaTiming.stop(),this._updateProgress(F.mediaStarted),[4,this._executePreflightStep("Collect stats for duration",function(){return tt._collectRTCStatsForDuration(tt._testDuration,q(),he,we)})];case 6:return Ge=Je.sent(),[4,this._executePreflightStep("Generate report",function(){return tt._generatePreflightReport(Ge)})];case 7:return Ae=Je.sent(),oe({report:Ae}),this.emit("completed",Ae),[3,10];case 8:return Be=Je.sent(),Ze=this._generatePreflightReport(),oe({report:e(e({},Ze),{error:Be?.toString()})}),this.emit("failed",Be,Ze),[3,10];case 9:return ee.forEach(function(Ke){return Ke.close()}),V.forEach(function(Ke){return Ke.stop()}),[7];case 10:return[2]}})})},z.prototype._collectRTCStats=function(G,J,M){return n(this,void 0,void 0,function(){var V,ee,oe,fe,ae,he,we,ke,Ge,Ae,Be,Ze,tt,Je;return a(this,function(Ke){switch(Ke.label){case 0:return[4,(0,u.getCombinedConnectionStats)({publisher:J,subscriber:M})];case 1:return V=Ke.sent(),ee=V.timestamp,oe=V.bytesSent,fe=V.bytesReceived,ae=V.packets,he=V.packetsLost,we=V.roundTripTime,ke=V.jitter,Ge=V.selectedIceCandidatePairStats,Ae=V.iceCandidateStats,Be=G.jitter.length>0,G.jitter.push(ke),G.rtt.push(we),this._sentBytesMovingAverage.putSample(oe,ee),this._receivedBytesMovingAverage.putSample(fe,ee),this._packetLossMovingAverage.putSample(he,ae),Be&&(G.outgoingBitrate.push(this._sentBytesMovingAverage.get()*1e3*8),G.incomingBitrate.push(this._receivedBytesMovingAverage.get()*1e3*8),Ze=this._packetLossMovingAverage.get(),tt=Math.min(100,Ze*100),G.packetLoss.push(tt),Je=(0,c.calculateMOS)(we,ke,Ze),G.mos.push(Je)),G.selectedIceCandidatePairStats||(G.selectedIceCandidatePairStats=Ge),G.iceCandidateStats.length===0&&(G.iceCandidateStats=Ae),[2]}})})},z.prototype._collectRTCStatsForDuration=function(G,J,M,V){return n(this,void 0,void 0,function(){var ee,oe,fe;return a(this,function(ae){switch(ae.label){case 0:return ee=Date.now(),oe=Math.min(1e3,G),[4,(0,g.waitForSometime)(oe)];case 1:return ae.sent(),[4,this._collectRTCStats(J,M,V)];case 2:return ae.sent(),fe=G-(Date.now()-ee),fe>0?[4,this._collectRTCStatsForDuration(fe,J,M,V)]:[3,4];case 3:J=ae.sent(),ae.label=4;case 4:return[2,J]}})})},z.prototype._updateProgress=function(G){var J=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:J,name:G}),this.emit("progress",G)},z})(E);Er.PreflightTest=K;function q(){return{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]}}function W(B,z){z===void 0&&(z={});var G=new K(B,z);return G}return Er}var Vo,aw;function tv(){if(aw)return Vo;aw=1;var i=Vo&&Vo.__read||function(a,s){var o=typeof Symbol=="function"&&a[Symbol.iterator];if(!o)return a;var c=o.call(a),u,f=[],h;try{for(;(s===void 0||s-- >0)&&!(u=c.next()).done;)f.push(u.value)}catch(v){h={error:v}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(h)throw h.error}}return f},e=Vo&&Vo.__spreadArray||function(a,s,o){if(o||arguments.length===2)for(var c=0,u=s.length,f;c<u;c++)(f||!(c in s))&&(f||(f=Array.prototype.slice.call(s,0,c)),f[c]=s[c]);return a.concat(f||Array.prototype.slice.call(s))},n=(function(){function a(s,o){var c=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:o}}),Object.defineProperty(this,"_promise",{value:new Promise(function(u,f){s(function(h){c._isCancelable=!1,u(h)},function(h){c._isCancelable=!1,f(h)},function(){return c._isCanceled})})})}return a.reject=function(s){return new a(function(c,u){u(s)},function(){})},a.resolve=function(s){return new a(function(c){c(s)},function(){})},a.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},a.prototype.catch=function(){var s=[].slice.call(arguments),o=this._promise;return new a(function(u,f){o.catch.apply(o,e([],i(s),!1)).then(u,f)},this._onCancel)},a.prototype.then=function(){var s=[].slice.call(arguments),o=this._promise;return new a(function(u,f){o.then.apply(o,e([],i(s),!1)).then(u,f)},this._onCancel)},a.prototype.finally=function(){var s=[].slice.call(arguments),o=this._promise;return new a(function(u,f){o.finally.apply(o,e([],i(s),!1)).then(u,f)},this._onCancel)},a})();return Vo=n,Vo}var Mh,sw;function TI(){if(sw)return Mh;sw=1;var i=tv();function e(n,a,s,o){var c,u=new Error("Canceled");return new i(function(h,v,m){var g;n(function(w){return m()?i.reject(u):(g=a(w),s(g).then(function(T){if(m())throw u;return c=T(),c}))}).then(function(w){if(m())throw w.disconnect(),u;h(o(g,w))}).catch(function(w){v(w)})},function(){c&&c.cancel()})}return Mh=e,Mh}var oc,cw;function EI(){if(cw)return oc;cw=1;var i=oc&&oc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=pr().EventEmitter,n=(function(a){i(s,a);function s(o,c){var u=a.call(this)||this;return o=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},o),Object.defineProperties(u,{maxAudioBitrate:{value:o.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:o.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:c}}),u}return s.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},s.prototype.update=function(o){var c=this;o=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},o);var u=["maxAudioBitrate","maxVideoBitrate"].reduce(function(f,h){return c[h]!==o[h]&&(c[h]=o[h],f=!0),f},!1);u&&this.emit("changed")},s})(e);return oc=n,oc}var ac={},uw;function KT(){if(uw)return ac;uw=1;var i=_t().isNonArrayObject,e=Et(),n=e.typeErrors,a=e.clientTrackSwitchOffControl,s=e.videoContentPreferencesMode,o=e.subscriptionMode,c=e.trackPriority,u=e.trackSwitchOffMode;function f(g){var _=v(g,"options.bandwidthProfile");return!g||_||(_=v(g.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(s)},{prop:"dominantSpeakerPriority",values:Object.values(c)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(o)},{prop:"clientTrackSwitchOffControl",values:Object.values(a)},{prop:"trackSwitchOffMode",values:Object.values(u)}]),_)?_:g.video?"maxTracks"in g.video&&"clientTrackSwitchOffControl"in g.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in g.video&&"contentPreferencesMode"in g.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):m(g.video.renderDimensions):null}function h(g,_){if(!(g instanceof _.LocalAudioTrack||g instanceof _.LocalDataTrack||g instanceof _.LocalVideoTrack||g instanceof _.MediaStreamTrack))throw n.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}function v(g,_,w){return w===void 0&&(w=[]),typeof g>"u"?null:g===null||!i(g)?n.INVALID_TYPE(_,"object"):w.reduce(function(E,T){var N=T.prop,j=T.type,x=T.values;if(E||!(N in g))return E;var O=g[N];return j&&typeof O!==j||j==="number"&&isNaN(O)?n.INVALID_TYPE("".concat(_,".").concat(N),j):Array.isArray(x)&&!x.includes(O)?n.INVALID_VALUE("".concat(_,".").concat(N),x):E},null)}function m(g){var _="options.bandwidthProfile.video.renderDimensions",w=v(g,_);return g?w||Object.values(c).reduce(function(E,T){return E||v(g[T],"".concat(_,".").concat(T),[{prop:"height",type:"number"},{prop:"width",type:"number"}])},null):w}return ac.validateBandwidthProfile=f,ac.validateLocalTrack=h,ac.validateObject=v,ac}var sc,lw;function QT(){if(lw)return sc;lw=1;var i=sc&&sc.__extends||(function(){var h=function(v,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&(g[w]=_[w])},h(v,m)};return function(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");h(v,m);function g(){this.constructor=v}v.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}})(),e=Iu(),n=_t(),a=n.buildLogLevels,s=n.valueToJSON,o=Et().DEFAULT_LOG_LEVEL,c=cn(),u=0,f=(function(h){i(v,h);function v(m,g,_){var w=h.call(this)||this;_=Object.assign({logLevel:o},_);var E=a(_.logLevel);return Object.defineProperties(w,{_instanceId:{value:u++},_log:{value:_.log?_.log.createLog("default",w):new c("default",w,E,_.loggerName)},trackName:{enumerable:!0,value:m},trackSid:{enumerable:!0,value:g}}),w}return v.prototype.toJSON=function(){return s(this)},v.prototype.toString=function(){return"[TrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},v})(e);return sc=f,sc}var ci,fw;function rv(){if(fw)return ci;fw=1;var i=ci&&ci.__extends||(function(){var f=function(h,v){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(m[_]=g[_])},f(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");f(h,v);function m(){this.constructor=h}h.prototype=v===null?Object.create(v):(m.prototype=v.prototype,new m)}})(),e=ci&&ci.__read||function(f,h){var v=typeof Symbol=="function"&&f[Symbol.iterator];if(!v)return f;var m=v.call(f),g,_=[],w;try{for(;(h===void 0||h-- >0)&&!(g=m.next()).done;)_.push(g.value)}catch(E){w={error:E}}finally{try{g&&!g.done&&(v=m.return)&&v.call(m)}finally{if(w)throw w.error}}return _},n=ci&&ci.__spreadArray||function(f,h,v){if(v||arguments.length===2)for(var m=0,g=h.length,_;m<g;m++)(_||!(m in h))&&(_||(_=Array.prototype.slice.call(h,0,m)),_[m]=h[m]);return f.concat(_||Array.prototype.slice.call(h))},a=QT(),s=Et(),o=s.typeErrors,c=s.trackPriority,u=(function(f){i(h,f);function h(v,m,g,_){var w=f.call(this,m.name,v.sid,_)||this;return Object.defineProperties(w,{_reemitSignalingEvent:{value:function(){for(var E=[],T=0;T<arguments.length;T++)E[T]=arguments[T];return w.emit.apply(w,n([E&&E.length?"warning":"warningsCleared"],e(E),!1))}},_reemitTrackEvent:{value:function(){return w.emit(w.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:v},_unpublish:{value:g},isTrackEnabled:{enumerable:!0,get:function(){return this.track.kind==="data"?!0:this.track.isEnabled}},kind:{enumerable:!0,value:m.kind},priority:{enumerable:!0,get:function(){return v.updatedPriority}},track:{enumerable:!0,value:m}}),["disabled","enabled"].forEach(function(E){return m.on(E,w._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(E){return v.on(E,w._reemitSignalingEvent)}),w}return h.prototype.toString=function(){return"[LocalTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},h.prototype.setPriority=function(v){var m=Object.values(c);if(!m.includes(v))throw o.INVALID_VALUE("priority",m);return this._signaling.setPriority(v),this},h.prototype.unpublish=function(){var v=this;return["disabled","enabled"].forEach(function(m){return v.track.removeListener(m,v._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(m){return v._signaling.removeListener(m,v._reemitSignalingEvent)}),this._unpublish(this),this},h})(a);return ci=u,ci}var cc,dw;function bI(){if(dw)return cc;dw=1;var i=cc&&cc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=rv(),n=(function(a){i(s,a);function s(o,c,u,f){return a.call(this,o,c,u,f)||this}return s.prototype.toString=function(){return"[LocalAudioTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},s})(e);return cc=n,cc}var uc,hw;function CI(){if(hw)return uc;hw=1;var i=uc&&uc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=rv(),n=(function(a){i(s,a);function s(o,c,u,f){return a.call(this,o,c,u,f)||this}return s.prototype.toString=function(){return"[LocalDataTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},s})(e);return uc=n,uc}var lc,pw;function PI(){if(pw)return lc;pw=1;var i=lc&&lc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=rv(),n=(function(a){i(s,a);function s(o,c,u,f){return a.call(this,o,c,u,f)||this}return s.prototype.toString=function(){return"[LocalVideoTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},s})(e);return lc=n,lc}var ui,vw;function JT(){if(vw)return ui;vw=1;var i=ui&&ui.__extends||(function(){var v=function(m,g){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,w){_.__proto__=w}||function(_,w){for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&(_[E]=w[E])},v(m,g)};return function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");v(m,g);function _(){this.constructor=m}m.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}})(),e=ui&&ui.__read||function(v,m){var g=typeof Symbol=="function"&&v[Symbol.iterator];if(!g)return v;var _=g.call(v),w,E=[],T;try{for(;(m===void 0||m-- >0)&&!(w=_.next()).done;)E.push(w.value)}catch(N){T={error:N}}finally{try{w&&!w.done&&(g=_.return)&&g.call(_)}finally{if(T)throw T.error}}return E},n=ui&&ui.__spreadArray||function(v,m,g){if(g||arguments.length===2)for(var _=0,w=m.length,E;_<w;_++)(E||!(_ in m))&&(E||(E=Array.prototype.slice.call(m,0,_)),E[_]=m[_]);return v.concat(E||Array.prototype.slice.call(m))},a=Et(),s=a.typeErrors,o=a.trackPriority,c=aa().isIOS,u=gf();function f(v){return(function(m){i(g,m);function g(_,w,E,T,N,j,x){var O=this;return x=Object.assign({workaroundWebKitBug212780:c()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"},x),O=m.call(this,w,x)||this,Object.defineProperties(O,{_isEnabled:{value:E,writable:!0},_isSwitchedOff:{value:T,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:N},_setRenderHint:{value:function(L){O._log.debug("updating render hint:",L),j(L)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:_},_workaroundWebKitBug212780:{value:x.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),O}return g.prototype.setPriority=function(_){var w=n([null],e(Object.values(o)),!1);if(!w.includes(_))throw s.INVALID_VALUE("priority",w);return this._priority!==_&&(this._priority=_,this._setPriority(_)),this},g.prototype._setEnabled=function(_){this._isEnabled!==_&&(this._isEnabled=_,this.emit(this._isEnabled?"enabled":"disabled",this))},g.prototype._setSwitchedOff=function(_){this._isSwitchedOff!==_&&(this._isSwitchedOff=_,this.emit(_?"switchedOff":"switchedOn",this))},g.prototype.attach=function(_){var w=m.prototype.attach.call(this,_);return this.mediaStreamTrack.enabled!==!0&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||h(this)),w},g.prototype.detach=function(_){var w=m.prototype.detach.call(this,_);return this._attachments.size===0&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),w},g})(v)}function h(v){var m=v._log,g=v.kind;function _(w){w&&v._attachments.forEach(function(E){var T=v._elShims.get(E),N=E.paused&&T&&!T.pausedIntentionally();N&&(m.info("Playing inadvertently paused <".concat(g,"> element")),m.debug("Element:",E),m.debug("RemoteMediaTrack:",v),E.play().then(function(){m.info("Successfully played inadvertently paused <".concat(g,"> element")),m.debug("Element:",E),m.debug("RemoteMediaTrack:",v)}).catch(function(j){m.warn("Error while playing inadvertently paused <".concat(g,"> element:"),{err:j,el:E,remoteMediaTrack:v})}))})}return u.onVisibilityChange(2,_),function(){u.offVisibilityChange(2,_)}}return ui=f,ui}var fc,mw;function RI(){if(mw)return fc;mw=1;var i=fc&&fc.__extends||(function(){var o=function(c,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(f[v]=h[v])},o(c,u)};return function(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");o(c,u);function f(){this.constructor=c}c.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}})(),e=xT(),n=JT(),a=n(e),s=(function(o){i(c,o);function c(u,f,h,v,m,g,_){return o.call(this,u,f,h,v,m,g,_)||this}return c.prototype.toString=function(){return"[RemoteAudioTrack #".concat(this._instanceId,": ").concat(this.sid,"]")},c.prototype._start=function(){o.prototype._start.call(this),this._dummyEl&&(this._disposeMediaElement?this._disposeMediaElement(this._dummyEl):this._dummyEl.srcObject=null,this._dummyEl=null)},c.prototype.setPriority=function(u){return o.prototype.setPriority.call(this,u)},c})(a);return fc=s,fc}var dc,gw;function nv(){if(gw)return dc;gw=1;var i=dc&&dc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=QT(),n=(function(a){i(s,a);function s(o,c){var u=a.call(this,o.name,o.sid,c)||this;Object.defineProperties(u,{_signaling:{value:o},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return o.isEnabled}},kind:{enumerable:!0,value:o.kind},publishPriority:{enumerable:!0,get:function(){return o.priority}},track:{enumerable:!0,get:function(){return this._track}}});var f=o.error,h=o.isEnabled,v=o.isSwitchedOff,m=o.priority;return o.on("updated",function(){if(f!==o.error){f=o.error,u.emit("subscriptionFailed",o.error);return}h!==o.isEnabled&&(h=o.isEnabled,u.track&&u.track._setEnabled(o.isEnabled),u.emit(o.isEnabled?"trackEnabled":"trackDisabled")),v!==o.isSwitchedOff&&(u._log.debug("".concat(u.trackSid,": ").concat(v?"OFF":"ON"," => ").concat(o.isSwitchedOff?"OFF":"ON")),v=o.isSwitchedOff,u.track?(u.track._setSwitchedOff(o.isSwitchedOff),u.emit(v?"trackSwitchedOff":"trackSwitchedOn",u.track)):v&&u._log.warn("Track was not subscribed when switched Off.")),m!==o.priority&&(m=o.priority,u.emit("publishPriorityChanged",m))}),u}return s.prototype.toString=function(){return"[RemoteTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},s.prototype._subscribed=function(o){!this._track&&o&&(this._track=o,this.emit("subscribed",o))},s.prototype._unsubscribe=function(){if(this._track){var o=this._track;this._track=null,this.emit("unsubscribed",o)}},s})(e);return dc=n,dc}var hc,yw;function OI(){if(yw)return hc;yw=1;var i=hc&&hc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=nv(),n=(function(a){i(s,a);function s(o,c){return a.call(this,o,c)||this}return s.prototype.toString=function(){return"[RemoteAudioTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},s})(e);return hc=n,hc}var li,_w;function II(){if(_w)return li;_w=1;var i=li&&li.__extends||(function(){var f=function(h,v){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(m[_]=g[_])},f(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");f(h,v);function m(){this.constructor=h}h.prototype=v===null?Object.create(v):(m.prototype=v.prototype,new m)}})(),e=li&&li.__read||function(f,h){var v=typeof Symbol=="function"&&f[Symbol.iterator];if(!v)return f;var m=v.call(f),g,_=[],w;try{for(;(h===void 0||h-- >0)&&!(g=m.next()).done;)_.push(g.value)}catch(E){w={error:E}}finally{try{g&&!g.done&&(v=m.return)&&v.call(m)}finally{if(w)throw w.error}}return _},n=li&&li.__spreadArray||function(f,h,v){if(v||arguments.length===2)for(var m=0,g=h.length,_;m<g;m++)(_||!(m in h))&&(_||(_=Array.prototype.slice.call(h,0,m)),_[m]=h[m]);return f.concat(_||Array.prototype.slice.call(h))},a=ev(),s=Et(),o=s.typeErrors,c=s.trackPriority,u=(function(f){i(h,f);function h(v,m,g){var _=f.call(this,m.id,"data",g)||this;return Object.defineProperties(_,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:m.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:m.maxRetransmits},ordered:{enumerable:!0,value:m.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:m.maxPacketLifeTime===null&&m.maxRetransmits===null},sid:{enumerable:!0,value:v}}),m.on("message",function(w){_.emit("message",w,_)}),_}return h.prototype.setPriority=function(v){var m=n([null],e(Object.values(c)),!1);if(!m.includes(v))throw o.INVALID_VALUE("priority",m);return this._priority=v,this},h.prototype._setEnabled=function(){},h.prototype._setSwitchedOff=function(v){this._isSwitchedOff!==v&&(this._isSwitchedOff=v,this.emit(v?"switchedOff":"switchedOn",this))},h})(a);return li=u,li}var pc,ww;function LI(){if(ww)return pc;ww=1;var i=pc&&pc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=nv(),n=(function(a){i(s,a);function s(o,c){return a.call(this,o,c)||this}return s.prototype.toString=function(){return"[RemoteDataTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},s})(e);return pc=n,pc}var vc,Sw;function AI(){if(Sw)return vc;Sw=1;var i=vc&&vc.__extends||(function(){var s=function(o,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])},s(o,c)};return function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(o,c);function u(){this.constructor=o}o.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}})(),e=(function(){function s(o){Object.defineProperties(this,{_callback:{value:o}})}return s.prototype.observe=function(){},s.prototype.unobserve=function(){},s.prototype.makeVisible=function(o){var c=this._makeFakeEntry(o,!0);this._callback([c])},s.prototype.makeInvisible=function(o){var c=this._makeFakeEntry(o,!1);this._callback([c])},s.prototype._makeFakeEntry=function(o,c){return{target:o,isIntersecting:c}},s})(),n=(function(s){i(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o})(e),a=(function(s){i(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.resize=function(c){var u=this._makeFakeEntry(c,!0);this._callback([u])},o})(e);return vc={NullIntersectionObserver:n,NullResizeObserver:a,NullObserver:e},vc}var Bo,kw;function xI(){if(kw)return Bo;kw=1;var i=Bo&&Bo.__extends||(function(){var w=function(E,T){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,j){N.__proto__=j}||function(N,j){for(var x in j)Object.prototype.hasOwnProperty.call(j,x)&&(N[x]=j[x])},w(E,T)};return function(E,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");w(E,T);function N(){this.constructor=E}E.prototype=T===null?Object.create(T):(N.prototype=T.prototype,new N)}})(),e=Bo&&Bo.__read||function(w,E){var T=typeof Symbol=="function"&&w[Symbol.iterator];if(!T)return w;var N=T.call(w),j,x=[],O;try{for(;(E===void 0||E-- >0)&&!(j=N.next()).done;)x.push(j.value)}catch(L){O={error:L}}finally{try{j&&!j.done&&(T=N.return)&&T.call(N)}finally{if(O)throw O.error}}return x},n=JT(),a=BT(),s=gf(),o=AI().NullObserver,c=sa(),u=n(a),f=50,h=(function(w){i(E,w);function E(T,N,j,x,O,L,b){var y=this;return b=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},b),b=Object.assign({IntersectionObserver:typeof IntersectionObserver>"u"||b.clientTrackSwitchOffControl!=="auto"?o:IntersectionObserver,ResizeObserver:typeof ResizeObserver>"u"||b.contentPreferencesMode!=="auto"?o:ResizeObserver},b),y=w.call(this,T,N,j,x,O,L,b)||this,Object.defineProperties(y,{_enableDocumentVisibilityTurnOff:{value:b.enableDocumentVisibilityTurnOff===!0&&b.clientTrackSwitchOffControl==="auto"},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:b.clientTrackSwitchOffControl},_contentPreferencesMode:{value:b.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new c(function(){y._setRenderHint({enabled:!1})},f,!1)},_resizeObserver:{value:new b.ResizeObserver(function(S){var C=S.find(function(A){return!y._invisibleElements.has(A.target)});C&&g(y)})},_intersectionObserver:{value:new b.IntersectionObserver(function(S){var C=!1;S.forEach(function(A){var F=!y._invisibleElements.has(A.target);F!==A.isIntersecting&&(A.isIntersecting?(y._log.debug("intersectionObserver detected: Off => On"),y._invisibleElements.delete(A.target)):(y._log.debug("intersectionObserver detected: On => Off"),y._invisibleElements.add(A.target)),C=!0)}),C&&(m(y),g(y))},{threshold:.25})}}),y}return E.prototype._start=function(T){var N=w.prototype._start.call(this,T);return m(this),N},E.prototype.switchOn=function(){if(this._clientTrackSwitchOffControl!=="manual")throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},E.prototype.switchOff=function(){if(this._clientTrackSwitchOffControl!=="manual")throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},E.prototype.setContentPreferences=function(T){if(this._contentPreferencesMode!=="manual")throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return T.renderDimensions&&this._setRenderHint({renderDimensions:T.renderDimensions}),this},E.prototype._unObservePip=function(T){var N=this._elToPipCallbacks.get(T);N&&(T.removeEventListener("enterpictureinpicture",N.onEnterPip),T.removeEventListener("leavepictureinpicture",N.onLeavePip),this._elToPipCallbacks.delete(T))},E.prototype._observePip=function(T){var N=this,j=this._elToPipCallbacks.get(T);if(!j){var x=function(b){return N._onEnterPip(b,T)},O=function(b){return N._onLeavePip(b,T)},L=function(b){return N._onResizePip(b,T)};T.addEventListener("enterpictureinpicture",x),T.addEventListener("leavepictureinpicture",O),this._elToPipCallbacks.set(T,{onEnterPip:x,onLeavePip:O,onResizePip:L})}},E.prototype._onEnterPip=function(T,N){this._log.debug("onEnterPip");var j=T.pictureInPictureWindow;this._elToPipWindows.set(N,j);var x=this._elToPipCallbacks.get(N).onResizePip;j.addEventListener("resize",x),m(this)},E.prototype._onLeavePip=function(T,N){this._log.debug("onLeavePip"),this._elToPipWindows.delete(N);var j=this._elToPipCallbacks.get(N).onResizePip,x=T.pictureInPictureWindow;x.removeEventListener("resize",j),m(this)},E.prototype._onResizePip=function(){g(this)},E.prototype.attach=function(T){var N=w.prototype.attach.call(this,T);return this._clientTrackSwitchOffControl==="auto"&&this._invisibleElements.add(N),this._intersectionObserver.observe(N),this._resizeObserver.observe(N),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||_(this)),this._observePip(N),N},E.prototype.detach=function(T){var N=this,j=w.prototype.detach.call(this,T),x=Array.isArray(j)?j:[j];return x.forEach(function(O){N._intersectionObserver.unobserve(O),N._resizeObserver.unobserve(O),N._invisibleElements.delete(O),N._unObservePip(O)}),this._attachments.size===0&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),m(this),g(this),j},E.prototype.addProcessor=function(){return w.prototype.addProcessor.apply(this,arguments)},E.prototype.removeProcessor=function(){return w.prototype.removeProcessor.apply(this,arguments)},E.prototype.toString=function(){return"[RemoteVideoTrack #".concat(this._instanceId,": ").concat(this.sid,"]")},E.prototype.setPriority=function(T){return w.prototype.setPriority.call(this,T)},E})(u);function v(w){if(!("documentPictureInPicture"in globalThis))return!1;var E=globalThis.documentPictureInPicture.window;if(!E)return!1;var T=new WeakSet(E.document.querySelectorAll("video"));return w._getAllAttachedElements().some(function(N){return T.has(N)})}function m(w){if(w._clientTrackSwitchOffControl==="auto"){var E=w._getAllAttachedElements().filter(function(j){return!w._invisibleElements.has(j)}),T=w._getAllAttachedElements().filter(function(j){return w._elToPipWindows.has(j)}),N=T.length>0||v(w)||document.visibilityState==="visible"&&E.length>0;N===!0?(w._turnOffTimer.clear(),w._setRenderHint({enabled:!0}),a._ensureDocumentPipVideosPlaying(w)):w._turnOffTimer.isSet||w._turnOffTimer.start()}}function g(w){if(w._contentPreferencesMode==="auto"){var E=w._getAllAttachedElements().filter(function(y){return!w._invisibleElements.has(y)}),T=w._getAllAttachedElements().map(function(y){var S=w._elToPipWindows.get(y);return S?{clientHeight:S.height,clientWidth:S.width}:{clientHeight:0,clientWidth:0}}),N=E.concat(T);if(N.length>0){var j=e(N.sort(function(y,S){return S.clientHeight+S.clientWidth-y.clientHeight-y.clientWidth-1}),1),x=j[0],O=x.clientHeight,L=x.clientWidth,b={height:O,width:L};w._setRenderHint({renderDimensions:b})}}}function _(w){function E(){m(w)}return s.onVisibilityChange(1,E),function(){s.offVisibilityChange(1,E)}}return Bo=h,Bo}var mc,Tw;function DI(){if(Tw)return mc;Tw=1;var i=mc&&mc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=nv(),n=(function(a){i(s,a);function s(o,c){return a.call(this,o,c)||this}return s.prototype.toString=function(){return"[RemoteVideoTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},s})(e);return mc=n,mc}var fi,Ew;function YT(){if(Ew)return fi;Ew=1;var i=fi&&fi.__extends||(function(){var N=function(j,x){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,L){O.__proto__=L}||function(O,L){for(var b in L)Object.prototype.hasOwnProperty.call(L,b)&&(O[b]=L[b])},N(j,x)};return function(j,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");N(j,x);function O(){this.constructor=j}j.prototype=x===null?Object.create(x):(O.prototype=x.prototype,new O)}})(),e=fi&&fi.__read||function(N,j){var x=typeof Symbol=="function"&&N[Symbol.iterator];if(!x)return N;var O=x.call(N),L,b=[],y;try{for(;(j===void 0||j-- >0)&&!(L=O.next()).done;)b.push(L.value)}catch(S){y={error:S}}finally{try{L&&!L.done&&(x=O.return)&&x.call(O)}finally{if(y)throw y.error}}return b},n=fi&&fi.__spreadArray||function(N,j,x){if(x||arguments.length===2)for(var O=0,L=j.length,b;O<L;O++)(b||!(O in j))&&(b||(b=Array.prototype.slice.call(j,0,O)),b[O]=j[O]);return N.concat(b||Array.prototype.slice.call(j))},a=Iu(),s=RI(),o=OI(),c=II(),u=LI(),f=xI(),h=DI(),v=_t(),m=0,g=(function(N){i(j,N);function j(x,O){var L=N.call(this)||this;O=Object.assign({RemoteAudioTrack:s,RemoteAudioTrackPublication:o,RemoteDataTrack:c,RemoteDataTrackPublication:u,RemoteVideoTrack:f,RemoteVideoTrackPublication:h,tracks:[]},O);var b=_(O.tracks),y=O.log.createLog("default",L),S=new Map(b.audioTracks),C=new Map(b.dataTracks),A=new Map(b.tracks),F=new Map(b.videoTracks);return Object.defineProperties(L,{_RemoteAudioTrack:{value:O.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:O.RemoteAudioTrackPublication},_RemoteDataTrack:{value:O.RemoteDataTrack},_RemoteDataTrackPublication:{value:O.RemoteDataTrackPublication},_RemoteVideoTrack:{value:O.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:O.RemoteVideoTrackPublication},_audioTracks:{value:S},_dataTracks:{value:C},_instanceId:{value:++m},_clientTrackSwitchOffControl:{value:O.clientTrackSwitchOffControl},_contentPreferencesMode:{value:O.contentPreferencesMode},_log:{value:y},_signaling:{value:x},_tracks:{value:A},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:F},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return x.identity}},networkQualityLevel:{enumerable:!0,get:function(){return x.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return x.networkQualityStats}},sid:{enumerable:!0,get:function(){return x.sid}},state:{enumerable:!0,get:function(){return x.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map},_MediaStream:{value:O.MediaStream},_mapMediaElement:{value:O.mapMediaElement},_disposeMediaElement:{value:O.disposeMediaElement}}),L._tracks.forEach(E.bind(null,L)),x.on("networkQualityLevelChanged",function(){return L.emit("networkQualityLevelChanged",L.networkQualityLevel,L.networkQualityStats&&(L.networkQualityStats.audio||L.networkQualityStats.video)?L.networkQualityStats:null)}),w(L,x),y.info("Created a new Participant".concat(L.identity?": ".concat(L.identity):"")),L}return j.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},j.prototype._getTrackPublicationEvents=function(){return[]},j.prototype.toString=function(){return"[Participant #".concat(this._instanceId,": ").concat(this.sid,"]")},j.prototype._addTrack=function(x,O){var L=this._log;if(this._tracks.has(O))return null;this._tracks.set(O,x);var b={audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[x.kind];return b.set(O,x),E(this,x,O),L.info("Added a new ".concat(v.trackClass(x),":"),O),L.debug("".concat(v.trackClass(x),":"),x),x},j.prototype._addTrackPublication=function(x){var O=this._log;if(this.tracks.has(x.trackSid))return null;this.tracks.set(x.trackSid,x);var L={audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[x.kind];return L.set(x.trackSid,x),T(this,x),O.info("Added a new ".concat(v.trackPublicationClass(x),":"),x.trackSid),O.debug("".concat(v.trackPublicationClass(x),":"),x),x},j.prototype._handleTrackSignalingEvents=function(){var x=this,O=x._log,L=x._clientTrackSwitchOffControl,b=x._contentPreferencesMode,y=x._MediaStream,S=x._mapMediaElement,C=x._disposeMediaElement,A=this;if(this.state==="disconnected")return;var F=this._RemoteAudioTrack,D=this._RemoteAudioTrackPublication,P=this._RemoteVideoTrack,K=this._RemoteVideoTrackPublication,q=this._RemoteDataTrack,W=this._RemoteDataTrackPublication,B=this._signaling;function z(V){var ee={audio:D,data:W,video:K}[V.kind],oe=new ee(V,{log:O});A._addTrackPublication(oe);var fe=V.isSubscribed;fe&&J(V),A._trackSignalingUpdatedEventCallbacks.set(V.sid,function(){if(fe!==V.isSubscribed){if(fe=V.isSubscribed,fe){J(V);return}M(V)}}),V.on("updated",A._trackSignalingUpdatedEventCallbacks.get(V.sid))}function G(V){V.isSubscribed&&V.setTrackTransceiver(null);var ee=A._trackSignalingUpdatedEventCallbacks.get(V.sid);ee&&(V.removeListener("updated",ee),A._trackSignalingUpdatedEventCallbacks.delete(V.sid));var oe=A.tracks.get(V.sid);oe&&A._removeTrackPublication(oe)}function J(V){var ee=V.isEnabled,oe=V.name,fe=V.kind,ae=V.sid,he=V.trackTransceiver,we=V.isSwitchedOff,ke={audio:F,video:P,data:q}[fe],Ge=A.tracks.get(ae);if(!(!ke||fe!==he.kind)){var Ae={log:O,name:oe,clientTrackSwitchOffControl:L,contentPreferencesMode:b,mapMediaElement:S,disposeMediaElement:C};y&&(Ae.MediaStream=y);var Be=function(Je){return B.updateSubscriberTrackPriority(ae,Je)},Ze=function(Je){V.isSubscribed&&B.updateTrackRenderHint(ae,Je)},tt=fe==="data"?new ke(ae,he,Ae):new ke(ae,he,ee,we,Be,Ze,Ae);A._addTrack(tt,Ge,he.id)}}function M(V){var ee=e(Array.from(A._tracks.entries()).find(function(he){var we=e(he,2),ke=we[1];return ke.sid===V.sid}),2),oe=ee[0],fe=ee[1],ae=A.tracks.get(V.sid);fe&&A._removeTrack(fe,ae,oe)}B.on("trackAdded",z),B.on("trackRemoved",G),B.tracks.forEach(z),B.on("stateChanged",function V(ee){ee==="disconnected"?(O.debug("Removing event listeners"),B.removeListener("stateChanged",V),B.removeListener("trackAdded",z),B.removeListener("trackRemoved",G)):ee==="connected"&&(O.info("reconnected"),setTimeout(function(){return A.emit("reconnected")},0))})},j.prototype._removeTrack=function(x,O){if(!this._tracks.has(O))return null;this._tracks.delete(O);var L={audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[x.kind];L.delete(O);var b=this._trackEventReemitters.get(O)||new Map;b.forEach(function(S,C){x.removeListener(C,S)});var y=this._log;return y.info("Removed a ".concat(v.trackClass(x),":"),O),y.debug("".concat(v.trackClass(x),":"),x),x},j.prototype._removeTrackPublication=function(x){if(x=this.tracks.get(x.trackSid),!x)return null;this.tracks.delete(x.trackSid);var O={audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[x.kind];O.delete(x.trackSid);var L=this._trackPublicationEventReemitters.get(x.trackSid)||new Map;L.forEach(function(y,S){x.removeListener(S,y)});var b=this._log;return b.info("Removed a ".concat(v.trackPublicationClass(x),":"),x.trackSid),b.debug("".concat(v.trackPublicationClass(x),":"),x),x},j.prototype.toJSON=function(){return v.valueToJSON(this)},j})(a);function _(N){var j=N.map(function(b){return[b.id,b]}),x=j.filter(function(b){return b[1].kind==="audio"}),O=j.filter(function(b){return b[1].kind==="video"}),L=j.filter(function(b){return b[1].kind==="data"});return{audioTracks:x,dataTracks:L,tracks:j,videoTracks:O}}function w(N,j){var x=N._log;N.state!=="disconnected"&&j.on("stateChanged",function O(L){x.debug("Transitioned to state:",L),N.emit(L,N),L==="disconnected"&&(x.debug("Removing Track event reemitters"),j.removeListener("stateChanged",O),N._tracks.forEach(function(b){var y=N._trackEventReemitters.get(b.id);b&&y&&y.forEach(function(S,C){b.removeListener(C,S)})}),j.tracks.forEach(function(b){var y=N._tracks.get(b.id),S=N._trackEventReemitters.get(b.id);y&&S&&S.forEach(function(C,A){y.removeListener(A,C)})}),N._trackEventReemitters.clear(),N.tracks.forEach(function(b){N._trackPublicationEventReemitters.get(b.trackSid).forEach(function(y,S){b.removeListener(S,y)})}),N._trackPublicationEventReemitters.clear())})}function E(N,j,x){var O=new Map;N.state!=="disconnected"&&(N._getTrackEvents().forEach(function(L){var b=L[0],y=L[1];O.set(b,function(){var S=[y].concat([].slice.call(arguments));return N.emit.apply(N,n([],e(S),!1))}),j.on(b,O.get(b))}),N._trackEventReemitters.set(x,O))}function T(N,j){var x=new Map;N.state!=="disconnected"&&(N._getTrackPublicationEvents().forEach(function(O){var L=e(O,2),b=L[0],y=L[1];x.set(b,function(){for(var S=[],C=0;C<arguments.length;C++)S[C]=arguments[C];N.emit.apply(N,n(n([y],e(S),!1),[j],!1))}),j.on(b,x.get(b))}),N._trackPublicationEventReemitters.set(j.trackSid,x))}return fi=g,fi}var gc,bw;function MI(){if(bw)return gc;bw=1;var i=gc&&gc.__extends||(function(){var O=function(L,b){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,S){y.__proto__=S}||function(y,S){for(var C in S)Object.prototype.hasOwnProperty.call(S,C)&&(y[C]=S[C])},O(L,b)};return function(L,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");O(L,b);function y(){this.constructor=L}L.prototype=b===null?Object.create(b):(y.prototype=b.prototype,new y)}})(),e=oa().MediaStreamTrack,n=_t(),a=n.asLocalTrack,s=n.asLocalTrackPublication,o=n.trackClass,c=Et(),u=c.typeErrors,f=c.trackPriority,h=KT().validateLocalTrack,v=Ka(),m=v.LocalAudioTrack,g=v.LocalDataTrack,_=v.LocalVideoTrack,w=bI(),E=CI(),T=PI(),N=YT(),j=(function(O){i(L,O);function L(b,y,S){var C=this;S=Object.assign({LocalAudioTrack:m,LocalVideoTrack:_,LocalDataTrack:g,MediaStreamTrack:e,LocalAudioTrackPublication:w,LocalVideoTrackPublication:T,LocalDataTrackPublication:E,shouldStopLocalTracks:!1,tracks:y},S);var A=S.shouldStopLocalTracks?new Set(y.filter(function(F){return F.kind!=="data"})):new Set;return C=O.call(this,b,S)||this,Object.defineProperties(C,{_eventObserver:{value:S.eventObserver},_LocalAudioTrack:{value:S.LocalAudioTrack},_LocalDataTrack:{value:S.LocalDataTrack},_LocalVideoTrack:{value:S.LocalVideoTrack},_MediaStreamTrack:{value:S.MediaStreamTrack},_LocalAudioTrackPublication:{value:S.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:S.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:S.LocalVideoTrackPublication},_tracksToStop:{value:A},signalingRegion:{enumerable:!0,get:function(){return b.signalingRegion}}}),C._handleTrackSignalingEvents(),C}return L.prototype._addTrack=function(b,y,S){var C=O.prototype._addTrack.call(this,b,y);return C&&this.state!=="disconnected"&&this._addLocalTrack(b,S),C},L.prototype._addLocalTrack=function(b,y){var S,C=(S=b.noiseCancellation)===null||S===void 0?void 0:S.vendor;this._signaling.addTrack(b._trackSender,b.name,y,C),this._log.info("Added a new ".concat(o(b,!0),":"),b.id),this._log.debug("".concat(o(b,!0),":"),b)},L.prototype._removeTrack=function(b,y){var S=O.prototype._removeTrack.call(this,b,y);return S&&this.state!=="disconnected"&&(this._signaling.removeTrack(b._trackSender),this._log.info("Removed a ".concat(o(b,!0),":"),b.id),this._log.debug("".concat(o(b,!0),":"),b)),S},L.prototype._getTrackEvents=function(){return O.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},L.prototype.toString=function(){return"[LocalParticipant #".concat(this._instanceId).concat(this.sid?": ".concat(this.sid):"","]")},L.prototype._handleTrackSignalingEvents=function(){var b=this,y=this._log;if(this.state!=="disconnected"){var S=function(D){var P=b._signaling.getPublication(D._trackSender);P&&(P.disable(),y.debug("Disabled the ".concat(o(D,!0),":"),D.id))},C=function(D){var P=b._signaling.getPublication(D._trackSender);P&&(P.enable(),y.debug("Enabled the ".concat(o(D,!0),":"),D.id))},A=function(D){var P=b._signaling.getPublication(D._trackSender);return P&&P.stop(),P},F=function(D){y.debug("Transitioned to state:",D),D==="disconnected"?(y.debug("Removing LocalTrack event listeners"),b._signaling.removeListener("stateChanged",F),b.removeListener("trackDisabled",S),b.removeListener("trackEnabled",C),b.removeListener("trackStopped",A),b._tracks.forEach(function(P){var K=A(P);K&&P._trackSender.removeClone(K._trackTransceiver)}),y.info("LocalParticipant disconnected. Stopping ".concat(b._tracksToStop.size," automatically-acquired LocalTracks")),b._tracksToStop.forEach(function(P){P.stop()})):D==="connected"&&(y.info("reconnected"),setTimeout(function(){return b.emit("reconnected")},0))};this.on("trackDisabled",S),this.on("trackEnabled",C),this.on("trackStopped",A),this._signaling.on("stateChanged",F),this._tracks.forEach(function(D){b._addLocalTrack(D,f.PRIORITY_STANDARD),b._getOrCreateLocalTrackPublication(D).catch(function(P){y.warn("Failed to get or create LocalTrackPublication for ".concat(D,":"),P)})})}},L.prototype._getOrCreateLocalTrackPublication=function(b){var y=x(this.tracks,b);if(y)return Promise.resolve(y);var S=this._log,C=this,A=this._signaling.getPublication(b._trackSender);return A?new Promise(function(F,D){function P(){var K=A.error;if(K){A.removeListener("updated",P),S.warn("Failed to publish the ".concat(o(b,!0),": ").concat(K.message)),C._removeTrack(b,b.id),setTimeout(function(){C.emit("trackPublicationFailed",K,b)}),D(K);return}if(!C._tracks.has(b.id)){A.removeListener("updated",P),D(new Error("The ".concat(b," was unpublished")));return}var q=A.sid;if(q){A.removeListener("updated",P);var W={log:S,LocalAudioTrackPublication:C._LocalAudioTrackPublication,LocalDataTrackPublication:C._LocalDataTrackPublication,LocalVideoTrackPublication:C._LocalVideoTrackPublication};y=x(C.tracks,b);var B=function(M){return C.emit("trackWarning",M,y)},z=function(){return C.emit("trackWarningsCleared",y)},G=function(M){y.removeListener("trackWarning",B),y.removeListener("trackWarningsCleared",z),C.unpublishTrack(M.track)};y||(y=s(b,A,G,W),C._addTrackPublication(y)),y.on("warning",B),y.on("warningsCleared",z);var J=C._signaling.state;(J==="connected"||J==="connecting")&&(b._processorEventObserver&&b._processorEventObserver.on("event",function(M){C._eventObserver.emit("event",{name:M.name,payload:M.data,group:"video-processor",level:"info"})}),b.processedTrack&&(b._captureFrames(),b._setSenderMediaStreamTrack(!0))),J==="connected"&&setTimeout(function(){C.emit("trackPublished",y)}),F(y)}}A.on("updated",P)}):Promise.reject(new Error("Unexpected error: The ".concat(b," cannot be published")))},L.prototype.publishTrack=function(b,y){var S=x(this.tracks,b);if(S)return Promise.resolve(S);y=Object.assign({log:this._log,priority:f.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},y);var C;try{C=a(b,y)}catch(K){return Promise.reject(K)}var A=C.noiseCancellation,F=this._signaling.audioProcessors;A&&!F.includes(A.vendor)&&(this._log.warn("".concat(A.vendor," is not supported in this room. disabling it permanently")),A.disablePermanently());var D=Object.values(f);if(!D.includes(y.priority))return Promise.reject(u.INVALID_VALUE("LocalTrackPublishOptions.priority",D));var P=this._addTrack(C,C.id,y.priority)||this._tracks.get(C.id);return this._getOrCreateLocalTrackPublication(P)},L.prototype.publishTracks=function(b){if(!Array.isArray(b))throw u.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(b.map(this.publishTrack,this))},L.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},L.prototype.setNetworkQualityConfiguration=function(b){if(typeof b!="object"||b===null)throw u.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach(function(y){if(y in b&&(typeof b[y]!="number"||isNaN(b[y])))throw u.INVALID_TYPE("networkQualityConfiguration.".concat(y),"number")}),this._signaling.setNetworkQualityConfiguration(b),this},L.prototype.setParameters=function(b){if(typeof b<"u"&&typeof b!="object")throw u.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(b){if(this._signaling.getParameters().adaptiveSimulcast&&b.maxVideoBitrate)throw u.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach(function(y){if(typeof b[y]<"u"&&typeof b[y]!="number"&&b[y]!==null)throw u.INVALID_TYPE("encodingParameters.".concat(y),"number, null or undefined")})}else b===null&&(b={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(b),this},L.prototype.unpublishTrack=function(b){h(b,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var y=this._tracks.get(b.id);if(!y)return null;var S=this._signaling.getPublication(y._trackSender);if(S.publishFailed(new Error("The ".concat(y," was unpublished"))),y=this._removeTrack(y,y.id),!y)return null;var C=x(this.tracks,y);return C&&this._removeTrackPublication(C),C},L.prototype.unpublishTracks=function(b){var y=this;if(!Array.isArray(b))throw u.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return b.reduce(function(S,C){var A=y.unpublishTrack(C);return A?S.concat(A):S},[])},L})(N);function x(O,L){return Array.from(O.values()).find(function(b){return b.track===L||b.track.mediaStreamTrack===L})||null}return gc=j,gc}var Nh,Cw;function NI(){if(Cw)return Nh;Cw=1;var i=(function(){function e(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return e.prototype.connect=function(){},e.prototype.disconnect=function(){return this._connected?(this._connected=!1,!0):!1},e.prototype.publish=function(){return this._connected},e})();return Nh=i,Nh}var qo,Pw;function jI(){if(Pw)return qo;Pw=1;var i=qo&&qo.__extends||(function(){var h=function(v,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&(g[w]=_[w])},h(v,m)};return function(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");h(v,m);function g(){this.constructor=v}v.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}})(),e=qo&&qo.__read||function(h,v){var m=typeof Symbol=="function"&&h[Symbol.iterator];if(!m)return h;var g=m.call(h),_,w=[],E;try{for(;(v===void 0||v-- >0)&&!(_=g.next()).done;)w.push(_.value)}catch(T){E={error:T}}finally{try{_&&!_.done&&(m=g.return)&&m.call(g)}finally{if(E)throw E.error}}return w},n=pr().EventEmitter,a=Et(),s=a.DEFAULT_NQ_LEVEL_LOCAL,o=a.DEFAULT_NQ_LEVEL_REMOTE,c=a.MAX_NQ_LEVEL,u=_t().inRange,f=(function(h){i(v,h);function v(m){var g=h.call(this)||this;return m=Object.assign({local:s,remote:o},m),Object.defineProperties(g,{local:{value:u(m.local,s,c)?m.local:s,writable:!0},remote:{value:u(m.remote,o,c)?m.remote:o,writable:!0}}),g}return v.prototype.update=function(m){var g=this;m=Object.assign({local:this.local,remote:this.remote},m),[["local",s,3],["remote",o,3]].forEach(function(_){var w=e(_,3),E=w[0],T=w[1],N=w[2];g[E]=typeof m[E]=="number"&&u(m[E],T,N)?m[E]:T})},v})(n);return qo=f,qo}var di,Rw;function FI(){if(Rw)return di;Rw=1;var i=di&&di.__extends||(function(){var o=function(c,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(f[v]=h[v])},o(c,u)};return function(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");o(c,u);function f(){this.constructor=c}c.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}})(),e=di&&di.__read||function(o,c){var u=typeof Symbol=="function"&&o[Symbol.iterator];if(!u)return o;var f=u.call(o),h,v=[],m;try{for(;(c===void 0||c-- >0)&&!(h=f.next()).done;)v.push(h.value)}catch(g){m={error:g}}finally{try{h&&!h.done&&(u=f.return)&&u.call(f)}finally{if(m)throw m.error}}return v},n=di&&di.__spreadArray||function(o,c,u){if(u||arguments.length===2)for(var f=0,h=c.length,v;f<h;f++)(v||!(f in c))&&(v||(v=Array.prototype.slice.call(c,0,f)),v[f]=c[f]);return o.concat(v||Array.prototype.slice.call(c))},a=YT(),s=(function(o){i(c,o);function c(u,f){var h=o.call(this,u,f)||this;return h._handleTrackSignalingEvents(),h.once("disconnected",h._unsubscribeTracks.bind(h)),h}return c.prototype.toString=function(){return"[RemoteParticipant #".concat(this._instanceId).concat(this.sid?": ".concat(this.sid):"","]")},c.prototype._addTrack=function(u,f,h){return o.prototype._addTrack.call(this,u,h)?(f._subscribed(u),this.emit("trackSubscribed",u,f),u):null},c.prototype._addTrackPublication=function(u){var f=o.prototype._addTrackPublication.call(this,u);return f?(this.emit("trackPublished",f),f):null},c.prototype._getTrackPublicationEvents=function(){return n(n([],e(o.prototype._getTrackPublicationEvents.call(this)),!1),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]],!1)},c.prototype._unsubscribeTracks=function(){var u=this;this.tracks.forEach(function(f){if(f.isSubscribed){var h=f.track;f._unsubscribe(),u.emit("trackUnsubscribed",h,f)}})},c.prototype._removeTrack=function(u,f,h){var v=this._tracks.get(h);return v?(o.prototype._removeTrack.call(this,v,h),f._unsubscribe(),this.emit("trackUnsubscribed",v,f),v):null},c.prototype._removeTrackPublication=function(u){this._signaling.clearTrackHint(u.trackSid);var f=o.prototype._removeTrackPublication.call(this,u);return f?(this.emit("trackUnpublished",f),f):null},c})(a);return di=s,di}var jh,Ow;function XT(){if(Ow)return jh;Ow=1;var i=(function(){function e(n,a){if(typeof n!="string")throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:n,enumerable:!0},trackSid:{value:a.trackSid,enumerable:!0},timestamp:{value:a.timestamp,enumerable:!0},ssrc:{value:a.ssrc,enumerable:!0},packetsLost:{value:typeof a.packetsLost=="number"?a.packetsLost:null,enumerable:!0},codec:{value:typeof a.codecName=="string"?a.codecName:null,enumerable:!0}})}return e})();return jh=i,jh}var yc,Iw;function ZT(){if(Iw)return yc;Iw=1;var i=yc&&yc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=XT(),n=(function(a){i(s,a);function s(o,c,u){var f=a.call(this,o,c)||this;return Object.defineProperties(f,{bytesSent:{value:typeof c.bytesSent=="number"?c.bytesSent:u?0:null,enumerable:!0},packetsSent:{value:typeof c.packetsSent=="number"?c.packetsSent:u?0:null,enumerable:!0},roundTripTime:{value:typeof c.roundTripTime=="number"?c.roundTripTime:u?0:null,enumerable:!0}}),f}return s})(e);return yc=n,yc}var _c,Lw;function UI(){if(Lw)return _c;Lw=1;var i=_c&&_c.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=ZT(),n=(function(a){i(s,a);function s(o,c,u){var f=a.call(this,o,c,u)||this;return Object.defineProperties(f,{audioLevel:{value:typeof c.audioInputLevel=="number"?c.audioInputLevel:null,enumerable:!0},jitter:{value:typeof c.jitter=="number"?c.jitter:null,enumerable:!0}}),f}return s})(e);return _c=n,_c}var wc,Aw;function VI(){if(Aw)return wc;Aw=1;var i=wc&&wc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=ZT(),n=(function(a){i(s,a);function s(o,c,u){var f=a.call(this,o,c,u)||this,h=null;typeof c.frameWidthInput=="number"&&typeof c.frameHeightInput=="number"&&(h={},Object.defineProperties(h,{width:{value:c.frameWidthInput,enumerable:!0},height:{value:c.frameHeightInput,enumerable:!0}}));var v=null;return typeof c.frameWidthSent=="number"&&typeof c.frameHeightSent=="number"&&(v={},Object.defineProperties(v,{width:{value:c.frameWidthSent,enumerable:!0},height:{value:c.frameHeightSent,enumerable:!0}})),Object.defineProperties(f,{captureDimensions:{value:h,enumerable:!0},dimensions:{value:v,enumerable:!0},captureFrameRate:{value:typeof c.frameRateInput=="number"?c.frameRateInput:null,enumerable:!0},frameRate:{value:typeof c.frameRateSent=="number"?c.frameRateSent:null,enumerable:!0},qualityLimitationReason:{value:["none","bandwidth","cpu","other"].find(function(m){return m===c.qualityLimitationReason})||null,enumerable:!0}}),f}return s})(e);return wc=n,wc}var Sc,xw;function eE(){if(xw)return Sc;xw=1;var i=Sc&&Sc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=XT(),n=(function(a){i(s,a);function s(o,c){var u=a.call(this,o,c)||this;return Object.defineProperties(u,{bytesReceived:{value:typeof c.bytesReceived=="number"?c.bytesReceived:null,enumerable:!0},packetsReceived:{value:typeof c.packetsReceived=="number"?c.packetsReceived:null,enumerable:!0},jitter:{value:typeof c.jitter=="number"?c.jitter:null,enumerable:!0}}),u}return s})(e);return Sc=n,Sc}var kc,Dw;function BI(){if(Dw)return kc;Dw=1;var i=kc&&kc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=eE(),n=(function(a){i(s,a);function s(o,c){var u=a.call(this,o,c)||this;return Object.defineProperties(u,{audioLevel:{value:typeof c.audioOutputLevel=="number"?c.audioOutputLevel:null,enumerable:!0}}),u}return s})(e);return kc=n,kc}var Tc,Mw;function qI(){if(Mw)return Tc;Mw=1;var i=Tc&&Tc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=eE(),n=(function(a){i(s,a);function s(o,c){var u=a.call(this,o,c)||this,f=null;return typeof c.frameWidthReceived=="number"&&typeof c.frameHeightReceived=="number"&&(f={},Object.defineProperties(f,{width:{value:c.frameWidthReceived,enumerable:!0},height:{value:c.frameHeightReceived,enumerable:!0}})),Object.defineProperties(u,{dimensions:{value:f,enumerable:!0},frameRate:{value:typeof c.frameRateReceived=="number"?c.frameRateReceived:null,enumerable:!0},freezeCount:{value:typeof c.freezeCount=="number"?c.freezeCount:null,enumerable:!0}}),u}return s})(e);return Tc=n,Tc}var Fh,Nw;function tE(){if(Nw)return Fh;Nw=1;var i=UI(),e=VI(),n=BI(),a=qI(),s=(function(){function o(c,u,f){if(typeof c!="string")throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:c,enumerable:!0},localAudioTrackStats:{value:u.localAudioTrackStats.map(function(h){return new i(h.trackId,h,f)}),enumerable:!0},localVideoTrackStats:{value:u.localVideoTrackStats.map(function(h){return new e(h.trackId,h,f)}),enumerable:!0},remoteAudioTrackStats:{value:u.remoteAudioTrackStats.map(function(h){return new n(h.trackId,h)}),enumerable:!0},remoteVideoTrackStats:{value:u.remoteVideoTrackStats.map(function(h){return new a(h.trackId,h)}),enumerable:!0}})}return o})();return Fh=s,Fh}var Uh,jw;function HI(){if(jw)return Uh;jw=1;var i=gf(),e=es(),n=(function(){function a(s){if(!s)throw new Error("ApplicationMonitor requires a log instance");this._log=s,this._visibilityChangeHandler=null,this._boundHandleBeforeUnload=this._handleBeforeUnload.bind(this),this._setupVisibilityMonitoring(),this._setupBeforeUnloadMonitoring()}return a.prototype._setupVisibilityMonitoring=function(){var s=this;if(typeof window>"u"||typeof document>"u"){this._log.debug("Not in browser environment, skipping setup of ApplicationMonitor");return}this._visibilityChangeHandler=function(o){return s._handleVisibilityChange(o)};try{i.onVisibilityChange(1,this._visibilityChangeHandler),this._log.debug("ApplicationMonitor visibility monitoring initialized")}catch(o){this._log.error("Error initializing ApplicationMonitor visibility monitoring:",o)}},a.prototype._setupBeforeUnloadMonitoring=function(){try{window.addEventListener("beforeunload",this._boundHandleBeforeUnload),this._log.debug("ApplicationMonitor beforeunload monitoring initialized")}catch(s){this._log.error("Error initializing ApplicationMonitor beforeunload monitoring:",s)}},a.prototype.cleanup=function(){this._log.debug("Cleaning up application event monitors"),this._visibilityChangeHandler&&(i.offVisibilityChange(1,this._visibilityChangeHandler),this._visibilityChangeHandler=null),typeof window<"u"&&this._boundHandleBeforeUnload&&window.removeEventListener("beforeunload",this._boundHandleBeforeUnload)},a.prototype._handleVisibilityChange=function(s){s?e.application.resumed():e.application.backgrounded()},a.prototype._handleBeforeUnload=function(){e.application.terminated()},a})();return Uh=n,Uh}var Vh,Fw;function WI(){if(Fw)return Vh;Fw=1;var i=_t().boolToString,e=es(),n=(function(){function a(s){if(!s)throw new Error("NetworkMonitor requires a log instance");this._log=s,this._networkInformationHandler=null,this._setupNetworkInformationAPI()}return a.prototype._setupNetworkInformationAPI=function(){if(typeof globalThis.navigator>"u"||!globalThis.navigator.connection){this._log.debug("Network Information API not supported");return}var s=function(){var c=navigator.connection;e.network.informationChanged({downlink:c.downlink,downlinkMax:c.downlinkMax,effectiveType:c.effectiveType,rtt:c.rtt,saveData:typeof c.saveData=="boolean"?i(c.saveData):void 0,type:c.type})};try{var o=navigator.connection;["change","typechange"].forEach(function(c){o.addEventListener(c,s)}),this._networkInformationHandler={stop:function(){["change","typechange"].forEach(function(c){o.removeEventListener(c,s)})}},this._log.debug("Network Information API monitoring initialized")}catch(c){this._log.error("Error initializing Network Information API monitoring:",c)}},a.prototype.cleanup=function(){this._log.debug("Cleaning up network monitoring"),this._networkInformationHandler&&(this._networkInformationHandler.stop(),this._networkInformationHandler=null)},a})();return Vh=n,Vh}var Ho,Uw;function zI(){if(Uw)return Ho;Uw=1;var i=Ho&&Ho.__awaiter||function(s,o,c,u){function f(h){return h instanceof c?h:new c(function(v){v(h)})}return new(c||(c=Promise))(function(h,v){function m(w){try{_(u.next(w))}catch(E){v(E)}}function g(w){try{_(u.throw(w))}catch(E){v(E)}}function _(w){w.done?h(w.value):f(w.value).then(m,g)}_((u=u.apply(s,o||[])).next())})},e=Ho&&Ho.__generator||function(s,o){var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},u,f,h,v=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return v.next=m(0),v.throw=m(1),v.return=m(2),typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function m(_){return function(w){return g([_,w])}}function g(_){if(u)throw new TypeError("Generator is already executing.");for(;v&&(v=0,_[0]&&(c=0)),c;)try{if(u=1,f&&(h=_[0]&2?f.return:_[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,_[1])).done)return h;switch(f=0,h&&(_=[_[0]&2,h.value]),_[0]){case 0:case 1:h=_;break;case 4:return c.label++,{value:_[1],done:!1};case 5:c.label++,f=_[1],_=[0];continue;case 7:_=c.ops.pop(),c.trys.pop();continue;default:if(h=c.trys,!(h=h.length>0&&h[h.length-1])&&(_[0]===6||_[0]===2)){c=0;continue}if(_[0]===3&&(!h||_[1]>h[0]&&_[1]<h[3])){c.label=_[1];break}if(_[0]===6&&c.label<h[1]){c.label=h[1],h=_;break}if(h&&c.label<h[2]){c.label=h[2],c.ops.push(_);break}h[2]&&c.ops.pop(),c.trys.pop();continue}_=o.call(s,c)}catch(w){_=[6,w],f=0}finally{u=h=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}};function n(){return typeof globalThis<"u"&&typeof globalThis.PressureObserver=="function"?globalThis.PressureObserver:null}var a=(function(){function s(){this._lastCpuPressure=null,this._cpuPressureObserver=null,this._sampleInterval=2e3,this._cpuPressureChangeListeners=[]}return s.prototype.watchCpuPressure=function(o){return i(this,void 0,void 0,function(){var c,u=this;return e(this,function(f){switch(f.label){case 0:if(typeof o!="function")throw new Error("The CPU pressure change callback must be a function");if(c=n(),!c)throw new Error("PressureObserver is not supported in this environment");return this._cpuPressureChangeListeners.push(o),this._cpuPressureObserver?[3,2]:(this._cpuPressureObserver=new c(function(h){return u._handleCpuPressureRecords(h)}),[4,this._cpuPressureObserver.observe("cpu",{sampleInterval:this._sampleInterval})]);case 1:f.sent(),f.label=2;case 2:return[2]}})})},s.prototype.isSupported=function(){return!!n()},s.prototype.unwatchCpuPressure=function(o){this._cpuPressureChangeListeners=this._cpuPressureChangeListeners.filter(function(c){return c!==o}),this._cpuPressureChangeListeners.length===0&&this.cleanup()},s.prototype._handleCpuPressureRecords=function(o){if(!(!Array.isArray(o)||o.length===0)){var c=o[o.length-1];if(c){var u=c.state!==this._lastCpuPressure;u&&(this._lastCpuPressure=c.state,this._cpuPressureChangeListeners.forEach(function(f){return f(c)}))}}},s.prototype.cleanup=function(){this._cpuPressureObserver&&(this._cpuPressureObserver.disconnect(),this._cpuPressureObserver=null),this._cpuPressureChangeListeners=[],this._lastCpuPressure=null},s})();return Ho=new a,Ho}var Bh,Vw;function $I(){if(Vw)return Bh;Vw=1;var i=zI(),e=es(),n=(function(){function a(s){if(!s)throw new Error("ResourceMonitor requires a log instance");this._log=s,this._cpuPressureHandler=null,this._setupCPUMonitoring()}return a.prototype._setupCPUMonitoring=function(){var s=this;if(!i.isSupported()){this._log.debug("CPU pressure monitoring not supported");return}this._cpuPressureHandler=function(o){s._log.debug("CPU pressure changed:",o),e.system.cpuPressureChanged(o.state)},i.watchCpuPressure(this._cpuPressureHandler).then(function(){s._log.debug("CPU pressure monitoring initialized")}).catch(function(o){s._log.error("Error initializing CPU pressure monitoring:",o)})},a.prototype.cleanup=function(){this._log.debug("Cleaning up resource monitors"),this._cpuPressureHandler&&(i.unwatchCpuPressure(this._cpuPressureHandler),this._cpuPressureHandler=null)},a})();return Bh=n,Bh}var qh,Bw;function GI(){if(Bw)return qh;Bw=1;var i=HI(),e=WI(),n=$I(),a=(function(){function s(o){if(!o)throw new Error("MonitorRegistry requires a log instance");this._log=o,this._monitors=[new i(o),new e(o),new n(o)]}return s.prototype.cleanup=function(){var o=this;this._monitors.forEach(function(c){try{c.cleanup()}catch(u){o._log.warn("Failed to cleanup monitor:",u)}})},s})();return qh=a,qh}var hi,qw;function KI(){if(qw)return hi;qw=1;var i=hi&&hi.__extends||(function(){var j=function(x,O){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,b){L.__proto__=b}||function(L,b){for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(L[y]=b[y])},j(x,O)};return function(x,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");j(x,O);function L(){this.constructor=x}x.prototype=O===null?Object.create(O):(L.prototype=O.prototype,new L)}})(),e=hi&&hi.__read||function(j,x){var O=typeof Symbol=="function"&&j[Symbol.iterator];if(!O)return j;var L=O.call(j),b,y=[],S;try{for(;(x===void 0||x-- >0)&&!(b=L.next()).done;)y.push(b.value)}catch(C){S={error:C}}finally{try{b&&!b.done&&(O=L.return)&&O.call(L)}finally{if(S)throw S.error}}return y},n=hi&&hi.__spreadArray||function(j,x,O){if(O||arguments.length===2)for(var L=0,b=x.length,y;L<b;L++)(y||!(L in x))&&(y||(y=Array.prototype.slice.call(x,0,L)),y[L]=x[L]);return j.concat(y||Array.prototype.slice.call(x))},a=Iu(),s=FI(),o=tE(),c=GI(),u=_t(),f=u.flatMap,h=u.valueToJSON,v=0,m=(function(j){i(x,j);function x(O,L,b){var y=j.call(this)||this,S=b.log.createLog("default",y),C=new Map;return Object.defineProperties(y,{_log:{value:S},_clientTrackSwitchOffControl:{value:b.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:b.contentPreferencesMode||"disabled"},_instanceId:{value:++v},_options:{value:b},_participants:{value:C},_signaling:{value:L},_insightsMonitors:{value:b.eventObserver&&b.insights?new c(S):null},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(L.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return L.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:O},name:{enumerable:!0,value:L.name},participants:{enumerable:!0,value:C},sid:{enumerable:!0,value:L.sid},state:{enumerable:!0,get:function(){return L.state}},mediaRegion:{enumerable:!0,value:L.mediaRegion}}),E(y,O),T(y,L.recording),N(y,L),g(y),S.info("Created a new Room:",y.name),S.debug("Initial RemoteParticipants:",Array.from(y._participants.values())),y}return x.prototype.toString=function(){return this._instanceId?"[Room #".concat(this._instanceId,": ").concat(this.sid,"]"):"[Room (uninitialized)]"},x.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},x.prototype.getStats=function(){var O=this;return this._signaling.getStats().then(function(L){return Array.from(L).map(function(b){var y=e(b,2),S=y[0],C=y[1];return new o(S,Object.assign({},C,{localAudioTrackStats:_(O,C.localAudioTrackStats),localVideoTrackStats:_(O,C.localVideoTrackStats)}))})})},x.prototype.refreshInactiveMedia=function(){var O=this.localParticipant.tracks,L=Array.from(O.values()).filter(function(A){var F=A.track.kind;return F!=="data"}).map(function(A){var F=A.track;return F}),b=f(this.participants,function(A){return Array.from(A.tracks.values())}).filter(function(A){var F=A.track;return F&&F.kind!=="data"}).map(function(A){var F=A.track;return F}),y=L.concat(b),S=new Event("unmute");L.forEach(function(A){var F=A.isMuted,D=A.mediaStreamTrack;F&&D.dispatchEvent(S)});var C=new Event("pause");return y.forEach(function(A){var F=A._attachments,D=A._elShims;return F.forEach(function(P){var K=D.get(P),q=P.paused&&K&&!K.pausedIntentionally();q&&P.dispatchEvent(C)})}),this},x.prototype.toJSON=function(){return h(this)},x})(a);function g(j){var x=j.localParticipant._signaling.audioProcessors;j.localParticipant.audioTracks.forEach(function(O){var L=O.track,b=L.noiseCancellation;b&&!x.includes(b.vendor)&&(j._log.warn("".concat(b.vendor," is not supported in this room. disabling it permanently")),b.disablePermanently())})}function _(j,x){var O=j.localParticipant._signaling;return x.reduce(function(L,b){var y=O.tracks.get(b.trackId),S=O.getSender(y);return S?[Object.assign({},b,{trackId:S.id})].concat(L):L},[])}function w(j,x){var O=j._log,L=j._clientTrackSwitchOffControl,b=j._contentPreferencesMode,y=j._options,S=y.MediaStream,C=y.mapMediaElement,A=y.disposeMediaElement,F=new s(x,{log:O,clientTrackSwitchOffControl:L,contentPreferencesMode:b,MediaStream:S,mapMediaElement:C,disposeMediaElement:A});O.info("A new RemoteParticipant connected:",F),j._participants.set(F.sid,F),j.emit("participantConnected",F);var D=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map(function(P){var K=e(Array.isArray(P)?P:[P,P],2),q=K[0],W=K[1];function B(){var z=[].slice.call(arguments);z.unshift(W),z.push(F),j.emit.apply(j,n([],e(z),!1))}return F.on(q,B),[q,B]});F.once("disconnected",function(){var K=j.dominantSpeaker;O.info("RemoteParticipant disconnected:",F),j._participants.delete(F.sid),D.forEach(function(q){F.removeListener(q[0],q[1])}),j.emit("participantDisconnected",F),F===K&&j.emit("dominantSpeakerChanged",j.dominantSpeaker)})}function E(j,x){var O=["trackWarning","trackWarningsCleared"].map(function(L){return{eventName:L,handler:function(){for(var b=[],y=0;y<arguments.length;y++)b[y]=arguments[y];return j.emit.apply(j,n([L],e(n(n([],e(b),!1),[x],!1)),!1))}}});O.forEach(function(L){var b=L.eventName,y=L.handler;return x.on(b,y)}),j.once("disconnected",function(){return O.forEach(function(L){var b=L.eventName,y=L.handler;return x.removeListener(b,y)})})}function T(j,x){x.on("updated",function(){var L=x.isEnabled;j._log.info("Recording ".concat(L?"started":"stopped")),j.emit("recording".concat(L?"Started":"Stopped"))})}function N(j,x){var O=j._log;O.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),x.participants.forEach(w.bind(null,j)),O.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),x.on("participantConnected",w.bind(null,j)),x.on("dominantSpeakerChanged",function(){return j.emit("dominantSpeakerChanged",j.dominantSpeaker)}),x.on("transcription",function(L){return j.emit("transcription",L)}),x.on("stateChanged",function L(b,y){switch(O.info("Transitioned to state:",b),b){case"disconnected":j.participants.forEach(function(S){S._unsubscribeTracks()}),j.emit(b,j,y),j.localParticipant.tracks.forEach(function(S){S.unpublish()}),j._insightsMonitors&&j._insightsMonitors.cleanup(),x.removeListener("stateChanged",L);break;case"reconnecting":setTimeout(function(){return j.emit("reconnecting",y)},0);break;default:setTimeout(function(){return j.emit("reconnected")},0)}})}return hi=m,hi}var Hh,Hw;function rE(){if(Hw)return Hh;Hw=1;var i=(function(){function e(n){Object.defineProperties(this,{_min:{value:n.min||100},_max:{value:n.max||1e4},_jitter:{value:n.jitter>0&&n.jitter<=1?n.jitter:0},_factor:{value:n.factor||2},_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var a=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var s=Math.random(),o=Math.floor(s*this._jitter*a);a=(Math.floor(s*10)&1)===0?a-o:a+o}return Math.min(a,this._max)|0}},_timeoutID:{value:null,writable:!0}})}return e.prototype.backoff=function(n){var a=this,s=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._timeoutID=setTimeout(function(){a._attempts++,n()},s)},e.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},e})();return Hh=i,Hh}var Yt={},Ec,Ww;function QI(){if(Ww)return Ec;Ww=1;var i=Ec&&Ec.__read||function(_,w){var E=typeof Symbol=="function"&&_[Symbol.iterator];if(!E)return _;var T=E.call(_),N,j=[],x;try{for(;(w===void 0||w-- >0)&&!(N=T.next()).done;)j.push(N.value)}catch(O){x={error:O}}finally{try{N&&!N.done&&(E=T.return)&&E.call(T)}finally{if(x)throw x.error}}return j},e=_t(),n=e.difference,a=e.flatMap;function s(){var _=4294967295;return String(Math.floor(Math.random()*_))}var o=(function(){function _(w,E,T){Object.defineProperties(this,{cName:{enumerable:!0,value:T},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:E},trackId:{enumerable:!0,value:w}})}return _.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var w=[s(),s()];w.forEach(function(E){this.primarySSRCs.add(E)},this),this.rtxPairs.size&&w.forEach(function(E){this.rtxPairs.set(s(),E)},this)}},_.prototype.addSSRC=function(w,E,T){E?this.rtxPairs.set(w,E):this.primarySSRCs.add(w),this.isSimulcastEnabled=this.isSimulcastEnabled||T},_.prototype.toSdpLines=function(w){var E=this,T=w?[]:Array.from(this.rtxPairs.entries()).map(function(b){return b.reverse()}),N=Array.from(this.primarySSRCs.values()),j=T.length?a(T):N,x=a(j,function(b){return["a=ssrc:".concat(b," cname:").concat(E.cName),"a=ssrc:".concat(b," msid:").concat(E.streamId," ").concat(E.trackId)]}),O=T.map(function(b){return"a=ssrc-group:FID ".concat(b.join(" "))}),L=["a=ssrc-group:SIM ".concat(N.join(" "))];return O.concat(x).concat(L)},_})();function c(_,w){var E=_.match(new RegExp(w,"gm"))||[];return E.map(function(T){var N=T.match(new RegExp(w))||[];return N.slice(1)})}function u(_){var w="^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$";return new Set(a(c(_,w)))}function f(_,w,E){var T="a=ssrc:".concat(w," ").concat(E,":(.+)");return _.match(new RegExp(T))[1]}function h(_){var w="^a=ssrc-group:FID ([0-9]+) ([0-9]+)$";return new Map(c(_,w).map(function(E){return E.reverse()}))}function v(_){var w=i(a(c(_,"^a=msid:(.+) (.+)$")),2),E=w[0],T=w[1],N=a(c(_,"^a=ssrc:(.+) cname:.+$"));return N.map(function(j){return[j,E,T]})}function m(_){var w=u(_),E=h(_),T=v(_);return T.reduce(function(N,j){var x=j[0],O=j[1],L=j[2],b=N.get(L)||new o(L,O,f(_,x,"cname")),y=E.get(x)||null;return b.addSSRC(x,y,w.has(x)),N.set(L,b)},new Map)}function g(_,w){var E=m(_),T=Array.from(E.keys()),N=Array.from(w.keys()),j=n(T,N),x=n(N,T),O=a(j,function(F){return E.get(F)});O.forEach(function(F){F.addSimulcastSSRCs(),w.set(F.trackId,F)}),N=Array.from(w.keys());var L=n(N,x),b=a(L,function(F){return w.get(F)}),y=!_.match(/a=rtpmap:[0-9]+ rtx/),S=a(b,function(F){return F.toSdpLines(y)}),C=a(new Set(_.split(`\r
`).concat(S))),A="a=x-google-flag:conference";return _.match(A)||C.push(A),C.join(`\r
`)}return Ec=g,Ec}var zw;function iv(){if(zw)return Yt;zw=1;var i=Yt&&Yt.__read||function(D,P){var K=typeof Symbol=="function"&&D[Symbol.iterator];if(!K)return D;var q=K.call(D),W,B=[],z;try{for(;(P===void 0||P-- >0)&&!(W=q.next()).done;)B.push(W.value)}catch(G){z={error:G}}finally{try{W&&!W.done&&(K=q.return)&&K.call(q)}finally{if(z)throw z.error}}return B},e=Yt&&Yt.__spreadArray||function(D,P,K){if(K||arguments.length===2)for(var q=0,W=P.length,B;q<W;q++)(B||!(q in P))&&(B||(B=Array.prototype.slice.call(P,0,q)),B[q]=P[q]);return D.concat(B||Array.prototype.slice.call(P))},n=_t(),a=n.difference,s=n.flatMap,o=QI(),c={0:"PCMU",8:"PCMA"};function u(D){return Array.from(h(D)).reduce(function(P,K){var q=K[0],W=K[1],B=P.get(W)||[];return P.set(W,B.concat(q))},new Map)}function f(D){return g(D).reduce(function(P,K){var q=m(K);return q?P.set(q,K):P},new Map)}function h(D){return _(D).reduce(function(P,K){if(P.has(K))return P;var q=new RegExp("a=rtpmap:".concat(K," ([^/]+)")),W=D.match(q),B=W?W[1].toLowerCase():c[K]?c[K].toLowerCase():"";return P.set(K,B)},new Map)}function v(D,P){var K=new RegExp("^a=fmtp:".concat(D," (.+)$"),"m"),q=P.match(K);return q&&q[1].split(";").reduce(function(W,B){var z=i(B.split("="),2),G=z[0],J=z[1];return W[G]=isNaN(J)?J:parseInt(J,10),W},{})}function m(D){var P=D.match(/^a=mid:(.+)$/m);return P&&P[1]}function g(D,P,K){return D.replace(/\r\n\r\n$/,`\r
`).split(`\r
m=`).slice(1).map(function(q){return"m=".concat(q)}).filter(function(q){var W=new RegExp("m=".concat(P||".*"),"gm"),B=new RegExp("a=".concat(K||".*"),"gm");return W.test(q)&&B.test(q)})}function _(D){var P=D.split(`\r
`)[0],K=P.match(/([0-9]+)/g);return K?K.slice(1).map(function(q){return parseInt(q,10)}):[]}function w(D,P){P=P.map(function(B){var z=B.codec;return z.toLowerCase()});var K=s(P,function(B){return D.get(B)||[]}),q=a(Array.from(D.keys()),P),W=s(q,function(B){return D.get(B)});return K.concat(W)}function E(D,P){var K=P.split(`\r
`),q=K[0],W=K.slice(1);return q=q.replace(/([0-9]+\s?)+$/,D.join(" ")),[q].concat(W).join(`\r
`)}function T(D,P,K){var q=g(D),W=D.split(`\r
m=`)[0];return[W].concat(q.map(function(B){if(!/^m=(audio|video)/.test(B))return B;var z=B.match(/^m=(audio|video)/)[1],G=u(B),J=z==="audio"?P:K,M=w(G,J),V=E(M,B),ee=G.get("pcma")||[],oe=G.get("pcmu")||[],fe=z==="audio"?new Set(ee.concat(oe)):new Set;return fe.has(M[0])?V.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):V})).join(`\r
`)}function N(D,P){var K=g(D),q=D.split(`\r
m=`)[0];return[q].concat(K.map(function(W){if(W=W.replace(/\r\n$/,""),!/^m=video/.test(W))return W;var B=u(W),z=_(W),G=new Set(B.get("vp8")||[]),J=z.some(function(M){return G.has(M)});return J?o(W,P):W})).concat("").join(`\r
`)}function j(D,P,K,q,W){var B=K.get(D)||[];if(B.length<=1)return B;var z=v(P,W);if(!z)return B;var G=B.find(function(J){var M=v(J,q);return M&&Object.keys(z).every(function(V){return z[V]===M[V]})});return typeof G=="number"?[G]:B}function x(D,P,K){if(!/^m=(audio|video)/.test(D))return D;var q=m(D),W=q&&P.get(q);if(!W)return D;var B=h(W),z=u(D),G=s(Array.from(B),function(fe){var ae=i(fe,2),he=ae[0],we=ae[1];return we!=="rtx"&&!K.includes(we)?j(we,he,z,D,W):[]}),J=z.get("rtx")||[],M=J.filter(function(fe){var ae=v(fe,D);return ae&&G.includes(ae.apt)});G=Array.from(new Set(e(e([],i(G),!1),i(M),!1)));var V=D.split(`\r
`).filter(function(fe){var ae=fe.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),he=ae&&ae[2];return!ae||he&&G.includes(parseInt(he,10))}),ee=_(D).filter(function(fe){return G.includes(fe)}),oe=Array.from(new Set(ee));return E(oe,V.join(`\r
`))}function O(D,P){var K=g(D),q=D.split(`\r
m=`)[0],W=f(P);return[q].concat(K.map(function(B){return x(B,W,[])})).join(`\r
`)}function L(D,P,K,q){q===void 0&&(q=!1);var W=f(K),B=f(P),z=g(D),G=D.split(`\r
m=`)[0];return[G].concat(z.map(function(J){if(J=J.replace(/\r\n$/,""),!/^m=video/.test(J))return J;var M=J.match(/^a=mid:(.+)$/m),V=M&&M[1];if(!V)return J;var ee=W.get(V),oe=h(ee),fe=_(ee),ae=fe.length&&oe.get(fe[0])==="vp8",he=q||!ae;return he?B.get(V).replace(/\r\n$/,""):J})).concat("").join(`\r
`)}function b(D,P,K){var q=Array.from(K).reduce(function(W,B){var z=i(B,2),G=z[0],J=z[1],M=g(D,G,"send(only|recv)"),V=M.map(m).filter(function(ee){return!P.has(ee)});return V.forEach(function(ee,oe){return W.set(ee,J[oe])}),W},new Map);return y(D,q)}function y(D,P){var K=g(D),q=D.split(`\r
m=`)[0];return[q].concat(K.map(function(W){if(!/^m=(audio|video)/.test(W))return W;var B=m(W);if(!B)return W;var z=P.get(B);if(!z)return W;var G=(W.match(/^a=msid:(.+)$/m)||[])[1];if(!G)return W;var J=i(G.split(" "),2),M=J[0],V=J[1],ee=new RegExp("msid:".concat(M).concat(V?" ".concat(V):"","$"),"gm");return W.replace(ee,"msid:".concat(M," ").concat(z))})).join(`\r
`)}function S(D,P){return D.split(`\r
`).filter(function(K){return!P.find(function(q){return new RegExp("a=ssrc:.*"+q+":","g").test(K)})}).join(`\r
`)}function C(D){var P=g(D),K=D.split(`\r
m=`)[0];return[K].concat(P.map(function(q){if(!/^m=video/.test(q))return q;var W=u(q),B=W.get("rtx");if(!B)return q;var z=new Set(_(q));B.forEach(function(V){return z.delete(V)});var G=q.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),J=G&&G[1],M=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(J?[new RegExp("^a=ssrc:".concat(J," .+$"))]:[]);return q=q.split(`\r
`).filter(function(V){return M.every(function(ee){return!ee.test(V)})}).join(`\r
`),E(Array.from(z),q)})).join(`\r
`)}function A(D,P){var K=Object.entries(P).map(function(q){var W=i(q,2),B=W[0],z=W[1];return"".concat(B,"=").concat(z)}).join(";");return"a=fmtp:".concat(D," ").concat(K)}function F(D,P){var K=g(D),q=D.split(`\r
m=`)[0];return P=P||K.filter(function(W){return/^m=audio/.test(W)}).map(m),[q].concat(K.map(function(W){if(!/^m=audio/.test(W))return W;var B=u(W),z=B.get("opus");if(!z)return W;var G=v(z,W);if(!G)return W;var J=A(z,G),M=new RegExp(J),V=m(W);P.includes(V)?G.usedtx=1:delete G.usedtx;var ee=A(z,G);return W.replace(M,ee)})).join(`\r
`)}return Yt.addOrRewriteNewTrackIds=b,Yt.addOrRewriteTrackIds=y,Yt.createCodecMapForMediaSection=u,Yt.createPtToCodecName=h,Yt.disableRtx=C,Yt.enableDtxForOpus=F,Yt.filterLocalCodecs=O,Yt.getMediaSections=g,Yt.removeSSRCAttributes=S,Yt.revertSimulcast=L,Yt.setCodecPreferences=T,Yt.setSimulcast=N,Yt}var Wh,$w;function JI(){if($w)return Wh;$w=1;var i=(function(){function e(n){n=Object.assign({getKey:function(s){return s},getValue:function(s){return s},isLessThanOrEqualTo:function(s,o){return s<=o}},n),Object.defineProperties(this,{_getKey:{value:n.getKey},_getValue:{value:n.getValue},_isLessThanOrEqualTo:{value:n.isLessThanOrEqualTo},_map:{value:new Map}})}return e.prototype.toMap=function(){return new Map(this._map)},e.prototype.updateAndFilter=function(n){return n.filter(this.update,this)},e.prototype.update=function(n){var a=this._getKey(n),s=this._getValue(n);return this._map.has(a)&&this._isLessThanOrEqualTo(s,this._map.get(a))?!1:(this._map.set(a,s),!0)},e})();return Wh=i,Wh}var zh,Gw;function YI(){if(Gw)return zh;Gw=1;var i=JI(),e=(function(){function n(){Object.defineProperties(this,{_filter:{value:new i({getKey:function(s){return s.ufrag},isLessThanOrEqualTo:function(s,o){return s.revision<=o.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return n.prototype.setUfrag=function(a){this._ufrag=a;var s=this._filter.toMap().get(a);return s?s.candidates:[]},n.prototype.update=function(a){a.candidates=a.candidates||[];var s=this._filter.toMap().get(a.ufrag),o=s?s.candidates:[];return this._filter.update(a)&&this._ufrag===a.ufrag?a.candidates.slice(o.length):[]},n})();return zh=e,zh}var $h,Kw;function XI(){if(Kw)return $h;Kw=1;var i=Et(),e=i.ICE_ACTIVITY_CHECK_PERIOD_MS,n=i.ICE_INACTIVITY_THRESHOLD_MS,a=(function(){function s(o,c){c=Object.assign({activityCheckPeriodMs:e,inactivityThresholdMs:n},c),Object.defineProperties(this,{_activityCheckPeriodMs:{value:c.activityCheckPeriodMs},_inactivityThresholdMs:{value:c.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:o},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return s.prototype._getActivePairStat=function(o){var c=Array.from(o.values()),u=c.find(function(f){return f.type==="candidate-pair"&&f.nominated});return u||{bytesReceived:0,timestamp:Math.round(new Date().getTime())}},s.prototype._getIceConnectionStats=function(){var o=this;return this._peerConnection.getStats().then(function(c){return o._getActivePairStat(c)}).catch(function(){return null})},s.prototype._scheduleInactivityCallback=function(o){var c=this;o&&this._onIceConnectionStateChanged===null?(this._onIceConnectionStateChanged=function(){c._peerConnection.iceConnectionState==="disconnected"&&o()},this._peerConnection.addEventListener?this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged):this._peerConnection.oniceconnectionstatechange=this._onIceConnectionStateChanged):!o&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener?this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged):this._peerConnection.oniceconnectionstatechange=null,this._onIceConnectionStateChanged=null)},s.prototype.start=function(o){var c=this;this.stop(),this._timer=setInterval(function(){c._getIceConnectionStats().then(function(u){u&&((!c._lastActivity||c._lastActivity.bytesReceived!==u.bytesReceived)&&(c._lastActivity=u,c._scheduleInactivityCallback(null)),u.timestamp-c._lastActivity.timestamp>=c._inactivityThresholdMs&&(c._peerConnection.iceConnectionState==="disconnected"?o():c._onIceConnectionStateChanged===null&&c._scheduleInactivityCallback(o)))})},this._activityCheckPeriodMs)},s.prototype.stop=function(){this._scheduleInactivityCallback(null),this._timer!==null&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},s})();return $h=a,$h}var bc,Qw;function ZI(){if(Qw)return bc;Qw=1;var i=bc&&bc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=pr().EventEmitter,n=(function(a){i(s,a);function s(o){var c=a.call(this)||this;return Object.defineProperties(c,{_dataChannel:{value:o},_messageQueue:{value:[]}}),o.addEventListener("open",function(){c._messageQueue.splice(0).forEach(function(u){return c._publish(u)})}),o.addEventListener("message",function(u){var f=u.data;try{var h=JSON.parse(f);c.emit("message",h)}catch{}}),c.publish({type:"ready"}),c}return s.prototype._publish=function(o){var c=JSON.stringify(o);try{this._dataChannel.send(c)}catch{}},s.prototype.publish=function(o){var c=this._dataChannel;return c.readyState==="closing"||c.readyState==="closed"?!1:c.readyState==="connecting"?(this._messageQueue.push(o),!0):(this._publish(o),!0)},s})(e);return bc=n,bc}var Cc,Jw;function eL(){if(Jw)return Cc;Jw=1;var i=Cc&&Cc.__extends||(function(){var s=function(o,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])},s(o,c)};return function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(o,c);function u(){this.constructor=o}o.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}})(),e=qT(),n=ZI(),a=(function(s){i(o,s);function o(c){var u=s.call(this,c.label,c.maxPacketLifeTime,c.maxRetransmits,c.ordered)||this;return Object.defineProperties(u,{_dataChannel:{value:c}}),c.binaryType="arraybuffer",c.addEventListener("message",function(f){u.emit("message",f.data)}),c.addEventListener("close",function(){u.emit("close")}),u}return o.prototype.stop=function(){this._dataChannel.close(),s.prototype.stop.call(this)},o.prototype.toDataTransport=function(){return new n(this._dataChannel)},o})(e);return Cc=a,Cc}var Pc,Yw;function tL(){if(Yw)return Pc;Yw=1;var i=Pc&&Pc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=FT(),n=(function(a){i(s,a);function s(o,c){return a.call(this,o,c)||this}return s})(e);return Pc=n,Pc}var Gh,Xw;function rL(){if(Xw)return Gh;Xw=1;var i=iv().getMediaSections,e=(function(){function n(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return n.prototype.match=function(a){return this._midsToTrackIds.get(a.transceiver.mid)||null},n.prototype.update=function(a){var s=i(a,"(audio|video)");this._midsToTrackIds=s.reduce(function(o,c){var u=c.match(/^a=mid:(.+)$/m)||[],f=c.match(/^a=msid:.+ (.+)$/m)||[],h=u[1],v=f[1];return h&&v?o.set(h,v):o},this._midsToTrackIds)},n})();return Gh=e,Gh}var Kh,Zw;function nL(){if(Zw)return Kh;Zw=1;var i=oa().RTCSessionDescription,e=iv(),n=e.createPtToCodecName,a=e.getMediaSections;function s(E){var T={type:E.type};return E.type!=="rollback"&&(T.sdp=o(E.sdp)),new i(T)}function o(E){var T=a(E),N=E.split(`\r
m=`)[0];return[N].concat(T.map(c)).join(`\r
`)}function c(E){var T=n(E);E=f(E,T),E=u(E);var N=h(T),j=N.get("rtx")||new Set,x=new Set,O=v(E,T,j,x),L=m(O,x),b=Array.from(x),y=["h264","vp8","vp9"],S=y.reduce(function(C,A){var F=N.get(A)||new Set;return Array.from(F).reduce(function(D,P){return L.has(P)?D:D.add(P)},C)},new Set);return S.forEach(function(C){if(b.length){var A=b.shift();E=g(E,A),E=w(E,A,C)}}),b.forEach(function(C){E=g(E,C),E=_(E,C)}),E}function u(E){for(var T=E.split(`\r
`),N=new Map,j=96,x=0;x<T.length;x++){var O=T[x].match(/^a=rtpmap:(\d+) ([^/]+)/);if(O){var L=parseInt(O[1],10),b=O[2].toLowerCase();if(N.has(L)&&N.get(L)!==b){for(;N.has(j)||j===L;)j++;var y=j;N.set(y,b),T[x]=T[x].replace("a=rtpmap:".concat(L),"a=rtpmap:".concat(y));for(var S=x+1;S<T.length;S++)T[S].match(new RegExp("^a=(fmtp|rtcp-fb):".concat(L,"\\b")))&&(T[S]=T[S].replace(new RegExp("^a=(fmtp|rtcp-fb):".concat(L,"\\b")),"a=$1:".concat(y)))}else N.set(L,b)}}return T.join(`\r
`)}function f(E,T){return Array.from(T.keys()).reduce(function(N,j){var x=new RegExp("^a=rtpmap:".concat(j," rtx.+$"),"gm");return(N.match(x)||[]).slice(T.get(j)==="rtx"?1:0).reduce(function(O,L){var b=new RegExp(`\r
`.concat(L)),y=new RegExp(`\r
a=fmtp:`.concat(j," apt=[0-9]+"));return O.replace(b,"").replace(y,"")},N)},E)}function h(E){var T=new Map;return E.forEach(function(N,j){var x=T.get(N)||new Set;return T.set(N,x.add(j))}),T}function v(E,T,N,j){return Array.from(N).reduce(function(x,O){var L=new RegExp("a=fmtp:".concat(O," apt=(\\d+)")),b=E.match(L);if(!b)return j.add(O),x;var y=Number.parseInt(b[1]);if(!T.has(y))return j.add(O),x;var S=T.get(y);return S==="rtx"?(j.add(O),x):x.set(O,y)},new Map)}function m(E,T){var N=Array.from(E).reduce(function(j,x){var O=x[0],L=x[1],b=j.get(L)||new Set;return j.set(L,b.add(O))},new Map);return Array.from(N).reduce(function(j,x){var O=x[0],L=Array.from(x[1]);return L.length>1?(L.forEach(function(b){T.add(b)}),j):j.set(O,L[0])},new Map)}function g(E,T){var N=new RegExp("a=fmtp:".concat(T,`.*\r
`),"gm");return E.replace(N,"")}function _(E,T){var N=new RegExp("a=rtpmap:".concat(T,`.*\r
`),"gm");return E.replace(N,"")}function w(E,T,N){return E.endsWith(`\r
`)?"".concat(E,"a=fmtp:").concat(T," apt=").concat(N,`\r
`):"".concat(E,`\r
a=fmtp:`).concat(T," apt=").concat(N)}return Kh=s,Kh}var pi,eS;function iL(){if(eS)return pi;eS=1;var i=pi&&pi.__extends||(function(){var Ce=function(_e,Z){return Ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,de){re.__proto__=de}||function(re,de){for(var le in de)Object.prototype.hasOwnProperty.call(de,le)&&(re[le]=de[le])},Ce(_e,Z)};return function(_e,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");Ce(_e,Z);function re(){this.constructor=_e}_e.prototype=Z===null?Object.create(Z):(re.prototype=Z.prototype,new re)}})(),e=pi&&pi.__read||function(Ce,_e){var Z=typeof Symbol=="function"&&Ce[Symbol.iterator];if(!Z)return Ce;var re=Z.call(Ce),de,le=[],ge;try{for(;(_e===void 0||_e-- >0)&&!(de=re.next()).done;)le.push(de.value)}catch(Qe){ge={error:Qe}}finally{try{de&&!de.done&&(Z=re.return)&&Z.call(re)}finally{if(ge)throw ge.error}}return le},n=pi&&pi.__spreadArray||function(Ce,_e,Z){if(Z||arguments.length===2)for(var re=0,de=_e.length,le;re<de;re++)(le||!(re in _e))&&(le||(le=Array.prototype.slice.call(_e,0,re)),le[re]=_e[re]);return Ce.concat(le||Array.prototype.slice.call(_e))},a=rE(),s=oa(),o=s.RTCIceCandidate,c=s.RTCPeerConnection,u=s.RTCSessionDescription,f=s.getStats,h=hr(),v=Et(),m=v.DEFAULT_ICE_GATHERING_TIMEOUT_MS,g=v.DEFAULT_LOG_LEVEL,_=v.DEFAULT_SESSION_TIMEOUT_SEC,w=v.iceRestartBackoffConfig,E=iv(),T=E.addOrRewriteNewTrackIds,N=E.addOrRewriteTrackIds,j=E.createCodecMapForMediaSection,x=E.disableRtx,O=E.enableDtxForOpus,L=E.filterLocalCodecs,b=E.getMediaSections,y=E.removeSSRCAttributes,S=E.revertSimulcast,C=E.setCodecPreferences,A=E.setSimulcast,F=sa(),D=Ti(),P=D.MediaClientLocalDescFailedError,K=D.MediaClientRemoteDescFailedError,q=_t(),W=q.buildLogLevels,B=q.getPlatform,z=q.isChromeScreenShareTrack,G=q.oncePerTick,J=q.defer,M=YI(),V=XI(),ee=eL(),oe=tL(),fe=ts(),ae=cn(),he=rL(),we=nL(),ke=h.guessBrowser(),Ge=B(),Ae=/android/.test(Ge),Be=ke==="chrome",Ze=ke==="firefox",tt=ke==="safari",Je=0,Ke={open:["closed","updating"],updating:["closed","open"],closed:[]},Me=(function(Ce){i(_e,Ce);function _e(Z,re,de,le){var ge=Ce.call(this,"open",Ke)||this;le=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:z,iceServers:[],logLevel:g,offerOptions:{},revertSimulcast:S,sessionTimeout:_*1e3,setCodecPreferences:C,setSimulcast:A,Backoff:a,IceConnectionMonitor:V,RTCIceCandidate:o,RTCPeerConnection:c,RTCSessionDescription:u,Timeout:F},le);var Qe=$(Object.assign({},le,le.rtcConfiguration)),$e=W(le.logLevel),St=le.RTCPeerConnection;le.enableDscp===!0&&(le.chromeSpecificConstraints=le.chromeSpecificConstraints||{},le.chromeSpecificConstraints.optional=le.chromeSpecificConstraints.optional||[],le.chromeSpecificConstraints.optional.push({googDscp:!0}));var vt=le.log?le.log.createLog("webrtc",ge):new ae("webrtc",ge,$e,le.loggerName),st=new St(Qe,le.chromeSpecificConstraints);le.dummyAudioMediaStreamTrack&&st.addTrack(le.dummyAudioMediaStreamTrack),Object.defineProperties(ge,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:le.enableDscp},_encodingParameters:{value:re},_isChromeScreenShareTrack:{value:le.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new le.Timeout(function(){return ge._handleIceGatheringTimeout()},m,!1)},_iceRestartBackoff:{value:new le.Backoff(w)},_instanceId:{value:++Je},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:vt},_eventObserver:{value:le.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new le.IceConnectionMonitor(st)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:le.offerOptions},_onEncodingParametersChanged:{value:G(function(){ge._needsAnswer||bt(ge)})},_peerConnection:{value:st},_preferredAudioCodecs:{value:de.audio},_preferredVideoCodecs:{value:de.video},_shouldApplyDtx:{value:de.audio.every(function(ot){var ut=ot.codec;return ut!=="opus"})||de.audio.some(function(ot){var ut=ot.codec,Ft=ot.dtx;return ut==="opus"&&Ft})},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new le.Timeout(function(){vt.debug("ICE reconnect timed out"),ge.close()},le.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new M},_setCodecPreferences:{value:Ze&&Ae&&de.video[0]&&de.video[0].codec.toLowerCase()!=="h264"?function(ot){return ot}:le.setCodecPreferences},_setSimulcast:{value:le.setSimulcast},_revertSimulcast:{value:le.revertSimulcast},_RTCIceCandidate:{value:le.RTCIceCandidate},_RTCPeerConnection:{value:le.RTCPeerConnection},_RTCSessionDescription:{value:le.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:Z}}),re.on("changed",ge._onEncodingParametersChanged),st.addEventListener("connectionstatechange",ge._handleConnectionStateChange.bind(ge)),st.addEventListener("datachannel",ge._handleDataChannelEvent.bind(ge)),st.addEventListener("icecandidate",ge._handleIceCandidateEvent.bind(ge)),st.addEventListener("iceconnectionstatechange",ge._handleIceConnectionStateChange.bind(ge)),st.addEventListener("icegatheringstatechange",ge._handleIceGatheringStateChange.bind(ge)),st.addEventListener("signalingstatechange",ge._handleSignalingStateChange.bind(ge)),st.addEventListener("track",ge._handleTrackEvent.bind(ge));var mt=ge;return ge.on("stateChanged",function ot(ut){ut==="closed"&&(mt.removeListener("stateChanged",ot),mt._dataChannels.forEach(function(Ft,vr){mt.removeDataTrackSender(vr)}))}),ge}return _e.prototype.toString=function(){return"[PeerConnectionV2 #".concat(this._instanceId,": ").concat(this.id,"]")},_e.prototype.setEffectiveAdaptiveSimulcast=function(Z){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",Z),this._preferredVideoCodecs.forEach(function(re){"adaptiveSimulcast"in re&&(re.adaptiveSimulcast=Z)})},Object.defineProperty(_e.prototype,"_shouldApplySimulcast",{get:function(){if(!Be&&!tt)return!1;var Z=this._preferredVideoCodecs.some(function(re){return re.codec.toLowerCase()==="vp8"&&re.simulcast&&re.adaptiveSimulcast!==!1});return Z},enumerable:!1,configurable:!0}),Object.defineProperty(_e.prototype,"connectionState",{get:function(){return this.iceConnectionState==="failed"?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(_e.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&this._peerConnection.iceConnectionState==="disconnected"||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(_e.prototype,"isApplicationSectionNegotiated",{get:function(){return this._peerConnection.signalingState!=="closed"?this._peerConnection.localDescription?b(this._peerConnection.localDescription.sdp,"application").length>0:!1:!0},enumerable:!1,configurable:!0}),Object.defineProperty(_e.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var Z=this._preferredVideoCodecs.find(function(re){return"adaptiveSimulcast"in re});return Z&&Z.adaptiveSimulcast===!0},enumerable:!1,configurable:!0}),_e.prototype._maybeUpdateEncodings=function(Z,re,de){if(de===void 0&&(de=!1),Z.kind!=="video"||Z.readyState==="ended")return!1;var le=Z.getSettings(),ge=le.height,Qe=le.width;if(typeof ge!="number"||typeof Qe!="number")return!1;var $e=h.guessBrowser();return $e==="safari"||$e==="chrome"&&this._isAdaptiveSimulcastEnabled?(this._updateEncodings(Z,re,de),!0):!1},_e.prototype._updateEncodings=function(Z,re,de){if(this._isChromeScreenShareTrack(Z)){var le=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];re.forEach(function(ot,ut){var Ft=le[ut];Ft?(ot.scaleResolutionDownBy=Ft.scaleResolutionDownBy,de&&delete ot.active):(ot.active=!1,delete ot.scaleResolutionDownBy)})}else{var ge=Z.getSettings(),Qe=ge.width,$e=ge.height,St=[{pixels:960*540,maxActiveLayers:3},{pixels:480*270,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}],vt=Qe*$e,st=St.find(function(ot){return vt>=ot.pixels}),mt=Math.min(re.length,st.maxActiveLayers);re.forEach(function(ot,ut){var Ft=ut<mt;Ft?(ot.scaleResolutionDownBy=1<<mt-ut-1,de&&(ot.active=!0)):(ot.active=!1,delete ot.scaleResolutionDownBy)})}this._log.debug("_updateEncodings:",re.map(function(ot,ut){var Ft=ot.active,vr=ot.scaleResolutionDownBy;return"[".concat(ut,": ").concat(Ft,", ").concat(vr||0,"]")}).join(", "))},_e.prototype._addIceCandidate=function(Z){var re=this;return Promise.resolve().then(function(){return Z=new re._RTCIceCandidate(Z),re._peerConnection.addIceCandidate(Z)}).catch(function(de){re._log.warn("Failed to add RTCIceCandidate ".concat(Z?'"'.concat(Z.candidate,'"'):"null",": ")+de.message)})},_e.prototype._addIceCandidates=function(Z){return Promise.all(Z.map(this._addIceCandidate,this)).then(function(){})},_e.prototype._addOrUpdateTransceiver=function(Z){var re=this,de=Se(this,Z.kind);if(de&&de.sender){var le=de.sender.track?de.sender.track.id:null;return le&&this._log.warn("Reusing transceiver: ".concat(de.mid,"] ").concat(le," => ").concat(Z.id)),this._replaceTrackPromises.set(de,de.sender.replaceTrack(Z).then(function(){de.direction="sendrecv"},function(){}).finally(function(){re._replaceTrackPromises.delete(de)})),de}return this._peerConnection.addTransceiver(Z,{})},_e.prototype._checkIceBox=function(Z){var re=qe(Z);if(!re)return Promise.resolve();var de=this._remoteCandidates.setUfrag(re);return this._addIceCandidates(de)},_e.prototype._answer=function(Z){var re=this;return Promise.resolve().then(function(){return re._negotiationRole||(re._negotiationRole="answerer"),re._setRemoteDescription(Z)}).catch(function(){throw new K}).then(function(){return re._peerConnection.createAnswer()}).then(function(de){Ze?de=new re._RTCSessionDescription({sdp:x(de.sdp),type:de.type}):de=we(de);var le=y(de.sdp,["mslabel","label"]);if(re._shouldApplySimulcast){var ge=le;le=re._setSimulcast(ge,re._trackIdsToAttributes),le=re._revertSimulcast(le,ge,Z.sdp)}return le=le.replace(/42e015/g,"42e01f"),re._setLocalDescription({type:de.type,sdp:le})}).then(function(){return re._checkIceBox(Z)}).then(function(){return re._queuedDescription&&re._updateDescription(re._queuedDescription)}).then(function(){return re._queuedDescription=null,re._maybeReoffer(re._peerConnection.localDescription)}).catch(function(de){var le=de instanceof K?de:new P;throw re._publishMediaWarning({message:"Failed to _answer",code:le.code,error:de}),le})},_e.prototype._close=function(){return this._iceConnectionMonitor.stop(),this._peerConnection.signalingState!=="closed"?(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0):!1},_e.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},_e.prototype._handleDataChannelEvent=function(Z){var re=this,de=Z.channel,le=new ee(de);this._dataTrackReceivers.add(le),de.addEventListener("close",function(){re._dataTrackReceivers.delete(le)}),this.emit("trackAdded",le)},_e.prototype._handleGlare=function(Z){var re=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then(function(){return re._trackIdsToAttributes=new Map(re._appliedTrackIdsToAttributes),re._setLocalDescription({type:"rollback"})}).then(function(){return re._needsAnswer=!1,re._answer(Z)}).then(function(de){return de?Promise.resolve():re._offer()})},_e.prototype._publishMediaWarning=function(Z){var re=Z.message,de=Z.code,le=Z.error,ge=Z.sdp;this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:re,code:de,context:JSON.stringify({error:le.message,sdp:ge})}})},_e.prototype._handleIceCandidateEvent=function(Z){Z.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(Z.candidate));var re={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};Z.candidate||(re.ice.complete=!0),this._isIceLite&&Z.candidate||(re.ice.revision=this._localCandidatesRevision++,this.emit("candidates",re))},_e.prototype._handleIceConnectionStateChange=function(){var Z=this,re=this._peerConnection.iceConnectionState,de=["connected","completed"].includes(re),le=this._log;le.debug('ICE connection state is "'.concat(re,'"')),de&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),this._lastIceConnectionState!=="failed"&&re==="failed"&&!this._shouldRestartIce&&!this._isRestartingIce?(le.warn("ICE failed"),this._initiateIceRestartBackoff()):["disconnected","failed"].includes(this._lastIceConnectionState)&&de&&le.debug("ICE reconnected"),re==="connected"?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start(function(){Z._iceConnectionMonitor.stop(),!Z._shouldRestartIce&&!Z._isRestartingIce&&(le.warn("ICE Connection Monitor detected inactivity"),Z._isIceConnectionInactive=!0,Z._initiateIceRestartBackoff(),Z.emit("iceConnectionStateChanged"),Z.emit("connectionStateChanged"))})):["disconnected","completed"].includes(re)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=re,this.emit("iceConnectionStateChanged")},_e.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},_e.prototype._handleIceGatheringStateChange=function(){var Z=this._peerConnection.iceGatheringState,re=this._log;re.debug('ICE gathering state is "'.concat(Z,'"'));var de=this._iceGatheringTimeout,le=de.delay,ge=de.isSet;Z==="gathering"&&!this._didGenerateLocalCandidates&&!ge&&(re.debug("Starting ICE gathering timeout: ".concat(le)),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},_e.prototype._handleSignalingStateChange=function(){this._peerConnection.signalingState==="stable"&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},_e.prototype._handleTrackEvent=function(Z){var re=this,de=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new he,this._trackMatcher.update(de);var le=Z.track,ge=this._trackMatcher.match(Z)||le.id,Qe=new oe(ge,le);this._mediaTrackReceivers.forEach(function($e){$e.track.id===Qe.track.id&&re._mediaTrackReceivers.delete($e)}),this._mediaTrackReceivers.add(Qe),le.addEventListener?le.addEventListener("ended",function(){return re._mediaTrackReceivers.delete(Qe)}):le.onended=function(){return re._mediaTrackReceivers.delete(Qe)},this.emit("trackAdded",Qe)},_e.prototype._initiateIceRestart=function(){if(this._peerConnection.signalingState!=="closed"){var Z=this._log;Z.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var re=this._iceReconnectTimeout,de=re.delay,le=re.isSet;le||(Z.debug("Starting ICE reconnect timeout: ".concat(de)),this._iceReconnectTimeout.start()),this.offer().catch(function(ge){Z.error("offer failed in _initiateIceRestart with: ".concat(ge.message))})}},_e.prototype._initiateIceRestartBackoff=function(){var Z=this;this._peerConnection.signalingState==="closed"||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff(function(){return Z._initiateIceRestart()}))},_e.prototype._maybeReoffer=function(Z){var re=this._shouldOffer;if(Z&&Z.sdp){var de=this._peerConnection.getSenders().filter(function(St){return St.track});re=["audio","video"].reduce(function(St,vt){var st=b(Z.sdp,vt,"(sendrecv|sendonly)"),mt=de.filter(H.bind(null,vt));return St||st.length<mt.length},re);var le=this._dataChannels.size>0,ge=b(Z.sdp,"application").length>0,Qe=le&&!ge;re=re||Qe}var $e=re?this._offer():Promise.resolve();return $e.then(function(){return re})},_e.prototype._offer=function(){var Z=this,re=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,re.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then(function(){return Z._peerConnection.createOffer(re)}).catch(function(de){var le=new P;throw Z._publishMediaWarning({message:"Failed to create offer",code:le.code,error:de}),le}).then(function(de){Ze?de=new Z._RTCSessionDescription({sdp:x(de.sdp),type:de.type}):de=we(de);var le=y(de.sdp,["mslabel","label"]);le=Z._peerConnection.remoteDescription?L(le,Z._peerConnection.remoteDescription.sdp):le;var ge=Z._setCodecPreferences(le,Z._preferredAudioCodecs,Z._preferredVideoCodecs);return Z._shouldOffer=!1,Z._negotiationRole||(Z._negotiationRole="offerer"),Z._shouldApplySimulcast&&(Z._localDescriptionWithoutSimulcast={type:"offer",sdp:ge},ge=Z._setSimulcast(ge,Z._trackIdsToAttributes)),Z._setLocalDescription({type:"offer",sdp:ge})})},_e.prototype._getMediaTrackSenderId=function(Z){var re=Array.from(this._rtpSenders.keys()).find(function(de){var le=de.track.id;return le===Z});return re?re.id:Z},_e.prototype._addOrRewriteLocalTrackIds=function(Z){var re=this,de=this._peerConnection.getTransceivers(),le=de.filter(function(mt){var ot=mt.sender,ut=mt.stopped;return!ut&&ot&&ot.track}),ge=le.filter(function(mt){var ot=mt.mid;return ot}),Qe=new Map(ge.map(function(mt){var ot=mt.mid,ut=mt.sender;return[ot,re._getMediaTrackSenderId(ut.track.id)]})),$e=N(Z.sdp,Qe),St=le.filter(function(mt){var ot=mt.mid;return!ot}),vt=new Map(["audio","video"].map(function(mt){return[mt,St.filter(function(ot){var ut=ot.sender;return ut.track.kind===mt}).map(function(ot){var ut=ot.sender;return re._getMediaTrackSenderId(ut.track.id)})]})),st=T($e,Qe,vt);return new this._RTCSessionDescription({sdp:st,type:Z.type})},_e.prototype._rollbackAndApplyOffer=function(Z){var re=this;return this._setLocalDescription({type:"rollback"}).then(function(){return re._setLocalDescription(Z)})},_e.prototype._setLocalDescription=function(Z){var re=this;return Z.type!=="rollback"&&this._shouldApplyDtx&&(Z=new this._RTCSessionDescription({sdp:O(Z.sdp),type:Z.type})),this._peerConnection.setLocalDescription(Z).catch(function(de){re._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'.concat(Z.type,'" failed with the error "').concat(de.message,'".'),de);var le=new P,ge={message:'Calling setLocalDescription with an RTCSessionDescription of type "'.concat(Z.type,'" failed'),code:le.code,error:de};throw Z.sdp&&(re._log.warn("The SDP was ".concat(Z.sdp)),ge.sdp=Z.sdp),re._publishMediaWarning(ge),le}).then(function(){Z.type!=="rollback"&&(re._localDescription=re._addOrRewriteLocalTrackIds(Z),re._shouldApplyDtx&&(re._localDescription=new re._RTCSessionDescription({sdp:O(re._localDescription.sdp,[]),type:re._localDescription.type})),re._localCandidates=[],Z.type==="offer"?re._descriptionRevision++:Z.type==="answer"&&(re._lastStableDescriptionRevision=re._descriptionRevision,He(re)),re._localUfrag=qe(Z),re.emit("description",re.getState()))})},_e.prototype._setRemoteDescription=function(Z){var re=this;return Z.sdp&&(Z.sdp=this._setCodecPreferences(Z.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),this._shouldApplyDtx?Z.sdp=O(Z.sdp):Z.sdp=O(Z.sdp,[]),Ze&&(Z.sdp=Y(Z.sdp)),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(Z.sdp))),Z=new this._RTCSessionDescription(Z),Promise.resolve().then(function(){if(Z.type==="answer"&&re._localDescriptionWithoutSimulcast){var de=re._preferredVideoCodecs.find(function(Qe){return"adaptiveSimulcast"in Qe}),le=!!de&&de.adaptiveSimulcast===!1,ge=re._revertSimulcast(re._localDescription.sdp,re._localDescriptionWithoutSimulcast.sdp,Z.sdp,le);if(re._localDescriptionWithoutSimulcast=null,ge!==re._localDescription.sdp)return re._rollbackAndApplyOffer({type:re._localDescription.type,sdp:ge})}}).then(function(){return re._peerConnection.setRemoteDescription(Z)}).then(function(){Z.type==="answer"&&(re._isRestartingIce&&(re._log.debug("An ICE restart was in-progress and is now completed"),re._isRestartingIce=!1),He(re))},function(de){throw re._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'.concat(Z.type,'" failed with the error "').concat(de.message,'".'),de),Z.sdp&&re._log.warn("The SDP was ".concat(Z.sdp)),de})},_e.prototype._updateDescription=function(Z){var re=this;switch(Z.type){case"answer":case"pranswer":if(Z.revision!==this._descriptionRevision||this._peerConnection.signalingState!=="have-local-offer")return Promise.resolve();this._descriptionRevision=Z.revision;break;case"close":return this._close();case"create-offer":return Z.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=Z,Promise.resolve()):(this._descriptionRevision=Z.revision,this._offer());case"offer":return Z.revision<=this._lastStableDescriptionRevision||this._peerConnection.signalingState==="closed"?Promise.resolve():this._peerConnection.signalingState==="have-local-offer"?this._needsAnswer&&this._lastStableDescriptionRevision===0?(this._queuedDescription=Z,Promise.resolve()):(this._descriptionRevision=Z.revision,this._handleGlare(Z)):(this._descriptionRevision=Z.revision,this._answer(Z).then(function(){}))}var de=Z.revision;return Promise.resolve().then(function(){return re._setRemoteDescription(Z)}).catch(function(le){var ge=new K;throw re._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'.concat(Z.type,'" failed'),code:ge.code,error:le,sdp:Z.sdp}),ge}).then(function(){return re._lastStableDescriptionRevision=de,re._needsAnswer=!1,re._checkIceBox(Z)}).then(function(){return re._queuedDescription&&re._updateDescription(re._queuedDescription)}).then(function(){return re._queuedDescription=null,re._maybeReoffer(re._peerConnection.localDescription).then(function(){})})},_e.prototype._updateIce=function(Z){var re=this._remoteCandidates.update(Z);return this._addIceCandidates(re)},_e.prototype.addDataTrackSender=function(Z){if(!this._dataChannels.has(Z))try{var re={ordered:Z.ordered};Z.maxPacketLifeTime!==null&&(re.maxPacketLifeTime=Z.maxPacketLifeTime),Z.maxRetransmits!==null&&(re.maxRetransmits=Z.maxRetransmits);var de=this._peerConnection.createDataChannel(Z.id,re);Z.addDataChannel(de),this._dataChannels.set(Z,de)}catch(le){this._log.warn('Error creating an RTCDataChannel for DataTrack "'.concat(Z.id,'": ').concat(le.message))}},_e.prototype._handleQueuedPublisherHints=function(){var Z=this;this._peerConnection.signalingState==="stable"&&this._mediaTrackSenderToPublisherHints.forEach(function(re,de){var le=re.deferred,ge=re.encodings;Z._mediaTrackSenderToPublisherHints.delete(de),Z._setPublisherHint(de,ge).then(function(Qe){return le.resolve(Qe)}).catch(function(Qe){return le.reject(Qe)})})},_e.prototype._setPublisherHint=function(Z,re){var de=this;if(Ze)return Promise.resolve("COULD_NOT_APPLY_HINT");if(this._mediaTrackSenderToPublisherHints.has(Z)){var le=this._mediaTrackSenderToPublisherHints.get(Z);le.deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete(Z)}var ge=this._rtpSenders.get(Z);if(!ge)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if(this._peerConnection.signalingState==="closed")return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if(this._peerConnection.signalingState!=="stable"){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var Qe=J();return this._mediaTrackSenderToPublisherHints.set(Z,{deferred:Qe,encodings:re}),Qe.promise}var $e=ge.getParameters();return re!==null&&re.forEach(function(St){var vt=St.enabled,st=St.layer_index;$e.encodings.length>st?(de._log.debug("layer:".concat(st,", active:").concat($e.encodings[st].active," => ").concat(vt)),$e.encodings[st].active=vt):de._log.warn("invalid layer:".concat(st,", active:").concat(vt))}),this._maybeUpdateEncodings(ge.track,$e.encodings,re===null),ge.setParameters($e).then(function(){return"OK"}).catch(function(St){return de._log.error("Failed to apply publisher hints:",St),"COULD_NOT_APPLY_HINT"})},_e.prototype.addMediaTrackSender=function(Z){var re=this;if(!(this._peerConnection.signalingState==="closed"||this._rtpSenders.has(Z))){var de=this._addOrUpdateTransceiver(Z.track),le=de.sender;Z.addSender(le,function(ge){return re._setPublisherHint(Z,ge)}),this._rtpNewSenders.add(le),this._rtpSenders.set(Z,le)}},_e.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},_e.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},_e.prototype.getState=function(){if(!this._localDescription)return null;var Z=this._localDescription.type==="answer"?this._lastStableDescriptionRevision:this._descriptionRevision,re={type:this._localDescription.type,revision:Z};return this._localDescription.sdp&&(re.sdp=this._localDescription.sdp),{description:re,id:this.id}},_e.prototype.offer=function(){var Z=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",function(re){Z.transition("updating",re);var de=Z._needsAnswer||Z._isRestartingIce?Promise.resolve():Z._offer();return de.then(function(){Z.tryTransition("open",re)},function(le){throw Z.tryTransition("open",re),le})})},_e.prototype.removeDataTrackSender=function(Z){var re=this._dataChannels.get(Z);re&&(Z.removeDataChannel(re),this._dataChannels.delete(Z),re.close())},_e.prototype.removeMediaTrackSender=function(Z){var re=this._rtpSenders.get(Z);if(re){if(this._peerConnection.signalingState!=="closed"&&this._peerConnection.removeTrack(re),Z.removeSender(re),this._mediaTrackSenderToPublisherHints.has(Z)){var de=this._mediaTrackSenderToPublisherHints.get(Z);de.deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete(Z)}this._rtpNewSenders.delete(re),this._rtpSenders.delete(Z)}},_e.prototype.setConfiguration=function(Z){typeof this._peerConnection.setConfiguration=="function"&&this._peerConnection.setConfiguration($(Z))},_e.prototype.setIceReconnectTimeout=function(Z){return this._iceReconnectTimeout.setDelay(Z),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},_e.prototype.update=function(Z){var re=this;return this.bracket("updating",function(de){if(re.state==="closed")return Promise.resolve();re.transition("updating",de);var le=[];return Z.ice&&le.push(re._updateIce(Z.ice)),Z.description&&le.push(re._updateDescription(Z.description)),Promise.all(le).then(function(){re.tryTransition("open",de)},function(ge){throw re.tryTransition("open",de),ge})})},_e.prototype.getStats=function(){var Z=this;return f(this._peerConnection,{log:this._log}).then(function(re){return Re(Z,re)})},_e})(fe);function me(Ce,_e){var Z=Ce._getMediaTrackSenderId(_e.trackId);return Object.assign(_e,{trackId:Z})}function Ue(Ce,_e){var Z=n([],e(Ce._mediaTrackReceivers),!1).find(function(de){return de.track.id===_e.trackId}),re=Z?Z.id:null;return Object.assign(_e,{trackId:re})}function Re(Ce,_e){return Object.assign(_e,{remoteAudioTrackStats:_e.remoteAudioTrackStats.map(function(Z){return Ue(Ce,Z)}),remoteVideoTrackStats:_e.remoteVideoTrackStats.map(function(Z){return Ue(Ce,Z)}),localAudioTrackStats:_e.localAudioTrackStats.map(function(Z){return me(Ce,Z)}),localVideoTrackStats:_e.localVideoTrackStats.map(function(Z){return me(Ce,Z)})})}function qe(Ce){if(Ce.sdp){var _e=Ce.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(_e)return _e[1]}return null}function $(Ce){return Ce===void 0&&(Ce={}),Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},Ce)}function H(Ce,_e){var Z=_e.track;return Z&&Z.kind===Ce&&Z.readyState!=="ended"}function Y(Ce){return Ce.replace(/a=msid:[^ ]+ /g,"a=msid:- ")}function ye(Ce,_e){return!Ce.stopped&&!_e._replaceTrackPromises.has(Ce)&&["inactive","recvonly"].includes(Ce.direction)}function Se(Ce,_e){var Z={audio:Ce._preferredAudioCodecs.map(function(ge){var Qe=ge.codec;return Qe.toLowerCase()}),video:Ce._preferredVideoCodecs.map(function(ge){var Qe=ge.codec;return Qe.toLowerCase()})}[_e],re=Ce._recycledTransceivers[_e],de=Z.find(function(ge){return Ce._localCodecs.has(ge)});if(!de)return re.shift();var le=re.find(function(ge){var Qe=Ce._remoteCodecMaps.get(ge.mid);return Qe&&Qe.has(de)});return le&&re.splice(re.indexOf(le),1),le}function Oe(Ce){var _e=Ce._peerConnection.localDescription;!_e||!_e.sdp||b(_e.sdp).forEach(function(Z){var re=j(Z);re.forEach(function(de,le){return Ce._localCodecs.add(le)})})}function xe(Ce){var _e=Ce._peerConnection.remoteDescription;!_e||!_e.sdp||b(_e.sdp).forEach(function(Z){var re=Z.match(/^a=mid:(.+)$/m);if(!(!re||!re[1])){var de=re[1],le=j(Z);Ce._remoteCodecMaps.set(de,le)}})}function Fe(Ce){Ce._recycledTransceivers.audio=[],Ce._recycledTransceivers.video=[],Ce._peerConnection.getTransceivers().forEach(function(_e){if(ye(_e,Ce)){var Z=_e.receiver.track;Ce._recycledTransceivers[Z.kind].push(_e)}})}function He(Ce){Fe(Ce),Oe(Ce),xe(Ce),bt(Ce).then(function(){Ce._handleQueuedPublisherHints()})}function bt(Ce){var _e=Ce._encodingParameters,Z=_e.maxAudioBitrate,re=_e.maxVideoBitrate,de=new Map([["audio",Z],["video",re]]),le=[];return Ce._peerConnection.getSenders().filter(function(ge){return ge.track}).forEach(function(ge){var Qe=de.get(ge.track.kind),$e=ge.getParameters();Qe===null||Qe===0?Gt($e):Ce._isChromeScreenShareTrack(ge.track)?Ce._log.warn("Not setting maxBitrate for ".concat(ge.track.kind," Track ").concat(ge.track.id," because it appears to be screen share track: ").concat(ge.track.label)):Lt($e,Qe),!Ze&&$e.encodings.length>0&&(ge.track.kind==="audio"?$e.encodings[0].priority="high":Ce._isChromeScreenShareTrack(ge.track)&&($e.encodings[0].priority="medium"),Ce._enableDscp&&($e.encodings[0].networkPriority="high"));var St=Ce._rtpNewSenders.has(ge);Ce._maybeUpdateEncodings(ge.track,$e.encodings,St),Ce._rtpNewSenders.delete(ge);var vt=ge.setParameters($e).catch(function(st){Ce._log.warn("Error while setting encodings parameters for ".concat(ge.track.kind," Track ").concat(ge.track.id,": ").concat(st.message||st.name))});le.push(vt)}),Promise.all(le)}function Gt(Ce){Array.isArray(Ce.encodings)&&Ce.encodings.forEach(function(_e){return delete _e.maxBitrate})}function Lt(Ce,_e){Ze?Ce.encodings=[{maxBitrate:_e}]:Ce.encodings.forEach(function(Z){Z.maxBitrate=_e})}return pi=Me,pi}var vi,tS;function oL(){if(tS)return vi;tS=1;var i=vi&&vi.__extends||(function(){var b=function(y,S){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,A){C.__proto__=A}||function(C,A){for(var F in A)Object.prototype.hasOwnProperty.call(A,F)&&(C[F]=A[F])},b(y,S)};return function(y,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");b(y,S);function C(){this.constructor=y}y.prototype=S===null?Object.create(S):(C.prototype=S.prototype,new C)}})(),e=vi&&vi.__read||function(b,y){var S=typeof Symbol=="function"&&b[Symbol.iterator];if(!S)return b;var C=S.call(b),A,F=[],D;try{for(;(y===void 0||y-- >0)&&!(A=C.next()).done;)F.push(A.value)}catch(P){D={error:P}}finally{try{A&&!A.done&&(S=C.return)&&S.call(C)}finally{if(D)throw D.error}}return F},n=vi&&vi.__spreadArray||function(b,y,S){if(S||arguments.length===2)for(var C=0,A=y.length,F;C<A;C++)(F||!(C in y))&&(F||(F=Array.prototype.slice.call(y,0,C)),F[C]=y[C]);return b.concat(F||Array.prototype.slice.call(y))},a=hr().guessBrowser,s=iL(),o=UT(),c=NT(),u=_t(),f=Ti().MediaConnectionError,h=a()==="firefox",v=(function(b){i(y,b);function y(S,C,A){var F=b.call(this)||this;A=Object.assign({audioContextFactory:h?mf():null,PeerConnectionV2:s},A);var D=A.audioContextFactory?A.audioContextFactory.getOrCreate(F):null,P=D?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(F,{_audioContextFactory:{value:A.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:u.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:D?new o(m(D)):null},_encodingParameters:{value:S},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:P},_peerConnections:{value:new Map},_preferredCodecs:{value:C},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:A.PeerConnectionV2}}),F}return y.prototype.setEffectiveAdaptiveSimulcast=function(S){this._peerConnections.forEach(function(C){return C.setEffectiveAdaptiveSimulcast(S)}),this._preferredCodecs.video.forEach(function(C){"adaptiveSimulcast"in C&&(C.adaptiveSimulcast=S)})},Object.defineProperty(y.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),y.prototype._closeAbsentPeerConnections=function(S){var C=new Set(S.map(function(A){return A.id}));return this._peerConnections.forEach(function(A){C.has(A.id)||A._close()}),this},y.prototype._getConfiguration=function(){return this._configurationDeferred.promise},y.prototype._getOrCreate=function(S,C){var A=this,F=this,D=this._peerConnections.get(S);if(!D){var P=this._PeerConnectionV2,K=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},C);try{D=new P(S,this._encodingParameters,this._preferredCodecs,K)}catch{throw new f}this._peerConnections.set(D.id,D),D.on("candidates",this.queue.bind(this,"candidates")),D.on("description",this.queue.bind(this,"description")),D.on("trackAdded",this.queue.bind(this,"trackAdded")),D.on("stateChanged",function q(W){W==="closed"&&(D.removeListener("stateChanged",q),F._dataTrackSenders.forEach(function(B){return D.removeDataTrackSender(B)}),F._mediaTrackSenders.forEach(function(B){return D.removeMediaTrackSender(B)}),F._peerConnections.delete(D.id),F._closedPeerConnectionIds.add(D.id),L(F),O(F))}),D.on("connectionStateChanged",function(){return L(A)}),D.on("iceConnectionStateChanged",function(){return O(A)}),this._dataTrackSenders.forEach(D.addDataTrackSender,D),this._mediaTrackSenders.forEach(D.addMediaTrackSender,D),O(this)}return D},y.prototype.close=function(){return this._peerConnections.forEach(function(S){S.close()}),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),O(this),this},y.prototype.createAndOffer=function(){var S=this;return this._getConfiguration().then(function(C){var A;do A=u.makeUUID();while(S._peerConnections.has(A));return S._getOrCreate(A,C)}).then(function(C){return C.offer()}).then(function(){return S})},y.prototype.getTrackReceivers=function(){return u.flatMap(this._peerConnections,function(S){return S.getTrackReceivers()})},y.prototype.getStates=function(){var S=[];return this._peerConnections.forEach(function(C){var A=C.getState();A&&S.push(A)}),S},y.prototype.setConfiguration=function(S){return this._configuration&&(this._configurationDeferred=u.defer(),this._peerConnections.forEach(function(C){C.setConfiguration(S)})),this._configuration=S,this._configurationDeferred.resolve(S),this},y.prototype.setIceReconnectTimeout=function(S){return this._sessionTimeout===null&&(this._peerConnections.forEach(function(C){C.setIceReconnectTimeout(S)}),this._sessionTimeout=S),this},y.prototype.setTrackSenders=function(S){var C=new Set(S.filter(function(D){return D.kind==="data"})),A=new Set(S.filter(function(D){return D&&(D.kind==="audio"||D.kind==="video")})),F=w(this,C,A);return this._dataTrackSenders=C,this._mediaTrackSenders=A,g(this,F),this},y.prototype.update=function(S,C){var A=this;return C===void 0&&(C=!1),C&&this._closeAbsentPeerConnections(S),this._getConfiguration().then(function(F){return Promise.all(S.map(function(D){if(A._closedPeerConnectionIds.has(D.id))return null;var P=A._getOrCreate(D.id,F);return P.update(D)}))}).then(function(){return A})},y.prototype.getStats=function(){var S=Array.from(this._peerConnections.values());return Promise.all(S.map(function(C){return C.getStats().then(function(A){return[C.id,A]})})).then(function(C){return new Map(C)})},y})(c);function m(b){var y=b.createMediaStreamDestination();return y.stream.getAudioTracks()[0]}function g(b,y){(y.data.add.size||y.data.remove.size||y.media.add.size||y.media.remove.size)&&b._peerConnections.forEach(function(S){y.data.remove.forEach(S.removeDataTrackSender,S),y.media.remove.forEach(S.removeMediaTrackSender,S),y.data.add.forEach(S.addDataTrackSender,S),y.media.add.forEach(S.addMediaTrackSender,S),(y.media.add.size||y.media.remove.size||y.data.add.size&&!S.isApplicationSectionNegotiated)&&S.offer()})}function _(b,y){var S=u.difference(y,b._dataTrackSenders),C=u.difference(b._dataTrackSenders,y);return{add:S,remove:C}}function w(b,y,S){return{data:_(b,y),media:E(b,S)}}function E(b,y){var S=u.difference(y,b._mediaTrackSenders),C=u.difference(b._mediaTrackSenders,y);return{add:S,remove:C}}var T={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3},N;function j(){return Object.keys(T).reduce(function(b,y){var S;return Object.assign(b,(S={},S[T[y]]=y,S))},{})}function x(b){return b.length?(N=N||j(),b.reduce(function(y,S){return N[Math.max(T[y],T[S])]})):"new"}function O(b){b._lastIceConnectionState=b.iceConnectionState,b._iceConnectionState=x(n([],e(b._peerConnections.values()),!1).map(function(y){return y.iceConnectionState})),b.iceConnectionState!==b._lastIceConnectionState&&b.emit("iceConnectionStateChanged")}function L(b){b._lastConnectionState=b.connectionState,b._connectionState=x(n([],e(b._peerConnections.values()),!1).map(function(y){return y.connectionState})),b.connectionState!==b._lastConnectionState&&b.emit("connectionStateChanged")}return vi=v,vi}var Rc,rS;function ca(){if(rS)return Rc;rS=1;var i=Rc&&Rc.__extends||(function(){var s=function(o,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])},s(o,c)};return function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(o,c);function u(){this.constructor=o}o.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}})(),e=pr(),n=0,a=(function(s){i(o,s);function o(c,u,f){var h=s.call(this)||this;return Object.defineProperties(h,{_instanceId:{value:n++},channel:{value:u},_log:{value:f.log.createLog("default",h)},_getReceiver:{value:c},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),h}return Object.defineProperty(o.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),o.prototype.toString=function(){return"[MediaSignaling #".concat(this._instanceId,":").concat(this.channel,"]")},o.prototype.setup=function(c){var u=this;this._teardown(),this._log.info("setting up msp transport for id:",c);var f=this._getReceiver(c).then(function(h){if(h.kind!=="data"&&u._log.error("Expected a DataTrackReceiver"),u._receiverPromise===f){try{u._transport=h.toDataTransport(),u.emit("ready",u._transport)}catch(v){u._log.error("Failed to toDataTransport: ".concat(v.message))}h.once("close",function(){return u._teardown()})}});this._receiverPromise=f},o.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},o})(e);return Rc=a,Rc}var Oc,nS;function aL(){if(nS)return Oc;nS=1;var i=Oc&&Oc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=ca(),n=(function(a){i(s,a);function s(o,c){var u=a.call(this,o,"active_speaker",c)||this;return Object.defineProperties(u,{_loudestParticipantSid:{value:null,writable:!0}}),u.on("ready",function(f){f.on("message",function(h){switch(h.type){case"active_speaker":u._setLoudestParticipantSid(h.participant);break}})}),u}return Object.defineProperty(s.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),s.prototype._setLoudestParticipantSid=function(o){this.loudestParticipantSid!==o&&(this._loudestParticipantSid=o,this.emit("updated"))},s})(e);return Oc=n,Oc}var Ic,iS;function sL(){if(iS)return Ic;iS=1;var i=Ic&&Ic.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=ca(),n=(function(a){i(s,a);function s(o,c){var u=a.call(this,o,"extension_transcriptions",c)||this;return u.on("ready",function(f){f.on("message",function(h){switch(h.type){case"extension_transcriptions":u.emit("transcription",h);break}})}),u}return s})(e);return Ic=n,Ic}var Qh,oS;function cL(){if(oS)return Qh;oS=1;var i=(function(){function e(n,a,s,o){Object.defineProperties(this,{availableSend:{enumerable:!0,value:s},recv:{enumerable:!0,value:a},rtt:{enumerable:!0,value:o},send:{enumerable:!0,value:n}})}return e.of=function(n,a){var s=(a.timestamp-n.timestamp)/1e3,o=a.bytesSent-n.bytesSent,c=a.bytesReceived-n.bytesReceived,u=s>0?o/s*8:0,f=s>0?c/s*8:0,h=a.availableOutgoingBitrate,v=a.currentRoundTripTime;return new e(u,f,h,v)},e})();return Qh=i,Qh}var Jh,aS;function uL(){if(aS)return Jh;aS=1;var i=cL(),e=(function(){function n(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new i(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return n.prototype.next=function(a){var s=this.lastStats;if(this.lastStats=a,s){var o=s.id===a.id?i.of(s,a):new i(0,0);this.lastReport=o}return this.lastReport},n})();return Jh=e,Jh}var Yh,sS;function nE(){if(sS)return Yh;sS=1;function i(e){return e=e.filter(function(n){return typeof n=="number"}),e.length<1?void 0:e.reduce(function(n,a){return a+n})/e.length}return Yh=i,Yh}var Xh,cS;function iE(){if(cS)return Xh;cS=1;var i=(function(){function e(n,a,s){Object.defineProperties(this,{id:{enumerable:!0,value:n},trackId:{enumerable:!0,value:a},bitrate:{enumerable:!0,value:s}})}return e})();return Xh=i,Xh}var Zh,uS;function oE(){if(uS)return Zh;uS=1;function i(e){return e.reduce(function(n,a){return typeof a=="number"?a+n:n},0)}return Zh=i,Zh}var Lc,lS;function aE(){if(lS)return Lc;lS=1;var i=Lc&&Lc.__extends||(function(){var o=function(c,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(f[v]=h[v])},o(c,u)};return function(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");o(c,u);function f(){this.constructor=c}c.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}})(),e=nE(),n=iE(),a=oE(),s=(function(o){i(c,o);function c(u,f,h,v,m,g,_){var w=o.call(this,u,f,h)||this,E=m>0?v/m:0;return Object.defineProperties(w,{deltaPacketsLost:{enumerable:!0,value:v},deltaPacketsReceived:{enumerable:!0,value:m},fractionLost:{enumerable:!0,value:g},jitter:{enumerable:!0,value:_},phonyFractionLost:{enumerable:!0,value:E}}),w}return c.of=function(u,f,h){if(f.id!==h.id)throw new Error("RTCStats IDs must match");var v=(h.timestamp-f.timestamp)/1e3,m=h.bytesReceived-f.bytesReceived,g=v>0?m/v*8:0,_=Math.max(h.packetsLost-f.packetsLost,0),w=h.packetsReceived-f.packetsReceived,E=h.fractionLost,T=h.jitter;return new c(f.id,u,g,_,w,E,T)},c.summarize=function(u){var f=u.map(function(g){return g.summarize()}),h=a(f.map(function(g){return g.bitrate})),v=e(f.map(function(g){return g.fractionLost})),m=e(f.map(function(g){return g.jitter}));return{bitrate:h,fractionLost:v,jitter:m}},c.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:typeof this.fractionLost=="number"?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},c})(n);return Lc=s,Lc}var Ac,fS;function sE(){if(fS)return Ac;fS=1;var i=Ac&&Ac.__extends||(function(){var o=function(c,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(f[v]=h[v])},o(c,u)};return function(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");o(c,u);function f(){this.constructor=c}c.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}})(),e=nE(),n=iE(),a=oE(),s=(function(o){i(c,o);function c(u,f,h,v){var m=o.call(this,u,f,h)||this;return Object.defineProperties(m,{rtt:{enumerable:!0,value:v}}),m}return c.of=function(u,f,h,v){if(f.id!==h.id)throw new Error("RTCStats IDs must match");var m=(h.timestamp-f.timestamp)/1e3,g=h.bytesSent-f.bytesSent,_=m>0?g/m*8:0,w=v&&typeof v.roundTripTime=="number"?v.roundTripTime/1e3:void 0;return new c(f.id,u,_,w)},c.summarize=function(u){var f=a(u.map(function(v){return v.bitrate})),h=e(u.map(function(v){return v.rtt}));return{bitrate:f,rtt:h}},c})(n);return Ac=s,Ac}var ep,dS;function lL(){if(dS)return ep;dS=1;var i=aE(),e=sE(),n=(function(){function a(s,o,c){Object.defineProperties(this,{ice:{enumerable:!0,value:s},audio:{enumerable:!0,value:o},video:{enumerable:!0,value:c}})}return a.prototype.summarize=function(){var s=this.audio.send.concat(this.video.send),o=e.summarize(s),c=this.audio.recv.concat(this.video.recv),u=i.summarize(c);return{ice:this.ice,send:o,recv:u,audio:{send:e.summarize(this.audio.send),recv:i.summarize(this.audio.recv)},video:{send:e.summarize(this.video.send),recv:i.summarize(this.video.recv)}}},a})();return ep=n,ep}var tp,hS;function cE(){if(hS)return tp;hS=1;var i=(function(){function e(n,a,s){Object.defineProperties(this,{id:{enumerable:!0,value:n,writable:!0},trackId:{enumerable:!0,value:a,writable:!0},lastStats:{enumerable:!0,value:s,writable:!0}})}return e})();return tp=i,tp}var xc,pS;function fL(){if(pS)return xc;pS=1;var i=xc&&xc.__extends||(function(){var s=function(o,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])},s(o,c)};return function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(o,c);function u(){this.constructor=o}o.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}})(),e=aE(),n=cE(),a=(function(s){i(o,s);function o(c,u){var f=s.call(this,u.id,c,u)||this;return Object.defineProperties(f,{lastReport:{enumerable:!0,value:null,writable:!0}}),f}return o.prototype.next=function(c,u){var f=this.lastStats;this.lastStats=u,this.trackId=c;var h=e.of(c,f,u);return this.lastReport=h,h},o})(n);return xc=a,xc}var Dc,vS;function dL(){if(vS)return Dc;vS=1;var i=Dc&&Dc.__extends||(function(){var s=function(o,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])},s(o,c)};return function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(o,c);function u(){this.constructor=o}o.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}})(),e=cE(),n=sE(),a=(function(s){i(o,s);function o(c,u){var f=s.call(this,u.id,c,u)||this;return Object.defineProperties(f,{lastReport:{enumerable:!0,value:null,writable:!0}}),f}return o.prototype.next=function(c,u,f){var h=this.lastStats;this.lastStats=u,this.trackId=c;var v=n.of(c,h,u,f);return this.lastReport=v,v},o})(e);return Dc=a,Dc}var mi,mS;function hL(){if(mS)return mi;mS=1;var i=mi&&mi.__read||function(y,S){var C=typeof Symbol=="function"&&y[Symbol.iterator];if(!C)return y;var A=C.call(y),F,D=[],P;try{for(;(S===void 0||S-- >0)&&!(F=A.next()).done;)D.push(F.value)}catch(K){P={error:K}}finally{try{F&&!F.done&&(C=A.return)&&C.call(A)}finally{if(P)throw P.error}}return D},e=mi&&mi.__spreadArray||function(y,S,C){if(C||arguments.length===2)for(var A=0,F=S.length,D;A<F;A++)(D||!(A in S))&&(D||(D=Array.prototype.slice.call(S,0,A)),D[A]=S[A]);return y.concat(D||Array.prototype.slice.call(S))},n=mi&&mi.__values||function(y){var S=typeof Symbol=="function"&&Symbol.iterator,C=S&&y[S],A=0;if(C)return C.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&A>=y.length&&(y=void 0),{value:y&&y[A++],done:!y}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")},a=hr().guessBrowser,s=uL(),o=lL(),c=fL(),u=dL(),f=(function(){function y(S){Object.defineProperties(this,{pc:{enumerable:!0,value:S},ice:{enumerable:!0,value:new s},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return y.prototype.next=function(){var S=this,C=a()==="firefox"?L(this):b(this);return C.then(function(){var A=e([],i(S.audio.send.values()),!1),F=e([],i(S.video.send.values()),!1),D=e([],i(S.audio.recv.values()),!1),P=e([],i(S.video.recv.values()),!1),K=new o(S.ice.lastReport,{send:A.map(function(q){return q.lastReport}).filter(function(q){return q}),recv:D.map(function(q){return q.lastReport}).filter(function(q){return q})},{send:F.map(function(q){return q.lastReport}).filter(function(q){return q}),recv:P.map(function(q){return q.lastReport}).filter(function(q){return q})});return S.lastReport=K,K})},y})();function h(y){return Promise.all(y.map(function(S){var C=S.track.id;return S.getStats().then(function(A){var F,D;try{for(var P=n(A.values()),K=P.next();!K.done;K=P.next()){var q=K.value;q.type==="inbound-rtp"&&(q.id="".concat(C,"-").concat(q.id))}}catch(W){F={error:W}}finally{try{K&&!K.done&&(D=P.return)&&D.call(P)}finally{if(F)throw F.error}}return[C,A]})})).then(function(S){return new Map(S)})}function v(y,S,C,A,F){var D=S[A.mediaType];if(!F){var P=C.get(A.trackId);P&&(F=P.trackIdentifier)}if(D&&F){if(D.has(A.id))return D.get(A.id);var K=new y(F,A);D.set(A.id,K)}return null}function m(y){return{audio:y.audio.send,video:y.video.send}}function g(y){return{audio:y.audio.recv,video:y.video.recv}}function _(y,S,C,A){return v(u,m(y),S,C,A)}function w(y,S,C,A){return v(c,g(y),S,C,A)}function E(y){return{audio:new Set(y.audio.send.keys()),video:new Set(y.video.send.keys())}}function T(y){return{audio:new Set(y.audio.recv.keys()),video:new Set(y.video.recv.keys())}}function N(y,S,C,A){var F,D;try{for(var P=n(S.values()),K=P.next();!K.done;K=P.next()){var q=K.value;if(q.type==="outbound-rtp"&&!q.isRemote){if(a()!=="firefox"&&!q.trackId)continue;var W=C[q.mediaType];W&&W.delete(q.id);var B=_(y,S,q,A);if(B){var z=S.get(q.remoteId);B.next(A||B.trackId,q,z)}}}}catch(G){F={error:G}}finally{try{K&&!K.done&&(D=P.return)&&D.call(P)}finally{if(F)throw F.error}}}function j(y,S,C,A){var F,D;try{for(var P=n(S.values()),K=P.next();!K.done;K=P.next()){var q=K.value;if(q.type==="inbound-rtp"&&!q.isRemote){var W=C[q.mediaType];W&&W.delete(q.id);var B=w(y,S,q,A);B&&B.next(A||B.trackId,q)}}}catch(z){F={error:z}}finally{try{K&&!K.done&&(D=P.return)&&D.call(P)}finally{if(F)throw F.error}}}function x(y,S){var C=function(F){var D=y[F],P=S[F];P.forEach(function(K){return D.delete(K)})};for(var A in S)C(A)}function O(y,S){var C,A,F,D,P;try{for(var K=n(S.values()),q=K.next();!q.done;q=K.next()){var W=q.value;W.type==="transport"&&(P=S.get(W.selectedCandidatePairId))}}catch(G){C={error:G}}finally{try{q&&!q.done&&(A=K.return)&&A.call(K)}finally{if(C)throw C.error}}if(P){y.next(P);return}try{for(var B=n(S.values()),z=B.next();!z.done;z=B.next()){var W=z.value;W.type==="candidate-pair"&&W.nominated&&(!("selected"in W)||W.selected)&&y.next(W)}}catch(G){F={error:G}}finally{try{z&&!z.done&&(D=B.return)&&D.call(B)}finally{if(F)throw F.error}}}function L(y){var S=y.pc.getTransceivers().filter(function(A){return A.currentDirection&&A.currentDirection.match(/send/)&&A.sender.track}).map(function(A){return A.sender}),C=y.pc.getTransceivers().filter(function(A){return A.currentDirection&&A.currentDirection.match(/recv/)}).map(function(A){return A.receiver});return Promise.all([h(S),h(C),y.pc.getStats()]).then(function(A){var F=i(A,3),D=F[0],P=F[1],K=F[2],q=m(y),W=E(y);D.forEach(function(G,J){return N(y,G,W,J)}),x(q,W);var B=g(y),z=T(y);P.forEach(function(G,J){return j(y,G,z,J)}),x(B,z),O(y.ice,K)})}function b(y){return y.pc.getStats().then(function(S){var C=m(y),A=E(y);N(y,S,A),x(C,A);var F=g(y),D=T(y);j(y,S,D),x(F,D),O(y.ice,S)})}return mi=f,mi}var Wo,gS;function pL(){if(gS)return Wo;gS=1;var i=Wo&&Wo.__extends||(function(){var c=function(u,f){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(h[m]=v[m])},c(u,f)};return function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");c(u,f);function h(){this.constructor=u}u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}})(),e=Wo&&Wo.__read||function(c,u){var f=typeof Symbol=="function"&&c[Symbol.iterator];if(!f)return c;var h=f.call(c),v,m=[],g;try{for(;(u===void 0||u-- >0)&&!(v=h.next()).done;)m.push(v.value)}catch(_){g={error:_}}finally{try{v&&!v.done&&(f=h.return)&&f.call(h)}finally{if(g)throw g.error}}return m},n=pr(),a=hL(),s=(function(c){i(u,c);function u(f,h){var v=c.call(this)||this;return Object.defineProperties(v,{_factories:{value:new WeakMap},_manager:{value:f},_signaling:{value:h}}),h.on("updated",function(){return v.emit("updated")}),v}return Object.defineProperty(u.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),u.prototype.start=function(){var f=this;this.stop();var h=setTimeout(function(){f._timeout===h&&o(f).then(function(v){if(f._timeout===h){if(v.length){var m=e(v,1),g=m[0];f._signaling.put(g)}f.start()}})},200);this._timeout=h},u.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},u})(n);function o(c){var u=c._manager._peerConnections?Array.from(c._manager._peerConnections.values()):[],f=u.map(function(m){return m._peerConnection}).filter(function(m){return m.signalingState!=="closed"}),h=f.map(function(m){if(c._factories.has(m))return c._factories.get(m);var g=new a(m);return c._factories.set(m,g),g}),v=h.map(function(m){return m.next().catch(function(){return null})});return Promise.all(v).then(function(m){return m.filter(function(g){return g}).map(function(g){return g.summarize()})})}return Wo=s,Wo}var rp,yS;function vL(){if(yS)return rp;yS=1;var i=_t().defer,e=(function(){function n(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return n.prototype.put=function(a){this._hasValue=!0,this._value=a;var s=this._deferreds.shift();return s&&s.resolve(a),this},n.prototype.take=function(){var a=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var s=i();return this._deferreds.push(s),s.promise.then(function(o){return a._hasValue=!1,o})},n})();return rp=e,rp}var Mc,_S;function mL(){if(_S)return Mc;_S=1;var i=Mc&&Mc.__extends||(function(){var u=function(f,h){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(v[g]=m[g])},u(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");u(f,h);function v(){this.constructor=f}f.prototype=h===null?Object.create(h):(v.prototype=h.prototype,new v)}})(),e=ca(),n=vL(),a=sa(),s=5e3,o=(function(u){i(f,u);function f(h,v,m){var g=u.call(this,h,"network_quality",m)||this;return Object.defineProperties(g,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new n},_resendTimer:{value:new a(function(){g._resendTimer.setDelay(g._resendTimer.delay*1.5),g._sendNetworkQualityInputs()},s,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:v.local,remoteReportLevel:v.remote}}}}),g.on("ready",function(_){_.on("message",function(w){switch(g._log.debug("Incoming: ",w),w.type){case"network_quality":g._handleNetworkQualityMessage(w);break}})}),g._sendNetworkQualityInputs(),g}return Object.defineProperty(f.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),f.prototype._handleNetworkQualityMessage=function(h){var v=this,m=!1,g=null,_=h?h.local:null;typeof _=="number"?(g=_,this._levels=null):typeof _=="object"&&_&&(this._levels=_,g=typeof _.level=="number"?_.level:Math.min(_.audio.send,_.audio.recv,_.video.send,_.video.recv)),g!==null&&this.level!==g&&(this._level=g,m=!0),this._remoteLevels=h&&h.remotes?h.remotes.reduce(function(w,E){var T=v._remoteLevels.get(E.sid)||{};return T.level!==E.level&&(m=!0),w.set(E.sid,E)},new Map):this._remoteLevels,m&&this.emit("updated"),this._resendTimer.setDelay(s),this._resendTimer.isSet&&setTimeout(function(){return v._sendNetworkQualityInputs()},1e3)},f.prototype._sendNetworkQualityInputs=function(){var h=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then(function(v){h._transport&&h._transport.publish(c(v,h._networkQualityReportLevels))}).finally(function(){h._resendTimer.start()})},f.prototype.put=function(h){this._networkQualityInputs.put(h)},f})(e);function c(u,f){return Object.assign({type:"network_quality"},u,f)}return Mc=o,Mc}var Nc,wS;function uE(){if(wS)return Nc;wS=1;var i=Nc&&Nc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=pr().EventEmitter,n=(function(a){i(s,a);function s(){var o=a.call(this)||this;return Object.defineProperties(o,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),o}return s.prototype.disable=function(){return this.enable(!1)},s.prototype.enable=function(o){return o=typeof o=="boolean"?o:!0,this.isEnabled!==o&&(this._isEnabled=o,this.emit("updated")),this},s})(e);return Nc=n,Nc}var jc,SS;function gL(){if(SS)return jc;SS=1;var i=jc&&jc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=uE(),n=(function(a){i(s,a);function s(){var o=a.call(this)||this;return Object.defineProperties(o,{_revision:{value:1,writable:!0}}),o}return s.prototype.update=function(o){return o.revision<this._revision?this:(this._revision=o.revision,this.enable(o.is_recording))},s})(e);return jc=n,jc}var zo,kS;function yL(){if(kS)return zo;kS=1;var i=zo&&zo.__awaiter||function(v,m,g,_){function w(E){return E instanceof g?E:new g(function(T){T(E)})}return new(g||(g=Promise))(function(E,T){function N(O){try{x(_.next(O))}catch(L){T(L)}}function j(O){try{x(_.throw(O))}catch(L){T(L)}}function x(O){O.done?E(O.value):w(O.value).then(N,j)}x((_=_.apply(v,m||[])).next())})},e=zo&&zo.__generator||function(v,m){var g={label:0,sent:function(){if(E[0]&1)throw E[1];return E[1]},trys:[],ops:[]},_,w,E,T=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return T.next=N(0),T.throw=N(1),T.return=N(2),typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function N(x){return function(O){return j([x,O])}}function j(x){if(_)throw new TypeError("Generator is already executing.");for(;T&&(T=0,x[0]&&(g=0)),g;)try{if(_=1,w&&(E=x[0]&2?w.return:x[0]?w.throw||((E=w.return)&&E.call(w),0):w.next)&&!(E=E.call(w,x[1])).done)return E;switch(w=0,E&&(x=[x[0]&2,E.value]),x[0]){case 0:case 1:E=x;break;case 4:return g.label++,{value:x[1],done:!1};case 5:g.label++,w=x[1],x=[0];continue;case 7:x=g.ops.pop(),g.trys.pop();continue;default:if(E=g.trys,!(E=E.length>0&&E[E.length-1])&&(x[0]===6||x[0]===2)){g=0;continue}if(x[0]===3&&(!E||x[1]>E[0]&&x[1]<E[3])){g.label=x[1];break}if(x[0]===6&&g.label<E[1]){g.label=E[1],E=x;break}if(E&&g.label<E[2]){g.label=E[2],g.ops.push(x);break}E[2]&&g.ops.pop(),g.trys.pop();continue}x=m.call(v,g)}catch(O){x=[6,O],w=0}finally{_=E=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},n=tE(),a=zT(),s=_t(),o=s.filterObject,c=s.flatMap,u=s.difference,f=es(),h=(function(){function v(m,g,_){if(_===void 0&&(_={}),!m||typeof m.getStats!="function")throw new Error("StatsMonitor requires a stats source with getStats() method");if(!g)throw new Error("StatsMonitor requires a log instance");this._statsSource=m,this._log=g,this._publishIntervalMs=_.publishIntervalMs||1e4,this._collectionIntervalMs=_.collectionIntervalMs||1e3,this._collectionsPerPublish=Math.floor(this._publishIntervalMs/this._collectionIntervalMs),this._stallThreshold=.5,this._resumeThreshold=5,this._initializeState(),this._startStatsCollection()}return v.prototype._initializeState=function(){this._movingAverageDeltas=new Map,this._interval=null,this._statsCollectionCount=0,this._iceCandidatePublishToggle=!1,this._hasSeenActivePair=!1,this._lastNetworkType=null,this._lastQualityLimitationReasonByTrackSid=new Map,this._stalledTrackSids=new Set},v.prototype._startStatsCollection=function(){var m=this;if(this._interval){this._log.warn("StatsMonitor already started");return}this._interval=setInterval(function(){return i(m,void 0,void 0,function(){return e(this,function(g){switch(g.label){case 0:return[4,this._collectAndAnalyzeStats()];case 1:return g.sent(),[2]}})})},this._collectionIntervalMs),this._log.debug("StatsMonitor started")},v.prototype._stopStatsCollection=function(){this._interval&&(clearInterval(this._interval),this._interval=null),this._log.debug("StatsMonitor stopped")},v.prototype._collectAndAnalyzeStats=function(){return i(this,void 0,void 0,function(){var m,g,_;return e(this,function(w){switch(w.label){case 0:return w.trys.push([0,2,,3]),[4,this._statsSource.getStats()];case 1:return m=w.sent(),this._statsCollectionCount++,g=this._statsCollectionCount%this._collectionsPerPublish===0,g&&(this._iceCandidatePublishToggle=!this._iceCandidatePublishToggle),_=g&&this._iceCandidatePublishToggle,this._analyzeStats(m,g,_),[3,3];case 2:return w.sent(),[3,3];case 3:return[2]}})})},v.prototype._analyzeStats=function(m,g,_){var w=this;!m||m instanceof Map&&m.size===0||Array.isArray(m)&&m.length===0||m.forEach(function(E,T){w._checkNetworkTypeChanges(E),w._checkQualityLimitations(E.localVideoTrackStats),w._checkTrackStalls(E.remoteVideoTrackStats),g&&(w._publishStatsReport(T,E),_&&w._publishActiveIceCandidatePair(T,E))})},v.prototype._checkNetworkTypeChanges=function(m){var g=m.activeIceCandidatePair;if(!(!g||!g.localCandidate)){var _=g.localCandidate.networkType;if(_){if(!this._hasSeenActivePair){this._hasSeenActivePair=!0,this._lastNetworkType=_,f.network.typeChanged(_);return}this._lastNetworkType!==_&&(this._log.debug("Network type changed: ".concat(this._lastNetworkType," -> ").concat(_)),this._lastNetworkType=_,f.network.typeChanged(_))}}},v.prototype._checkQualityLimitations=function(m){var g=this;Array.isArray(m)&&m.forEach(function(_){var w=_.trackSid,E=_.qualityLimitationReason;if(!(!w||typeof E!="string")){var T=g._lastQualityLimitationReasonByTrackSid.get(w);T!==E&&(g._log.debug("Quality limitation reason changed for track ".concat(w,": ").concat(T||"none"," -> ").concat(E)),g._lastQualityLimitationReasonByTrackSid.set(w,E),f.quality.limitationChanged(w,E))}})},v.prototype._checkTrackStalls=function(m){var g=this;Array.isArray(m)&&m.forEach(function(_){var w=_.trackSid,E=_.frameRateReceived;if(E!==void 0){var T=typeof E=="number"&&!isNaN(E)?E:0,N=g._stalledTrackSids.has(w);!N&&T<g._stallThreshold?(g._stalledTrackSids.add(w),g._log.debug("Track ".concat(w," stalled: frame rate ").concat(T," below threshold ").concat(g._stallThreshold)),f.track.stalled(w,T,g._stallThreshold)):N&&T>=g._resumeThreshold&&(g._stalledTrackSids.delete(w),g._log.debug("Track ".concat(w," resumed: frame rate ").concat(T," above threshold ").concat(g._resumeThreshold)),f.track.resumed(w,T,g._resumeThreshold))}})},v.prototype._addLocalTrackMetrics=function(m,g){var _=g.framesEncoded,w=g.packetsSent,E=g.totalEncodeTime,T=g.totalPacketSendDelay,N=Object.assign({},m),j="".concat(m.trackSid,"+").concat(m.ssrc),x=this._movingAverageDeltas.get(j)||new Map;if(typeof E=="number"&&typeof _=="number"){var O=x.get("avgEncodeDelay")||new a;O.putSample(E*1e3,_),N.avgEncodeDelay=Math.round(O.get()),x.set("avgEncodeDelay",O)}if(typeof T=="number"&&typeof w=="number"){var L=x.get("avgPacketSendDelay")||new a;L.putSample(T*1e3,w),N.avgPacketSendDelay=Math.round(L.get()),x.set("avgPacketSendDelay",L)}return this._movingAverageDeltas.set(j,x),N},v.prototype._addRemoteTrackMetrics=function(m,g){var _=g.estimatedPlayoutTimestamp,w=g.framesDecoded,E=g.jitterBufferDelay,T=g.jitterBufferEmittedCount,N=g.totalDecodeTime,j=Object.assign({},m),x="".concat(m.trackSid,"+").concat(m.ssrc),O=this._movingAverageDeltas.get(x)||new Map;if(typeof _=="number"&&(j.estimatedPlayoutTimestamp=_),typeof w=="number"&&typeof N=="number"){var L=O.get("avgDecodeDelay")||new a;L.putSample(N*1e3,w),j.avgDecodeDelay=Math.round(L.get()),O.set("avgDecodeDelay",L)}if(typeof E=="number"&&typeof T=="number"){var b=O.get("avgJitterBufferDelay")||new a;b.putSample(E*1e3,T),j.avgJitterBufferDelay=Math.round(b.get()),O.set("avgJitterBufferDelay",b)}return this._movingAverageDeltas.set(x,O),j},v.prototype._cleanupMovingAverageDeltas=function(m){var g=this,_=c(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],function(E){return m[E].map(function(T){var N=T.ssrc,j=T.trackSid;return"".concat(j,"+").concat(N)})}),w=u(Array.from(this._movingAverageDeltas.keys()),_);w.forEach(function(E){return g._movingAverageDeltas.delete(E)})},v.prototype._publishStatsReport=function(m,g){var _=this,w=new n(m,g,!0);f.quality.statsReport({audioTrackStats:w.remoteAudioTrackStats.map(function(E,T){return _._addRemoteTrackMetrics(E,g.remoteAudioTrackStats[T])}),localAudioTrackStats:w.localAudioTrackStats.map(function(E,T){return _._addLocalTrackMetrics(E,g.localAudioTrackStats[T])}),localVideoTrackStats:w.localVideoTrackStats.map(function(E,T){return _._addLocalTrackMetrics(E,g.localVideoTrackStats[T])}),peerConnectionId:w.peerConnectionId,videoTrackStats:w.remoteVideoTrackStats.map(function(E,T){return _._addRemoteTrackMetrics(E,g.remoteVideoTrackStats[T])})}),this._cleanupMovingAverageDeltas(w)},v.prototype._publishActiveIceCandidatePair=function(m,g){var _=this._replaceNullsWithDefaults(g.activeIceCandidatePair,m);f.quality.iceCandidatePair(_)},v.prototype._replaceNullsWithDefaults=function(m,g){return m=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:g,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},o(m||{},null)),m.localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},o(m.localCandidate||{},null)),m.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},o(m.remoteCandidate||{},null)),m},v.prototype.cleanup=function(){this._stopStatsCollection(),this._movingAverageDeltas.clear(),this._lastQualityLimitationReasonByTrackSid.clear(),this._stalledTrackSids.clear()},v})();return zo=h,zo}var Fc,TS;function lE(){if(TS)return Fc;TS=1;var i=Fc&&Fc.__extends||(function(){var E=function(T,N){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,x){j.__proto__=x}||function(j,x){for(var O in x)Object.prototype.hasOwnProperty.call(x,O)&&(j[O]=x[O])},E(T,N)};return function(T,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");E(T,N);function j(){this.constructor=T}T.prototype=N===null?Object.create(N):(j.prototype=N.prototype,new j)}})(),e=uE(),n=ts(),a=sa(),s=_t().buildLogLevels,o=Et().DEFAULT_LOG_LEVEL,c=cn(),u=Ti(),f=u.MediaConnectionError,h=u.MediaDTLSTransportFailedError,v=u.SignalingConnectionDisconnectedError,m=0,g={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},_=(function(E){i(T,E);function T(N,j,x,O){var L=this;O=Object.assign({logLevel:o,RecordingSignaling:e,Timeout:a},O);var b=s(O.logLevel);L=E.call(this,"connected",g)||this;var y=O.RecordingSignaling,S=new O.Timeout(function(){L._disconnect(L._reconnectingError)},O.sessionTimeout,!1);return Object.defineProperties(L,{_instanceId:{value:m++},_log:{value:O.log?O.log.createLog("default",L):new c("default",L,b,O.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:O},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:S},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:N},name:{enumerable:!0,value:x},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new y},sid:{enumerable:!0,value:j}}),L.on("connectionStateChanged",function(){L.connectionState==="failed"&&!["disconnected","failed"].includes(L.iceConnectionState)&&L._disconnect(new h)}),L.on("iceConnectionStateChanged",function(){return w(L)}),L.on("signalingConnectionStateChanged",function(){return w(L)}),setTimeout(function(){return w(L)}),L}return T.prototype._disconnect=function(N){return this.state!=="disconnected"?(this.preempt("disconnected",null,[N]),!0):!1},T.prototype.toString=function(){return"[RoomSignaling #".concat(this._instanceId,": ").concat(this.localParticipant?this.localParticipant.sid:"null","]")},T.prototype.connectParticipant=function(N){var j=this;return N.state==="disconnected"||this.participants.has(N.sid)?!1:(this.participants.set(N.sid,N),N.on("stateChanged",function x(O){O==="disconnected"&&(N.removeListener("stateChanged",x),j.participants.delete(N.sid),j.emit("participantDisconnected",N))}),this.emit("participantConnected",N),!0)},T.prototype.disconnect=function(){return this._disconnect()},T.prototype.setDominantSpeaker=function(N){this.dominantSpeakerSid=N,this.emit("dominantSpeakerChanged")},T})(n);function w(E){if(E.state==="disconnected"||E.signalingConnectionState==="disconnected"){E._sessionTimeout.clear();return}var T;E.signalingConnectionState==="reconnecting"?T=E.signalingConnectionState:E.iceConnectionState==="failed"?(E._mediaConnectionIsReconnecting=!0,T="reconnecting"):E.iceConnectionState==="new"||E.iceConnectionState==="checking"?T=E._mediaConnectionIsReconnecting?"reconnecting":"connected":(E._mediaConnectionIsReconnecting=!1,E._reconnectingError=null,E._sessionTimeout.clear(),T="connected"),T!==E.state&&(T==="reconnecting"?(E._reconnectingError=E.signalingConnectionState==="reconnecting"?new v:new f,E._sessionTimeout.start(),E.preempt(T,null,[E._reconnectingError])):E.preempt(T))}return Fc=_,Fc}var np,ES;function _L(){if(ES)return np;ES=1;var i=(function(){function e(n){var a=n.actual,s=a===void 0?null:a,o=n.available,c=o===void 0?null:o,u=n.level,f=u===void 0?null:u;Object.defineProperties(this,{actual:{value:s,enumerable:!0},available:{value:c,enumerable:!0},level:{value:f,enumerable:!0}})}return e})();return np=i,np}var ip,bS;function wL(){if(bS)return ip;bS=1;var i=(function(){function e(n){var a=n.fractionLost,s=a===void 0?null:a,o=n.level,c=o===void 0?null:o;Object.defineProperties(this,{fractionLost:{value:s,enumerable:!0},level:{value:c,enumerable:!0}})}return e})();return ip=i,ip}var op,CS;function SL(){if(CS)return op;CS=1;var i=(function(){function e(n){var a=n.jitter,s=a===void 0?null:a,o=n.rtt,c=o===void 0?null:o,u=n.level,f=u===void 0?null:u;Object.defineProperties(this,{jitter:{value:s,enumerable:!0},rtt:{value:c,enumerable:!0},level:{value:f,enumerable:!0}})}return e})();return op=i,op}var ap,PS;function fE(){if(PS)return ap;PS=1;var i=_L(),e=wL(),n=SL(),a=(function(){function s(o){var c=o.bandwidth,u=c===void 0?null:c,f=o.fractionLost,h=f===void 0?null:f,v=o.latency,m=v===void 0?null:v;Object.defineProperties(this,{bandwidth:{value:u?new i(u):null,enumerable:!0},fractionLost:{value:h?new e(h):null,enumerable:!0},latency:{value:m?new n(m):null,enumerable:!0}})}return s})();return ap=a,ap}var Uc,RS;function kL(){if(RS)return Uc;RS=1;var i=Uc&&Uc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=fE(),n=(function(a){i(s,a);function s(o){return a.call(this,o)||this}return s})(e);return Uc=n,Uc}var Vc,OS;function TL(){if(OS)return Vc;OS=1;var i=Vc&&Vc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=fE(),n=(function(a){i(s,a);function s(o){return a.call(this,o)||this}return s})(e);return Vc=n,Vc}var sp,IS;function dE(){if(IS)return sp;IS=1;var i=kL(),e=TL(),n=(function(){function a(s){var o=s.send,c=s.recv,u=s.sendStats,f=u===void 0?null:u,h=s.recvStats,v=h===void 0?null:h;Object.defineProperties(this,{send:{value:o,enumerable:!0},recv:{value:c,enumerable:!0},sendStats:{value:f?new i(f):null,enumerable:!0},recvStats:{value:v?new e(v):null,enumerable:!0}})}return a})();return sp=n,sp}var Bc,LS;function EL(){if(LS)return Bc;LS=1;var i=Bc&&Bc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=dE(),n=(function(a){i(s,a);function s(o){return a.call(this,o)||this}return s})(e);return Bc=n,Bc}var qc,AS;function bL(){if(AS)return qc;AS=1;var i=qc&&qc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=dE(),n=(function(a){i(s,a);function s(o){return a.call(this,o)||this}return s})(e);return qc=n,qc}var cp,xS;function CL(){if(xS)return cp;xS=1;var i=EL(),e=bL(),n=(function(){function a(s){var o=s.level,c=s.audio,u=s.video;Object.defineProperties(this,{level:{value:o,enumerable:!0},audio:{value:c?new i(c):null,enumerable:!0},video:{value:u?new e(u):null,enumerable:!0}})}return a})();return cp=n,cp}var Hc,DS;function ov(){if(DS)return Hc;DS=1;var i=Hc&&Hc.__extends||(function(){var o=function(c,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(f[v]=h[v])},o(c,u)};return function(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");o(c,u);function f(){this.constructor=c}c.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}})(),e=ts(),n=CL(),a={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},s=(function(o){i(c,o);function c(){var u=o.call(this,"connecting",a)||this;return Object.defineProperties(u,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),u}return Object.defineProperty(c.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),c.prototype.addTrack=function(u){return this.tracks.set(u.id||u.sid,u),this.emit("trackAdded",u),this},c.prototype.disconnect=function(){return this.state!=="disconnected"?(this.preempt("disconnected"),!0):!1},c.prototype.removeTrack=function(u){var f=this.tracks.get(u.id||u.sid);return this.tracks.delete(u.id||u.sid),f&&this.emit("trackRemoved",u),f||null},c.prototype.setNetworkQualityLevel=function(u,f){this._networkQualityLevel!==u&&(this._networkQualityLevel=u,this._networkQualityStats=f&&(f.audio||f.video)?new n(f):null,this.emit("networkQualityLevelChanged"))},c.prototype.connect=function(u,f){return this.state==="connecting"||this.state==="reconnecting"?(this._sid||(this._sid=u),this._identity||(this._identity=f),this.preempt("connected"),!0):!1},c.prototype.reconnecting=function(){return this.state==="connecting"||this.state==="connected"?(this.preempt("reconnecting"),!0):!1},c})(e);return Hc=s,Hc}var Wc,MS;function PL(){if(MS)return Wc;MS=1;var i=Wc&&Wc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=ov(),n=(function(a){i(s,a);function s(o,c){var u=a.call(this)||this;return u.connect(o,c),u}return s})(e);return Wc=n,Wc}var zc,NS;function hE(){if(NS)return zc;NS=1;var i=zc&&zc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=pr().EventEmitter,n=(function(a){i(s,a);function s(o,c,u,f){var h=a.call(this)||this,v=null;return Object.defineProperties(h,{_error:{value:null,writable:!0},_isEnabled:{value:u,writable:!0},_priority:{value:f,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return v},set:function(m){v===null&&(v=m)}},kind:{enumerable:!0,value:c},name:{enumerable:!0,value:o}}),h}return Object.defineProperty(s.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),s.prototype.disable=function(){return this.enable(!1)},s.prototype.enable=function(o){return o=typeof o=="boolean"?o:!0,this.isEnabled!==o&&(this._isEnabled=o,this.emit("updated")),this},s.prototype.setTrackTransceiver=function(o){return o=o||null,this.trackTransceiver!==o&&(this._trackTransceiver=o,this.emit("updated")),this},s.prototype.setSid=function(o){return this.sid===null&&(this._sid=o,this.emit("updated")),this},s})(e);return zc=n,zc}var $c,jS;function RL(){if(jS)return $c;jS=1;var i=$c&&$c.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=hE(),n=(function(a){i(s,a);function s(o,c,u,f,h,v){var m=a.call(this,c,u,f,h)||this;return Object.defineProperties(m,{_isSwitchedOff:{value:v,writable:!0}}),m.setSid(o),m}return Object.defineProperty(s.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),s.prototype.subscribeFailed=function(o){return this.error||(this._error=o,this.emit("updated")),this},s.prototype.setPriority=function(o){return this._priority!==o&&(this._priority=o,this.emit("updated")),this},s.prototype.setSwitchedOff=function(o){return this._isSwitchedOff!==o&&(this._isSwitchedOff=o,this.emit("updated")),this},s})(e);return $c=n,$c}var Gc,FS;function OL(){if(FS)return Gc;FS=1;var i=Gc&&Gc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=RL(),n=(function(a){i(s,a);function s(o,c){return a.call(this,o.sid,o.name,o.kind,o.enabled,o.priority,c)||this}return s.prototype.update=function(o){return this.enable(o.enabled),this.setPriority(o.priority),this},s})(e);return Gc=n,Gc}var Kc,US;function IL(){if(US)return Kc;US=1;var i=Kc&&Kc.__extends||(function(){var s=function(o,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])},s(o,c)};return function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(o,c);function u(){this.constructor=o}o.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}})(),e=PL(),n=OL(),a=(function(s){i(o,s);function o(c,u,f,h,v,m){var g=s.call(this,c.sid,c.identity)||this;return m=Object.assign({RemoteTrackPublicationV2:n},m),Object.defineProperties(g,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:m.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:u},updateSubscriberTrackPriority:{value:function(_,w){return f(_,w)}},updateTrackRenderHint:{value:function(_,w){return h(_,w)}},clearTrackHint:{value:function(_){return v(_)}},revision:{enumerable:!0,get:function(){return this._revision}}}),g.update(c)}return o.prototype._getOrCreateTrack=function(c){var u=this._RemoteTrackPublicationV2,f=this.tracks.get(c.sid);if(!f){var h=this._getInitialTrackSwitchOffState(c.sid);f=new u(c,h),this.addTrack(f)}return f},o.prototype.update=function(c){var u=this;if(this.revision!==null&&c.revision<=this.revision)return this;this._revision=c.revision;var f=new Set;switch(c.tracks.forEach(function(h){var v=u._getOrCreateTrack(h);v.update(h),f.add(v)}),this.tracks.forEach(function(h){f.has(h)||u.removeTrack(h)}),c.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity);break}return this},o})(e);return Kc=a,Kc}var Qc,VS;function LL(){if(VS)return Qc;VS=1;var i=Qc&&Qc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=ca(),n=(function(a){i(s,a);function s(o,c){var u=a.call(this,o,"track_priority",c)||this;return Object.defineProperties(u,{_enqueuedPriorityUpdates:{value:new Map}}),u.on("ready",function(f){Array.from(u._enqueuedPriorityUpdates.keys()).forEach(function(h){f.publish({type:"track_priority",track:h,subscribe:u._enqueuedPriorityUpdates.get(h)})})}),u}return s.prototype.sendTrackPriorityUpdate=function(o,c,u){if(c!=="subscribe")throw new Error("only subscribe priorities are supported, found: "+c);this._enqueuedPriorityUpdates.set(o,u),this._transport&&this._transport.publish({type:"track_priority",track:o,subscribe:u})},s})(e);return Qc=n,Qc}var Jc,BS;function AL(){if(BS)return Jc;BS=1;var i=Jc&&Jc.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=ca(),n=(function(a){i(s,a);function s(o,c){var u=a.call(this,o,"track_switch_off",c)||this;return u.on("ready",function(f){f.on("message",function(h){switch(h.type){case"track_switch_off":u._setTrackSwitchOffUpdates(h.off||[],h.on||[]);break}})}),u}return s.prototype._setTrackSwitchOffUpdates=function(o,c){this.emit("updated",o,c)},s})(e);return Jc=n,Jc}var Yc,qS;function xL(){if(qS)return Yc;qS=1;var i=Yc&&Yc.__extends||(function(){var u=function(f,h){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(v[g]=m[g])},u(f,h)};return function(f,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");u(f,h);function v(){this.constructor=f}f.prototype=h===null?Object.create(h):(v.prototype=h.prototype,new v)}})(),e=ca(),n=sa(),a=_t().isDeepEqual,s=2e3,o=1,c=(function(u){i(f,u);function f(h,v){var m=u.call(this,h,"render_hints",v)||this;return Object.defineProperties(m,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new n(function(){m._sendAllHints(),m._responseTimer.setDelay(m._responseTimer.delay*2)},s,!1)}}),m.on("ready",function(g){g.on("message",function(_){switch(m._log.debug("Incoming: ",_),_.type){case"render_hints":m._processHintResults(_&&_.subscriber&&_.subscriber.hints||[]);break;default:m._log.warn("Unknown message type: ",_.type);break}}),m._sendAllHints()}),m}return f.prototype._sendAllHints=function(){var h=this;Array.from(this._trackSidsToRenderHints.keys()).forEach(function(v){var m=h._trackSidsToRenderHints.get(v);m.renderDimensions&&(m.isDimensionDirty=!0),"enabled"in m&&(m.isEnabledDirty=!0)}),this._sendHints()},f.prototype._processHintResults=function(h){var v=this;this._responseTimer.clear(),this._responseTimer.setDelay(s),h.forEach(function(m){m.result!=="OK"&&v._log.debug("Server error processing hint:",m)}),this._sendHints()},f.prototype._sendHints=function(){var h=this;if(!(!this._transport||this._responseTimer.isSet)){var v=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach(function(g){var _=h._trackSidsToRenderHints.get(g);if(_.isEnabledDirty||_.isDimensionDirty){var w={track:g};_.isEnabledDirty&&(w.enabled=_.enabled,_.isEnabledDirty=!1),_.isDimensionDirty&&(w.render_dimensions=_.renderDimensions,_.isDimensionDirty=!1),v.push(w)}}),v.length>0){var m={type:"render_hints",subscriber:{id:o++,hints:v}};this._log.debug("Outgoing: ",m),this._transport.publish(m),this._responseTimer.start()}}},f.prototype.setTrackHint=function(h,v){var m=this._trackSidsToRenderHints.get(h)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in v&&m.enabled!==v.enabled&&(m.enabled=!!v.enabled,m.isEnabledDirty=!0),v.renderDimensions&&!a(v.renderDimensions,m.renderDimensions)&&(m.renderDimensions=v.renderDimensions,m.isDimensionDirty=!0),this._trackSidsToRenderHints.set(h,m),this._sendHints()},f.prototype.clearTrackHint=function(h){this._trackSidsToRenderHints.delete(h)},f})(e);return Yc=c,Yc}var Xc,HS;function DL(){if(HS)return Xc;HS=1;var i=Xc&&Xc.__extends||(function(){var s=function(o,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])},s(o,c)};return function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(o,c);function u(){this.constructor=o}o.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}})(),e=ca(),n=1,a=(function(s){i(o,s);function o(c,u){var f=s.call(this,c,"publisher_hints",u)||this;return f.on("ready",function(h){f._log.debug("publisher_hints transport ready:",h),h.on("message",function(v){switch(f._log.debug("Incoming: ",v),v.type){case"publisher_hints":v.publisher&&v.publisher.hints&&v.publisher.id&&f._processPublisherHints(v.publisher.hints,v.publisher.id);break;default:f._log.warn("Unknown message type: ",v.type);break}})}),f}return o.prototype.sendTrackReplaced=function(c){var u=c.trackSid;if(this._transport){var f={type:"client_reset",track:u,id:n++};this._log.debug("Outgoing: ",f),this._transport.publish(f)}},o.prototype.sendHintResponse=function(c){var u=c.id,f=c.hints;if(this._transport){var h={type:"publisher_hints",id:u,hints:f};this._log.debug("Outgoing: ",h),this._transport.publish(h)}},o.prototype._processPublisherHints=function(c,u){try{this.emit("updated",c,u)}catch(f){this._log.error("error processing hints:",f)}},o})(e);return Xc=a,Xc}var $o,WS;function ML(){if(WS)return $o;WS=1;var i=$o&&$o.__extends||(function(){var q=function(W,B){return q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,G){z.__proto__=G}||function(z,G){for(var J in G)Object.prototype.hasOwnProperty.call(G,J)&&(z[J]=G[J])},q(W,B)};return function(W,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");q(W,B);function z(){this.constructor=W}W.prototype=B===null?Object.create(B):(z.prototype=B.prototype,new z)}})(),e=$o&&$o.__read||function(q,W){var B=typeof Symbol=="function"&&q[Symbol.iterator];if(!B)return q;var z=B.call(q),G,J=[],M;try{for(;(W===void 0||W-- >0)&&!(G=z.next()).done;)J.push(G.value)}catch(V){M={error:V}}finally{try{G&&!G.done&&(B=z.return)&&B.call(z)}finally{if(M)throw M.error}}return J},n=aL(),a=sL(),s=pL(),o=mL(),c=gL(),u=yL(),f=lE(),h=IL(),v=LL(),m=AL(),g=xL(),_=DL(),w=_t(),E=w.constants.DEFAULT_SESSION_TIMEOUT_SEC,T=w.createBandwidthProfilePayload,N=w.defer,j=w.flatMap,x=w.oncePerTick,O=Ti().createTwilioError,L=1e4,b=1e3,y=(function(q){i(W,q);function W(B,z,G,J,M){var V=this;z.options=Object.assign({session_timeout:E},z.options),M=Object.assign({DominantSpeakerSignaling:n,TranscriptionSignaling:a,NetworkQualityMonitor:s,NetworkQualitySignaling:o,RecordingSignaling:c,RemoteParticipantV2:h,TrackPrioritySignaling:v,TrackSwitchOffSignaling:m,bandwidthProfile:null,sessionTimeout:z.options.session_timeout*1e3,statsPublishIntervalMs:L,statsCollectionIntervalMs:b},M),B.setBandwidthProfile(M.bandwidthProfile);var ee=z.options,oe=ee.signaling_region,fe=ee.audio_processors,ae=fe===void 0?[]:fe;B.setSignalingRegion(oe),ae.includes("krisp")&&ae.push("rnnoise"),B.setAudioProcessors(ae),J.setIceReconnectTimeout(M.sessionTimeout),V=q.call(this,B,z.sid,z.name,M)||this;var he=function(ke){return V._getTrackReceiver(ke)},we=V._log;return Object.defineProperties(V,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:M.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:B.bandwidthProfileRevision,writable:!0},_mediaStatesWarningsRevision:{value:0,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:B.networkQualityConfiguration},_peerConnectionManager:{value:J},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:M.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new M.DominantSpeakerSignaling(he,{log:we})},_transcriptionSignaling:{value:new M.TranscriptionSignaling(he,{log:we})},_networkQualitySignaling:{value:new M.NetworkQualitySignaling(he,B.networkQualityConfiguration,{log:we})},_renderHintsSignaling:{value:new g(he,{log:we})},_publisherHintsSignaling:{value:new _(he,{log:we})},_trackPrioritySignaling:{value:new M.TrackPrioritySignaling(he,{log:we})},_trackSwitchOffSignaling:{value:new M.TrackSwitchOffSignaling(he,{log:we})},_pendingSwitchOffStates:{value:new Map},_statsMonitor:{value:M.eventObserver&&M.insights?new u(V,we,{publishIntervalMs:M.statsPublishIntervalMs,collectionIntervalMs:M.statsCollectionIntervalMs}):null},_transport:{value:G},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:z.options.media_region||null}}),V._initTrackSwitchOffSignaling(),V._initDominantSpeakerSignaling(),V._initTranscriptionSignaling(),V._initNetworkQualityMonitorSignaling(),V._initPublisherHintSignaling(),F(V,B),D(V,J),P(V,G),V._statsMonitor&&V.on("stateChanged",function(ke){ke==="disconnected"&&V._statsMonitor&&V._statsMonitor.cleanup()}),V._update(z),V._peerConnectionManager.setEffectiveAdaptiveSimulcast(V._publisherHintsSignaling.isSetup),V}return Object.defineProperty(W.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"signalingConnectionState",{get:function(){return this._transport.state==="syncing"?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),W.prototype._deleteTrackReceiverDeferred=function(B){return this._trackReceiverDeferreds.delete(B)},W.prototype._getOrCreateTrackReceiverDeferred=function(B){var z=this._trackReceiverDeferreds.get(B)||N(),G=this._peerConnectionManager.getTrackReceivers(),J=G.find(function(M){return M.id===B&&M.readyState!=="ended"});return J?z.resolve(J):this._trackReceiverDeferreds.set(B,z),z},W.prototype._addTrackReceiver=function(B){var z=this._getOrCreateTrackReceiverDeferred(B.id);return z.resolve(B),this},W.prototype._disconnect=function(B){var z=q.prototype._disconnect.call(this,B);return z&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach(function(G){G.publishFailed(B||new Error("LocalParticipant disconnected"))}),z},W.prototype._getTrackReceiver=function(B){var z=this;return this._getOrCreateTrackReceiverDeferred(B).promise.then(function(G){return z._deleteTrackReceiverDeferred(B),G})},W.prototype._getInitialTrackSwitchOffState=function(B){var z=this._pendingSwitchOffStates.get(B)||!1;return this._pendingSwitchOffStates.delete(B),z&&this._log.warn("[".concat(B,"] was initially switched off! ")),z},W.prototype._getTrackSidsToTrackSignalings=function(){var B=j(this.participants,function(z){return Array.from(z.tracks)});return new Map(B)},W.prototype._getOrCreateRemoteParticipant=function(B){var z=this,G=this._RemoteParticipantV2,J=this.participants.get(B.sid),M=this;return J||(J=new G(B,function(V){return z._getInitialTrackSwitchOffState(V)},function(V,ee){return z._trackPrioritySignaling.sendTrackPriorityUpdate(V,"subscribe",ee)},function(V,ee){return z._renderHintsSignaling.setTrackHint(V,ee)},function(V){return z._renderHintsSignaling.clearTrackHint(V)}),J.on("stateChanged",function V(ee){ee==="disconnected"&&(J.removeListener("stateChanged",V),M.participants.delete(J.sid),M._disconnectedParticipantRevisions.set(J.sid,J.revision))}),this.connectParticipant(J)),J},W.prototype._getState=function(){return{participant:this.localParticipant.getState()}},W.prototype._maybeAddBandwidthProfile=function(B){var z=this.localParticipant,G=z.bandwidthProfile,J=z.bandwidthProfileRevision;return G&&this._lastBandwidthProfileRevision<J?(this._lastBandwidthProfileRevision=J,Object.assign({bandwidth_profile:T(G)},B)):B},W.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},W.prototype._publishPeerConnectionState=function(B){this._transport.publish(Object.assign({peer_connections:[B]},this._getState()))},W.prototype._update=function(B){var z=this;if(B.subscribed&&B.subscribed.revision>this._subscribedRevision){this._subscribedRevision=B.subscribed.revision,B.subscribed.tracks.forEach(function(M){M.id?(z._subscriptionFailures.delete(M.sid),z._subscribed.set(M.sid,M.id)):M.error&&!z._subscriptionFailures.has(M.sid)&&z._subscriptionFailures.set(M.sid,M.error)});var G=new Set(B.subscribed.tracks.filter(function(M){return!!M.id}).map(function(M){return M.sid}));this._subscribed.forEach(function(M,V){G.has(V)||z._subscribed.delete(V)})}var J=new Set;return(B.participants||[]).forEach(function(M){if(M.sid!==z.localParticipant.sid){var V=z._disconnectedParticipantRevisions.get(M.sid);if(!(V&&M.revision<=V)){V&&z._disconnectedParticipantRevisions.delete(M.sid);var ee=z._getOrCreateRemoteParticipant(M);ee.update(M),J.add(ee)}}}),B.type==="synced"&&this.participants.forEach(function(M){J.has(M)||M.disconnect()}),K(this),B.peer_connections&&this._peerConnectionManager.update(B.peer_connections,B.type==="synced"),B.recording&&this.recording.update(B.recording),B.published&&B.published.revision>this._publishedRevision&&(this._publishedRevision=B.published.revision,B.published.tracks.forEach(function(M){M.sid&&z._published.set(M.id,M.sid)}),this.localParticipant.update(B.published)),B.participant&&this.localParticipant.connect(B.participant.sid,B.participant.identity),[this._dominantSpeakerSignaling,this._transcriptionSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach(function(M){var V=M.channel;!M.isSetup&&B.media_signaling&&B.media_signaling[V]&&B.media_signaling[V].transport&&B.media_signaling[V].transport.type==="data-channel"&&M.setup(B.media_signaling[V].transport.label)}),B.type==="warning"&&B.states&&B.states.revision>this._mediaStatesWarningsRevision&&(this._mediaStatesWarningsRevision=B.states.revision,this.localParticipant.updateMediaStates(B.states)),this},W.prototype._initPublisherHintSignaling=function(){var B=this;this._publisherHintsSignaling.on("updated",function(G,J){Promise.all(G.map(function(M){return B.localParticipant.setPublisherHint(M.track,M.encodings).then(function(V){return{track:M.track,result:V}})})).then(function(M){B._publisherHintsSignaling.sendHintResponse({id:J,hints:M})})});var z=function(G){G.kind==="video"&&G.trackTransceiver.on("replaced",function(){B._publisherHintsSignaling.sendTrackReplaced({trackSid:G.sid})})};Array.from(this.localParticipant.tracks.values()).forEach(function(G){return z(G)}),this.localParticipant.on("trackAdded",function(G){return z(G)})},W.prototype._initTrackSwitchOffSignaling=function(){var B=this;this._trackSwitchOffSignaling.on("updated",function(z,G){try{B._log.debug("received trackSwitch: ",{tracksOn:G,tracksOff:z});var J=new Map;G.forEach(function(M){return J.set(M,!0)}),z.forEach(function(M){J.get(M)&&B._log.warn("".concat(M," is DUPLICATED in both tracksOff and tracksOn list")),J.set(M,!1)}),B.participants.forEach(function(M){M.tracks.forEach(function(V){var ee=J.get(V.sid);typeof ee<"u"&&(V.setSwitchedOff(!ee),J.delete(V.sid))})}),J.forEach(function(M,V){return B._pendingSwitchOffStates.set(V,!M)})}catch(M){B._log.error("error processing track switch off:",M)}})},W.prototype._initDominantSpeakerSignaling=function(){var B=this;this._dominantSpeakerSignaling.on("updated",function(){return B.setDominantSpeaker(B._dominantSpeakerSignaling.loudestParticipantSid)})},W.prototype._initTranscriptionSignaling=function(){var B=this;this._transcriptionSignaling.on("transcription",function(z){B.emit("transcription",z)})},W.prototype._initNetworkQualityMonitorSignaling=function(){var B=this;this._networkQualitySignaling.on("ready",function(){var z=new B._NetworkQualityMonitor(B._peerConnectionManager,B._networkQualitySignaling);B._networkQualityMonitor=z,z.on("updated",function(){B.iceConnectionState!=="failed"&&(B.localParticipant.setNetworkQualityLevel(z.level,z.levels),B.participants.forEach(function(G){var J=z.remoteLevels.get(G.sid);J&&G.setNetworkQualityLevel(J.level,J)}))}),z.start()}),this._networkQualitySignaling.on("teardown",function(){return B._teardownNetworkQualityMonitor()})},W.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},W.prototype.getStats=function(){var B=this;return this._peerConnectionManager.getStats().then(function(z){return new Map(Array.from(z).map(function(G){var J=e(G,2),M=J[0],V=J[1];return[M,Object.assign({},V,{localAudioTrackStats:C(B,V.localAudioTrackStats),localVideoTrackStats:C(B,V.localVideoTrackStats),remoteAudioTrackStats:A(B,V.remoteAudioTrackStats),remoteVideoTrackStats:A(B,V.remoteVideoTrackStats)})]}))})},W})(f);function S(q,W){return W.reduce(function(B,z){var G=q.get(z.trackId);return G?[Object.assign({},z,{trackSid:G})].concat(B):B},[])}function C(q,W){return S(q._published,W)}function A(q,W){var B=new Map(Array.from(q._subscribed.entries()).map(function(z){var G=e(z,2),J=G[0],M=G[1];return[M,J]}));return S(B,W)}function F(q,W){var B=x(function(){q._publishNewLocalParticipantState()}),z=x(function(){var G=j(W.tracks,function(J){return J.trackTransceiver});q._peerConnectionManager.setTrackSenders(G)});W.on("trackAdded",z),W.on("trackRemoved",z),W.on("updated",B),q.on("stateChanged",function G(J){J==="disconnected"&&(W.removeListener("trackAdded",z),W.removeListener("trackRemoved",z),W.removeListener("updated",B),q.removeListener("stateChanged",G),W.disconnect())}),q.on("signalingConnectionStateChanged",function(){var G=q.localParticipant,J=q.signalingConnectionState,M=G.identity,V=G.sid;switch(J){case"connected":G.connect(V,M);break;case"reconnecting":G.reconnecting();break}})}function D(q,W){W.on("description",function(z){q._publishPeerConnectionState(z)}),W.dequeue("description"),W.on("candidates",function(z){q._publishPeerConnectionState(z)}),W.dequeue("candidates"),W.on("trackAdded",q._addTrackReceiver.bind(q)),W.dequeue("trackAdded"),W.getTrackReceivers().forEach(q._addTrackReceiver,q),W.on("connectionStateChanged",function(){q.emit("connectionStateChanged")}),W.on("iceConnectionStateChanged",function(){q.emit("iceConnectionStateChanged"),q.iceConnectionState==="failed"&&(q.localParticipant.networkQualityLevel!==null&&q.localParticipant.setNetworkQualityLevel(0),q.participants.forEach(function(B){B.networkQualityLevel!==null&&B.setNetworkQualityLevel(0)}))})}function P(q,W){W.on("message",q._update.bind(q)),W.on("stateChanged",function B(z,G){z==="disconnected"&&(q.state!=="disconnected"&&q._disconnect(G),W.removeListener("stateChanged",B)),q.emit("signalingConnectionStateChanged")})}function K(q){var W=q._getTrackSidsToTrackSignalings();q._subscriptionFailures.forEach(function(B,z){var G=W.get(z);G&&(q._subscriptionFailures.delete(z),G.subscribeFailed(O(B.code,B.message)))}),W.forEach(function(B){var z=q._subscribed.get(B.sid);(!z||B.isSubscribed&&B.trackTransceiver.id!==z)&&B.setTrackTransceiver(null),z&&q._getTrackReceiver(z).then(function(G){return B.setTrackTransceiver(G)})})}return $o=y,$o}var Zc,zS;function NL(){if(zS)return Zc;zS=1;var i=Zc&&Zc.__extends||(function(){var P=function(K,q){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,B){W.__proto__=B}||function(W,B){for(var z in B)Object.prototype.hasOwnProperty.call(B,z)&&(W[z]=B[z])},P(K,q)};return function(K,q){if(typeof q!="function"&&q!==null)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");P(K,q);function W(){this.constructor=K}K.prototype=q===null?Object.create(q):(W.prototype=q.prototype,new W)}})(),e=ts(),n=WT(),a=rE(),s=Et().reconnectBackoffConfig,o=sa(),c=Et(),u=c.SDK_NAME,f=c.SDK_VERSION,h=c.SDP_FORMAT,v=_t(),m=v.createBandwidthProfilePayload,g=v.createMediaSignalingPayload,_=v.createMediaWarningsPayload,w=v.createSubscribePayload,E=v.getUserAgent,T=v.isNonArrayObject,N=Ti(),j=N.createTwilioError,x=N.RoomCompletedError,O=N.SignalingConnectionError,L=N.SignalingServerBusyError,b=1,y=2,S={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},C=(function(P){i(K,P);function K(q,W,B,z,G,J){var M=this;return J=Object.assign({Backoff:a,TwilioConnection:n,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:E()},J),M=P.call(this,"connecting",S)||this,Object.defineProperties(M,{_accessToken:{value:W},_adaptiveSimulcast:{value:J.adaptiveSimulcast},_automaticSubscription:{value:J.automaticSubscription},_bandwidthProfile:{value:J.bandwidthProfile},_dominantSpeaker:{value:J.dominantSpeaker},_receiveTranscriptions:{value:J.receiveTranscriptions},_eventObserver:{value:J.eventObserver,writable:!1},_renderHints:{value:J.renderHints},_iceServersStatus:{value:Array.isArray(J.iceServers)?"overrode":"acquire"},_localParticipant:{value:B},_name:{value:q},_networkQuality:{value:T(J.networkQuality)||J.networkQuality},_notifyWarnings:{value:J.notifyWarnings},_options:{value:J},_peerConnectionManager:{value:z},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:new J.Backoff(s)},_session:{value:null,writable:!0},_trackPriority:{value:J.trackPriority},_trackSwitchOff:{value:J.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:J.userAgent},_wsServer:{value:G}}),D(M),M}return K.prototype._createConnectOrSyncOrDisconnectMessage=function(){if(this.state==="connected")return null;if(this.state==="disconnected")return{session:this._session,type:"disconnect",version:y};var q={connecting:"connect",syncing:"sync"}[this.state],W={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:q,version:y};return W.type==="connect"?(W.ice_servers=this._iceServersStatus,W.publisher={name:u,sdk_version:f,user_agent:this._userAgent},this._bandwidthProfile&&(W.bandwidth_profile=m(this._bandwidthProfile)),this._notifyWarnings&&(W.participant.media_warnings=_(this._notifyWarnings)),W.media_signaling=g(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints,this._receiveTranscriptions),W.subscribe=w(this._automaticSubscription),W.format=h,W.token=this._accessToken):W.type==="sync"?(W.session=this._session,W.token=this._accessToken):W.type==="update"&&(W.session=this._session),W},K.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:b}},K.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var q=this._createConnectOrSyncOrDisconnectMessage();q&&this._twilioConnection.sendMessage(q)},K.prototype.disconnect=function(q){return this.state!=="disconnected"?(this.preempt("disconnected",null,[q]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0):!1},K.prototype.publish=function(q){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:y},q)),!0;case"connecting":case"syncing":return this._updatesToSend.push(q),!0;case"disconnected":default:return!1}},K.prototype.publishEvent=function(q,W,B,z){this._eventObserver.emit("event",{group:q,name:W,level:B,payload:z})},K.prototype.sync=function(){return this.state==="connected"?(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0):!1},K.prototype._setSession=function(q,W){this._session=q,this._sessionTimeoutMS=W*1e3},K.prototype._getReconnectTimer=function(){var q=this;return this._sessionTimeoutMS===0?null:(this._sessionTimer||(this._sessionTimer=new o(function(){q._sessionTimer&&(q._sessionTimeoutMS=0)},this._sessionTimeoutMS)),new Promise(function(W){q._reconnectBackoff.backoff(W)}))},K.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},K})(e);function A(P){return Array.from(P.reduce(function(K,q){var W=K.get(q.id)||q;return(!W.description&&q.description||W.description&&q.description&&q.description.revision>W.description.revision)&&(W.description=q.description),(!W.ice&&q.ice||W.ice&&q.ice&&q.ice.revision>W.ice.revision)&&(W.ice=q.ice),K.set(W.id,W),K},new Map).values())}function F(P){return P.reduce(function(K,q){return(!K.participant&&q.participant||K.participant&&q.participant&&q.participant.revision>K.participant.revision)&&(K.participant=q.participant),!K.peer_connections&&q.peer_connections?K.peer_connections=A(q.peer_connections):K.peer_connections&&q.peer_connections&&(K.peer_connections=A(K.peer_connections.concat(q.peer_connections))),K},{})}function D(P){function K(){if(P.state!=="disconnected"){P._twilioConnection&&P._twilioConnection.removeListener("message",W);var M=P._iceServersStatus,V=P._options,ee=P._wsServer,oe=P.state,fe=V.TwilioConnection,ae=new fe(ee,Object.assign({helloBody:oe==="connecting"&&M==="acquire"?P._createIceMessage():P._createConnectOrSyncOrDisconnectMessage()},V));ae.once("close",function(he){he===fe.CloseReason.LOCAL?q():q(new Error(he))}),ae.on("message",W),P._twilioConnection=ae}}function q(M){if(P.state!=="disconnected"){if(!M){P.disconnect();return}var V=P._getReconnectTimer();if(!V){var ee=M.message===n.CloseReason.BUSY?new L:new O;P.disconnect(ee);return}P.state==="connected"&&P.preempt("syncing"),V.then(K)}}function W(M){if(P.state!=="disconnected"){if(M.type==="error"){P.disconnect(j(M.code,M.message));return}switch(P.state){case"connected":switch(M.type){case"connected":case"synced":case"update":case"warning":P.emit("message",M);return;case"disconnected":P.disconnect(M.status==="completed"?new x:null);return;default:return}case"connecting":switch(M.type){case"iced":P._options.onIced(M.ice_servers).then(function(){P._sendConnectOrSyncOrDisconnectMessage()});return;case"connected":P._setSession(M.session,M.options.session_timeout),P.emit("connected",M),P.preempt("connected");return;case"synced":case"update":P._updatesReceived.push(M);return;case"disconnected":P.disconnect(M.status==="completed"?new x:null);return;default:return}case"syncing":switch(M.type){case"connected":case"update":P._updatesReceived.push(M);return;case"synced":P._clearReconnectTimer(),P.emit("message",M),P.preempt("connected");return;case"disconnected":P.disconnect(M.status==="completed"?new x:null);return;default:return}default:return}}}P.on("stateChanged",function M(V){switch(V){case"connected":{var ee=P._updatesToSend.splice(0);ee.length&&P.publish(F(ee)),P._updatesReceived.splice(0).forEach(function(oe){return P.emit("message",oe)});return}case"disconnected":P._twilioConnection.removeListener("message",W),P.removeListener("stateChanged",M);return;case"syncing":return;default:return}});var B=P._options,z=P._iceServersStatus,G=B.iceServers,J=B.onIced;z==="overrode"?J(G).then(K):K()}return Zc=C,Zc}var up,$S;function jL(){if($S)return up;$S=1;var i=tv(),e=oL(),n=ML(),a=NL(),s=Ti(),o=s.SignalingConnectionDisconnectedError,c=s.SignalingIncomingMessageInvalidError,u=_t(),f=u.flatMap,h=u.createRoomConnectingEventPayload;function v(m,g,_,w,E,T){T=Object.assign({PeerConnectionManager:e,RoomV2:n,Transport:a},T);var N=E.video[0]&&E.video[0].adaptiveSimulcast===!0,j=T.PeerConnectionManager,x=T.RoomV2,O=T.Transport,L=T.iceServers,b=T.log,y=new j(w,E,T),S=f(_.tracks,function(D){return[D.trackTransceiver]});y.setTrackSenders(S);var C=new Error("Canceled"),A,F=new i(function(D,P,K){var q=function(Je){return K()?(P(C),Promise.reject(C)):(b.debug("Got ICE servers:",Je),T.iceServers=Je,y.setConfiguration(T),y.createAndOffer().then(function(){if(K())throw P(C),C;b.debug("createAndOffer() succeeded."),y.dequeue("description")}).catch(function(Ke){throw b.error("createAndOffer() failed:",Ke),P(Ke),Ke}))},W=T.automaticSubscription,B=T.bandwidthProfile,z=T.dominantSpeaker,G=T.receiveTranscriptions,J=T.environment,M=T.eventObserver,V=T.loggerName,ee=T.logLevel,oe=T.name,fe=T.networkMonitor,ae=T.networkQuality,he=T.notifyWarnings,we=T.realm,ke=T.sdpSemantics,Ge=!!B,Ae=!!B,Be=!!B&&(T.clientTrackSwitchOffControl!=="disabled"||T.contentPreferencesMode!=="disabled"),Ze=Object.assign({adaptiveSimulcast:N,automaticSubscription:W,dominantSpeaker:z,receiveTranscriptions:G,environment:J,eventObserver:M,loggerName:V,logLevel:ee,networkMonitor:fe,networkQuality:ae,notifyWarnings:he,iceServers:L,onIced:q,realm:we,renderHints:Be,sdpSemantics:ke,trackPriority:Ge,trackSwitchOff:Ae},B?{bandwidthProfile:B}:{});A=new O(oe,m,_,y,g,Ze);var tt=h(T);M.emit("event",tt),A.once("connected",function(Je){if(b.debug("Transport connected:",Je),K()){P(C);return}var Ke=Je.participant;if(!Ke){P(new c);return}D(new x(_,Je,A,y,T))}),A.once("stateChanged",function(Je,Ke){Je==="disconnected"?(A=null,P(Ke||new o)):b.debug("Transport state changed:",Je)})},function(){A&&(A.disconnect(),A=null)});return F.catch(function(){A&&(A.disconnect(),A=null),y.close()}),F}return up=v,up}var eu,GS;function FL(){if(GS)return eu;GS=1;var i=eu&&eu.__extends||(function(){var a=function(s,o){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])},a(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");a(s,o);function c(){this.constructor=s}s.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),e=ov(),n=(function(a){i(s,a);function s(){var o=a.call(this)||this;return Object.defineProperties(o,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),o}return s.prototype.addTrack=function(o,c,u,f){f===void 0&&(f=null);var h=this._createLocalTrackPublicationSignaling(o,c,u,f);return this._trackSendersToPublications.set(o,h),this._publicationsToTrackSenders.set(h,o),a.prototype.addTrack.call(this,h),this},s.prototype.getPublication=function(o){return this._trackSendersToPublications.get(o)||null},s.prototype.getSender=function(o){return this._publicationsToTrackSenders.get(o)||null},s.prototype.removeTrack=function(o){var c=this._trackSendersToPublications.get(o);if(!c)return null;this._trackSendersToPublications.delete(o),this._publicationsToTrackSenders.delete(c);var u=a.prototype.removeTrack.call(this,c);return u&&c.stop(),c},s})(e);return eu=n,eu}var tu,KS;function UL(){if(KS)return tu;KS=1;var i=tu&&tu.__extends||(function(){var s=function(o,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])},s(o,c)};return function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(o,c);function u(){this.constructor=o}o.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)}})(),e=hE(),n=(function(s){i(o,s);function o(c,u,f){var h=this,v=c.clone();c.kind!=="data"&&(v.track.enabled=c.track.enabled),c=v;var m=c.kind==="data"?!0:c.track.enabled;return h=s.call(this,u,c.kind,m,f)||this,h.setTrackTransceiver(c),Object.defineProperties(h,{_updatedPriority:{value:f,writable:!0},id:{enumerable:!0,value:c.id}}),h}return Object.defineProperty(o.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),o.prototype.enable=function(c){return c=typeof c=="boolean"?c:!0,this.trackTransceiver.track.enabled=c,s.prototype.enable.call(this,c)},o.prototype.publishFailed=function(c){return a(this,c)&&this.emit("updated"),this},o.prototype.setPriority=function(c){return this._updatedPriority!==c&&(this._updatedPriority=c,this.emit("updated")),this},o.prototype.setSid=function(c){return this._error?this:s.prototype.setSid.call(this,c)},o.prototype.stop=function(){this.trackTransceiver.stop()},o})(e);function a(s,o){return s._sid!==null||s._error?!1:(s._error=o,!0)}return tu=n,tu}var ru,QS;function VL(){if(QS)return ru;QS=1;var i=ru&&ru.__extends||(function(){var o=function(c,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(f[v]=h[v])},o(c,u)};return function(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");o(c,u);function f(){this.constructor=c}c.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}})(),e=UL(),n=ET(),a=Ti().createTwilioError,s=(function(o){i(c,o);function c(u,f,h,v,m){var g=o.call(this,u,f,h)||this;return Object.defineProperties(g,{_log:{value:m.log.createLog("default",g)},_mediaStates:{value:{recordings:null},writable:!0},_noiseCancellationVendor:{value:v}}),g}return c.prototype.getState=function(){var u={enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority};return this._noiseCancellationVendor&&(u.audio_processor=this._noiseCancellationVendor),u},c.prototype.toString=function(){return"[LocalTrackPublicationV2: ".concat(this.sid,"]")},c.prototype.update=function(u){switch(u.state){case"ready":this.setSid(u.sid);break;case"failed":{var f=u.error;this.publishFailed(a(f.code,f.message));break}}return this},c.prototype.updateMediaStates=function(u){if(!u||!u.recordings||this._mediaStates.recordings===u.recordings)return this;switch(this._mediaStates.recordings=u.recordings,this._mediaStates.recordings){case"OK":this._log.info("Warnings have cleared."),this.emit("warningsCleared");break;case"NO_MEDIA":this._log.warn("Recording media lost."),this.emit("warning",n.recordingMediaLost);break;default:this._log.warn("Unknown media state detected: ".concat(this._mediaStates.recordings));break}return this},c})(e);return ru=s,ru}var nu,JS;function BL(){if(JS)return nu;JS=1;var i=nu&&nu.__extends||(function(){var h=function(v,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,_){g.__proto__=_}||function(g,_){for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&(g[w]=_[w])},h(v,m)};return function(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");h(v,m);function g(){this.constructor=v}v.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}})(),e=FL(),n=VL(),a=Et().DEFAULT_LOG_LEVEL,s=cn(),o=_t(),c=o.buildLogLevels,u=o.isDeepEqual,f=(function(h){i(v,h);function v(m,g,_){var w=this;_=Object.assign({logLevel:a,LocalTrackPublicationV2:n},_),w=h.call(this)||this;var E=c(_.logLevel);return Object.defineProperties(w,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:m},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:_.LocalTrackPublicationV2},_log:{value:_.log?_.log.createLog("default",w):new s("default",w,E,_.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},audioProcessors:{value:[],writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:g},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),w}return v.prototype.toString=function(){return"[LocalParticipantSignaling: ".concat(this.sid,"]")},v.prototype.setSignalingRegion=function(m){this._signalingRegion||(this._signalingRegion=m)},v.prototype.setBandwidthProfile=function(m){u(this._bandwidthProfile,m)||(this._bandwidthProfile=JSON.parse(JSON.stringify(m)),this._bandwidthProfileRevision++,this.didUpdate())},v.prototype.setAudioProcessors=function(m){this.audioProcessors=m},v.prototype.getParameters=function(){return this._encodingParameters},v.prototype.setParameters=function(m){return this._encodingParameters.update(m),this},v.prototype.update=function(m){return this._publishedRevision>=m.revision?this:(this._publishedRevision=m.revision,m.tracks.forEach(function(g){var _=this.tracks.get(g.id);_&&_.update(g)},this),this)},v.prototype.updateMediaStates=function(m){return!m||!m.tracks?this:(Array.from(this.tracks.values()).forEach(function(g){var _=m.tracks[g.sid];_&&g.updateMediaStates(_)}),this)},v.prototype._createLocalTrackPublicationSignaling=function(m,g,_,w){return new this._LocalTrackPublicationV2(m,g,_,w,{log:this._log})},v.prototype.addTrack=function(m,g,_,w){var E=this;h.prototype.addTrack.call(this,m,g,_,w);var T=this.getPublication(m),N=T.isEnabled,j=T.updatedPriority,x=function(){(N!==T.isEnabled||j!==T.updatedPriority)&&(E.didUpdate(),N=T.isEnabled,j=T.updatedPriority)};return T.on("updated",x),this._removeListener(T),this._removeListeners.set(T,function(){return T.removeListener("updated",x)}),this.didUpdate(),this},v.prototype._removeListener=function(m){var g=this._removeListeners.get(m);g&&g()},v.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(function(m){return m.getState()})}},v.prototype.didUpdate=function(){this._revision++,this.emit("updated")},v.prototype.removeTrack=function(m){var g=h.prototype.removeTrack.call(this,m);return g&&(m.removeClone(g.trackTransceiver),this._removeListener(g),this.didUpdate()),g},v.prototype.setNetworkQualityConfiguration=function(m){this.networkQualityConfiguration.update(m)},v.prototype.setPublisherHint=function(m,g){var _=Array.from(this.tracks.values()).find(function(w){return w.sid===m});return _?_.trackTransceiver.setPublisherHint(g):(this._log.warn("track:".concat(m," not found")),Promise.resolve("UNKNOWN_TRACK"))},v})(e);return nu=f,nu}var iu,YS;function qL(){if(YS)return iu;YS=1;var i=iu&&iu.__extends||(function(){var c=function(u,f){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(h[m]=v[m])},c(u,f)};return function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");c(u,f);function h(){this.constructor=u}u.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}})(),e=ov(),n=lE(),a=ts(),s={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},o=(function(c){i(u,c);function u(){return c.call(this,"closed",s)||this}return u.prototype._close=function(f){return this.transition("closing",f),this.transition("closed",f),Promise.resolve(this)},u.prototype._connect=function(f,h,v,m,g){f.connect("PA00000000000000000000000000000000","test");var _="RM00000000000000000000000000000000",w=Promise.resolve(new n(f,_,g));return w.cancel=function(){},w},u.prototype._open=function(f){return this.transition("opening",f),this.transition("open",f),Promise.resolve(this)},u.prototype.close=function(){var f=this;return this.bracket("close",function(h){switch(f.state){case"closed":return f;case"open":return f._close(h);default:throw new Error('Unexpected Signaling state "'.concat(f.state,'"'))}})},u.prototype.connect=function(f,h,v,m,g){var _=this;return this.bracket("connect",function w(E){switch(_.state){case"closed":return _._open(E).then(w.bind(null,E));case"open":return _.releaseLockCompletely(E),_._connect(f,h,v,m,g);default:throw new Error('Unexpected Signaling state "'.concat(_.state,'"'))}})},u.prototype.createLocalParticipantSignaling=function(){return new e},u.prototype.open=function(){var f=this;return this.bracket("open",function(h){switch(f.state){case"closed":return f._open(h);case"open":return f;default:throw new Error('Unexpected Signaling state "'.concat(f.state,'"'))}})},u})(a);return iu=o,iu}var ou,XS;function HL(){if(XS)return ou;XS=1;var i=ou&&ou.__extends||(function(){var o=function(c,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(f[v]=h[v])},o(c,u)};return function(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");o(c,u);function f(){this.constructor=c}c.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}})(),e=jL(),n=BL(),a=qL(),s=(function(o){i(c,o);function c(u,f){var h=this;return f=Object.assign({createCancelableRoomSignalingPromise:e},f),h=o.call(this)||this,Object.defineProperties(h,{_createCancelableRoomSignalingPromise:{value:f.createCancelableRoomSignalingPromise},_options:{value:f},_wsServer:{value:u}}),h}return c.prototype._connect=function(u,f,h,v,m){return m=Object.assign({},this._options,m),this._createCancelableRoomSignalingPromise.bind(null,f,this._wsServer,u,h,v,m)},c.prototype.createLocalParticipantSignaling=function(u,f){return new n(u,f)},c})(a);return ou=s,ou}var lp,ZS;function WL(){if(ZS)return lp;ZS=1;var i=oa().MediaStreamTrack,e=hr(),n=e.guessBrowser,a=e.guessBrowserVersion,s=e.isCodecSupported,o=TI(),c=EI(),u=MI(),f=GT(),h=NI(),v=Ka(),m=v.LocalAudioTrack,g=v.LocalDataTrack,_=v.LocalVideoTrack,w=jI(),E=KI(),T=HL(),N=_t(),j=N.asLocalTrack,x=N.buildLogLevels,O=N.createRoomConnectedEventPayload,L=N.filterObject,b=N.isNonArrayObject,y=Et(),S=y.DEFAULT_ENVIRONMENT,C=y.DEFAULT_LOG_LEVEL,A=y.DEFAULT_LOGGER_NAME,F=y.DEFAULT_REALM,D=y.DEFAULT_REGION,P=y.WS_SERVER,K=y.SDK_NAME,q=y.SDK_VERSION,W=y.typeErrors,B=tv(),z=$T(),G=cn(),J=KT().validateBandwidthProfile,M=es(),V=n()==="safari"&&a(),ee=0,oe=!1,fe=!1;if(V){var ae=V.major,he=V.minor;fe=ae<12||ae===12&&he<1}var we=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),ke=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function Ge(Me,me){if(typeof me>"u"&&(me={}),!b(me))return B.reject(W.INVALID_TYPE("options","object"));var Ue=me.Log||G,Re=me.loggerName||A,qe=me.logLevel||C,$=x(qe),H="[connect #".concat(++ee,"]"),Y;try{Y=new Ue("default",H,$,Re)}catch(ge){return B.reject(ge)}Ae(me,Y,we);var ye=me.preferredVideoCodecs==="auto";if(ye&&(me.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),me.maxVideoBitrate&&ye)return Y.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),B.reject(W.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));me=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,receiveTranscriptions:!1,environment:S,eventListener:null,insights:!0,LocalAudioTrack:m,LocalDataTrack:g,LocalParticipant:u,LocalVideoTrack:_,Log:Ue,MediaStreamTrack:i,loggerName:Re,logLevel:qe,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:F,region:D,signaling:T},L(me));var Se={};typeof me.wsServerInsights=="string"&&(Se.gateway=me.wsServerInsights);var Oe=me.insights?f:h,xe=new Oe(Me,K,q,me.environment,me.realm,Se),Fe=P(me.environment,me.region),He=Date.now(),bt=new z(xe,He,Y,me.eventListener);if(me=Object.assign({eventObserver:bt,wsServer:Fe},me),me.log=Y,fe&&!oe&&Y.logLevel!=="error"&&Y.logLevel!=="off"&&(oe=!0,Y.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),typeof Me!="string")return B.reject(W.INVALID_TYPE("token","string"));me.insights&&xe&&M.configure({publisher:xe,log:Y,connectTimestamp:He});var Gt=Object.assign({},me);if(delete Gt.name,"tracks"in me){if(!Array.isArray(me.tracks))return B.reject(W.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{me.tracks=me.tracks.map(function(ge){return j(ge,Gt)})}catch(ge){return B.reject(ge)}}var Lt=J(me.bandwidthProfile);if(Lt)return B.reject(Lt);me.clientTrackSwitchOffControl="disabled",me.contentPreferencesMode="disabled",me.bandwidthProfile&&(me.clientTrackSwitchOffControl="auto",me.contentPreferencesMode="auto",me.bandwidthProfile.video&&(Ae(me.bandwidthProfile.video,Y,ke),"maxTracks"in me.bandwidthProfile.video?me.clientTrackSwitchOffControl="disabled":me.bandwidthProfile.video.clientTrackSwitchOffControl==="manual"?me.clientTrackSwitchOffControl="manual":me.clientTrackSwitchOffControl="auto","renderDimensions"in me.bandwidthProfile.video?me.contentPreferencesMode="disabled":me.bandwidthProfile.video.contentPreferencesMode==="manual"?me.contentPreferencesMode="manual":me.contentPreferencesMode="auto"));var Ce=me.signaling,_e=new Ce(me.wsServer,me);Y.info("Connecting to a Room"),Y.debug("Options:",me);var Z=new c({maxAudioBitrate:me.maxAudioBitrate,maxVideoBitrate:me.maxVideoBitrate},ye),re={audio:me.preferredAudioCodecs.map(Ke),video:me.preferredVideoCodecs.map(Ke)},de=new w(b(me.networkQuality)?me.networkQuality:{});["audio","video"].forEach(function(ge){return re[ge].forEach(function(Qe){var $e=Qe.codec;return s($e,ge).then(function(St){return!St&&Y.warn("The preferred ".concat(ge,' codec "').concat($e,'" will be ignored as it is not supported by the browser.'))})})});var le=o(Je.bind(null,me),Be.bind(null,_e,Y,Z,de,me),tt.bind(null,Me,me,_e,Z,re),Ze.bind(null,me));return le.then(function(ge){xe.connect(ge.sid,ge.localParticipant.sid);var Qe=O(me);return me.eventObserver.emit("event",Qe),Y.info("Connected to Room:",ge.toString()),Y.info("Room name:",ge.name),Y.debug("Room:",ge),ge.once("disconnected",function(){M.reset(),xe.disconnect()}),ge},function(ge){M.reset(),xe.disconnect(),le._isCanceled?Y.info("Attempt to connect to a Room was canceled"):Y.info("Error while connecting to a Room:",ge)}),le}function Ae(Me,me,Ue){Ue.forEach(function(Re){var qe=Re.didWarn,$=Re.name,H=Re.newName,Y=Re.shouldDelete;$ in Me&&typeof Me[$]<"u"&&(H&&Y&&(Me[H]=Me[$]),Y&&delete Me[$],!qe&&!["error","off"].includes(me.level)&&(me.warn('The ConnectOptions "'.concat($,'" is ').concat(H?'deprecated and scheduled for removal. Please use "'.concat(H,'" instead.'):"no longer applicable and will be ignored.")),Re.didWarn=!0))})}function Be(Me,me,Ue,Re,qe,$){var H=Me.createLocalParticipantSignaling(Ue,Re);return me.debug("Creating a new LocalParticipant:",H),new qe.LocalParticipant(H,$,qe)}function Ze(Me,me,Ue){var Re=new E(me,Ue,Me),qe=Me.log;return qe.debug("Creating a new Room:",Re),Ue.on("stateChanged",function $(H){H==="disconnected"&&(qe.info("Disconnected from Room:",Re.toString()),Ue.removeListener("stateChanged",$))}),Re}function tt(Me,me,Ue,Re,qe,$){return me.log.debug("Creating a new RoomSignaling"),Ue.connect($._signaling,Me,Re,qe,me)}function Je(Me,me){var Ue=Me.log;return Me.shouldStopLocalTracks=!Me.tracks,Me.shouldStopLocalTracks?Ue.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(Ue.info("Getting LocalTracks"),Ue.debug("Options:",Me)),Me.createLocalTracks(Me).then(function(qe){var $=me(qe);return $.catch(function(){Me.shouldStopLocalTracks&&(Ue.info("The automatically acquired LocalTracks will now be stopped"),qe.forEach(function(Y){Y.stop()}))}),$})}function Ke(Me){var me=typeof Me=="string"?{codec:Me}:Me;switch(me.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},me);case"vp8":return Object.assign({simulcast:!1},me);default:return me}}return lp=Ge,lp}var fp,ek;function tk(){if(ek)return fp;ek=1;var i=Et(),e=i.DEFAULT_LOG_LEVEL,n=i.DEFAULT_LOGGER_NAME;function a(c,u){u=Object.assign({loggerName:n,logLevel:e},u);var f={};f.loggerName=u.loggerName,f.logLevel=u.logLevel,delete u.loggerName,delete u.logLevel;var h=["getUserMedia","enumerateDevices","MediaStream","mapMediaElement","disposeMediaElement"];h.forEach(function(m){m in u&&(f[m]=u[m],delete u[m])});var v=u.createLocalTracks;return delete u.createLocalTracks,f[c]=Object.keys(u).length>0?u:!0,v(f).then(function(m){return m[0]})}function s(c){return a("audio",c)}function o(c){return a("video",c)}return fp={audio:s,video:o},fp}var dp,rk;function zL(){if(rk)return dp;rk=1;var i=hr(),e=i.guessBrowser,n=i.support,a=Ou().getSdpFormat,s=aa(),o=s.isAndroid,c=s.isMobile,u=s.isNonChromiumEdge,f=s.rebrandedChromeBrowser,h=s.mobileWebKitBrowser,v=["crios","edg","edge","electron","headlesschrome"],m=["chrome","firefox"],g=["chrome","safari"],_=["edg"];function w(){var E=e();if(!E)return!1;var T=f(E),N=h(E),j=o()?m:g;return!!E&&n()&&a()==="unified"&&(!T||v.includes(T))&&!u(E)&&(!N||_.includes(N))&&(!c()||j.includes(E))}return dp=w,dp}var hp=Ql.exports,nk;function $L(){if(nk)return Ql.exports;nk=1;var i=hp&&hp.__assign||function(){return i=Object.assign||function(_){for(var w,E=1,T=arguments.length;E<T;E++){w=arguments[E];for(var N in w)Object.prototype.hasOwnProperty.call(w,N)&&(_[N]=w[N])}return _},i.apply(this,arguments)};Object.defineProperty(hp,"__esModule",{value:!0});var e=dI(),n=kI(),a={connect:WL(),createLocalAudioTrack:tk().audio,createLocalVideoTrack:tk().video,isSupported:zL()(),version:kT.version,Logger:ST(),LocalAudioTrack:Ka().LocalAudioTrack,LocalDataTrack:Ka().LocalDataTrack,LocalVideoTrack:Ka().LocalVideoTrack};function s(_,w){var E=i({createLocalTracks:e.createLocalTracks},w);return a.connect(_,E)}function o(_){var w=i({createLocalTracks:e.createLocalTracks},_);return a.createLocalAudioTrack(w)}function c(_){var w=i({createLocalTracks:e.createLocalTracks},_);return a.createLocalVideoTrack(w)}var u=a.isSupported,f=a.version,h=a.Logger,v=a.LocalAudioTrack,m=a.LocalVideoTrack,g=a.LocalDataTrack;return Ql.exports={connect:s,createLocalAudioTrack:o,createLocalVideoTrack:c,createLocalTracks:e.createLocalTracks,runPreflight:n.runPreflight,isSupported:u,version:f,Logger:h,LocalAudioTrack:v,LocalVideoTrack:m,LocalDataTrack:g},Ql.exports}var GL=$L();const KL=Rp(GL),QL=x1(),JL=M1(QL,"generateTwilioToken"),YL=({roomName:i})=>{const[e,n]=Ie.useState(null),[a,s]=Ie.useState([]),[o,c]=Ie.useState(null),[u,f]=Ie.useState(!0),[h,v]=Ie.useState(!0),m=Ie.useRef(),g=Ie.useRef({}),_=Ie.useCallback((j,x)=>{j.forEach(O=>{const L=O.attach();L&&x.appendChild(L)})},[]),w=Ie.useCallback(j=>{j.forEach(x=>{x.detach().forEach(O=>O.remove())})},[]),E=Ie.useCallback(()=>{e&&e.localParticipant&&e.localParticipant.audioTracks.forEach(j=>{if(j.track){const x=!j.track.isEnabled;j.track.enable(x),f(x),console.log(`Local audio ${x?"enabled":"disabled"}`)}})},[e]),T=Ie.useCallback(()=>{e&&e.localParticipant&&e.localParticipant.videoTracks.forEach(j=>{if(j.track){const x=!j.track.isEnabled;j.track.enable(x),v(x),console.log(`Local video ${x?"enabled":"disabled"}`)}})},[e]);Ie.useEffect(()=>{i&&!e&&(async()=>{const x=eo.currentUser;if(!x){c("You must be logged in to join a video room."),console.error("No authenticated user found. Please log in.");return}try{console.log("Requesting Twilio token for room:",i,"by user:",x.uid);const L=(await JL({roomName:i})).data.token;console.log("Received Twilio token successfully.");const b=await KL.connect(L,{name:i,audio:!0,video:{width:640}});return n(b),console.log(`Successfully joined Twilio Room: ${b.name}`),m.current&&_(Array.from(b.localParticipant.tracks.values()).map(y=>y.track),m.current),b.participants.forEach(y=>{s(S=>[...S,y])}),b.on("participantConnected",y=>{console.log(`Participant '${y.identity}' connected`),s(S=>[...S,y])}),b.on("participantDisconnected",y=>{console.log(`Participant '${y.identity}' disconnected`),w(Array.from(y.tracks.values()).map(S=>S.track)),s(S=>S.filter(C=>C.identity!==y.identity))}),()=>{b&&(b.disconnect(),console.log(`Disconnected from Twilio Room: ${b.name}`),w(Array.from(b.localParticipant.tracks.values()).map(y=>y.track)),b.participants.forEach(y=>{w(Array.from(y.tracks.values()).map(S=>S.track))}))}}catch(O){console.error("Failed to connect to Twilio Room:",O),c(`Failed to join the room: ${O.message||"Unknown error"}`)}})()},[i,e,_,w]),Ie.useEffect(()=>{a.forEach(j=>{const x=g.current[j.identity];if(x){for(;x.firstChild;)x.removeChild(x.firstChild);j.on("trackSubscribed",O=>_([O],x)),j.on("trackUnsubscribed",O=>w([O])),_(Array.from(j.tracks.values()).map(O=>O.track),x)}})},[a,_,w]);const N=()=>{e&&(e.disconnect(),n(null),s([]))};return o?et.jsxs("div",{className:"video-room-error",children:["Error: ",o]}):et.jsxs("div",{className:"video-room-container",children:[et.jsxs("div",{className:"main-video-pane",children:[et.jsxs("h3",{children:["Local Participant: ",eo.currentUser?.displayName||eo.currentUser?.uid]}),et.jsx("div",{ref:m,className:"local-video-feed"})]}),et.jsx("div",{className:"participant-gallery",children:a.length>0?a.map(j=>et.jsxs("div",{className:"remote-participant-feed",children:[et.jsx("h4",{children:j.identity}),et.jsx("div",{ref:x=>g.current[j.identity]=x})]},j.identity)):et.jsx("p",{children:"Waiting for participants..."})}),et.jsxs("div",{className:"control-bar",children:[et.jsx("button",{onClick:E,children:u?" Mute":" Unmute"}),et.jsx("button",{onClick:T,children:h?" Stop Video":" Start Video"}),et.jsx("button",{onClick:()=>console.log("Screen Share toggle"),children:" Screen Share"}),et.jsx("button",{className:"end-call-button",onClick:N,children:" End Call"})]}),et.jsxs("div",{className:"sidebar",children:[et.jsx("h4",{children:"Chat & Details"}),et.jsx("p",{children:"Chat messages will go here (powered by Firestore)"}),et.jsx("p",{children:"Meeting details here (title, requester, priority)"})]})]})},XL=()=>{const[i,e]=Ie.useState(null),[n,a]=Ie.useState(""),[s,o]=Ie.useState(""),[c,u]=Ie.useState(null),[f,h]=Ie.useState(!0);Ie.useEffect(()=>{const _=kR(eo,w=>{e(w),h(!1),u(null)});return()=>_()},[]);const v=async()=>{u(null);try{await hR(eo),console.log("Signed in anonymously!")}catch(_){console.error("Error signing in anonymously:",_),u(_.message)}},m=async()=>{u(null);try{await yR(eo,n,s),console.log("Signed in with email/password!")}catch(_){console.error("Error signing in with email/password:",_),u(_.message)}},g=async()=>{u(null);try{await TR(eo),console.log("Signed out!")}catch(_){console.error("Error signing out:",_),u(_.message)}};return f?et.jsx("div",{style:{color:"white",padding:"10px"},children:"Checking authentication status..."}):et.jsx("div",{style:{backgroundColor:"#333",padding:"15px",borderRadius:"8px",margin:"20px",color:"white",textAlign:"center"},children:i?et.jsxs("div",{children:[et.jsxs("p",{children:["Logged in as: ",i.isAnonymous?"Anonymous":i.email]}),et.jsx("button",{onClick:g,style:{backgroundColor:"#dc3545",color:"white",border:"none",padding:"8px 15px",borderRadius:"5px",cursor:"pointer"},children:"Sign Out"})]}):et.jsxs("div",{children:[et.jsx("p",{children:"You are not logged in."}),et.jsx("button",{onClick:v,style:{backgroundColor:"#28a745",color:"white",border:"none",padding:"8px 15px",borderRadius:"5px",cursor:"pointer",marginRight:"10px"},children:"Sign In Anonymously (for testing)"}),et.jsx("p",{style:{marginTop:"15px",marginBottom:"10px"},children:"Or sign in with Email:"}),et.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:_=>a(_.target.value),style:{padding:"8px",marginRight:"5px",borderRadius:"5px",border:"1px solid #555",backgroundColor:"#444",color:"white"}}),et.jsx("input",{type:"password",placeholder:"Password",value:s,onChange:_=>o(_.target.value),style:{padding:"8px",marginRight:"5px",borderRadius:"5px",border:"1px solid #555",backgroundColor:"#444",color:"white"}}),et.jsx("button",{onClick:m,style:{backgroundColor:"#007bff",color:"white",border:"none",padding:"8px 15px",borderRadius:"5px",cursor:"pointer"},children:"Sign In"}),c&&et.jsxs("p",{style:{color:"#dc3545",marginTop:"10px"},children:["Error: ",c]})]})})},ZL=()=>et.jsxs("div",{style:{padding:"20px",color:"white",backgroundColor:"#333"},children:[et.jsx("h2",{children:"Welcome to the Encore Portal Home!"}),et.jsx("p",{children:"This is where your dashboard and other portal features will reside."})]}),eA=()=>et.jsxs("nav",{style:{display:"flex",justifyContent:"space-around",backgroundColor:"#222",padding:"15px 0",borderBottom:"1px solid #444"},children:[et.jsx(Ig,{to:"/",style:{color:"#007bff",textDecoration:"none",fontSize:"1.1em"},children:"Home"}),et.jsx(Ig,{to:"/video-room/internal-team-meeting-room",style:{color:"#007bff",textDecoration:"none",fontSize:"1.1em"},children:"Video Chat"})]}),tA=()=>{const{roomName:i}=uC();return et.jsx(YL,{roomName:i})};function rA(){const[i,e]=Ie.useState(!0);return Ie.useEffect(()=>{const n=setTimeout(()=>{e(!1)},2e3);return()=>clearTimeout(n)},[]),i?et.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"blue",color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"3em",zIndex:9999},children:"Loading application..."}):et.jsx(AC,{children:et.jsxs("div",{style:{backgroundColor:"#1a1a1a",minHeight:"100vh"},children:[et.jsx(eA,{}),et.jsx(XL,{})," ",et.jsxs(bC,{children:[et.jsx(vp,{path:"/",element:et.jsx(ZL,{})}),et.jsx(vp,{path:"/video-room/:roomName",element:et.jsx(tA,{})})]})]})})}Lb.createRoot(document.getElementById("root")).render(et.jsx(ik.StrictMode,{children:et.jsx(rA,{})}));
