# Netlify Configuration File

# ----------------------------------------------------
# 1. BUILD SETTINGS
# Netlify builds the app by running 'npm run build' in the root,
# and publishes the output from the 'dist' folder.
[build]
  command = "npm run build"
  publish = "dist" 
  
# CRITICAL FIX: Base directory should be empty as package.json is in the root.
  base = ""

# ----------------------------------------------------
# 2. ENVIRONMENT PINNING (Overrides Node v22 default)
# This forces Netlify to use a stable Long-Term Support version (v18).
[build.environment]
  NODE_VERSION = "18"

# ----------------------------------------------------
# 3. NETLIFY FUNCTIONS (for gemini-chat.js)
[functions]
  directory = "netlify/functions"
  node_bundler = "esbuild"

# ----------------------------------------------------
# 4. SECURITY HEADERS
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"